"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[179],{1633:(In,mt,re)=>{re.d(mt,{w:()=>B});const B={name:"Sagar Desai",title:"Software Developer",bio:"I'm a Full Stack Developer fluent in code, caffeine, and curiosity. From crafting backend logic in Spring Boot to dabbling in front-end sorcery with HTML and JavaScript, I build digital experiences with clean architecture and sharp logic. I\u2019m all about elegant solutions and systems that just work. Code is my canvas, and production is my playground.",description:["Writes Java like a poet writes verses \u2013 with structure and a sprinkle of flair.","Thinks debugging is just digital detective work (and I'm Sherlock).","Believes clean code is sexier than dark mode (well... almost).","Dreams in APIs and sometimes wakes up optimizing SQL queries.","Builds backends that behave and frontends that don\u2019t fight back."],image:"assets/images/profile.jpg",resumeLink:"https://drive.google.com/file/d/1uJ_eVJCb0x8ULr48f5aUo5t9pgQKz7Xh/view?usp=drive_link",links:{github:"https://github.com/SagarDesai10",linkedin:"www.linkedin.com/in/sagar-desai-5b720b1bb",leetcode:"https://leetcode.com/u/desai_sagar/",email:"desaisagar8090@gmail.com"}}},9167:(In,mt,re)=>{re.d(mt,{$:()=>B});const B={email:"desaisagar8090@gmail.com",location:"Ahmedabad, Gujarat, India",socialLinks:{github:"https://github.com/SagarDesai10",linkedin:"https://www.linkedin.com/in/sagar-desai-5b720b1bb",leetcode:"https://leetcode.com/u/desai_sagar/",codechef:"https://www.codechef.com/users/desai_sagar_45"}}},462:(In,mt,re)=>{var B=re(1481),oe=re(6773),Ce=re(6895),X=re(8256);function je(l,e){1&l&&(X.TgZ(0,"span",3),X.O4$(),X.TgZ(1,"svg",4),X._UZ(2,"circle",5)(3,"line",6)(4,"line",7)(5,"line",8)(6,"line",9)(7,"line",10)(8,"line",11)(9,"line",12)(10,"line",13),X.qZA()())}function Ht(l,e){1&l&&(X.TgZ(0,"span",14),X.O4$(),X.TgZ(1,"svg",4),X._UZ(2,"path",15),X.qZA()())}let Mt=(()=>{const e=class{constructor(n,r){this.renderer=n,this.platformId=r,this.isDarkMode=!0}ngOnInit(){if((0,Ce.NF)(this.platformId)){const n=localStorage.getItem("theme");if(n)this.isDarkMode="dark"===n;else{const r=window.matchMedia("(prefers-color-scheme: dark)").matches;this.isDarkMode=r}this.applyTheme()}}toggleTheme(){this.isDarkMode=!this.isDarkMode,this.applyTheme()}applyTheme(){this.isDarkMode?(this.renderer.addClass(document.documentElement,"dark-mode"),this.renderer.addClass(document.body,"dark-mode"),localStorage.setItem("theme","dark")):(this.renderer.removeClass(document.documentElement,"dark-mode"),this.renderer.removeClass(document.body,"dark-mode"),localStorage.setItem("theme","light")),document.querySelectorAll(".section").forEach(r=>{this.isDarkMode?this.renderer.addClass(r,"dark-mode"):this.renderer.removeClass(r,"dark-mode")})}};let l=e;return e.\u0275fac=function(r){return new(r||e)(X.Y36(X.Qsj),X.Y36(X.Lbi))},e.\u0275cmp=X.Xpm({type:e,selectors:[["app-dark-mode-toggle"]],standalone:!0,features:[X.jDz],decls:3,vars:2,consts:[["aria-label","Toggle Dark Mode",1,"theme-toggle",3,"click"],["class","icon sun",4,"ngIf"],["class","icon moon",4,"ngIf"],[1,"icon","sun"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","5"],["x1","12","y1","1","x2","12","y2","3"],["x1","12","y1","21","x2","12","y2","23"],["x1","4.22","y1","4.22","x2","5.64","y2","5.64"],["x1","18.36","y1","18.36","x2","19.78","y2","19.78"],["x1","1","y1","12","x2","3","y2","12"],["x1","21","y1","12","x2","23","y2","12"],["x1","4.22","y1","19.78","x2","5.64","y2","18.36"],["x1","18.36","y1","5.64","x2","19.78","y2","4.22"],[1,"icon","moon"],["d","M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"]],template:function(r,o){1&r&&(X.TgZ(0,"button",0),X.NdJ("click",function(){return o.toggleTheme()}),X.YNc(1,je,11,0,"span",1),X.YNc(2,Ht,3,0,"span",2),X.qZA()),2&r&&(X.xp6(1),X.Q6J("ngIf",o.isDarkMode),X.xp6(1),X.Q6J("ngIf",!o.isDarkMode))},dependencies:[Ce.ez,Ce.O5],styles:[".theme-toggle[_ngcontent-%COMP%]{background:transparent;border:none;padding:5px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;color:var(--text-primary)}.theme-toggle[_ngcontent-%COMP%]:hover{background-color:#0000000d;transform:rotate(15deg)}.theme-toggle[_ngcontent-%COMP%]:focus{outline:none}.icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;transition:all .3s ease;animation:_ngcontent-%COMP%_fadeIn .3s ease}.icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:var(--text-primary)}.sun[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:gold}.moon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:#8c96c5}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0)}}.dark-mode[_nghost-%COMP%]   .theme-toggle[_ngcontent-%COMP%]:hover, .dark-mode   [_nghost-%COMP%]   .theme-toggle[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}"]}),l})(),ln=(()=>{const e=class{constructor(){this.isScrolled=!1,this.isMobileMenuOpen=!1,this.logoClick=new X.vpe}ngOnInit(){this.checkScroll()}checkScroll(){this.isScrolled=window.scrollY>50}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMenu(){this.isMobileMenuOpen=!1}onLogoClick(){this.logoClick.emit()}};let l=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=X.Xpm({type:e,selectors:[["app-header"]],hostBindings:function(r,o){1&r&&X.NdJ("scroll",function(){return o.checkScroll()},!1,X.Jf7)},outputs:{logoClick:"logoClick"},standalone:!0,features:[X.jDz],decls:57,vars:4,consts:[[1,"header"],[1,"header-container"],[1,"logo",3,"click"],[1,"logo-name"],[1,"nav-menu"],["routerLink","/about","routerLinkActive","active"],["routerLink","/skills","routerLinkActive","active"],["routerLink","/projects","routerLinkActive","active"],["routerLink","/education","routerLinkActive","active"],["routerLink","/experience","routerLinkActive","active"],["routerLink","/contact","routerLinkActive","active"],[1,"header-right"],[1,"menu-toggle",3,"click"],[1,"mobile-menu"],[1,"close-menu",3,"click"],["routerLink","/about","routerLinkActive","active",3,"click"],["routerLink","/skills","routerLinkActive","active",3,"click"],["routerLink","/projects","routerLinkActive","active",3,"click"],["routerLink","/education","routerLinkActive","active",3,"click"],["routerLink","/experience","routerLinkActive","active",3,"click"],["routerLink","/contact","routerLinkActive","active",3,"click"]],template:function(r,o){1&r&&(X.TgZ(0,"header",0)(1,"div",1)(2,"div",2),X.NdJ("click",function(){return o.onLogoClick()}),X.TgZ(3,"span"),X._uU(4," <"),X.qZA(),X.TgZ(5,"span",3),X._uU(6," SagarDesai "),X.qZA(),X.TgZ(7,"span"),X._uU(8,"/>"),X.qZA()(),X.TgZ(9,"nav",4)(10,"ul")(11,"li")(12,"a",5),X._uU(13,"About"),X.qZA()(),X.TgZ(14,"li")(15,"a",6),X._uU(16,"Skills"),X.qZA()(),X.TgZ(17,"li")(18,"a",7),X._uU(19,"Projects"),X.qZA()(),X.TgZ(20,"li")(21,"a",8),X._uU(22,"Education"),X.qZA()(),X.TgZ(23,"li")(24,"a",9),X._uU(25,"Experience"),X.qZA()(),X.TgZ(26,"li")(27,"a",10),X._uU(28,"Contact"),X.qZA()()()(),X.TgZ(29,"div",11),X._UZ(30,"app-dark-mode-toggle"),X.TgZ(31,"button",12),X.NdJ("click",function(){return o.toggleMobileMenu()}),X._UZ(32,"span")(33,"span")(34,"span"),X.qZA()()(),X.TgZ(35,"div",13)(36,"span",14),X.NdJ("click",function(){return o.closeMenu()}),X._uU(37,"X"),X.qZA(),X.TgZ(38,"ul")(39,"li")(40,"a",15),X.NdJ("click",function(){return o.closeMenu()}),X._uU(41,"About"),X.qZA()(),X.TgZ(42,"li")(43,"a",16),X.NdJ("click",function(){return o.closeMenu()}),X._uU(44,"Skills"),X.qZA()(),X.TgZ(45,"li")(46,"a",17),X.NdJ("click",function(){return o.closeMenu()}),X._uU(47,"Projects"),X.qZA()(),X.TgZ(48,"li")(49,"a",18),X.NdJ("click",function(){return o.closeMenu()}),X._uU(50,"Education"),X.qZA()(),X.TgZ(51,"li")(52,"a",19),X.NdJ("click",function(){return o.closeMenu()}),X._uU(53,"Experience"),X.qZA()(),X.TgZ(54,"li")(55,"a",20),X.NdJ("click",function(){return o.closeMenu()}),X._uU(56,"Contact"),X.qZA()()()()()),2&r&&(X.ekj("scrolled",o.isScrolled),X.xp6(35),X.ekj("active",o.isMobileMenuOpen))},dependencies:[Ce.ez,oe.Bz,oe.rH,oe.Od,Mt],styles:['.header[_ngcontent-%COMP%]{position:fixed;width:100%;top:0;left:0;z-index:1000;transition:all .3s ease;padding:20px 0;background-color:transparent}.header.scrolled[_ngcontent-%COMP%]{background-color:var(--glass-bg);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);padding:12px 0;box-shadow:0 4px 20px var(--shadow-color)}.header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto;padding:0 20px}.logo[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:700;font-size:1.5rem;color:var(--accent-primary);cursor:pointer;transition:transform .3s ease}.logo[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.logo-name[_ngcontent-%COMP%]{font-family:Agustina Regular;font-weight:700;padding:0 10px}.nav-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;list-style:none;gap:30px}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--text-primary);text-decoration:none;font-weight:500;font-size:16px;transition:all .3s ease;padding:10px 0}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .nav-menu[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:var(--accent-primary)}.nav-menu[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:after{width:100%}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:0;height:2px;background-color:var(--accent-primary);transition:width .3s ease}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:after{width:100%}.header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.menu-toggle[_ngcontent-%COMP%]{display:none;flex-direction:column;justify-content:space-between;width:24px;height:18px;background:transparent;border:none;cursor:pointer;padding:0;z-index:10}.menu-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;width:100%;height:2px;background-color:var(--text-primary);transition:all .3s ease}.mobile-menu[_ngcontent-%COMP%]{position:fixed;top:0;right:-100%;width:250px;height:100vh;background-color:var(--bg-secondary);box-shadow:-5px 0 15px var(--shadow-color);padding:80px 20px 40px;transition:right .3s ease;z-index:999}.mobile-menu.active[_ngcontent-%COMP%]{right:0}.mobile-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;display:flex;flex-direction:column;gap:20px}.mobile-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--text-primary);text-decoration:none;font-size:18px;font-weight:500;transition:color .3s ease;display:block;padding:10px 0}.mobile-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .mobile-menu[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:var(--accent-primary)}@media screen and (max-width: 768px){.nav-menu[_ngcontent-%COMP%]{display:none}.menu-toggle[_ngcontent-%COMP%]{display:flex}.header-container[_ngcontent-%COMP%]{padding:0 15px}}.close-menu[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;cursor:pointer}']}),l})();var Yt=re(1633),ot=re(9167);let Je=(()=>{const e=class{constructor(n){this.router=n,this.aboutData=Yt.w,this.contactInfo=ot.$,this.currentYear=(new Date).getFullYear(),this.router.events.subscribe(r=>{r instanceof oe.m2&&window.scrollTo(0,0)})}navigateTo(n){this.router.navigateByUrl(n).then(()=>{window.scrollTo(0,0)})}};let l=e;return e.\u0275fac=function(r){return new(r||e)(X.Y36(oe.F0))},e.\u0275cmp=X.Xpm({type:e,selectors:[["app-footer"]],standalone:!0,features:[X.jDz],decls:52,vars:7,consts:[[1,"footer"],[1,"footer-container"],[1,"footer-content"],[1,"footer-info"],[1,"footer-links"],[2,"cursor","pointer",3,"click"],[1,"footer-social"],[1,"social-icons"],["target","_blank","aria-label","GitHub",3,"href"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"],["target","_blank","aria-label","LinkedIn",3,"href"],["d","M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"],["x","2","y","9","width","4","height","12"],["cx","4","cy","4","r","2"],["target","_blank","aria-label","Leetcode",3,"href"],["width","24","height","24","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["fill-rule","evenodd","clip-rule","evenodd","d","M16.102 17.93L14.188 16.01C13.95 15.775 13.94 15.385 14.175 15.15C14.412 14.912 14.802 14.902 15.04 15.137L16.962 17.046C17.198 17.283 17.207 17.673 16.97 17.91C16.732 18.145 16.34 18.155 16.102 17.93Z","stroke","currentColor","stroke-width","1.5"],["d","M8.796 8.905C8.796 8.905 10.75 10.023 12.244 10.776C13.738 11.53 15.382 12.15 15.382 12.15C15.382 12.15 13.586 13.219 12.098 13.923C10.61 14.628 8.796 15.344 8.796 15.344V8.904V8.905Z","stroke","currentColor","stroke-width","1.5"],["d","M3 5H21V19H3V5Z","stroke","currentColor","stroke-width","1.5"],["target","_blank","aria-label","CodeChef",3,"href"],["width","24","height","24","viewBox","0 0 512 512","fill","none","xmlns","http://www.w3.org/2000/svg"],["width","512","height","512","rx","15%","stroke","currentColor","fill","none"],["x","50%","y","50%","fill","currentColor","font-size","200","font-weight","bold","text-anchor","middle","dominant-baseline","middle","font-family","Arial, sans-serif"],[1,"footer-bottom"]],template:function(r,o){1&r&&(X.TgZ(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),X._uU(5),X.qZA(),X.TgZ(6,"p"),X._uU(7),X.qZA()(),X.TgZ(8,"div",4)(9,"h4"),X._uU(10,"Quick Links"),X.qZA(),X.TgZ(11,"ul")(12,"li")(13,"a",5),X.NdJ("click",function(){return o.navigateTo("/about")}),X._uU(14,"About"),X.qZA()(),X.TgZ(15,"li")(16,"a",5),X.NdJ("click",function(){return o.navigateTo("/skills")}),X._uU(17,"Skills"),X.qZA()(),X.TgZ(18,"li")(19,"a",5),X.NdJ("click",function(){return o.navigateTo("/projects")}),X._uU(20,"Projects"),X.qZA()(),X.TgZ(21,"li")(22,"a",5),X.NdJ("click",function(){return o.navigateTo("/education")}),X._uU(23,"Education"),X.qZA()(),X.TgZ(24,"li")(25,"a",5),X.NdJ("click",function(){return o.navigateTo("/contact")}),X._uU(26,"Contact"),X.qZA()()()(),X.TgZ(27,"div",6)(28,"h4"),X._uU(29,"Connect"),X.qZA(),X.TgZ(30,"div",7)(31,"a",8),X.O4$(),X.TgZ(32,"svg",9),X._UZ(33,"path",10),X.qZA()(),X.kcU(),X.TgZ(34,"a",11),X.O4$(),X.TgZ(35,"svg",9),X._UZ(36,"path",12)(37,"rect",13)(38,"circle",14),X.qZA()(),X.kcU(),X.TgZ(39,"a",15),X.O4$(),X.TgZ(40,"svg",16),X._UZ(41,"path",17)(42,"path",18)(43,"path",19),X.qZA()(),X.kcU(),X.TgZ(44,"a",20),X.O4$(),X.TgZ(45,"svg",21),X._UZ(46,"rect",22),X.TgZ(47,"text",23),X._uU(48,"CC"),X.qZA()()()()()(),X.kcU(),X.TgZ(49,"div",24)(50,"p"),X._uU(51),X.qZA()()()()),2&r&&(X.xp6(5),X.Oqu(o.aboutData.name),X.xp6(2),X.Oqu(o.aboutData.title),X.xp6(24),X.Q6J("href",o.contactInfo.socialLinks.github,X.LSH),X.xp6(3),X.Q6J("href",o.contactInfo.socialLinks.linkedin,X.LSH),X.xp6(5),X.Q6J("href",o.contactInfo.socialLinks.leetcode,X.LSH),X.xp6(5),X.Q6J("href",o.contactInfo.socialLinks.codechef,X.LSH),X.xp6(7),X.hij("\xa9 ",o.currentYear," Sagar Desai. All rights reserved."))},dependencies:[Ce.ez,oe.Bz],styles:[".footer[_ngcontent-%COMP%]{background-color:var(--bg-secondary);color:var(--text-primary);padding:50px 0 20px;margin-top:100px;position:relative;z-index:1}.footer-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px}.footer-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:30px;margin-bottom:40px}.footer-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;margin-bottom:10px;color:var(--accent-primary)}.footer-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:var(--text-secondary)}.footer-links[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;margin-bottom:15px;color:var(--accent-primary)}.footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.footer-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--text-secondary);text-decoration:none;transition:color .3s ease}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--accent-primary)}.footer-social[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;margin-bottom:15px;color:var(--accent-primary)}.social-icons[_ngcontent-%COMP%]{display:flex;gap:15px}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;background-color:rgba(var(--accent-primary-rgb),.1);color:var(--text-primary);transition:all .3s ease}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--accent-primary);color:#fff;transform:translateY(-3px)}.social-icons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:currentColor}.footer-bottom[_ngcontent-%COMP%]{text-align:center;padding-top:20px;border-top:1px solid var(--border-color)}.footer-bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--text-secondary)}@media screen and (max-width: 768px){.footer[_ngcontent-%COMP%]{padding:40px 0 20px;margin-top:60px}.footer-content[_ngcontent-%COMP%]{gap:20px}}"]}),l})();const un=0,en=1,kn=2,Pt=1,It=2,dt=3,Kt=0,gn=1,Ge=2,ht=0,ke=1,yt=2,Ut=3,Gn=4,jt=5,pi=100,hn=101,yr=102,Qr=103,wa=104,Vi=200,ve=201,Ae=202,Pe=203,Le=204,nt=205,Ke=206,At=207,Wn=208,ui=209,bt=210,mi=211,Li=212,Rs=213,wn=214,Gi=0,Ki=1,Dt=2,Mi=3,Ao=4,hs=5,jo=6,Ps=7,Oi=0,Xo=1,Ci=2,Qe=0,Rt=1,Si=2,bi=3,ur=4,lo=5,Qn=6,bc=7,es=301,wr=302,co=303,Er=304,Se=306,ae=1e3,he=1001,et=1002,Be=1003,Et=1004,gi=1005,Fn=1006,Cr=1007,le=1008,fe=1009,Fe=1010,St=1011,Vt=1012,rn=1013,ni=1014,Ni=1015,fs=1016,Ol=1017,Ls=1018,uo=1020,Nl=35902,sl=1021,ol=1022,jr=1023,Zs=1024,Do=1025,al=1026,Yo=1027,Fl=1028,ll=1029,$n=1030,Fi=1031,ho=1033,hr=33776,qo=33777,Ks=33778,Io=33779,ps=35840,Lt=35841,En=35842,wi=35843,rr=36196,Os=37492,$i=37496,Ro=37808,Ii=37809,Ea=37810,Ns=37811,fn=37812,Ca=37813,ts=37814,Ta=37815,Zi=37816,Ji=37817,Zo=37818,Po=37819,ms=37820,Ko=37821,cl=36492,_i=36494,mu=36495,Ul=36283,kl=36284,Aa=36285,Da=36286,Bd=3201,Qo=0,_u=1,Lo="",is="srgb",Ra="srgb-linear",yu="linear",ii="srgb",ea=7680,ks=512,Sf=513,Gd=514,Qi=515,Wd=516,Vl=517,_s=518,Tc=519,yi="300 es",Oo=2e3;class fo{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return void 0!==n&&void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){const n=this._listeners;if(void 0===n)return;const r=n[e];if(void 0!==r){const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}dispatchEvent(e){const t=this._listeners;if(void 0===t)return;const n=t[e.type];if(void 0!==n){e.target=this;const r=n.slice(0);for(let o=0,c=r.length;o<c;o++)r[o].call(this,e);e.target=null}}}const Ir=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],na=Math.PI/180,Xe=180/Math.PI;function vn(){const l=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Ir[255&l]+Ir[l>>8&255]+Ir[l>>16&255]+Ir[l>>24&255]+"-"+Ir[255&e]+Ir[e>>8&255]+"-"+Ir[e>>16&15|64]+Ir[e>>24&255]+"-"+Ir[63&t|128]+Ir[t>>8&255]+"-"+Ir[t>>16&255]+Ir[t>>24&255]+Ir[255&n]+Ir[n>>8&255]+Ir[n>>16&255]+Ir[n>>24&255]).toLowerCase()}function Cn(l,e,t){return Math.max(e,Math.min(t,l))}function Xr(l,e,t){return(1-t)*l+t*e}function Rr(l,e){switch(e.constructor){case Float32Array:return l;case Uint32Array:return l/4294967295;case Uint16Array:return l/65535;case Uint8Array:return l/255;case Int32Array:return Math.max(l/2147483647,-1);case Int16Array:return Math.max(l/32767,-1);case Int8Array:return Math.max(l/127,-1);default:throw new Error("Invalid component type.")}}function _n(l,e){switch(e.constructor){case Float32Array:return l;case Uint32Array:return Math.round(4294967295*l);case Uint16Array:return Math.round(65535*l);case Uint8Array:return Math.round(255*l);case Int32Array:return Math.round(2147483647*l);case Int16Array:return Math.round(32767*l);case Int8Array:return Math.round(127*l);default:throw new Error("Invalid component type.")}}class it{constructor(e=0,t=0){it.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Cn(this.x,e.x,t.x),this.y=Cn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Cn(this.x,e,t),this.y=Cn(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Cn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Cn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),o=this.x-e.x,c=this.y-e.y;return this.x=o*n-c*r+e.x,this.y=o*r+c*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Rn{constructor(e,t,n,r,o,c,d,f,p){Rn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,o,c,d,f,p)}set(e,t,n,r,o,c,d,f,p){const g=this.elements;return g[0]=e,g[1]=r,g[2]=d,g[3]=t,g[4]=o,g[5]=f,g[6]=n,g[7]=c,g[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,o=this.elements,c=n[0],d=n[3],f=n[6],p=n[1],g=n[4],y=n[7],M=n[2],S=n[5],C=n[8],D=r[0],A=r[3],T=r[6],U=r[1],N=r[4],O=r[7],q=r[2],Y=r[5],Z=r[8];return o[0]=c*D+d*U+f*q,o[3]=c*A+d*N+f*Y,o[6]=c*T+d*O+f*Z,o[1]=p*D+g*U+y*q,o[4]=p*A+g*N+y*Y,o[7]=p*T+g*O+y*Z,o[2]=M*D+S*U+C*q,o[5]=M*A+S*N+C*Y,o[8]=M*T+S*O+C*Z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],o=e[3],c=e[4],d=e[5],f=e[6],p=e[7],g=e[8];return t*c*g-t*d*p-n*o*g+n*d*f+r*o*p-r*c*f}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],o=e[3],c=e[4],d=e[5],f=e[6],p=e[7],g=e[8],y=g*c-d*p,M=d*f-g*o,S=p*o-c*f,C=t*y+n*M+r*S;if(0===C)return this.set(0,0,0,0,0,0,0,0,0);const D=1/C;return e[0]=y*D,e[1]=(r*p-g*n)*D,e[2]=(d*n-r*c)*D,e[3]=M*D,e[4]=(g*t-r*f)*D,e[5]=(r*o-d*t)*D,e[6]=S*D,e[7]=(n*f-p*t)*D,e[8]=(c*t-n*o)*D,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,o,c,d){const f=Math.cos(o),p=Math.sin(o);return this.set(n*f,n*p,-n*(f*c+p*d)+c+e,-r*p,r*f,-r*(-p*c+f*d)+d+t,0,0,1),this}scale(e,t){return this.premultiply(Lc.makeScale(e,t)),this}rotate(e){return this.premultiply(Lc.makeRotation(-e)),this}translate(e,t){return this.premultiply(Lc.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const Lc=new Rn;function fl(l){for(let e=l.length-1;e>=0;--e)if(l[e]>=65535)return!0;return!1}function Fo(l){return document.createElementNS("http://www.w3.org/1999/xhtml",l)}function jl(){const l=Fo("canvas");return l.style.display="block",l}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Oc={};function go(l){l in Oc||(Oc[l]=!0,console.warn(l))}const ia=(new Rn).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Ui=(new Rn).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function eh(){const l={enabled:!0,workingColorSpace:Ra,spaces:{},convert:function(r,o,c){return!1===this.enabled||o===c||!o||!c||(this.spaces[o].transfer===ii&&(r.r=k(r.r),r.g=k(r.g),r.b=k(r.b)),this.spaces[o].primaries!==this.spaces[c].primaries&&(r.applyMatrix3(this.spaces[o].toXYZ),r.applyMatrix3(this.spaces[c].fromXYZ)),this.spaces[c].transfer===ii&&(r.r=P(r.r),r.g=P(r.g),r.b=P(r.b))),r},fromWorkingColorSpace:function(r,o){return this.convert(r,this.workingColorSpace,o)},toWorkingColorSpace:function(r,o){return this.convert(r,o,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Lo?yu:this.spaces[r].transfer},getLuminanceCoefficients:function(r,o=this.workingColorSpace){return r.fromArray(this.spaces[o].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,o,c){return r.copy(this.spaces[o].toXYZ).multiply(this.spaces[c].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return l.define({[Ra]:{primaries:e,whitePoint:n,transfer:yu,toXYZ:ia,fromXYZ:Ui,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:is},outputColorSpaceConfig:{drawingBufferColorSpace:is}},[is]:{primaries:e,whitePoint:n,transfer:ii,toXYZ:ia,fromXYZ:Ui,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:is}}}),l}const I=eh();function k(l){return l<.04045?.0773993808*l:Math.pow(.9478672986*l+.0521327014,2.4)}function P(l){return l<.0031308?12.92*l:1.055*Math.pow(l,.41666)-.055}let G;class ie{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{void 0===G&&(G=Fo("canvas")),G.width=e.width,G.height=e.height;const r=G.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=G}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Fo("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),o=r.data;for(let c=0;c<o.length;c++)o[c]=255*k(o[c]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t[n]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*k(t[n]/255)):k(t[n]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Ee=0;class Ne{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Ee++}),this.uuid=vn(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let o;if(Array.isArray(r)){o=[];for(let c=0,d=r.length;c<d;c++)o.push(Gt(r[c].isDataTexture?r[c].image:r[c]))}else o=Gt(r);n.url=o}return t||(e.images[this.uuid]=n),n}}function Gt(l){return typeof HTMLImageElement<"u"&&l instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&l instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&l instanceof ImageBitmap?ie.getDataURL(l):l.data?{data:Array.from(l.data),width:l.width,height:l.height,type:l.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ri=0,jn=(()=>{class l extends fo{constructor(t=l.DEFAULT_IMAGE,n=l.DEFAULT_MAPPING,r=he,o=he,c=Fn,d=le,f=jr,p=fe,g=l.DEFAULT_ANISOTROPY,y=Lo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ri++}),this.uuid=vn(),this.name="",this.source=new Ne(t),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=c,this.minFilter=d,this.anisotropy=g,this.format=f,this.internalFormat=null,this.type=p,this.offset=new it(0,0),this.repeat=new it(1,1),this.center=new it(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=y,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const n=void 0===t||"string"==typeof t;if(!n&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ae:t.x=t.x-Math.floor(t.x);break;case he:t.x=t.x<0?0:1;break;case et:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case ae:t.y=t.y-Math.floor(t.y);break;case he:t.y=t.y<0?0:1;break;case et:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}return l.DEFAULT_IMAGE=null,l.DEFAULT_MAPPING=300,l.DEFAULT_ANISOTROPY=1,l})();class qt{constructor(e=0,t=0,n=0,r=1){qt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,o=this.w,c=e.elements;return this.x=c[0]*t+c[4]*n+c[8]*r+c[12]*o,this.y=c[1]*t+c[5]*n+c[9]*r+c[13]*o,this.z=c[2]*t+c[6]*n+c[10]*r+c[14]*o,this.w=c[3]*t+c[7]*n+c[11]*r+c[15]*o,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,o;const f=e.elements,p=f[0],g=f[4],y=f[8],M=f[1],S=f[5],C=f[9],D=f[2],A=f[6],T=f[10];if(Math.abs(g-M)<.01&&Math.abs(y-D)<.01&&Math.abs(C-A)<.01){if(Math.abs(g+M)<.1&&Math.abs(y+D)<.1&&Math.abs(C+A)<.1&&Math.abs(p+S+T-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const N=(p+1)/2,O=(S+1)/2,q=(T+1)/2,Y=(g+M)/4,Z=(y+D)/4,J=(C+A)/4;return N>O&&N>q?N<.01?(n=0,r=.707106781,o=.707106781):(n=Math.sqrt(N),r=Y/n,o=Z/n):O>q?O<.01?(n=.707106781,r=0,o=.707106781):(r=Math.sqrt(O),n=Y/r,o=J/r):q<.01?(n=.707106781,r=.707106781,o=0):(o=Math.sqrt(q),n=Z/o,r=J/o),this.set(n,r,o,t),this}let U=Math.sqrt((A-C)*(A-C)+(y-D)*(y-D)+(M-g)*(M-g));return Math.abs(U)<.001&&(U=1),this.x=(A-C)/U,this.y=(y-D)/U,this.z=(M-g)/U,this.w=Math.acos((p+S+T-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Cn(this.x,e.x,t.x),this.y=Cn(this.y,e.y,t.y),this.z=Cn(this.z,e.z,t.z),this.w=Cn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Cn(this.x,e,t),this.y=Cn(this.y,e,t),this.z=Cn(this.z,e,t),this.w=Cn(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Cn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Tn extends fo{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new qt(0,0,e,t),this.scissorTest=!1,this.viewport=new qt(0,0,e,t);const r={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Fn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const o=new jn(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);o.flipY=!1,o.generateMipmaps=n.generateMipmaps,o.internalFormat=n.internalFormat,this.textures=[];const c=n.count;for(let d=0;d<c;d++)this.textures[d]=o.clone(),this.textures[d].isRenderTargetTexture=!0,this.textures[d].renderTarget=this;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new Ne(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class si extends Tn{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class oi extends jn{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Be,this.minFilter=Be,this.wrapR=he,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class ys extends jn{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Be,this.minFilter=Be,this.wrapR=he,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class fr{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,o,c,d){let f=n[r+0],p=n[r+1],g=n[r+2],y=n[r+3];const M=o[c+0],S=o[c+1],C=o[c+2],D=o[c+3];if(0===d)return e[t+0]=f,e[t+1]=p,e[t+2]=g,void(e[t+3]=y);if(1===d)return e[t+0]=M,e[t+1]=S,e[t+2]=C,void(e[t+3]=D);if(y!==D||f!==M||p!==S||g!==C){let A=1-d;const T=f*M+p*S+g*C+y*D,U=T>=0?1:-1,N=1-T*T;if(N>Number.EPSILON){const q=Math.sqrt(N),Y=Math.atan2(q,T*U);A=Math.sin(A*Y)/q,d=Math.sin(d*Y)/q}const O=d*U;if(f=f*A+M*O,p=p*A+S*O,g=g*A+C*O,y=y*A+D*O,A===1-d){const q=1/Math.sqrt(f*f+p*p+g*g+y*y);f*=q,p*=q,g*=q,y*=q}}e[t]=f,e[t+1]=p,e[t+2]=g,e[t+3]=y}static multiplyQuaternionsFlat(e,t,n,r,o,c){const d=n[r],f=n[r+1],p=n[r+2],g=n[r+3],y=o[c],M=o[c+1],S=o[c+2],C=o[c+3];return e[t]=d*C+g*y+f*S-p*M,e[t+1]=f*C+g*M+p*y-d*S,e[t+2]=p*C+g*S+d*M-f*y,e[t+3]=g*C-d*y-f*M-p*S,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,o=e._z,c=e._order,d=Math.cos,f=Math.sin,p=d(n/2),g=d(r/2),y=d(o/2),M=f(n/2),S=f(r/2),C=f(o/2);switch(c){case"XYZ":this._x=M*g*y+p*S*C,this._y=p*S*y-M*g*C,this._z=p*g*C+M*S*y,this._w=p*g*y-M*S*C;break;case"YXZ":this._x=M*g*y+p*S*C,this._y=p*S*y-M*g*C,this._z=p*g*C-M*S*y,this._w=p*g*y+M*S*C;break;case"ZXY":this._x=M*g*y-p*S*C,this._y=p*S*y+M*g*C,this._z=p*g*C+M*S*y,this._w=p*g*y-M*S*C;break;case"ZYX":this._x=M*g*y-p*S*C,this._y=p*S*y+M*g*C,this._z=p*g*C-M*S*y,this._w=p*g*y+M*S*C;break;case"YZX":this._x=M*g*y+p*S*C,this._y=p*S*y+M*g*C,this._z=p*g*C-M*S*y,this._w=p*g*y-M*S*C;break;case"XZY":this._x=M*g*y-p*S*C,this._y=p*S*y-M*g*C,this._z=p*g*C+M*S*y,this._w=p*g*y+M*S*C;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+c)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],o=t[8],c=t[1],d=t[5],f=t[9],p=t[2],g=t[6],y=t[10],M=n+d+y;if(M>0){const S=.5/Math.sqrt(M+1);this._w=.25/S,this._x=(g-f)*S,this._y=(o-p)*S,this._z=(c-r)*S}else if(n>d&&n>y){const S=2*Math.sqrt(1+n-d-y);this._w=(g-f)/S,this._x=.25*S,this._y=(r+c)/S,this._z=(o+p)/S}else if(d>y){const S=2*Math.sqrt(1+d-n-y);this._w=(o-p)/S,this._x=(r+c)/S,this._y=.25*S,this._z=(f+g)/S}else{const S=2*Math.sqrt(1+y-n-d);this._w=(c-r)/S,this._x=(o+p)/S,this._y=(f+g)/S,this._z=.25*S}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Cn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,o=e._z,c=e._w,d=t._x,f=t._y,p=t._z,g=t._w;return this._x=n*g+c*d+r*p-o*f,this._y=r*g+c*f+o*d-n*p,this._z=o*g+c*p+n*f-r*d,this._w=c*g-n*d-r*f-o*p,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,o=this._z,c=this._w;let d=c*e._w+n*e._x+r*e._y+o*e._z;if(d<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,d=-d):this.copy(e),d>=1)return this._w=c,this._x=n,this._y=r,this._z=o,this;const f=1-d*d;if(f<=Number.EPSILON){const S=1-t;return this._w=S*c+t*this._w,this._x=S*n+t*this._x,this._y=S*r+t*this._y,this._z=S*o+t*this._z,this.normalize(),this}const p=Math.sqrt(f),g=Math.atan2(p,d),y=Math.sin((1-t)*g)/p,M=Math.sin(t*g)/p;return this._w=c*y+this._w*M,this._x=n*y+this._x*M,this._y=r*y+this._y*M,this._z=o*y+this._z*M,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),o=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ne{constructor(e=0,t=0,n=0){ne.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(sa.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(sa.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*n+o[6]*r,this.y=o[1]*t+o[4]*n+o[7]*r,this.z=o[2]*t+o[5]*n+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,o=e.elements,c=1/(o[3]*t+o[7]*n+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*n+o[8]*r+o[12])*c,this.y=(o[1]*t+o[5]*n+o[9]*r+o[13])*c,this.z=(o[2]*t+o[6]*n+o[10]*r+o[14])*c,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,o=e.x,c=e.y,d=e.z,f=e.w,p=2*(c*r-d*n),g=2*(d*t-o*r),y=2*(o*n-c*t);return this.x=t+f*p+c*y-d*g,this.y=n+f*g+d*p-o*y,this.z=r+f*y+o*g-c*p,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r,this.y=o[1]*t+o[5]*n+o[9]*r,this.z=o[2]*t+o[6]*n+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Cn(this.x,e.x,t.x),this.y=Cn(this.y,e.y,t.y),this.z=Cn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Cn(this.x,e,t),this.y=Cn(this.y,e,t),this.z=Cn(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Cn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,o=e.z,c=t.x,d=t.y,f=t.z;return this.x=r*f-o*d,this.y=o*c-n*f,this.z=n*d-r*c,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Uo.copy(this).projectOnVector(e),this.sub(Uo)}reflect(e){return this.sub(Uo.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Cn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Uo=new ne,sa=new fr;class ji{constructor(e=new ne(1/0,1/0,1/0),t=new ne(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Bs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Bs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Bs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const o=n.getAttribute("position");if(!0===t&&void 0!==o&&!0!==e.isInstancedMesh)for(let c=0,d=o.count;c<d;c++)!0===e.isMesh?e.getVertexPosition(c,Bs):Bs.fromBufferAttribute(o,c),Bs.applyMatrix4(e.matrixWorld),this.expandByPoint(Bs);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),zs.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),zs.copy(n.boundingBox)),zs.applyMatrix4(e.matrixWorld),this.union(zs)}const r=e.children;for(let o=0,c=r.length;o<c;o++)this.expandByObject(r[o],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Bs),Bs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(aa),th.subVectors(this.max,aa),oa.subVectors(e.a,aa),pl.subVectors(e.b,aa),ko.subVectors(e.c,aa),_o.subVectors(pl,oa),vs.subVectors(ko,pl),Bo.subVectors(oa,ko);let t=[0,-_o.z,_o.y,0,-vs.z,vs.y,0,-Bo.z,Bo.y,_o.z,0,-_o.x,vs.z,0,-vs.x,Bo.z,0,-Bo.x,-_o.y,_o.x,0,-vs.y,vs.x,0,-Bo.y,Bo.x,0];return!(!nh(t,oa,pl,ko,th)||(t=[1,0,0,0,1,0,0,0,1],!nh(t,oa,pl,ko,th)))&&(Nc.crossVectors(_o,vs),t=[Nc.x,Nc.y,Nc.z],nh(t,oa,pl,ko,th))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Bs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Bs).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Qs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Qs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Qs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Qs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Qs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Qs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Qs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Qs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Qs)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Qs=[new ne,new ne,new ne,new ne,new ne,new ne,new ne,new ne],Bs=new ne,zs=new ji,oa=new ne,pl=new ne,ko=new ne,_o=new ne,vs=new ne,Bo=new ne,aa=new ne,th=new ne,Nc=new ne,Oa=new ne;function nh(l,e,t,n,r){for(let o=0,c=l.length-3;o<=c;o+=3){Oa.fromArray(l,o);const d=r.x*Math.abs(Oa.x)+r.y*Math.abs(Oa.y)+r.z*Math.abs(Oa.z),f=e.dot(Oa),p=t.dot(Oa),g=n.dot(Oa);if(Math.max(-Math.max(f,p,g),Math.min(f,p,g))>d)return!1}return!0}const zo=new ji,Na=new ne,Xl=new ne;class zr{constructor(e=new ne,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):zo.setFromPoints(e).getCenter(n);let r=0;for(let o=0,c=e.length;o<c;o++)r=Math.max(r,n.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Na.subVectors(e,this.center);const t=Na.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=.5*(n-this.radius);this.center.addScaledVector(Na,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Xl.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Na.copy(e.center).add(Xl)),this.expandByPoint(Na.copy(e.center).sub(Xl))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const eo=new ne,Fc=new ne,Yl=new ne,Fa=new ne,Eu=new ne,Pr=new ne,Cu=new ne;class la{constructor(e=new ne,t=new ne(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,eo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=eo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(eo.copy(this.origin).addScaledVector(this.direction,t),eo.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Fc.copy(e).add(t).multiplyScalar(.5),Yl.copy(t).sub(e).normalize(),Fa.copy(this.origin).sub(Fc);const o=.5*e.distanceTo(t),c=-this.direction.dot(Yl),d=Fa.dot(this.direction),f=-Fa.dot(Yl),p=Fa.lengthSq(),g=Math.abs(1-c*c);let y,M,S,C;if(g>0)if(y=c*f-d,M=c*d-f,C=o*g,y>=0)if(M>=-C)if(M<=C){const D=1/g;y*=D,M*=D,S=y*(y+c*M+2*d)+M*(c*y+M+2*f)+p}else M=o,y=Math.max(0,-(c*M+d)),S=-y*y+M*(M+2*f)+p;else M=-o,y=Math.max(0,-(c*M+d)),S=-y*y+M*(M+2*f)+p;else M<=-C?(y=Math.max(0,-(-c*o+d)),M=y>0?-o:Math.min(Math.max(-o,-f),o),S=-y*y+M*(M+2*f)+p):M<=C?(y=0,M=Math.min(Math.max(-o,-f),o),S=M*(M+2*f)+p):(y=Math.max(0,-(c*o+d)),M=y>0?o:Math.min(Math.max(-o,-f),o),S=-y*y+M*(M+2*f)+p);else M=c>0?-o:o,y=Math.max(0,-(c*M+d)),S=-y*y+M*(M+2*f)+p;return n&&n.copy(this.origin).addScaledVector(this.direction,y),r&&r.copy(Fc).addScaledVector(Yl,M),S}intersectSphere(e,t){eo.subVectors(e.center,this.origin);const n=eo.dot(this.direction),r=eo.dot(eo)-n*n,o=e.radius*e.radius;if(r>o)return null;const c=Math.sqrt(o-r),d=n-c,f=n+c;return f<0?null:this.at(d<0?f:d,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,o,c,d,f;const p=1/this.direction.x,g=1/this.direction.y,y=1/this.direction.z,M=this.origin;return p>=0?(n=(e.min.x-M.x)*p,r=(e.max.x-M.x)*p):(n=(e.max.x-M.x)*p,r=(e.min.x-M.x)*p),g>=0?(o=(e.min.y-M.y)*g,c=(e.max.y-M.y)*g):(o=(e.max.y-M.y)*g,c=(e.min.y-M.y)*g),n>c||o>r||((o>n||isNaN(n))&&(n=o),(c<r||isNaN(r))&&(r=c),y>=0?(d=(e.min.z-M.z)*y,f=(e.max.z-M.z)*y):(d=(e.max.z-M.z)*y,f=(e.min.z-M.z)*y),n>f||d>r)||((d>n||n!=n)&&(n=d),(f<r||r!=r)&&(r=f),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return null!==this.intersectBox(e,eo)}intersectTriangle(e,t,n,r,o){Eu.subVectors(t,e),Pr.subVectors(n,e),Cu.crossVectors(Eu,Pr);let d,c=this.direction.dot(Cu);if(c>0){if(r)return null;d=1}else{if(!(c<0))return null;d=-1,c=-c}Fa.subVectors(this.origin,e);const f=d*this.direction.dot(Pr.crossVectors(Fa,Pr));if(f<0)return null;const p=d*this.direction.dot(Eu.cross(Fa));if(p<0||f+p>c)return null;const g=-d*Fa.dot(Cu);return g<0?null:this.at(g/c,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class yn{constructor(e,t,n,r,o,c,d,f,p,g,y,M,S,C,D,A){yn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,o,c,d,f,p,g,y,M,S,C,D,A)}set(e,t,n,r,o,c,d,f,p,g,y,M,S,C,D,A){const T=this.elements;return T[0]=e,T[4]=t,T[8]=n,T[12]=r,T[1]=o,T[5]=c,T[9]=d,T[13]=f,T[2]=p,T[6]=g,T[10]=y,T[14]=M,T[3]=S,T[7]=C,T[11]=D,T[15]=A,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new yn).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/ca.setFromMatrixColumn(e,0).length(),o=1/ca.setFromMatrixColumn(e,1).length(),c=1/ca.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=0,t[8]=n[8]*c,t[9]=n[9]*c,t[10]=n[10]*c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,o=e.z,c=Math.cos(n),d=Math.sin(n),f=Math.cos(r),p=Math.sin(r),g=Math.cos(o),y=Math.sin(o);if("XYZ"===e.order){const M=c*g,S=c*y,C=d*g,D=d*y;t[0]=f*g,t[4]=-f*y,t[8]=p,t[1]=S+C*p,t[5]=M-D*p,t[9]=-d*f,t[2]=D-M*p,t[6]=C+S*p,t[10]=c*f}else if("YXZ"===e.order){const M=f*g,S=f*y,C=p*g,D=p*y;t[0]=M+D*d,t[4]=C*d-S,t[8]=c*p,t[1]=c*y,t[5]=c*g,t[9]=-d,t[2]=S*d-C,t[6]=D+M*d,t[10]=c*f}else if("ZXY"===e.order){const M=f*g,S=f*y,C=p*g,D=p*y;t[0]=M-D*d,t[4]=-c*y,t[8]=C+S*d,t[1]=S+C*d,t[5]=c*g,t[9]=D-M*d,t[2]=-c*p,t[6]=d,t[10]=c*f}else if("ZYX"===e.order){const M=c*g,S=c*y,C=d*g,D=d*y;t[0]=f*g,t[4]=C*p-S,t[8]=M*p+D,t[1]=f*y,t[5]=D*p+M,t[9]=S*p-C,t[2]=-p,t[6]=d*f,t[10]=c*f}else if("YZX"===e.order){const M=c*f,S=c*p,C=d*f,D=d*p;t[0]=f*g,t[4]=D-M*y,t[8]=C*y+S,t[1]=y,t[5]=c*g,t[9]=-d*g,t[2]=-p*g,t[6]=S*y+C,t[10]=M-D*y}else if("XZY"===e.order){const M=c*f,S=c*p,C=d*f,D=d*p;t[0]=f*g,t[4]=-y,t[8]=p*g,t[1]=M*y+D,t[5]=c*g,t[9]=S*y-C,t[2]=C*y-S,t[6]=d*g,t[10]=D*y+M}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(J_,e,gm)}lookAt(e,t,n){const r=this.elements;return xs.subVectors(e,t),0===xs.lengthSq()&&(xs.z=1),xs.normalize(),ua.crossVectors(n,xs),0===ua.lengthSq()&&(1===Math.abs(n.z)?xs.x+=1e-4:xs.z+=1e-4,xs.normalize(),ua.crossVectors(n,xs)),ua.normalize(),yo.crossVectors(xs,ua),r[0]=ua.x,r[4]=yo.x,r[8]=xs.x,r[1]=ua.y,r[5]=yo.y,r[9]=xs.y,r[2]=ua.z,r[6]=yo.z,r[10]=xs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,o=this.elements,c=n[0],d=n[4],f=n[8],p=n[12],g=n[1],y=n[5],M=n[9],S=n[13],C=n[2],D=n[6],A=n[10],T=n[14],U=n[3],N=n[7],O=n[11],q=n[15],Y=r[0],Z=r[4],J=r[8],H=r[12],V=r[1],se=r[5],Me=r[9],xe=r[13],De=r[2],ze=r[6],Te=r[10],tt=r[14],Oe=r[3],Ct=r[7],kt=r[11],Zt=r[15];return o[0]=c*Y+d*V+f*De+p*Oe,o[4]=c*Z+d*se+f*ze+p*Ct,o[8]=c*J+d*Me+f*Te+p*kt,o[12]=c*H+d*xe+f*tt+p*Zt,o[1]=g*Y+y*V+M*De+S*Oe,o[5]=g*Z+y*se+M*ze+S*Ct,o[9]=g*J+y*Me+M*Te+S*kt,o[13]=g*H+y*xe+M*tt+S*Zt,o[2]=C*Y+D*V+A*De+T*Oe,o[6]=C*Z+D*se+A*ze+T*Ct,o[10]=C*J+D*Me+A*Te+T*kt,o[14]=C*H+D*xe+A*tt+T*Zt,o[3]=U*Y+N*V+O*De+q*Oe,o[7]=U*Z+N*se+O*ze+q*Ct,o[11]=U*J+N*Me+O*Te+q*kt,o[15]=U*H+N*xe+O*tt+q*Zt,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],o=e[12],c=e[1],d=e[5],f=e[9],p=e[13],g=e[2],y=e[6],M=e[10],S=e[14];return e[3]*(+o*f*y-r*p*y-o*d*M+n*p*M+r*d*S-n*f*S)+e[7]*(+t*f*S-t*p*M+o*c*M-r*c*S+r*p*g-o*f*g)+e[11]*(+t*p*y-t*d*S-o*c*y+n*c*S+o*d*g-n*p*g)+e[15]*(-r*d*g-t*f*y+t*d*M+r*c*y-n*c*M+n*f*g)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],o=e[3],c=e[4],d=e[5],f=e[6],p=e[7],g=e[8],y=e[9],M=e[10],S=e[11],C=e[12],D=e[13],A=e[14],T=e[15],U=y*A*p-D*M*p+D*f*S-d*A*S-y*f*T+d*M*T,N=C*M*p-g*A*p-C*f*S+c*A*S+g*f*T-c*M*T,O=g*D*p-C*y*p+C*d*S-c*D*S-g*d*T+c*y*T,q=C*y*f-g*D*f-C*d*M+c*D*M+g*d*A-c*y*A,Y=t*U+n*N+r*O+o*q;if(0===Y)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Z=1/Y;return e[0]=U*Z,e[1]=(D*M*o-y*A*o-D*r*S+n*A*S+y*r*T-n*M*T)*Z,e[2]=(d*A*o-D*f*o+D*r*p-n*A*p-d*r*T+n*f*T)*Z,e[3]=(y*f*o-d*M*o-y*r*p+n*M*p+d*r*S-n*f*S)*Z,e[4]=N*Z,e[5]=(g*A*o-C*M*o+C*r*S-t*A*S-g*r*T+t*M*T)*Z,e[6]=(C*f*o-c*A*o-C*r*p+t*A*p+c*r*T-t*f*T)*Z,e[7]=(c*M*o-g*f*o+g*r*p-t*M*p-c*r*S+t*f*S)*Z,e[8]=O*Z,e[9]=(C*y*o-g*D*o-C*n*S+t*D*S+g*n*T-t*y*T)*Z,e[10]=(c*D*o-C*d*o+C*n*p-t*D*p-c*n*T+t*d*T)*Z,e[11]=(g*d*o-c*y*o-g*n*p+t*y*p+c*n*S-t*d*S)*Z,e[12]=q*Z,e[13]=(g*D*r-C*y*r+C*n*M-t*D*M-g*n*A+t*y*A)*Z,e[14]=(C*d*r-c*D*r-C*n*f+t*D*f+c*n*A-t*d*A)*Z,e[15]=(c*y*r-g*d*r+g*n*f-t*y*f-c*n*M+t*d*M)*Z,this}scale(e){const t=this.elements,n=e.x,r=e.y,o=e.z;return t[0]*=n,t[4]*=r,t[8]*=o,t[1]*=n,t[5]*=r,t[9]*=o,t[2]*=n,t[6]*=r,t[10]*=o,t[3]*=n,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),o=1-n,c=e.x,d=e.y,f=e.z,p=o*c,g=o*d;return this.set(p*c+n,p*d-r*f,p*f+r*d,0,p*d+r*f,g*d+n,g*f-r*c,0,p*f-r*d,g*f+r*c,o*f*f+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,o,c){return this.set(1,n,o,0,e,1,c,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,o=t._x,c=t._y,d=t._z,f=t._w,p=o+o,g=c+c,y=d+d,M=o*p,S=o*g,C=o*y,D=c*g,A=c*y,T=d*y,U=f*p,N=f*g,O=f*y,q=n.x,Y=n.y,Z=n.z;return r[0]=(1-(D+T))*q,r[1]=(S+O)*q,r[2]=(C-N)*q,r[3]=0,r[4]=(S-O)*Y,r[5]=(1-(M+T))*Y,r[6]=(A+U)*Y,r[7]=0,r[8]=(C+N)*Z,r[9]=(A-U)*Z,r[10]=(1-(M+D))*Z,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let o=ca.set(r[0],r[1],r[2]).length();const c=ca.set(r[4],r[5],r[6]).length(),d=ca.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],Lr.copy(this);const p=1/o,g=1/c,y=1/d;return Lr.elements[0]*=p,Lr.elements[1]*=p,Lr.elements[2]*=p,Lr.elements[4]*=g,Lr.elements[5]*=g,Lr.elements[6]*=g,Lr.elements[8]*=y,Lr.elements[9]*=y,Lr.elements[10]*=y,t.setFromRotationMatrix(Lr),n.x=o,n.y=c,n.z=d,this}makePerspective(e,t,n,r,o,c,d=Oo){const f=this.elements,p=2*o/(t-e),g=2*o/(n-r),y=(t+e)/(t-e),M=(n+r)/(n-r);let S,C;if(d===Oo)S=-(c+o)/(c-o),C=-2*c*o/(c-o);else{if(2001!==d)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+d);S=-c/(c-o),C=-c*o/(c-o)}return f[0]=p,f[4]=0,f[8]=y,f[12]=0,f[1]=0,f[5]=g,f[9]=M,f[13]=0,f[2]=0,f[6]=0,f[10]=S,f[14]=C,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(e,t,n,r,o,c,d=Oo){const f=this.elements,p=1/(t-e),g=1/(n-r),y=1/(c-o),M=(t+e)*p,S=(n+r)*g;let C,D;if(d===Oo)C=(c+o)*y,D=-2*y;else{if(2001!==d)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+d);C=o*y,D=-1*y}return f[0]=2*p,f[4]=0,f[8]=0,f[12]=-M,f[1]=0,f[5]=2*g,f[9]=0,f[13]=-S,f[2]=0,f[6]=0,f[10]=D,f[14]=-C,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const ca=new ne,Lr=new yn,J_=new ne(0,0,0),gm=new ne(1,1,1),ua=new ne,yo=new ne,xs=new ne,rs=new yn,Tu=new fr;let Ms=(()=>{class l{constructor(t=0,n=0,r=0,o=l.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=n,this._z=r,this._order=o}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,r,o=this._order){return this._x=t,this._y=n,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n=this._order,r=!0){const o=t.elements,c=o[0],d=o[4],f=o[8],p=o[1],g=o[5],y=o[9],M=o[2],S=o[6],C=o[10];switch(n){case"XYZ":this._y=Math.asin(Cn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-y,C),this._z=Math.atan2(-d,c)):(this._x=Math.atan2(S,g),this._z=0);break;case"YXZ":this._x=Math.asin(-Cn(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(f,C),this._z=Math.atan2(p,g)):(this._y=Math.atan2(-M,c),this._z=0);break;case"ZXY":this._x=Math.asin(Cn(S,-1,1)),Math.abs(S)<.9999999?(this._y=Math.atan2(-M,C),this._z=Math.atan2(-d,g)):(this._y=0,this._z=Math.atan2(p,c));break;case"ZYX":this._y=Math.asin(-Cn(M,-1,1)),Math.abs(M)<.9999999?(this._x=Math.atan2(S,C),this._z=Math.atan2(p,c)):(this._x=0,this._z=Math.atan2(-d,g));break;case"YZX":this._z=Math.asin(Cn(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(-y,g),this._y=Math.atan2(-M,c)):(this._x=0,this._y=Math.atan2(f,C));break;case"XZY":this._z=Math.asin(-Cn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(S,g),this._y=Math.atan2(f,c)):(this._x=Math.atan2(-y,C),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,n,r){return rs.makeRotationFromQuaternion(t),this.setFromRotationMatrix(rs,n,r)}setFromVector3(t,n=this._order){return this.set(t.x,t.y,t.z,n)}reorder(t){return Tu.setFromEuler(this),this.setFromQuaternion(Tu,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return l.DEFAULT_ORDER="XYZ",l})();class Au{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let Du=0;const Ss=new ne,Hs=new fr,bs=new yn,Iu=new ne,ql=new ne,ml=new ne,_m=new fr,Ru=new ne(1,0,0),Ti=new ne(0,1,0),ym=new ne(0,0,1),vm={type:"added"},xm={type:"removed"},Uc={type:"childadded",child:null},Mm={type:"childremoved",child:null};let Vs=(()=>{class l extends fo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Du++}),this.uuid=vn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=l.DEFAULT_UP.clone();const t=new ne,n=new Ms,r=new fr,o=new ne(1,1,1);n._onChange(function c(){r.setFromEuler(n,!1)}),r._onChange(function d(){n.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new yn},normalMatrix:{value:new Rn}}),this.matrix=new yn,this.matrixWorld=new yn,this.matrixAutoUpdate=l.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=l.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Au,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,n){this.quaternion.setFromAxisAngle(t,n)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,n){return Hs.setFromAxisAngle(t,n),this.quaternion.multiply(Hs),this}rotateOnWorldAxis(t,n){return Hs.setFromAxisAngle(t,n),this.quaternion.premultiply(Hs),this}rotateX(t){return this.rotateOnAxis(Ru,t)}rotateY(t){return this.rotateOnAxis(Ti,t)}rotateZ(t){return this.rotateOnAxis(ym,t)}translateOnAxis(t,n){return Ss.copy(t).applyQuaternion(this.quaternion),this.position.add(Ss.multiplyScalar(n)),this}translateX(t){return this.translateOnAxis(Ru,t)}translateY(t){return this.translateOnAxis(Ti,t)}translateZ(t){return this.translateOnAxis(ym,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(bs.copy(this.matrixWorld).invert())}lookAt(t,n,r){t.isVector3?Iu.copy(t):Iu.set(t,n,r);const o=this.parent;this.updateWorldMatrix(!0,!1),ql.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?bs.lookAt(ql,Iu,this.up):bs.lookAt(Iu,ql,this.up),this.quaternion.setFromRotationMatrix(bs),o&&(bs.extractRotation(o.matrixWorld),Hs.setFromRotationMatrix(bs),this.quaternion.premultiply(Hs.invert()))}add(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(vm),Uc.child=t,this.dispatchEvent(Uc),Uc.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(xm),Mm.child=t,this.dispatchEvent(Mm),Mm.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),bs.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),bs.multiply(t.parent.matrixWorld)),t.applyMatrix4(bs),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(vm),Uc.child=t,this.dispatchEvent(Uc),Uc.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,n){if(this[t]===n)return this;for(let r=0,o=this.children.length;r<o;r++){const d=this.children[r].getObjectByProperty(t,n);if(void 0!==d)return d}}getObjectsByProperty(t,n,r=[]){this[t]===n&&r.push(this);const o=this.children;for(let c=0,d=o.length;c<d;c++)o[c].getObjectsByProperty(t,n,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ql,t,ml),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ql,_m,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return t.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(t){t(this);const n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].traverseVisible(t)}traverseAncestors(t){const n=this.parent;null!==n&&(t(n),n.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].updateMatrixWorld(t)}updateWorldMatrix(t,n){const r=this.parent;if(!0===t&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===n){const o=this.children;for(let c=0,d=o.length;c<d;c++)o[c].updateWorldMatrix(!1,!0)}}toJSON(t){const n=void 0===t||"string"==typeof t,r={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const o={};function c(f,p){return void 0===f[p.uuid]&&(f[p.uuid]=p.toJSON(t)),p.uuid}if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.visibility=this._visibility,o.active=this._active,o.bounds=this._bounds.map(f=>({boxInitialized:f.boxInitialized,boxMin:f.box.min.toArray(),boxMax:f.box.max.toArray(),sphereInitialized:f.sphereInitialized,sphereRadius:f.sphere.radius,sphereCenter:f.sphere.center.toArray()})),o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.geometryCount=this._geometryCount,o.matricesTexture=this._matricesTexture.toJSON(t),null!==this._colorsTexture&&(o.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(o.boundingSphere={center:o.boundingSphere.center.toArray(),radius:o.boundingSphere.radius}),null!==this.boundingBox&&(o.boundingBox={min:o.boundingBox.min.toArray(),max:o.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(o.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=c(t.geometries,this.geometry);const f=this.geometry.parameters;if(void 0!==f&&void 0!==f.shapes){const p=f.shapes;if(Array.isArray(p))for(let g=0,y=p.length;g<y;g++)c(t.shapes,p[g]);else c(t.shapes,p)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(c(t.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const f=[];for(let p=0,g=this.material.length;p<g;p++)f.push(c(t.materials,this.material[p]));o.material=f}else o.material=c(t.materials,this.material);if(this.children.length>0){o.children=[];for(let f=0;f<this.children.length;f++)o.children.push(this.children[f].toJSON(t).object)}if(this.animations.length>0){o.animations=[];for(let f=0;f<this.animations.length;f++)o.animations.push(c(t.animations,this.animations[f]))}if(n){const f=d(t.geometries),p=d(t.materials),g=d(t.textures),y=d(t.images),M=d(t.shapes),S=d(t.skeletons),C=d(t.animations),D=d(t.nodes);f.length>0&&(r.geometries=f),p.length>0&&(r.materials=p),g.length>0&&(r.textures=g),y.length>0&&(r.images=y),M.length>0&&(r.shapes=M),S.length>0&&(r.skeletons=S),C.length>0&&(r.animations=C),D.length>0&&(r.nodes=D)}return r.object=o,r;function d(f){const p=[];for(const g in f){const y=f[g];delete y.metadata,p.push(y)}return p}}clone(t){return(new this.constructor).copy(this,t)}copy(t,n=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===n)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return l.DEFAULT_UP=new ne(0,1,0),l.DEFAULT_MATRIX_AUTO_UPDATE=!0,l.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,l})();const da=new ne,Hr=new ne,Sm=new ne,ha=new ne,Xi=new ne,Ua=new ne,Zl=new ne,ih=new ne,ws=new ne,fa=new ne,Pu=new qt,Kl=new qt,ka=new qt;class Gs{constructor(e=new ne,t=new ne,n=new ne){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),da.subVectors(e,t),r.cross(da);const o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,n,r,o){da.subVectors(r,t),Hr.subVectors(n,t),Sm.subVectors(e,t);const c=da.dot(da),d=da.dot(Hr),f=da.dot(Sm),p=Hr.dot(Hr),g=Hr.dot(Sm),y=c*p-d*d;if(0===y)return o.set(0,0,0),null;const M=1/y,S=(p*f-d*g)*M,C=(c*g-d*f)*M;return o.set(1-S-C,C,S)}static containsPoint(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,ha)&&ha.x>=0&&ha.y>=0&&ha.x+ha.y<=1}static getInterpolation(e,t,n,r,o,c,d,f){return null===this.getBarycoord(e,t,n,r,ha)?(f.x=0,f.y=0,"z"in f&&(f.z=0),"w"in f&&(f.w=0),null):(f.setScalar(0),f.addScaledVector(o,ha.x),f.addScaledVector(c,ha.y),f.addScaledVector(d,ha.z),f)}static getInterpolatedAttribute(e,t,n,r,o,c){return Pu.setScalar(0),Kl.setScalar(0),ka.setScalar(0),Pu.fromBufferAttribute(e,t),Kl.fromBufferAttribute(e,n),ka.fromBufferAttribute(e,r),c.setScalar(0),c.addScaledVector(Pu,o.x),c.addScaledVector(Kl,o.y),c.addScaledVector(ka,o.z),c}static isFrontFacing(e,t,n,r){return da.subVectors(n,t),Hr.subVectors(e,t),da.cross(Hr).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return da.subVectors(this.c,this.b),Hr.subVectors(this.a,this.b),.5*da.cross(Hr).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Gs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Gs.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,o){return Gs.getInterpolation(e,this.a,this.b,this.c,t,n,r,o)}containsPoint(e){return Gs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Gs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,o=this.c;let c,d;Xi.subVectors(r,n),Ua.subVectors(o,n),ih.subVectors(e,n);const f=Xi.dot(ih),p=Ua.dot(ih);if(f<=0&&p<=0)return t.copy(n);ws.subVectors(e,r);const g=Xi.dot(ws),y=Ua.dot(ws);if(g>=0&&y<=g)return t.copy(r);const M=f*y-g*p;if(M<=0&&f>=0&&g<=0)return c=f/(f-g),t.copy(n).addScaledVector(Xi,c);fa.subVectors(e,o);const S=Xi.dot(fa),C=Ua.dot(fa);if(C>=0&&S<=C)return t.copy(o);const D=S*p-f*C;if(D<=0&&p>=0&&C<=0)return d=p/(p-C),t.copy(n).addScaledVector(Ua,d);const A=g*C-S*y;if(A<=0&&y-g>=0&&S-C>=0)return Zl.subVectors(o,r),d=(y-g)/(y-g+(S-C)),t.copy(r).addScaledVector(Zl,d);const T=1/(A+D+M);return c=D*T,d=M*T,t.copy(n).addScaledVector(Xi,c).addScaledVector(Ua,d)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Q_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},x={h:0,s:0,l:0},b={h:0,s:0,l:0};function _(l,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?l+6*(e-l)*t:t<.5?e:t<2/3?l+6*(e-l)*(2/3-t):l}class w{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const r=e;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=is){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,I.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=I.workingColorSpace){return this.r=e,this.g=t,this.b=n,I.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=I.workingColorSpace){if(e=function Gl(l,e){return(l%e+e)%e}(e,1),t=Cn(t,0,1),n=Cn(n,0,1),0===t)this.r=this.g=this.b=n;else{const o=n<=.5?n*(1+t):n+t-n*t,c=2*n-o;this.r=_(c,o,e+1/3),this.g=_(c,o,e),this.b=_(c,o,e-1/3)}return I.toWorkingColorSpace(this,r),this}setStyle(e,t=is){function n(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const d=r[2];switch(r[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return n(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return n(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return n(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=r[1],c=o.length;if(3===c)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(6===c)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=is){const n=Q_[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=k(e.r),this.g=k(e.g),this.b=k(e.b),this}copyLinearToSRGB(e){return this.r=P(e.r),this.g=P(e.g),this.b=P(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=is){return I.fromWorkingColorSpace(L.copy(this),e),65536*Math.round(Cn(255*L.r,0,255))+256*Math.round(Cn(255*L.g,0,255))+Math.round(Cn(255*L.b,0,255))}getHexString(e=is){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=I.workingColorSpace){I.fromWorkingColorSpace(L.copy(this),t);const n=L.r,r=L.g,o=L.b,c=Math.max(n,r,o),d=Math.min(n,r,o);let f,p;const g=(d+c)/2;if(d===c)f=0,p=0;else{const y=c-d;switch(p=g<=.5?y/(c+d):y/(2-c-d),c){case n:f=(r-o)/y+(r<o?6:0);break;case r:f=(o-n)/y+2;break;case o:f=(n-r)/y+4}f/=6}return e.h=f,e.s=p,e.l=g,e}getRGB(e,t=I.workingColorSpace){return I.fromWorkingColorSpace(L.copy(this),t),e.r=L.r,e.g=L.g,e.b=L.b,e}getStyle(e=is){I.fromWorkingColorSpace(L.copy(this),e);const t=L.r,n=L.g,r=L.b;return e!==is?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(x),this.setHSL(x.h+e,x.s+t,x.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(x),e.getHSL(b);const n=Xr(x.h,b.h,t),r=Xr(x.s,b.s,t),o=Xr(x.l,b.l,t);return this.setHSL(n,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,o=e.elements;return this.r=o[0]*t+o[3]*n+o[6]*r,this.g=o[1]*t+o[4]*n+o[7]*r,this.b=o[2]*t+o[5]*n+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const L=new w;w.NAMES=Q_;let z=0;class j extends fo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:z++}),this.uuid=vn(),this.name="",this.type="Material",this.blending=ke,this.side=Kt,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Le,this.blendDst=nt,this.blendEquation=pi,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new w(0,0,0),this.blendAlpha=0,this.depthFunc=Mi,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ea,this.stencilZFail=ea,this.stencilZPass=ea,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(o){const c=[];for(const d in o){const f=o[d];delete f.metadata,c.push(f)}return c}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==ke&&(n.blending=this.blending),this.side!==Kt&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==Le&&(n.blendSrc=this.blendSrc),this.blendDst!==nt&&(n.blendDst=this.blendDst),this.blendEquation!==pi&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Mi&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ea&&(n.stencilFail=this.stencilFail),this.stencilZFail!==ea&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==ea&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const o=r(e.textures),c=r(e.images);o.length>0&&(n.textures=o),c.length>0&&(n.images=c)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const r=t.length;n=new Array(r);for(let o=0;o!==r;++o)n[o]=t[o].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class de extends j{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new w(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ms,this.combine=Oi,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const vi=new ne,ss=new it;let pa=0;class Kn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:pa++}),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=35044,this.updateRanges=[],this.gpuType=Ni,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)ss.fromBufferAttribute(this,t),ss.applyMatrix3(e),this.setXY(t,ss.x,ss.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)vi.fromBufferAttribute(this,t),vi.applyMatrix3(e),this.setXYZ(t,vi.x,vi.y,vi.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)vi.fromBufferAttribute(this,t),vi.applyMatrix4(e),this.setXYZ(t,vi.x,vi.y,vi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)vi.fromBufferAttribute(this,t),vi.applyNormalMatrix(e),this.setXYZ(t,vi.x,vi.y,vi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)vi.fromBufferAttribute(this,t),vi.transformDirection(e),this.setXYZ(t,vi.x,vi.y,vi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Rr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=_n(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Rr(t,this.array)),t}setX(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Rr(t,this.array)),t}setY(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Rr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Rr(t,this.array)),t}setW(e,t){return this.normalized&&(t=_n(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),n=_n(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),n=_n(n,this.array),r=_n(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,o){return e*=this.itemSize,this.normalized&&(t=_n(t,this.array),n=_n(n,this.array),r=_n(r,this.array),o=_n(o,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}class Lu extends Kn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class wm extends Kn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class on extends Kn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Ou=0;const Es=new yn,Em=new Vs,rh=new ne,to=new ji,sh=new ji,os=new ne;class Xn extends fo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ou++}),this.uuid=vn(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(fl(e)?wm:Lu)(e,1):e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const o=(new Rn).getNormalMatrix(e);n.applyNormalMatrix(o),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Es.makeRotationFromQuaternion(e),this.applyMatrix4(Es),this}rotateX(e){return Es.makeRotationX(e),this.applyMatrix4(Es),this}rotateY(e){return Es.makeRotationY(e),this.applyMatrix4(Es),this}rotateZ(e){return Es.makeRotationZ(e),this.applyMatrix4(Es),this}translate(e,t,n){return Es.makeTranslation(e,t,n),this.applyMatrix4(Es),this}scale(e,t,n){return Es.makeScale(e,t,n),this.applyMatrix4(Es),this}lookAt(e){return Em.lookAt(e),Em.updateMatrix(),this.applyMatrix4(Em.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(rh).negate(),this.translate(rh.x,rh.y,rh.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const n=[];for(let r=0,o=e.length;r<o;r++){const c=e[r];n.push(c.x,c.y,c.z||0)}this.setAttribute("position",new on(n,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const o=e[r];t.setXYZ(r,o.x,o.y,o.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ji);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new ne(-1/0,-1/0,-1/0),new ne(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++)to.setFromBufferAttribute(t[n]),this.morphTargetsRelative?(os.addVectors(this.boundingBox.min,to.min),this.boundingBox.expandByPoint(os),os.addVectors(this.boundingBox.max,to.max),this.boundingBox.expandByPoint(os)):(this.boundingBox.expandByPoint(to.min),this.boundingBox.expandByPoint(to.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new zr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new ne,1/0);if(e){const n=this.boundingSphere.center;if(to.setFromBufferAttribute(e),t)for(let o=0,c=t.length;o<c;o++)sh.setFromBufferAttribute(t[o]),this.morphTargetsRelative?(os.addVectors(to.min,sh.min),to.expandByPoint(os),os.addVectors(to.max,sh.max),to.expandByPoint(os)):(to.expandByPoint(sh.min),to.expandByPoint(sh.max));to.getCenter(n);let r=0;for(let o=0,c=e.count;o<c;o++)os.fromBufferAttribute(e,o),r=Math.max(r,n.distanceToSquared(os));if(t)for(let o=0,c=t.length;o<c;o++){const d=t[o],f=this.morphTargetsRelative;for(let p=0,g=d.count;p<g;p++)os.fromBufferAttribute(d,p),f&&(rh.fromBufferAttribute(e,p),os.add(rh)),r=Math.max(r,n.distanceToSquared(os))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.position,r=t.normal,o=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Kn(new Float32Array(4*n.count),4));const c=this.getAttribute("tangent"),d=[],f=[];for(let J=0;J<n.count;J++)d[J]=new ne,f[J]=new ne;const p=new ne,g=new ne,y=new ne,M=new it,S=new it,C=new it,D=new ne,A=new ne;function T(J,H,V){p.fromBufferAttribute(n,J),g.fromBufferAttribute(n,H),y.fromBufferAttribute(n,V),M.fromBufferAttribute(o,J),S.fromBufferAttribute(o,H),C.fromBufferAttribute(o,V),g.sub(p),y.sub(p),S.sub(M),C.sub(M);const se=1/(S.x*C.y-C.x*S.y);isFinite(se)&&(D.copy(g).multiplyScalar(C.y).addScaledVector(y,-S.y).multiplyScalar(se),A.copy(y).multiplyScalar(S.x).addScaledVector(g,-C.x).multiplyScalar(se),d[J].add(D),d[H].add(D),d[V].add(D),f[J].add(A),f[H].add(A),f[V].add(A))}let U=this.groups;0===U.length&&(U=[{start:0,count:e.count}]);for(let J=0,H=U.length;J<H;++J){const V=U[J],se=V.start;for(let xe=se,De=se+V.count;xe<De;xe+=3)T(e.getX(xe+0),e.getX(xe+1),e.getX(xe+2))}const N=new ne,O=new ne,q=new ne,Y=new ne;function Z(J){q.fromBufferAttribute(r,J),Y.copy(q);const H=d[J];N.copy(H),N.sub(q.multiplyScalar(q.dot(H))).normalize(),O.crossVectors(Y,H);const se=O.dot(f[J])<0?-1:1;c.setXYZW(J,N.x,N.y,N.z,se)}for(let J=0,H=U.length;J<H;++J){const V=U[J],se=V.start;for(let xe=se,De=se+V.count;xe<De;xe+=3)Z(e.getX(xe+0)),Z(e.getX(xe+1)),Z(e.getX(xe+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Kn(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let M=0,S=n.count;M<S;M++)n.setXYZ(M,0,0,0);const r=new ne,o=new ne,c=new ne,d=new ne,f=new ne,p=new ne,g=new ne,y=new ne;if(e)for(let M=0,S=e.count;M<S;M+=3){const C=e.getX(M+0),D=e.getX(M+1),A=e.getX(M+2);r.fromBufferAttribute(t,C),o.fromBufferAttribute(t,D),c.fromBufferAttribute(t,A),g.subVectors(c,o),y.subVectors(r,o),g.cross(y),d.fromBufferAttribute(n,C),f.fromBufferAttribute(n,D),p.fromBufferAttribute(n,A),d.add(g),f.add(g),p.add(g),n.setXYZ(C,d.x,d.y,d.z),n.setXYZ(D,f.x,f.y,f.z),n.setXYZ(A,p.x,p.y,p.z)}else for(let M=0,S=t.count;M<S;M+=3)r.fromBufferAttribute(t,M+0),o.fromBufferAttribute(t,M+1),c.fromBufferAttribute(t,M+2),g.subVectors(c,o),y.subVectors(r,o),g.cross(y),n.setXYZ(M+0,g.x,g.y,g.z),n.setXYZ(M+1,g.x,g.y,g.z),n.setXYZ(M+2,g.x,g.y,g.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)os.fromBufferAttribute(e,t),os.normalize(),e.setXYZ(t,os.x,os.y,os.z)}toNonIndexed(){function e(d,f){const p=d.array,g=d.itemSize,y=d.normalized,M=new p.constructor(f.length*g);let S=0,C=0;for(let D=0,A=f.length;D<A;D++){S=d.isInterleavedBufferAttribute?f[D]*d.data.stride+d.offset:f[D]*g;for(let T=0;T<g;T++)M[C++]=p[S++]}return new Kn(M,g,y)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Xn,n=this.index.array,r=this.attributes;for(const d in r){const p=e(r[d],n);t.setAttribute(d,p)}const o=this.morphAttributes;for(const d in o){const f=[],p=o[d];for(let g=0,y=p.length;g<y;g++){const S=e(p[g],n);f.push(S)}t.morphAttributes[d]=f}t.morphTargetsRelative=this.morphTargetsRelative;const c=this.groups;for(let d=0,f=c.length;d<f;d++){const p=c[d];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const f=this.parameters;for(const p in f)void 0!==f[p]&&(e[p]=f[p]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const f in n)e.data.attributes[f]=n[f].toJSON(e.data);const r={};let o=!1;for(const f in this.morphAttributes){const p=this.morphAttributes[f],g=[];for(let y=0,M=p.length;y<M;y++)g.push(p[y].toJSON(e.data));g.length>0&&(r[f]=g,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const c=this.groups;c.length>0&&(e.data.groups=JSON.parse(JSON.stringify(c)));const d=this.boundingSphere;return null!==d&&(e.data.boundingSphere={center:d.center.toArray(),radius:d.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone());const r=e.attributes;for(const p in r)this.setAttribute(p,r[p].clone(t));const o=e.morphAttributes;for(const p in o){const g=[],y=o[p];for(let M=0,S=y.length;M<S;M++)g.push(y[M].clone(t));this.morphAttributes[p]=g}this.morphTargetsRelative=e.morphTargetsRelative;const c=e.groups;for(let p=0,g=c.length;p<g;p++){const y=c[p];this.addGroup(y.start,y.count,y.materialIndex)}const d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());const f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const ny=new yn,kc=new la,Bc=new zr,Cm=new ne,Ef=new ne,oh=new ne,Tm=new ne,Cf=new ne,Am=new ne,iy=new ne,Tf=new ne;class Zr extends Vs{constructor(e=new Xn,t=new de){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,c=r.length;o<c;o++){const d=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=o}}}}getVertexPosition(e,t){const n=this.geometry,o=n.morphAttributes.position,c=n.morphTargetsRelative;t.fromBufferAttribute(n.attributes.position,e);const d=this.morphTargetInfluences;if(o&&d){Am.set(0,0,0);for(let f=0,p=o.length;f<p;f++){const g=d[f];0!==g&&(Cf.fromBufferAttribute(o[f],e),Am.addScaledVector(c?Cf:Cf.sub(t),g))}t.add(Am)}return t}raycast(e,t){const n=this.geometry,o=this.matrixWorld;void 0!==this.material&&(null===n.boundingSphere&&n.computeBoundingSphere(),Bc.copy(n.boundingSphere),Bc.applyMatrix4(o),kc.copy(e.ray).recast(e.near),(!1!==Bc.containsPoint(kc.origin)||!(null===kc.intersectSphere(Bc,Cm)||kc.origin.distanceToSquared(Cm)>(e.far-e.near)**2))&&(ny.copy(o).invert(),kc.copy(e.ray).applyMatrix4(ny),(null===n.boundingBox||!1!==kc.intersectsBox(n.boundingBox))&&this._computeIntersections(e,t,kc)))}_computeIntersections(e,t,n){let r;const o=this.geometry,c=this.material,d=o.index,f=o.attributes.position,p=o.attributes.uv,g=o.attributes.uv1,y=o.attributes.normal,M=o.groups,S=o.drawRange;if(null!==d)if(Array.isArray(c))for(let C=0,D=M.length;C<D;C++){const A=M[C],T=c[A.materialIndex];for(let O=Math.max(A.start,S.start),q=Math.min(d.count,Math.min(A.start+A.count,S.start+S.count));O<q;O+=3)r=Dm(this,T,e,n,p,g,y,d.getX(O),d.getX(O+1),d.getX(O+2)),r&&(r.faceIndex=Math.floor(O/3),r.face.materialIndex=A.materialIndex,t.push(r))}else for(let A=Math.max(0,S.start),T=Math.min(d.count,S.start+S.count);A<T;A+=3)r=Dm(this,c,e,n,p,g,y,d.getX(A),d.getX(A+1),d.getX(A+2)),r&&(r.faceIndex=Math.floor(A/3),t.push(r));else if(void 0!==f)if(Array.isArray(c))for(let C=0,D=M.length;C<D;C++){const A=M[C],T=c[A.materialIndex];for(let O=Math.max(A.start,S.start),q=Math.min(f.count,Math.min(A.start+A.count,S.start+S.count));O<q;O+=3)r=Dm(this,T,e,n,p,g,y,O,O+1,O+2),r&&(r.faceIndex=Math.floor(O/3),r.face.materialIndex=A.materialIndex,t.push(r))}else for(let A=Math.max(0,S.start),T=Math.min(f.count,S.start+S.count);A<T;A+=3)r=Dm(this,c,e,n,p,g,y,A,A+1,A+2),r&&(r.faceIndex=Math.floor(A/3),t.push(r))}}function Dm(l,e,t,n,r,o,c,d,f,p){l.getVertexPosition(d,Ef),l.getVertexPosition(f,oh),l.getVertexPosition(p,Tm);const g=function pw(l,e,t,n,r,o,c,d){let f;if(f=e.side===gn?n.intersectTriangle(c,o,r,!0,d):n.intersectTriangle(r,o,c,e.side===Kt,d),null===f)return null;Tf.copy(d),Tf.applyMatrix4(l.matrixWorld);const p=t.ray.origin.distanceTo(Tf);return p<t.near||p>t.far?null:{distance:p,point:Tf.clone(),object:l}}(l,e,t,n,Ef,oh,Tm,iy);if(g){const y=new ne;Gs.getBarycoord(iy,Ef,oh,Tm,y),r&&(g.uv=Gs.getInterpolatedAttribute(r,d,f,p,y,new it)),o&&(g.uv1=Gs.getInterpolatedAttribute(o,d,f,p,y,new it)),c&&(g.normal=Gs.getInterpolatedAttribute(c,d,f,p,y,new ne),g.normal.dot(n.direction)>0&&g.normal.multiplyScalar(-1));const M={a:d,b:f,c:p,normal:new ne,materialIndex:0};Gs.getNormal(Ef,oh,Tm,M.normal),g.face=M,g.barycoord=y}return g}class gl extends Xn{constructor(e=1,t=1,n=1,r=1,o=1,c=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:o,depthSegments:c};const d=this;r=Math.floor(r),o=Math.floor(o),c=Math.floor(c);const f=[],p=[],g=[],y=[];let M=0,S=0;function C(D,A,T,U,N,O,q,Y,Z,J,H){const V=O/Z,se=q/J,Me=O/2,xe=q/2,De=Y/2,ze=Z+1,Te=J+1;let tt=0,Oe=0;const Ct=new ne;for(let kt=0;kt<Te;kt++){const Zt=kt*se-xe;for(let An=0;An<ze;An++)Ct[D]=(An*V-Me)*U,Ct[A]=Zt*N,Ct[T]=De,p.push(Ct.x,Ct.y,Ct.z),Ct[D]=0,Ct[A]=0,Ct[T]=Y>0?1:-1,g.push(Ct.x,Ct.y,Ct.z),y.push(An/Z),y.push(1-kt/J),tt+=1}for(let kt=0;kt<J;kt++)for(let Zt=0;Zt<Z;Zt++){const xi=M+Zt+ze*(kt+1),$e=M+(Zt+1)+ze*(kt+1),pt=M+(Zt+1)+ze*kt;f.push(M+Zt+ze*kt,xi,pt),f.push(xi,$e,pt),Oe+=6}d.addGroup(S,Oe,H),S+=Oe,M+=tt}C("z","y","x",-1,-1,n,t,e,c,o,0),C("z","y","x",1,-1,n,t,-e,c,o,1),C("x","z","y",1,1,e,n,t,r,c,2),C("x","z","y",1,-1,e,n,-t,r,c,3),C("x","y","z",1,-1,e,t,n,r,o,4),C("x","y","z",-1,-1,e,t,-n,r,o,5),this.setIndex(f),this.setAttribute("position",new on(p,3)),this.setAttribute("normal",new on(g,3)),this.setAttribute("uv",new on(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ah(l){const e={};for(const t in l){e[t]={};for(const n in l[t]){const r=l[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():e[t][n]=Array.isArray(r)?r.slice():r}}return e}function no(l){const e={};for(let t=0;t<l.length;t++){const n=ah(l[t]);for(const r in n)e[r]=n[r]}return e}function Rx(l){const e=l.getRenderTarget();return null===e?l.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:I.workingColorSpace}const gw={clone:ah,merge:no};class ma extends j{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ah(e.uniforms),this.uniformsGroups=function mw(l){const e=[];for(let t=0;t<l.length;t++)e.push(l[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const c=this.uniforms[r].value;t.uniforms[r]=c&&c.isTexture?{type:"t",value:c.toJSON(e).uuid}:c&&c.isColor?{type:"c",value:c.getHex()}:c&&c.isVector2?{type:"v2",value:c.toArray()}:c&&c.isVector3?{type:"v3",value:c.toArray()}:c&&c.isVector4?{type:"v4",value:c.toArray()}:c&&c.isMatrix3?{type:"m3",value:c.toArray()}:c&&c.isMatrix4?{type:"m4",value:c.toArray()}:{value:c}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Af extends Vs{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new yn,this.projectionMatrix=new yn,this.projectionMatrixInverse=new yn,this.coordinateSystem=Oo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const _l=new ne,Im=new it,ga=new it;class as extends Af{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Xe*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*na*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Xe*Math.atan(Math.tan(.5*na*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){_l.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(_l.x,_l.y).multiplyScalar(-e/_l.z),_l.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(_l.x,_l.y).multiplyScalar(-e/_l.z)}getViewSize(e,t){return this.getViewBounds(e,Im,ga),t.subVectors(ga,Im)}setViewOffset(e,t,n,r,o,c){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*na*this.fov)/this.zoom,n=2*t,r=this.aspect*n,o=-.5*r;const c=this.view;if(null!==this.view&&this.view.enabled){const f=c.fullWidth,p=c.fullHeight;o+=c.offsetX*r/f,t-=c.offsetY*n/p,r*=c.width/f,n*=c.height/p}const d=this.filmOffset;0!==d&&(o+=e*d/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class sy extends Vs{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new as(-90,1,e,t);r.layers=this.layers,this.add(r);const o=new as(-90,1,e,t);o.layers=this.layers,this.add(o);const c=new as(-90,1,e,t);c.layers=this.layers,this.add(c);const d=new as(-90,1,e,t);d.layers=this.layers,this.add(d);const f=new as(-90,1,e,t);f.layers=this.layers,this.add(f);const p=new as(-90,1,e,t);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,o,c,d,f]=t;for(const p of t)this.remove(p);if(e===Oo)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),c.up.set(0,0,1),c.lookAt(0,-1,0),d.up.set(0,1,0),d.lookAt(0,0,1),f.up.set(0,1,0),f.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),c.up.set(0,0,-1),c.lookAt(0,-1,0),d.up.set(0,-1,0),d.lookAt(0,0,1),f.up.set(0,-1,0),f.lookAt(0,0,-1)}for(const p of t)this.add(p),p.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,c,d,f,p,g]=this.children,y=e.getRenderTarget(),M=e.getActiveCubeFace(),S=e.getActiveMipmapLevel(),C=e.xr.enabled;e.xr.enabled=!1;const D=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,o),e.setRenderTarget(n,1,r),e.render(t,c),e.setRenderTarget(n,2,r),e.render(t,d),e.setRenderTarget(n,3,r),e.render(t,f),e.setRenderTarget(n,4,r),e.render(t,p),n.texture.generateMipmaps=D,e.setRenderTarget(n,5,r),e.render(t,g),e.setRenderTarget(y,M,S),e.xr.enabled=C,n.texture.needsPMREMUpdate=!0}}class Uu extends jn{constructor(e=[],t=es,n,r,o,c,d,f,p,g){super(e,t,n,r,o,c,d,f,p,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Lx extends si{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1};this.texture=new Uu([n,n,n,n,n,n],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Fn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new gl(5,5,5),o=new ma({name:"CubemapFromEquirect",uniforms:ah(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:gn,blending:ht});o.uniforms.tEquirect.value=t;const c=new Zr(r,o),d=t.minFilter;return t.minFilter===le&&(t.minFilter=Fn),new sy(1,10,this).update(e,c),t.minFilter=d,c.geometry.dispose(),c.material.dispose(),this}clear(e,t=!0,n=!0,r=!0){const o=e.getRenderTarget();for(let c=0;c<6;c++)e.setRenderTarget(this,c),e.clear(t,n,r);e.setRenderTarget(o)}}class lh extends Vs{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Ox={type:"move"};class Df{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new lh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new lh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ne,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ne),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new lh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ne,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ne),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,o=null,c=null;const d=this._targetRay,f=this._grip,p=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(p&&e.hand){c=!0;for(const D of e.hand.values()){const A=t.getJointPose(D,n),T=this._getHandJoint(p,D);null!==A&&(T.matrix.fromArray(A.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.matrixWorldNeedsUpdate=!0,T.jointRadius=A.radius),T.visible=null!==A}const M=p.joints["index-finger-tip"].position.distanceTo(p.joints["thumb-tip"].position),S=.02,C=.005;p.inputState.pinching&&M>S+C?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&M<=S-C&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==f&&e.gripSpace&&(o=t.getPose(e.gripSpace,n),null!==o&&(f.matrix.fromArray(o.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,o.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(o.linearVelocity)):f.hasLinearVelocity=!1,o.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(o.angularVelocity)):f.hasAngularVelocity=!1));null!==d&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==o&&(r=o),null!==r&&(d.matrix.fromArray(r.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,r.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(r.linearVelocity)):d.hasLinearVelocity=!1,r.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(r.angularVelocity)):d.hasAngularVelocity=!1,this.dispatchEvent(Ox)))}return null!==d&&(d.visible=null!==r),null!==f&&(f.visible=null!==o),null!==p&&(p.visible=null!==c),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new lh;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Ws extends Vs{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ms,this.environmentIntensity=1,this.environmentRotation=new Ms,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}const zm=new ne,_w=new ne,kf=new Rn;class Gc{constructor(e=new ne(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=zm.subVectors(n,t).cross(_w.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(zm),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:t.copy(e.start).addScaledVector(n,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||kf.getNormalMatrix(e),r=this.coplanarPoint(zm).applyMatrix4(e),o=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const nc=new zr,fh=new ne;class ph{constructor(e=new Gc,t=new Gc,n=new Gc,r=new Gc,o=new Gc,c=new Gc){this.planes=[e,t,n,r,o,c]}set(e,t,n,r,o,c){const d=this.planes;return d[0].copy(e),d[1].copy(t),d[2].copy(n),d[3].copy(r),d[4].copy(o),d[5].copy(c),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Oo){const n=this.planes,r=e.elements,o=r[0],c=r[1],d=r[2],f=r[3],p=r[4],g=r[5],y=r[6],M=r[7],S=r[8],C=r[9],D=r[10],A=r[11],T=r[12],U=r[13],N=r[14],O=r[15];if(n[0].setComponents(f-o,M-p,A-S,O-T).normalize(),n[1].setComponents(f+o,M+p,A+S,O+T).normalize(),n[2].setComponents(f+c,M+g,A+C,O+U).normalize(),n[3].setComponents(f-c,M-g,A-C,O-U).normalize(),n[4].setComponents(f-d,M-y,A-D,O-N).normalize(),t===Oo)n[5].setComponents(f+d,M+y,A+D,O+N).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(d,y,D,N).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),nc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),nc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(nc)}intersectsSprite(e){return nc.center.set(0,0,0),nc.radius=.7071067811865476,nc.applyMatrix4(e.matrixWorld),this.intersectsSphere(nc)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(fh.x=r.normal.x>0?e.max.x:e.min.x,fh.y=r.normal.y>0?e.max.y:e.min.y,fh.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(fh)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}class Zm extends j{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new w(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const yy=new yn,Km=new la,Gf=new zr,Wf=new ne;class vl extends Vs{constructor(e=new Xn,t=new Zm){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,o=e.params.Points.threshold,c=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Gf.copy(n.boundingSphere),Gf.applyMatrix4(r),Gf.radius+=o,!1===e.ray.intersectsSphere(Gf))return;yy.copy(r).invert(),Km.copy(e.ray).applyMatrix4(yy);const d=o/((this.scale.x+this.scale.y+this.scale.z)/3),f=d*d,p=n.index,y=n.attributes.position;if(null!==p)for(let C=Math.max(0,c.start),D=Math.min(p.count,c.start+c.count);C<D;C++){const A=p.getX(C);Wf.fromBufferAttribute(y,A),ju(Wf,A,f,r,e,t,this)}else for(let C=Math.max(0,c.start),D=Math.min(y.count,c.start+c.count);C<D;C++)Wf.fromBufferAttribute(y,C),ju(Wf,C,f,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,c=r.length;o<c;o++){const d=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=o}}}}}function ju(l,e,t,n,r,o,c){const d=Km.distanceSqToPoint(l);if(d<t){const f=new ne;Km.closestPointToPoint(l,f),f.applyMatrix4(n);const p=r.ray.origin.distanceTo(f);if(p<r.near||p>r.far)return;o.push({distance:p,distanceToRay:Math.sqrt(d),point:f,index:e,face:null,faceIndex:null,barycoord:null,object:c})}}class vy extends jn{constructor(e,t,n=ni,r,o,c,d=Be,f=Be,p,g=al){if(g!==al&&g!==Yo)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,r,o,c,d,f,g,n,p),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Ne(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class Ah extends Xn{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const o=e/2,c=t/2,d=Math.floor(n),f=Math.floor(r),p=d+1,g=f+1,y=e/d,M=t/f,S=[],C=[],D=[],A=[];for(let T=0;T<g;T++){const U=T*M-c;for(let N=0;N<p;N++)C.push(N*y-o,-U,0),D.push(0,0,1),A.push(N/d),A.push(1-T/f)}for(let T=0;T<f;T++)for(let U=0;U<d;U++){const O=U+p*(T+1),q=U+1+p*(T+1),Y=U+1+p*T;S.push(U+p*T,O,Y),S.push(O,q,Y)}this.setIndex(S),this.setAttribute("position",new on(C,3)),this.setAttribute("normal",new on(D,3)),this.setAttribute("uv",new on(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ah(e.width,e.height,e.widthSegments,e.heightSegments)}}class oc extends j{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new w(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new w(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Qo,this.normalScale=new it(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ms,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ky extends j{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class tM extends j{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function td(l,e){return l&&l.constructor!==e?"number"==typeof e.BYTES_PER_ELEMENT?new e(l):Array.prototype.slice.call(l):l}class rp{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],o=t[n-1];e:{t:{let c;n:{i:if(!(e<r)){for(let d=n+2;;){if(void 0===r){if(e<o)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===d)break;if(o=r,r=t[++n],e<r)break t}c=t.length;break n}if(e>=o)break e;{const d=t[1];e<d&&(n=2,o=d);for(let f=n-2;;){if(void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(n===f)break;if(r=o,o=t[--n-1],e>=o)break t}c=n,n=0}}for(;n<c;){const d=n+c>>>1;e<t[d]?c=d:n=d+1}if(r=t[n],o=t[n-1],void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,o,r)}return this.interpolate_(n,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,o=e*r;for(let c=0;c!==r;++c)t[c]=n[o+c];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class zy extends rp{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){const r=this.parameterPositions;let o=e-2,c=e+1,d=r[o],f=r[c];if(void 0===d)switch(this.getSettings_().endingStart){case 2401:o=e,d=2*t-n;break;case 2402:o=r.length-2,d=t+r[o]-r[o+1];break;default:o=e,d=n}if(void 0===f)switch(this.getSettings_().endingEnd){case 2401:c=e,f=2*n-t;break;case 2402:c=1,f=n+r[1]-r[0];break;default:c=e-1,f=t}const p=.5*(n-t),g=this.valueSize;this._weightPrev=p/(t-d),this._weightNext=p/(f-n),this._offsetPrev=o*g,this._offsetNext=c*g}interpolate_(e,t,n,r){const o=this.resultBuffer,c=this.sampleValues,d=this.valueSize,f=e*d,p=f-d,g=this._offsetPrev,y=this._offsetNext,M=this._weightPrev,S=this._weightNext,C=(n-t)/(r-t),D=C*C,A=D*C,T=-M*A+2*M*D-M*C,U=(1+M)*A+(-1.5-2*M)*D+(-.5+M)*C+1,N=(-1-S)*A+(1.5+S)*D+.5*C,O=S*A-S*D;for(let q=0;q!==d;++q)o[q]=T*c[g+q]+U*c[p+q]+N*c[f+q]+O*c[y+q];return o}}class Hy extends rp{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const o=this.resultBuffer,c=this.sampleValues,d=this.valueSize,f=e*d,p=f-d,g=(n-t)/(r-t),y=1-g;for(let M=0;M!==d;++M)o[M]=c[p+M]*y+c[f+M]*g;return o}}class rM extends rp{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class va{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=td(t,this.TimeBufferType),this.values=td(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:td(e.times,Array),values:td(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new rM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Hy(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new zy(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let o=0,c=r-1;for(;o!==r&&n[o]<e;)++o;for(;-1!==c&&n[c]>t;)--c;if(++c,0!==o||c!==r){o>=c&&(c=Math.max(c,1),o=c-1);const d=this.getValueSize();this.times=n.slice(o,c),this.values=this.values.slice(o*d,c*d)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,o=n.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let c=null;for(let d=0;d!==o;d++){const f=n[d];if("number"==typeof f&&isNaN(f)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,d,f),e=!1;break}if(null!==c&&c>f){console.error("THREE.KeyframeTrack: Out of order keys.",this,d,f,c),e=!1;break}c=f}if(void 0!==r&&function pg(l){return ArrayBuffer.isView(l)&&!(l instanceof DataView)}(r))for(let d=0,f=r.length;d!==f;++d){const p=r[d];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,d,p),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=2302===this.getInterpolation(),o=e.length-1;let c=1;for(let d=1;d<o;++d){let f=!1;const p=e[d];if(p!==e[d+1]&&(1!==d||p!==e[0]))if(r)f=!0;else{const y=d*n,M=y-n,S=y+n;for(let C=0;C!==n;++C){const D=t[y+C];if(D!==t[M+C]||D!==t[S+C]){f=!0;break}}}if(f){if(d!==c){e[c]=e[d];const y=d*n,M=c*n;for(let S=0;S!==n;++S)t[M+S]=t[y+S]}++c}}if(o>0){e[c]=e[o];for(let d=o*n,f=c*n,p=0;p!==n;++p)t[f+p]=t[d+p];++c}return c!==e.length?(this.times=e.slice(0,c),this.values=t.slice(0,c*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}va.prototype.ValueTypeName="",va.prototype.TimeBufferType=Float32Array,va.prototype.ValueBufferType=Float32Array,va.prototype.DefaultInterpolation=2301;class nd extends va{constructor(e,t,n){super(e,t,n)}}nd.prototype.ValueTypeName="bool",nd.prototype.ValueBufferType=Array,nd.prototype.DefaultInterpolation=2300,nd.prototype.InterpolantFactoryMethodLinear=void 0,nd.prototype.InterpolantFactoryMethodSmooth=void 0;(class _g extends va{constructor(e,t,n,r){super(e,t,n,r)}}).prototype.ValueTypeName="color";(class sp extends va{constructor(e,t,n,r){super(e,t,n,r)}}).prototype.ValueTypeName="number";class sM extends rp{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const o=this.resultBuffer,c=this.sampleValues,d=this.valueSize,f=(n-t)/(r-t);let p=e*d;for(let g=p+d;p!==g;p+=4)fr.slerpFlat(o,0,c,p-d,c,p,f);return o}}class op extends va{constructor(e,t,n,r){super(e,t,n,r)}InterpolantFactoryMethodLinear(e){return new sM(this.times,this.values,this.getValueSize(),e)}}op.prototype.ValueTypeName="quaternion",op.prototype.InterpolantFactoryMethodSmooth=void 0;class xn extends va{constructor(e,t,n){super(e,t,n)}}xn.prototype.ValueTypeName="string",xn.prototype.ValueBufferType=Array,xn.prototype.DefaultInterpolation=2300,xn.prototype.InterpolantFactoryMethodLinear=void 0,xn.prototype.InterpolantFactoryMethodSmooth=void 0;(class Lh extends va{constructor(e,t,n,r){super(e,t,n,r)}}).prototype.ValueTypeName="vector";class lM extends Error{constructor(e,t){super(e),this.response=t}}class $y extends Vs{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new w(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}const jy=new yn,dM=new ne,Xy=new ne;class Yy{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new it(512,512),this.map=null,this.mapPass=null,this.matrix=new yn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ph,this._frameExtents=new it(1,1),this._viewportCount=1,this._viewports=[new qt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;dM.setFromMatrixPosition(e.matrixWorld),t.position.copy(dM),Xy.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Xy),t.updateMatrixWorld(),jy.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jy),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(jy)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class cp extends Af{constructor(e=-1,t=1,n=1,r=-1,o=.1,c=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=o,this.far=c,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,o,c){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let o=n-e,c=n+e,d=r+t,f=r-t;if(null!==this.view&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=p*this.view.offsetX,c=o+p*this.view.width,d-=g*this.view.offsetY,f=d-g*this.view.height}this.projectionMatrix.makeOrthographic(o,c,d,f,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class pM extends Yy{constructor(){super(new cp(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class qy extends $y{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Vs.DEFAULT_UP),this.updateMatrix(),this.target=new Vs,this.shadow=new pM}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Zy extends $y{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class bg extends as{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class id{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=up(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=up();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function up(){return performance.now()}const Cg="\\[\\]\\.:\\/",SM=new RegExp("["+Cg+"]","g"),js="[^"+Cg+"]",bM="[^"+Cg.replace("\\.","")+"]",EM=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",js)+/(WCOD+)?/.source.replace("WCOD",bM)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",js)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",js)+"$"),CM=["material","materials","bones","map"];class TM{constructor(e,t,n){const r=n||Yi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=n.length;r!==o;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}let Yi=(()=>{class l{constructor(t,n,r){this.path=n,this.parsedPath=r||l.parseTrackName(n),this.node=l.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,n,r){return t&&t.isAnimationObjectGroup?new l.Composite(t,n,r):new l(t,n,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(SM,"")}static parseTrackName(t){const n=EM.exec(t);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==o&&-1!==o){const c=r.nodeName.substring(o+1);-1!==CM.indexOf(c)&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=c)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,n){if(void 0===n||""===n||"."===n||-1===n||n===t.name||n===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(n);if(void 0!==r)return r}if(t.children){const r=function(c){for(let d=0;d<c.length;d++){const f=c[d];if(f.name===n||f.uuid===n)return f;const p=r(f.children);if(p)return p}return null},o=r(t.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,n){t[n]=this.targetObject[this.propertyName]}_getValue_array(t,n){const r=this.resolvedProperty;for(let o=0,c=r.length;o!==c;++o)t[n++]=r[o]}_getValue_arrayElement(t,n){t[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,n){this.resolvedProperty.toArray(t,n)}_setValue_direct(t,n){this.targetObject[this.propertyName]=t[n]}_setValue_direct_setNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,n){const r=this.resolvedProperty;for(let o=0,c=r.length;o!==c;++o)r[o]=t[n++]}_setValue_array_setNeedsUpdate(t,n){const r=this.resolvedProperty;for(let o=0,c=r.length;o!==c;++o)r[o]=t[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,n){const r=this.resolvedProperty;for(let o=0,c=r.length;o!==c;++o)r[o]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,n){this.resolvedProperty[this.propertyIndex]=t[n]}_setValue_arrayElement_setNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,n){this.resolvedProperty.fromArray(t,n)}_setValue_fromArray_setNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,n){this.bind(),this.getValue(t,n)}_setValue_unbound(t,n){this.bind(),this.setValue(t,n)}bind(){let t=this.node;const n=this.parsedPath,r=n.objectName,o=n.propertyName;let c=n.propertyIndex;if(t||(t=l.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let g=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let y=0;y<t.length;y++)if(t[y].name===g){g=y;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==g){if(void 0===t[g])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[g]}}const d=t[o];if(void 0===d)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+o+" but it wasn't found.",t);let f=this.Versioning.None;this.targetObject=t,!0===t.isMaterial?f=this.Versioning.NeedsUpdate:!0===t.isObject3D&&(f=this.Versioning.MatrixWorldNeedsUpdate);let p=this.BindingType.Direct;if(void 0!==c){if("morphTargetInfluences"===o){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[c]&&(c=t.morphTargetDictionary[c])}p=this.BindingType.ArrayElement,this.resolvedProperty=d,this.propertyIndex=c}else void 0!==d.fromArray&&void 0!==d.toArray?(p=this.BindingType.HasFromToArray,this.resolvedProperty=d):Array.isArray(d)?(p=this.BindingType.EntireArray,this.resolvedProperty=d):this.propertyName=o;this.getValue=this.GetterByBindingType[p],this.setValue=this.SetterByBindingTypeAndVersioning[p][f]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return l.Composite=TM,l})();function Og(l,e,t,n){const r=function gv(l){switch(l){case fe:case Fe:return{byteLength:1,components:1};case Vt:case St:case fs:return{byteLength:2,components:1};case Ol:case Ls:return{byteLength:2,components:4};case ni:case rn:case Ni:return{byteLength:4,components:1};case Nl:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${l}.`)}(n);switch(t){case sl:case Zs:return l*e;case Do:return l*e*2;case Fl:case ll:return l*e/r.components*r.byteLength;case $n:case Fi:return l*e*2/r.components*r.byteLength;case ol:return l*e*3/r.components*r.byteLength;case jr:case ho:return l*e*4/r.components*r.byteLength;case hr:case qo:return Math.floor((l+3)/4)*Math.floor((e+3)/4)*8;case Ks:case Io:return Math.floor((l+3)/4)*Math.floor((e+3)/4)*16;case Lt:case wi:return Math.max(l,16)*Math.max(e,8)/4;case ps:case En:return Math.max(l,8)*Math.max(e,8)/2;case rr:case Os:return Math.floor((l+3)/4)*Math.floor((e+3)/4)*8;case $i:case Ro:return Math.floor((l+3)/4)*Math.floor((e+3)/4)*16;case Ii:return Math.floor((l+4)/5)*Math.floor((e+3)/4)*16;case Ea:return Math.floor((l+4)/5)*Math.floor((e+4)/5)*16;case Ns:return Math.floor((l+5)/6)*Math.floor((e+4)/5)*16;case fn:return Math.floor((l+5)/6)*Math.floor((e+5)/6)*16;case Ca:return Math.floor((l+7)/8)*Math.floor((e+4)/5)*16;case ts:return Math.floor((l+7)/8)*Math.floor((e+5)/6)*16;case Ta:return Math.floor((l+7)/8)*Math.floor((e+7)/8)*16;case Zi:return Math.floor((l+9)/10)*Math.floor((e+4)/5)*16;case Ji:return Math.floor((l+9)/10)*Math.floor((e+5)/6)*16;case Zo:return Math.floor((l+9)/10)*Math.floor((e+7)/8)*16;case Po:return Math.floor((l+9)/10)*Math.floor((e+9)/10)*16;case ms:return Math.floor((l+11)/12)*Math.floor((e+9)/10)*16;case Ko:return Math.floor((l+11)/12)*Math.floor((e+11)/12)*16;case cl:case _i:case mu:return Math.ceil(l/4)*Math.ceil(e/4)*16;case Ul:case kl:return Math.ceil(l/4)*Math.ceil(e/4)*8;case Aa:case Da:return Math.ceil(l/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function _v(l,e,t,n,r,o,c){try{var d=l[o](c),f=d.value}catch(p){return void t(p)}d.done?e(f):Promise.resolve(f).then(n,r)}function kM(l){return function(){var e=this,t=arguments;return new Promise(function(n,r){var o=l.apply(e,t);function c(f){_v(o,n,r,c,d,"next",f)}function d(f){_v(o,n,r,c,d,"throw",f)}c(void 0)})}}function Ng(){let l=null,e=!1,t=null,n=null;function r(o,c){t(o,c),n=l.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(n=l.requestAnimationFrame(r),e=!0)},stop:function(){l.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){l=o}}}function Xw(l){const e=new WeakMap;return{get:function r(d){return d.isInterleavedBufferAttribute&&(d=d.data),e.get(d)},remove:function o(d){d.isInterleavedBufferAttribute&&(d=d.data);const f=e.get(d);f&&(l.deleteBuffer(f.buffer),e.delete(d))},update:function c(d,f){if(d.isInterleavedBufferAttribute&&(d=d.data),d.isGLBufferAttribute){const g=e.get(d);return void((!g||g.version<d.version)&&e.set(d,{buffer:d.buffer,type:d.type,bytesPerElement:d.elementSize,version:d.version}))}const p=e.get(d);if(void 0===p)e.set(d,function t(d,f){const p=d.array,g=d.usage,y=p.byteLength,M=l.createBuffer();let S;if(l.bindBuffer(f,M),l.bufferData(f,p,g),d.onUploadCallback(),p instanceof Float32Array)S=l.FLOAT;else if(p instanceof Uint16Array)S=d.isFloat16BufferAttribute?l.HALF_FLOAT:l.UNSIGNED_SHORT;else if(p instanceof Int16Array)S=l.SHORT;else if(p instanceof Uint32Array)S=l.UNSIGNED_INT;else if(p instanceof Int32Array)S=l.INT;else if(p instanceof Int8Array)S=l.BYTE;else if(p instanceof Uint8Array)S=l.UNSIGNED_BYTE;else{if(!(p instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);S=l.UNSIGNED_BYTE}return{buffer:M,type:S,bytesPerElement:p.BYTES_PER_ELEMENT,version:d.version,size:y}}(d,f));else if(p.version<d.version){if(p.size!==d.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function n(d,f,p){const g=f.array,y=f.updateRanges;if(l.bindBuffer(p,d),0===y.length)l.bufferSubData(p,0,g);else{y.sort((S,C)=>S.start-C.start);let M=0;for(let S=1;S<y.length;S++){const C=y[M],D=y[S];D.start<=C.start+C.count+1?C.count=Math.max(C.count,D.start+D.count-C.start):(++M,y[M]=D)}y.length=M+1;for(let S=0,C=y.length;S<C;S++){const D=y[S];l.bufferSubData(p,D.start*g.BYTES_PER_ELEMENT,g,D.start,D.count)}f.clearUpdateRanges()}f.onUploadCallback()})(p.buffer,d,f),p.version=d.version}}}}Yi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Yi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Yi.prototype.GetterByBindingType=[Yi.prototype._getValue_direct,Yi.prototype._getValue_array,Yi.prototype._getValue_arrayElement,Yi.prototype._getValue_toArray],Yi.prototype.SetterByBindingTypeAndVersioning=[[Yi.prototype._setValue_direct,Yi.prototype._setValue_direct_setNeedsUpdate,Yi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Yi.prototype._setValue_array,Yi.prototype._setValue_array_setNeedsUpdate,Yi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Yi.prototype._setValue_arrayElement,Yi.prototype._setValue_arrayElement_setNeedsUpdate,Yi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Yi.prototype._setValue_fromArray,Yi.prototype._setValue_fromArray_setNeedsUpdate,Yi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"175"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="175");const Yn={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Ot={common:{diffuse:{value:new w(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Rn},alphaMap:{value:null},alphaMapTransform:{value:new Rn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Rn}},envmap:{envMap:{value:null},envMapRotation:{value:new Rn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Rn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Rn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Rn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Rn},normalScale:{value:new it(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Rn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Rn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Rn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Rn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new w(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new w(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Rn},alphaTest:{value:0},uvTransform:{value:new Rn}},sprite:{diffuse:{value:new w(16777215)},opacity:{value:1},center:{value:new it(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Rn},alphaMap:{value:null},alphaMapTransform:{value:new Rn},alphaTest:{value:0}}},qa={basic:{uniforms:no([Ot.common,Ot.specularmap,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.fog]),vertexShader:Yn.meshbasic_vert,fragmentShader:Yn.meshbasic_frag},lambert:{uniforms:no([Ot.common,Ot.specularmap,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.fog,Ot.lights,{emissive:{value:new w(0)}}]),vertexShader:Yn.meshlambert_vert,fragmentShader:Yn.meshlambert_frag},phong:{uniforms:no([Ot.common,Ot.specularmap,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.fog,Ot.lights,{emissive:{value:new w(0)},specular:{value:new w(1118481)},shininess:{value:30}}]),vertexShader:Yn.meshphong_vert,fragmentShader:Yn.meshphong_frag},standard:{uniforms:no([Ot.common,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.roughnessmap,Ot.metalnessmap,Ot.fog,Ot.lights,{emissive:{value:new w(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Yn.meshphysical_vert,fragmentShader:Yn.meshphysical_frag},toon:{uniforms:no([Ot.common,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.gradientmap,Ot.fog,Ot.lights,{emissive:{value:new w(0)}}]),vertexShader:Yn.meshtoon_vert,fragmentShader:Yn.meshtoon_frag},matcap:{uniforms:no([Ot.common,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.fog,{matcap:{value:null}}]),vertexShader:Yn.meshmatcap_vert,fragmentShader:Yn.meshmatcap_frag},points:{uniforms:no([Ot.points,Ot.fog]),vertexShader:Yn.points_vert,fragmentShader:Yn.points_frag},dashed:{uniforms:no([Ot.common,Ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Yn.linedashed_vert,fragmentShader:Yn.linedashed_frag},depth:{uniforms:no([Ot.common,Ot.displacementmap]),vertexShader:Yn.depth_vert,fragmentShader:Yn.depth_frag},normal:{uniforms:no([Ot.common,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,{opacity:{value:1}}]),vertexShader:Yn.meshnormal_vert,fragmentShader:Yn.meshnormal_frag},sprite:{uniforms:no([Ot.sprite,Ot.fog]),vertexShader:Yn.sprite_vert,fragmentShader:Yn.sprite_frag},background:{uniforms:{uvTransform:{value:new Rn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Yn.background_vert,fragmentShader:Yn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Rn}},vertexShader:Yn.backgroundCube_vert,fragmentShader:Yn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Yn.cube_vert,fragmentShader:Yn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Yn.equirect_vert,fragmentShader:Yn.equirect_frag},distanceRGBA:{uniforms:no([Ot.common,Ot.displacementmap,{referencePosition:{value:new ne},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Yn.distanceRGBA_vert,fragmentShader:Yn.distanceRGBA_frag},shadow:{uniforms:no([Ot.lights,Ot.fog,{color:{value:new w(0)},opacity:{value:1}}]),vertexShader:Yn.shadow_vert,fragmentShader:Yn.shadow_frag}};qa.physical={uniforms:no([qa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Rn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Rn},clearcoatNormalScale:{value:new it(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Rn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Rn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Rn},sheen:{value:0},sheenColor:{value:new w(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Rn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Rn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Rn},transmissionSamplerSize:{value:new it},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Rn},attenuationDistance:{value:0},attenuationColor:{value:new w(0)},specularColor:{value:new w(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Rn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Rn},anisotropyVector:{value:new it},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Rn}}]),vertexShader:Yn.meshphysical_vert,fragmentShader:Yn.meshphysical_frag};const bp={r:0,b:0,g:0},ru=new Ms,ES=new yn;function CS(l,e,t,n,r,o,c){const d=new w(0);let p,g,f=!0===o?0:1,y=null,M=0,S=null;function C(N){let O=!0===N.isScene?N.background:null;return O&&O.isTexture&&(O=(N.backgroundBlurriness>0?t:e).get(O)),O}function T(N,O){N.getRGB(bp,Rx(l)),n.buffers.color.setClear(bp.r,bp.g,bp.b,O,c)}return{getClearColor:function(){return d},setClearColor:function(N,O=1){d.set(N),f=O,T(d,f)},getClearAlpha:function(){return f},setClearAlpha:function(N){f=N,T(d,f)},render:function D(N){let O=!1;const q=C(N);null===q?T(d,f):q&&q.isColor&&(T(q,1),O=!0);const Y=l.xr.getEnvironmentBlendMode();"additive"===Y?n.buffers.color.setClear(0,0,0,1,c):"alpha-blend"===Y&&n.buffers.color.setClear(0,0,0,0,c),(l.autoClear||O)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),l.clear(l.autoClearColor,l.autoClearDepth,l.autoClearStencil))},addToRenderList:function A(N,O){const q=C(O);q&&(q.isCubeTexture||q.mapping===Se)?(void 0===g&&(g=new Zr(new gl(1,1,1),new ma({name:"BackgroundCubeMaterial",uniforms:ah(qa.backgroundCube.uniforms),vertexShader:qa.backgroundCube.vertexShader,fragmentShader:qa.backgroundCube.fragmentShader,side:gn,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(Y,Z,J){this.matrixWorld.copyPosition(J.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(g)),ru.copy(O.backgroundRotation),ru.x*=-1,ru.y*=-1,ru.z*=-1,q.isCubeTexture&&!1===q.isRenderTargetTexture&&(ru.y*=-1,ru.z*=-1),g.material.uniforms.envMap.value=q,g.material.uniforms.flipEnvMap.value=q.isCubeTexture&&!1===q.isRenderTargetTexture?-1:1,g.material.uniforms.backgroundBlurriness.value=O.backgroundBlurriness,g.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,g.material.uniforms.backgroundRotation.value.setFromMatrix4(ES.makeRotationFromEuler(ru)),g.material.toneMapped=I.getTransfer(q.colorSpace)!==ii,(y!==q||M!==q.version||S!==l.toneMapping)&&(g.material.needsUpdate=!0,y=q,M=q.version,S=l.toneMapping),g.layers.enableAll(),N.unshift(g,g.geometry,g.material,0,0,null)):q&&q.isTexture&&(void 0===p&&(p=new Zr(new Ah(2,2),new ma({name:"BackgroundMaterial",uniforms:ah(qa.background.uniforms),vertexShader:qa.background.vertexShader,fragmentShader:qa.background.fragmentShader,side:Kt,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(p)),p.material.uniforms.t2D.value=q,p.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,p.material.toneMapped=I.getTransfer(q.colorSpace)!==ii,!0===q.matrixAutoUpdate&&q.updateMatrix(),p.material.uniforms.uvTransform.value.copy(q.matrix),(y!==q||M!==q.version||S!==l.toneMapping)&&(p.material.needsUpdate=!0,y=q,M=q.version,S=l.toneMapping),p.layers.enableAll(),N.unshift(p,p.geometry,p.material,0,0,null))},dispose:function U(){void 0!==g&&(g.geometry.dispose(),g.material.dispose(),g=void 0),void 0!==p&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}}}function TS(l,e){const t=l.getParameter(l.MAX_VERTEX_ATTRIBS),n={},r=M(null);let o=r,c=!1;function p(V){return l.bindVertexArray(V)}function g(V){return l.deleteVertexArray(V)}function M(V){const se=[],Me=[],xe=[];for(let De=0;De<t;De++)se[De]=0,Me[De]=0,xe[De]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:se,enabledAttributes:Me,attributeDivisors:xe,object:V,attributes:{},index:null}}function D(){const V=o.newAttributes;for(let se=0,Me=V.length;se<Me;se++)V[se]=0}function A(V){T(V,0)}function T(V,se){const xe=o.enabledAttributes,De=o.attributeDivisors;o.newAttributes[V]=1,0===xe[V]&&(l.enableVertexAttribArray(V),xe[V]=1),De[V]!==se&&(l.vertexAttribDivisor(V,se),De[V]=se)}function U(){const V=o.newAttributes,se=o.enabledAttributes;for(let Me=0,xe=se.length;Me<xe;Me++)se[Me]!==V[Me]&&(l.disableVertexAttribArray(Me),se[Me]=0)}function N(V,se,Me,xe,De,ze,Te){!0===Te?l.vertexAttribIPointer(V,se,Me,De,ze):l.vertexAttribPointer(V,se,Me,xe,De,ze)}function J(){H(),c=!0,o!==r&&(o=r,p(o.object))}function H(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function d(V,se,Me,xe,De){let ze=!1;const Te=function y(V,se,Me){const xe=!0===Me.wireframe;let De=n[V.id];void 0===De&&(De={},n[V.id]=De);let ze=De[se.id];void 0===ze&&(ze={},De[se.id]=ze);let Te=ze[xe];return void 0===Te&&(Te=M(function f(){return l.createVertexArray()}()),ze[xe]=Te),Te}(xe,Me,se);o!==Te&&(o=Te,p(o.object)),ze=function S(V,se,Me,xe){const De=o.attributes,ze=se.attributes;let Te=0;const tt=Me.getAttributes();for(const Oe in tt)if(tt[Oe].location>=0){const kt=De[Oe];let Zt=ze[Oe];if(void 0===Zt&&("instanceMatrix"===Oe&&V.instanceMatrix&&(Zt=V.instanceMatrix),"instanceColor"===Oe&&V.instanceColor&&(Zt=V.instanceColor)),void 0===kt||kt.attribute!==Zt||Zt&&kt.data!==Zt.data)return!0;Te++}return o.attributesNum!==Te||o.index!==xe}(V,xe,Me,De),ze&&function C(V,se,Me,xe){const De={},ze=se.attributes;let Te=0;const tt=Me.getAttributes();for(const Oe in tt)if(tt[Oe].location>=0){let kt=ze[Oe];void 0===kt&&("instanceMatrix"===Oe&&V.instanceMatrix&&(kt=V.instanceMatrix),"instanceColor"===Oe&&V.instanceColor&&(kt=V.instanceColor));const Zt={};Zt.attribute=kt,kt&&kt.data&&(Zt.data=kt.data),De[Oe]=Zt,Te++}o.attributes=De,o.attributesNum=Te,o.index=xe}(V,xe,Me,De),null!==De&&e.update(De,l.ELEMENT_ARRAY_BUFFER),(ze||c)&&(c=!1,function O(V,se,Me,xe){D();const De=xe.attributes,ze=Me.getAttributes(),Te=se.defaultAttributeValues;for(const tt in ze){const Oe=ze[tt];if(Oe.location>=0){let Ct=De[tt];if(void 0===Ct&&("instanceMatrix"===tt&&V.instanceMatrix&&(Ct=V.instanceMatrix),"instanceColor"===tt&&V.instanceColor&&(Ct=V.instanceColor)),void 0!==Ct){const kt=Ct.normalized,Zt=Ct.itemSize,An=e.get(Ct);if(void 0===An)continue;const xi=An.buffer,$e=An.type,pt=An.bytesPerElement,cn=$e===l.INT||$e===l.UNSIGNED_INT||Ct.gpuType===rn;if(Ct.isInterleavedBufferAttribute){const Nt=Ct.data,Dn=Nt.stride,hi=Ct.offset;if(Nt.isInstancedInterleavedBuffer){for(let Mn=0;Mn<Oe.locationSize;Mn++)T(Oe.location+Mn,Nt.meshPerAttribute);!0!==V.isInstancedMesh&&void 0===xe._maxInstanceCount&&(xe._maxInstanceCount=Nt.meshPerAttribute*Nt.count)}else for(let Mn=0;Mn<Oe.locationSize;Mn++)A(Oe.location+Mn);l.bindBuffer(l.ARRAY_BUFFER,xi);for(let Mn=0;Mn<Oe.locationSize;Mn++)N(Oe.location+Mn,Zt/Oe.locationSize,$e,kt,Dn*pt,(hi+Zt/Oe.locationSize*Mn)*pt,cn)}else{if(Ct.isInstancedBufferAttribute){for(let Nt=0;Nt<Oe.locationSize;Nt++)T(Oe.location+Nt,Ct.meshPerAttribute);!0!==V.isInstancedMesh&&void 0===xe._maxInstanceCount&&(xe._maxInstanceCount=Ct.meshPerAttribute*Ct.count)}else for(let Nt=0;Nt<Oe.locationSize;Nt++)A(Oe.location+Nt);l.bindBuffer(l.ARRAY_BUFFER,xi);for(let Nt=0;Nt<Oe.locationSize;Nt++)N(Oe.location+Nt,Zt/Oe.locationSize,$e,kt,Zt*pt,Zt/Oe.locationSize*Nt*pt,cn)}}else if(void 0!==Te){const kt=Te[tt];if(void 0!==kt)switch(kt.length){case 2:l.vertexAttrib2fv(Oe.location,kt);break;case 3:l.vertexAttrib3fv(Oe.location,kt);break;case 4:l.vertexAttrib4fv(Oe.location,kt);break;default:l.vertexAttrib1fv(Oe.location,kt)}}}}U()}(V,se,Me,xe),null!==De&&l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,e.get(De).buffer))},reset:J,resetDefaultState:H,dispose:function q(){J();for(const V in n){const se=n[V];for(const Me in se){const xe=se[Me];for(const De in xe)g(xe[De].object),delete xe[De];delete se[Me]}delete n[V]}},releaseStatesOfGeometry:function Y(V){if(void 0===n[V.id])return;const se=n[V.id];for(const Me in se){const xe=se[Me];for(const De in xe)g(xe[De].object),delete xe[De];delete se[Me]}delete n[V.id]},releaseStatesOfProgram:function Z(V){for(const se in n){const Me=n[se];if(void 0===Me[V.id])continue;const xe=Me[V.id];for(const De in xe)g(xe[De].object),delete xe[De];delete Me[V.id]}},initAttributes:D,enableAttribute:A,disableUnusedAttributes:U}}function AS(l,e,t){let n;function c(p,g,y){0!==y&&(l.drawArraysInstanced(n,p,g,y),t.update(g,n,y))}this.setMode=function r(p){n=p},this.render=function o(p,g){l.drawArrays(n,p,g),t.update(g,n,1)},this.renderInstances=c,this.renderMultiDraw=function d(p,g,y){if(0===y)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,p,0,g,0,y);let S=0;for(let C=0;C<y;C++)S+=g[C];t.update(S,n,1)},this.renderMultiDrawInstances=function f(p,g,y,M){if(0===y)return;const S=e.get("WEBGL_multi_draw");if(null===S)for(let C=0;C<p.length;C++)c(p[C],g[C],M[C]);else{S.multiDrawArraysInstancedWEBGL(n,p,0,g,0,M,0,y);let C=0;for(let D=0;D<y;D++)C+=g[D]*M[D];t.update(C,n,1)}}}function DS(l,e,t,n){let r;function f(Z){if("highp"===Z){if(l.getShaderPrecisionFormat(l.VERTEX_SHADER,l.HIGH_FLOAT).precision>0&&l.getShaderPrecisionFormat(l.FRAGMENT_SHADER,l.HIGH_FLOAT).precision>0)return"highp";Z="mediump"}return"mediump"===Z&&l.getShaderPrecisionFormat(l.VERTEX_SHADER,l.MEDIUM_FLOAT).precision>0&&l.getShaderPrecisionFormat(l.FRAGMENT_SHADER,l.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=void 0!==t.precision?t.precision:"highp";const g=f(p);g!==p&&(console.warn("THREE.WebGLRenderer:",p,"not supported, using",g,"instead."),p=g);const y=!0===t.logarithmicDepthBuffer,M=!0===t.reverseDepthBuffer&&e.has("EXT_clip_control"),S=l.getParameter(l.MAX_TEXTURE_IMAGE_UNITS),C=l.getParameter(l.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function o(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const Z=e.get("EXT_texture_filter_anisotropic");r=l.getParameter(Z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:f,textureFormatReadable:function c(Z){return!(Z!==jr&&n.convert(Z)!==l.getParameter(l.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function d(Z){const J=Z===fs&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(Z!==fe&&n.convert(Z)!==l.getParameter(l.IMPLEMENTATION_COLOR_READ_TYPE)&&Z!==Ni&&!J)},precision:p,logarithmicDepthBuffer:y,reverseDepthBuffer:M,maxTextures:S,maxVertexTextures:C,maxTextureSize:l.getParameter(l.MAX_TEXTURE_SIZE),maxCubemapSize:l.getParameter(l.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:l.getParameter(l.MAX_VERTEX_ATTRIBS),maxVertexUniforms:l.getParameter(l.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:l.getParameter(l.MAX_VARYING_VECTORS),maxFragmentUniforms:l.getParameter(l.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:C>0,maxSamples:l.getParameter(l.MAX_SAMPLES)}}function IS(l){const e=this;let t=null,n=0,r=!1,o=!1;const c=new Gc,d=new Rn,f={value:null,needsUpdate:!1};function g(y,M,S,C){const D=null!==y?y.length:0;let A=null;if(0!==D){if(A=f.value,!0!==C||null===A){const T=S+4*D,U=M.matrixWorldInverse;d.getNormalMatrix(U),(null===A||A.length<T)&&(A=new Float32Array(T));for(let N=0,O=S;N!==D;++N,O+=4)c.copy(y[N]).applyMatrix4(U,d),c.normal.toArray(A,O),A[O+3]=c.constant}f.value=A,f.needsUpdate=!0}return e.numPlanes=D,e.numIntersection=0,A}this.uniform=f,this.numPlanes=0,this.numIntersection=0,this.init=function(y,M){const S=0!==y.length||M||0!==n||r;return r=M,n=y.length,S},this.beginShadows=function(){o=!0,g(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(y,M){t=g(y,M,0)},this.setState=function(y,M,S){const C=y.clippingPlanes,D=y.clipIntersection,A=y.clipShadows,T=l.get(y);if(!r||null===C||0===C.length||o&&!A)o?g(null):function p(){f.value!==t&&(f.value=t,f.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}();else{const U=o?0:n,N=4*U;let O=T.clippingState||null;f.value=O,O=g(C,M,N,S);for(let q=0;q!==N;++q)O[q]=t[q];T.clippingState=O,this.numIntersection=D?this.numPlanes:0,this.numPlanes+=U}}}function RS(l){let e=new WeakMap;function t(c,d){return d===co?c.mapping=es:d===Er&&(c.mapping=wr),c}function r(c){const d=c.target;d.removeEventListener("dispose",r);const f=e.get(d);void 0!==f&&(e.delete(d),f.dispose())}return{get:function n(c){if(c&&c.isTexture){const d=c.mapping;if(d===co||d===Er){if(e.has(c))return t(e.get(c).texture,c.mapping);{const f=c.image;if(f&&f.height>0){const p=new Lx(f.height);return p.fromEquirectangularTexture(l,c),e.set(c,p),c.addEventListener("dispose",r),t(p.texture,c.mapping)}return null}}}return c},dispose:function o(){e=new WeakMap}}}const Jg=[.125,.215,.35,.446,.526,.582],wp=new cp,Qg=new w;let Ep=null,Cp=0,Tp=0,Ap=!1;const hc=(1+Math.sqrt(5))/2,ou=1/hc,fc=[new ne(-hc,ou,0),new ne(hc,ou,0),new ne(-ou,0,hc),new ne(ou,0,hc),new ne(0,hc,-ou),new ne(0,hc,ou),new ne(-1,1,-1),new ne(1,1,-1),new ne(-1,1,1),new ne(1,1,1)],PS=new ne;class s0{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100,o={}){const{size:c=256,position:d=PS}=o;Ep=this._renderer.getRenderTarget(),Cp=this._renderer.getActiveCubeFace(),Tp=this._renderer.getActiveMipmapLevel(),Ap=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(c);const f=this._allocateTargets();return f.depthBuffer=!0,this._sceneToCubeUV(e,n,r,f,d),t>0&&this._blur(f,0,0,t),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=t_(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=e_(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Ep,Cp,Tp),this._renderer.xr.enabled=Ap,e.scissorTest=!1,yd(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===es||e.mapping===wr?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),Ep=this._renderer.getRenderTarget(),Cp=this._renderer.getActiveCubeFace(),Tp=this._renderer.getActiveMipmapLevel(),Ap=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Fn,minFilter:Fn,generateMipmaps:!1,type:fs,format:jr,colorSpace:Ra,depthBuffer:!1},r=LS(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=LS(e,t,n);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function _d(l){const e=[],t=[],n=[];let r=l;const o=l-4+1+Jg.length;for(let c=0;c<o;c++){const d=Math.pow(2,r);t.push(d);let f=1/d;c>l-4?f=Jg[c-l+4-1]:0===c&&(f=0),n.push(f);const p=1/(d-2),g=-p,y=1+p,M=[g,g,y,g,y,y,g,g,y,y,g,y],S=6,C=6,D=3,A=2,T=1,U=new Float32Array(D*C*S),N=new Float32Array(A*C*S),O=new Float32Array(T*C*S);for(let Y=0;Y<S;Y++){const Z=Y%3*2/3-1,J=Y>2?0:-1;U.set([Z,J,0,Z+2/3,J,0,Z+2/3,J+1,0,Z,J,0,Z+2/3,J+1,0,Z,J+1,0],D*C*Y),N.set(M,A*C*Y),O.set([Y,Y,Y,Y,Y,Y],T*C*Y)}const q=new Xn;q.setAttribute("position",new Kn(U,D)),q.setAttribute("uv",new Kn(N,A)),q.setAttribute("faceIndex",new Kn(O,T)),e.push(q),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}(o)),this._blurMaterial=function dE(l,e,t){const n=new Float32Array(20),r=new ne(0,1,0);return new ma({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${l}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:ht,depthTest:!1,depthWrite:!1})}(o,e,t)}return r}_compileMaterial(e){const t=new Zr(this._lodPlanes[0],e);this._renderer.compile(t,wp)}_sceneToCubeUV(e,t,n,r,o){const f=new as(90,1,t,n),p=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],y=this._renderer,M=y.autoClear,S=y.toneMapping;y.getClearColor(Qg),y.toneMapping=Qe,y.autoClear=!1;const C=new de({name:"PMREM.Background",side:gn,depthWrite:!1,depthTest:!1}),D=new Zr(new gl,C);let A=!1;const T=e.background;T?T.isColor&&(C.color.copy(T),e.background=null,A=!0):(C.color.copy(Qg),A=!0);for(let U=0;U<6;U++){const N=U%3;0===N?(f.up.set(0,p[U],0),f.position.set(o.x,o.y,o.z),f.lookAt(o.x+g[U],o.y,o.z)):1===N?(f.up.set(0,0,p[U]),f.position.set(o.x,o.y,o.z),f.lookAt(o.x,o.y+g[U],o.z)):(f.up.set(0,p[U],0),f.position.set(o.x,o.y,o.z),f.lookAt(o.x,o.y,o.z+g[U]));const O=this._cubeSize;yd(r,N*O,U>2?O:0,O,O),y.setRenderTarget(r),A&&y.render(D,f),y.render(e,f)}D.geometry.dispose(),D.material.dispose(),y.toneMapping=S,y.autoClear=M,e.background=T}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===es||e.mapping===wr;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=t_()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=e_());const o=r?this._cubemapMaterial:this._equirectMaterial,c=new Zr(this._lodPlanes[0],o);o.uniforms.envMap.value=e;const f=this._cubeSize;yd(t,0,0,3*f,2*f),n.setRenderTarget(t),n.render(c,wp)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let o=1;o<r;o++){const c=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]);this._blur(e,o-1,o,c,fc[(r-o-1)%fc.length])}t.autoClear=n}_blur(e,t,n,r,o){const c=this._pingPongRenderTarget;this._halfBlur(e,c,t,n,r,"latitudinal",o),this._halfBlur(c,e,n,n,r,"longitudinal",o)}_halfBlur(e,t,n,r,o,c,d){const f=this._renderer,p=this._blurMaterial;"latitudinal"!==c&&"longitudinal"!==c&&console.error("blur direction must be either latitudinal or longitudinal!");const y=new Zr(this._lodPlanes[r],p),M=p.uniforms,S=this._sizeLods[n]-1,C=isFinite(o)?Math.PI/(2*S):2*Math.PI/39,D=o/C,A=isFinite(o)?1+Math.floor(3*D):20;A>20&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${A} samples when the maximum is set to 20`);const T=[];let U=0;for(let Z=0;Z<20;++Z){const J=Z/D,H=Math.exp(-J*J/2);T.push(H),0===Z?U+=H:Z<A&&(U+=2*H)}for(let Z=0;Z<T.length;Z++)T[Z]=T[Z]/U;M.envMap.value=e.texture,M.samples.value=A,M.weights.value=T,M.latitudinal.value="latitudinal"===c,d&&(M.poleAxis.value=d);const{_lodMax:N}=this;M.dTheta.value=C,M.mipInt.value=N-n;const O=this._sizeLods[r];yd(t,3*O*(r>N-4?r-N+4:0),4*(this._cubeSize-O),3*O,2*O),f.setRenderTarget(t),f.render(y,wp)}}function LS(l,e,t){const n=new si(l,e,t);return n.texture.mapping=Se,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function yd(l,e,t,n,r){l.viewport.set(e,t,n,r),l.scissor.set(e,t,n,r)}function e_(){return new ma({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:ht,depthTest:!1,depthWrite:!1})}function t_(){return new ma({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:ht,depthTest:!1,depthWrite:!1})}function mn(l){let e=new WeakMap,t=null;function o(d){const f=d.target;f.removeEventListener("dispose",o);const p=e.get(f);void 0!==p&&(e.delete(f),p.dispose())}return{get:function n(d){if(d&&d.isTexture){const f=d.mapping,p=f===co||f===Er,g=f===es||f===wr;if(p||g){let y=e.get(d);if(d.isRenderTargetTexture&&d.pmremVersion!==(void 0!==y?y.texture.pmremVersion:0))return null===t&&(t=new s0(l)),y=p?t.fromEquirectangular(d,y):t.fromCubemap(d,y),y.texture.pmremVersion=d.pmremVersion,e.set(d,y),y.texture;if(void 0!==y)return y.texture;{const S=d.image;return p&&S&&S.height>0||g&&S&&function r(d){let f=0;for(let g=0;g<6;g++)void 0!==d[g]&&f++;return 6===f}(S)?(null===t&&(t=new s0(l)),y=p?t.fromEquirectangular(d):t.fromCubemap(d),y.texture.pmremVersion=d.pmremVersion,e.set(d,y),d.addEventListener("dispose",o),y.texture):null}}}return d},dispose:function c(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function OS(l){const e={};function t(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=l.getExtension("WEBGL_depth_texture")||l.getExtension("MOZ_WEBGL_depth_texture")||l.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=l.getExtension("WEBGL_compressed_texture_s3tc")||l.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||l.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=l.getExtension("WEBGL_compressed_texture_pvrtc")||l.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=l.getExtension(n)}return e[n]=r,r}return{has:function(n){return null!==t(n)},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const r=t(n);return null===r&&go("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function NS(l,e,t,n){const r={},o=new WeakMap;function c(y){const M=y.target;null!==M.index&&e.remove(M.index);for(const C in M.attributes)e.remove(M.attributes[C]);M.removeEventListener("dispose",c),delete r[M.id];const S=o.get(M);S&&(e.remove(S),o.delete(M)),n.releaseStatesOfGeometry(M),!0===M.isInstancedBufferGeometry&&delete M._maxInstanceCount,t.memory.geometries--}function p(y){const M=[],S=y.index,C=y.attributes.position;let D=0;if(null!==S){const U=S.array;D=S.version;for(let N=0,O=U.length;N<O;N+=3){const q=U[N+0],Y=U[N+1],Z=U[N+2];M.push(q,Y,Y,Z,Z,q)}}else{if(void 0===C)return;D=C.version;for(let N=0,O=C.array.length/3-1;N<O;N+=3){const q=N+0,Y=N+1,Z=N+2;M.push(q,Y,Y,Z,Z,q)}}const A=new(fl(M)?wm:Lu)(M,1);A.version=D;const T=o.get(y);T&&e.remove(T),o.set(y,A)}return{get:function d(y,M){return!0===r[M.id]||(M.addEventListener("dispose",c),r[M.id]=!0,t.memory.geometries++),M},update:function f(y){const M=y.attributes;for(const S in M)e.update(M[S],l.ARRAY_BUFFER)},getWireframeAttribute:function g(y){const M=o.get(y);if(M){const S=y.index;null!==S&&M.version<S.version&&p(y)}else p(y);return o.get(y)}}}function FS(l,e,t){let n,o,c;function p(M,S,C){0!==C&&(l.drawElementsInstanced(n,S,o,M*c,C),t.update(S,n,C))}this.setMode=function r(M){n=M},this.setIndex=function d(M){o=M.type,c=M.bytesPerElement},this.render=function f(M,S){l.drawElements(n,S,o,M*c),t.update(S,n,1)},this.renderInstances=p,this.renderMultiDraw=function g(M,S,C){if(0===C)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,S,0,o,M,0,C);let A=0;for(let T=0;T<C;T++)A+=S[T];t.update(A,n,1)},this.renderMultiDrawInstances=function y(M,S,C,D){if(0===C)return;const A=e.get("WEBGL_multi_draw");if(null===A)for(let T=0;T<M.length;T++)p(M[T]/c,S[T],D[T]);else{A.multiDrawElementsInstancedWEBGL(n,S,0,o,M,0,D,0,C);let T=0;for(let U=0;U<C;U++)T+=S[U]*D[U];t.update(T,n,1)}}}function vd(l){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function n(o,c,d){switch(t.calls++,c){case l.TRIANGLES:t.triangles+=d*(o/3);break;case l.LINES:t.lines+=d*(o/2);break;case l.LINE_STRIP:t.lines+=d*(o-1);break;case l.LINE_LOOP:t.lines+=d*o;break;case l.POINTS:t.points+=d*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",c)}}}}function US(l,e,t){const n=new WeakMap,r=new qt;return{update:function o(c,d,f){const p=c.morphTargetInfluences,g=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,y=void 0!==g?g.length:0;let M=n.get(d);if(void 0===M||M.count!==y){let H=function(){Z.dispose(),n.delete(d),d.removeEventListener("dispose",H)};void 0!==M&&M.texture.dispose();const S=void 0!==d.morphAttributes.position,C=void 0!==d.morphAttributes.normal,D=void 0!==d.morphAttributes.color,A=d.morphAttributes.position||[],T=d.morphAttributes.normal||[],U=d.morphAttributes.color||[];let N=0;!0===S&&(N=1),!0===C&&(N=2),!0===D&&(N=3);let O=d.attributes.position.count*N,q=1;O>e.maxTextureSize&&(q=Math.ceil(O/e.maxTextureSize),O=e.maxTextureSize);const Y=new Float32Array(O*q*4*y),Z=new oi(Y,O,q,y);Z.type=Ni,Z.needsUpdate=!0;const J=4*N;for(let V=0;V<y;V++){const se=A[V],Me=T[V],xe=U[V],De=O*q*4*V;for(let ze=0;ze<se.count;ze++){const Te=ze*J;!0===S&&(r.fromBufferAttribute(se,ze),Y[De+Te+0]=r.x,Y[De+Te+1]=r.y,Y[De+Te+2]=r.z,Y[De+Te+3]=0),!0===C&&(r.fromBufferAttribute(Me,ze),Y[De+Te+4]=r.x,Y[De+Te+5]=r.y,Y[De+Te+6]=r.z,Y[De+Te+7]=0),!0===D&&(r.fromBufferAttribute(xe,ze),Y[De+Te+8]=r.x,Y[De+Te+9]=r.y,Y[De+Te+10]=r.z,Y[De+Te+11]=4===xe.itemSize?r.w:1)}}M={count:y,texture:Z,size:new it(O,q)},n.set(d,M),d.addEventListener("dispose",H)}if(!0===c.isInstancedMesh&&null!==c.morphTexture)f.getUniforms().setValue(l,"morphTexture",c.morphTexture,t);else{let S=0;for(let D=0;D<p.length;D++)S+=p[D];const C=d.morphTargetsRelative?1:1-S;f.getUniforms().setValue(l,"morphTargetBaseInfluence",C),f.getUniforms().setValue(l,"morphTargetInfluences",p)}f.getUniforms().setValue(l,"morphTargetsTexture",M.texture,t),f.getUniforms().setValue(l,"morphTargetsTextureSize",M.size)}}}function Dp(l,e,t,n){let r=new WeakMap;function d(f){const p=f.target;p.removeEventListener("dispose",d),t.remove(p.instanceMatrix),null!==p.instanceColor&&t.remove(p.instanceColor)}return{update:function o(f){const p=n.render.frame,y=e.get(f,f.geometry);if(r.get(y)!==p&&(e.update(y),r.set(y,p)),f.isInstancedMesh&&(!1===f.hasEventListener("dispose",d)&&f.addEventListener("dispose",d),r.get(f)!==p&&(t.update(f.instanceMatrix,l.ARRAY_BUFFER),null!==f.instanceColor&&t.update(f.instanceColor,l.ARRAY_BUFFER),r.set(f,p))),f.isSkinnedMesh){const M=f.skeleton;r.get(M)!==p&&(M.update(),r.set(M,p))}return y},dispose:function c(){r=new WeakMap}}}const Gh=new jn,ar=new vy(1,1),kS=new oi,n_=new ys,i_=new Uu,a0=[],r_=[],s_=new Float32Array(16),o_=new Float32Array(9),a_=new Float32Array(4);function xd(l,e,t){const n=l[0];if(n<=0||n>0)return l;const r=e*t;let o=a0[r];if(void 0===o&&(o=new Float32Array(r),a0[r]=o),0!==e){n.toArray(o,0);for(let c=1,d=0;c!==e;++c)d+=t,l[c].toArray(o,d)}return o}function Wr(l,e){if(l.length!==e.length)return!1;for(let t=0,n=l.length;t<n;t++)if(l[t]!==e[t])return!1;return!0}function $r(l,e){for(let t=0,n=e.length;t<n;t++)l[t]=e[t]}function pc(l,e){let t=r_[e];void 0===t&&(t=new Int32Array(e),r_[e]=t);for(let n=0;n!==e;++n)t[n]=l.allocateTextureUnit();return t}function BS(l,e){const t=this.cache;t[0]!==e&&(l.uniform1f(this.addr,e),t[0]=e)}function zS(l,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(l.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Wr(t,e))return;l.uniform2fv(this.addr,e),$r(t,e)}}function HS(l,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(l.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(l.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Wr(t,e))return;l.uniform3fv(this.addr,e),$r(t,e)}}function Ip(l,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(l.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Wr(t,e))return;l.uniform4fv(this.addr,e),$r(t,e)}}function l0(l,e){const t=this.cache,n=e.elements;if(void 0===n){if(Wr(t,e))return;l.uniformMatrix2fv(this.addr,!1,e),$r(t,e)}else{if(Wr(t,n))return;a_.set(n),l.uniformMatrix2fv(this.addr,!1,a_),$r(t,n)}}function c0(l,e){const t=this.cache,n=e.elements;if(void 0===n){if(Wr(t,e))return;l.uniformMatrix3fv(this.addr,!1,e),$r(t,e)}else{if(Wr(t,n))return;o_.set(n),l.uniformMatrix3fv(this.addr,!1,o_),$r(t,n)}}function u0(l,e){const t=this.cache,n=e.elements;if(void 0===n){if(Wr(t,e))return;l.uniformMatrix4fv(this.addr,!1,e),$r(t,e)}else{if(Wr(t,n))return;s_.set(n),l.uniformMatrix4fv(this.addr,!1,s_),$r(t,n)}}function VS(l,e){const t=this.cache;t[0]!==e&&(l.uniform1i(this.addr,e),t[0]=e)}function Wh(l,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(l.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Wr(t,e))return;l.uniform2iv(this.addr,e),$r(t,e)}}function $h(l,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(l.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Wr(t,e))return;l.uniform3iv(this.addr,e),$r(t,e)}}function GS(l,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(l.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Wr(t,e))return;l.uniform4iv(this.addr,e),$r(t,e)}}function WS(l,e){const t=this.cache;t[0]!==e&&(l.uniform1ui(this.addr,e),t[0]=e)}function $S(l,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(l.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Wr(t,e))return;l.uniform2uiv(this.addr,e),$r(t,e)}}function d0(l,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(l.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Wr(t,e))return;l.uniform3uiv(this.addr,e),$r(t,e)}}function h0(l,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(l.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Wr(t,e))return;l.uniform4uiv(this.addr,e),$r(t,e)}}function f0(l,e,t){const n=this.cache,r=t.allocateTextureUnit();let o;n[0]!==r&&(l.uniform1i(this.addr,r),n[0]=r),this.type===l.SAMPLER_2D_SHADOW?(ar.compareFunction=Qi,o=ar):o=Gh,t.setTexture2D(e||o,r)}function jS(l,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(l.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||n_,r)}function p0(l,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(l.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||i_,r)}function XS(l,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(l.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||kS,r)}function hE(l,e){l.uniform1fv(this.addr,e)}function fE(l,e){const t=xd(e,this.size,2);l.uniform2fv(this.addr,t)}function pE(l,e){const t=xd(e,this.size,3);l.uniform3fv(this.addr,t)}function mE(l,e){const t=xd(e,this.size,4);l.uniform4fv(this.addr,t)}function m0(l,e){const t=xd(e,this.size,4);l.uniformMatrix2fv(this.addr,!1,t)}function Rp(l,e){const t=xd(e,this.size,9);l.uniformMatrix3fv(this.addr,!1,t)}function qS(l,e){const t=xd(e,this.size,16);l.uniformMatrix4fv(this.addr,!1,t)}function ZS(l,e){l.uniform1iv(this.addr,e)}function g0(l,e){l.uniform2iv(this.addr,e)}function jh(l,e){l.uniform3iv(this.addr,e)}function KS(l,e){l.uniform4iv(this.addr,e)}function JS(l,e){l.uniform1uiv(this.addr,e)}function QS(l,e){l.uniform2uiv(this.addr,e)}function eb(l,e){l.uniform3uiv(this.addr,e)}function gE(l,e){l.uniform4uiv(this.addr,e)}function tb(l,e,t){const n=this.cache,r=e.length,o=pc(t,r);Wr(n,o)||(l.uniform1iv(this.addr,o),$r(n,o));for(let c=0;c!==r;++c)t.setTexture2D(e[c]||Gh,o[c])}function _0(l,e,t){const n=this.cache,r=e.length,o=pc(t,r);Wr(n,o)||(l.uniform1iv(this.addr,o),$r(n,o));for(let c=0;c!==r;++c)t.setTexture3D(e[c]||n_,o[c])}function nb(l,e,t){const n=this.cache,r=e.length,o=pc(t,r);Wr(n,o)||(l.uniform1iv(this.addr,o),$r(n,o));for(let c=0;c!==r;++c)t.setTextureCube(e[c]||i_,o[c])}function ib(l,e,t){const n=this.cache,r=e.length,o=pc(t,r);Wr(n,o)||(l.uniform1iv(this.addr,o),$r(n,o));for(let c=0;c!==r;++c)t.setTexture2DArray(e[c]||kS,o[c])}class rb{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function YS(l){switch(l){case 5126:return BS;case 35664:return zS;case 35665:return HS;case 35666:return Ip;case 35674:return l0;case 35675:return c0;case 35676:return u0;case 5124:case 35670:return VS;case 35667:case 35671:return Wh;case 35668:case 35672:return $h;case 35669:case 35673:return GS;case 5125:return WS;case 36294:return $S;case 36295:return d0;case 36296:return h0;case 35678:case 36198:case 36298:case 36306:case 35682:return f0;case 35679:case 36299:case 36307:return jS;case 35680:case 36300:case 36308:case 36293:return p0;case 36289:case 36303:case 36311:case 36292:return XS}}(t.type)}}class y0{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function Xh(l){switch(l){case 5126:return hE;case 35664:return fE;case 35665:return pE;case 35666:return mE;case 35674:return m0;case 35675:return Rp;case 35676:return qS;case 5124:case 35670:return ZS;case 35667:case 35671:return g0;case 35668:case 35672:return jh;case 35669:case 35673:return KS;case 5125:return JS;case 36294:return QS;case 36295:return eb;case 36296:return gE;case 35678:case 36198:case 36298:case 36306:case 35682:return tb;case 35679:case 36299:case 36307:return _0;case 35680:case 36300:case 36308:case 36293:return nb;case 36289:case 36303:case 36311:case 36292:return ib}}(t.type)}}class sb{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let o=0,c=r.length;o!==c;++o){const d=r[o];d.setValue(e,t[d.id],n)}}}const Pp=/(\w+)(\])?(\[|\.)?/g;function v0(l,e){l.seq.push(e),l.map[e.id]=e}function x0(l,e,t){const n=l.name,r=n.length;for(Pp.lastIndex=0;;){const o=Pp.exec(n);let d=o[1];const p=o[3];if("]"===o[2]&&(d|=0),void 0===p||"["===p&&Pp.lastIndex+2===r){v0(t,void 0===p?new rb(d,l,e):new y0(d,l,e));break}{let y=t.map[d];void 0===y&&(y=new sb(d),v0(t,y)),t=y}}}class Lp{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const o=e.getActiveUniform(t,r);x0(o,e.getUniformLocation(t,o.name),this)}}setValue(e,t,n,r){const o=this.map[t];void 0!==o&&o.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let o=0,c=t.length;o!==c;++o){const d=t[o],f=n[d.id];!1!==f.needsUpdate&&d.setValue(e,f.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,o=e.length;r!==o;++r){const c=e[r];c.id in t&&n.push(c)}return n}}function Op(l,e,t){const n=l.createShader(e);return l.shaderSource(n,t),l.compileShader(n),n}const ob=37297;let M0=0;const b0=new Rn;function w0(l,e,t){const n=l.getShaderParameter(e,l.COMPILE_STATUS),r=l.getShaderInfoLog(e).trim();if(n&&""===r)return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const c=parseInt(o[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function S0(l,e){const t=l.split("\n"),n=[],r=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let c=r;c<o;c++){const d=c+1;n.push(`${d===e?">":" "} ${d}: ${t[c]}`)}return n.join("\n")}(l.getShaderSource(e),c)}return r}function l_(l,e){const t=function ab(l){I._getMatrix(b0,I.workingColorSpace,l);const e=`mat3( ${b0.elements.map(t=>t.toFixed(4))} )`;switch(I.getTransfer(l)){case yu:return[e,"LinearTransferOETF"];case ii:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",l),[e,"LinearTransferOETF"]}}(e);return[`vec4 ${l}( vec4 value ) {`,`\treturn ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join("\n")}function lb(l,e){let t;switch(e){case Rt:t="Linear";break;case Si:t="Reinhard";break;case bi:t="Cineon";break;case ur:t="ACESFilmic";break;case Qn:t="AgX";break;case bc:t="Neutral";break;case lo:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+l+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Yh=new ne;function qh(l){return""!==l}function E0(l,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return l.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function C0(l,e){return l.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const fb=/^[ \t]*#include +<([\w\d./]+)>/gm;function Np(l){return l.replace(fb,pb)}const T0=new Map;function pb(l,e){let t=Yn[e];if(void 0===t){const n=T0.get(e);if(void 0===n)throw new Error("Can not resolve #include <"+e+">");t=Yn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n)}return Np(t)}const mb=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function c_(l){return l.replace(mb,gb)}function gb(l,e,t,n){let r="";for(let o=parseInt(e);o<parseInt(t);o++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function A0(l){let e=`precision ${l.precision} float;\n\tprecision ${l.precision} int;\n\tprecision ${l.precision} sampler2D;\n\tprecision ${l.precision} samplerCube;\n\tprecision ${l.precision} sampler3D;\n\tprecision ${l.precision} sampler2DArray;\n\tprecision ${l.precision} sampler2DShadow;\n\tprecision ${l.precision} samplerCubeShadow;\n\tprecision ${l.precision} sampler2DArrayShadow;\n\tprecision ${l.precision} isampler2D;\n\tprecision ${l.precision} isampler3D;\n\tprecision ${l.precision} isamplerCube;\n\tprecision ${l.precision} isampler2DArray;\n\tprecision ${l.precision} usampler2D;\n\tprecision ${l.precision} usampler3D;\n\tprecision ${l.precision} usamplerCube;\n\tprecision ${l.precision} usampler2DArray;\n\t`;return"highp"===l.precision?e+="\n#define HIGH_PRECISION":"mediump"===l.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===l.precision&&(e+="\n#define LOW_PRECISION"),e}function yb(l,e,t,n){const r=l.getContext(),o=t.defines;let c=t.vertexShader,d=t.fragmentShader;const f=function _b(l){let e="SHADOWMAP_TYPE_BASIC";return l.shadowMapType===Pt?e="SHADOWMAP_TYPE_PCF":l.shadowMapType===It?e="SHADOWMAP_TYPE_PCF_SOFT":l.shadowMapType===dt&&(e="SHADOWMAP_TYPE_VSM"),e}(t),p=function u_(l){let e="ENVMAP_TYPE_CUBE";if(l.envMap)switch(l.envMapMode){case es:case wr:e="ENVMAP_TYPE_CUBE";break;case Se:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),g=function d_(l){let e="ENVMAP_MODE_REFLECTION";return l.envMap&&l.envMapMode===wr&&(e="ENVMAP_MODE_REFRACTION"),e}(t),y=function D0(l){let e="ENVMAP_BLENDING_NONE";if(l.envMap)switch(l.combine){case Oi:e="ENVMAP_BLENDING_MULTIPLY";break;case Xo:e="ENVMAP_BLENDING_MIX";break;case Ci:e="ENVMAP_BLENDING_ADD"}return e}(t),M=function h_(l){const e=l.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}(t),S=function ub(l){return[l.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",l.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(qh).join("\n")}(t),C=function db(l){const e=[];for(const t in l){const n=l[t];!1!==n&&e.push("#define "+t+" "+n)}return e.join("\n")}(o),D=r.createProgram();let A,T,U=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(A=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,C].filter(qh).join("\n"),A.length>0&&(A+="\n"),T=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,C].filter(qh).join("\n"),T.length>0&&(T+="\n")):(A=[A0(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,C,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+g:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(qh).join("\n"),T=[A0(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,C,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",t.envMap?"#define "+y:"",M?"#define CUBEUV_TEXEL_WIDTH "+M.texelWidth:"",M?"#define CUBEUV_TEXEL_HEIGHT "+M.texelHeight:"",M?"#define CUBEUV_MAX_MIP "+M.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+f:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Qe?"#define TONE_MAPPING":"",t.toneMapping!==Qe?Yn.tonemapping_pars_fragment:"",t.toneMapping!==Qe?lb("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Yn.colorspace_pars_fragment,l_("linearToOutputTexel",t.outputColorSpace),(I.getLuminanceCoefficients(Yh),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${Yh.x.toFixed(4)}, ${Yh.y.toFixed(4)}, ${Yh.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(qh).join("\n")),c=Np(c),c=E0(c,t),c=C0(c,t),d=Np(d),d=E0(d,t),d=C0(d,t),c=c_(c),d=c_(d),!0!==t.isRawShaderMaterial&&(U="#version 300 es\n",A=[S,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+A,T=["#define varying in",t.glslVersion===yi?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===yi?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+T);const O=U+T+d,q=Op(r,r.VERTEX_SHADER,U+A+c),Y=Op(r,r.FRAGMENT_SHADER,O);function Z(se){if(l.debug.checkShaderErrors){const Me=r.getProgramInfoLog(D).trim(),xe=r.getShaderInfoLog(q).trim(),De=r.getShaderInfoLog(Y).trim();let ze=!0,Te=!0;if(!1===r.getProgramParameter(D,r.LINK_STATUS))if(ze=!1,"function"==typeof l.debug.onShaderError)l.debug.onShaderError(r,D,q,Y);else{const tt=w0(r,q,"vertex"),Oe=w0(r,Y,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(D,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+se.name+"\nMaterial Type: "+se.type+"\n\nProgram Info Log: "+Me+"\n"+tt+"\n"+Oe)}else""!==Me?console.warn("THREE.WebGLProgram: Program Info Log:",Me):(""===xe||""===De)&&(Te=!1);Te&&(se.diagnostics={runnable:ze,programLog:Me,vertexShader:{log:xe,prefix:A},fragmentShader:{log:De,prefix:T}})}r.deleteShader(q),r.deleteShader(Y),J=new Lp(r,D),H=function hb(l,e){const t={},n=l.getProgramParameter(e,l.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const o=l.getActiveAttrib(e,r),c=o.name;let d=1;o.type===l.FLOAT_MAT2&&(d=2),o.type===l.FLOAT_MAT3&&(d=3),o.type===l.FLOAT_MAT4&&(d=4),t[c]={type:o.type,location:l.getAttribLocation(e,c),locationSize:d}}return t}(r,D)}let J,H;r.attachShader(D,q),r.attachShader(D,Y),void 0!==t.index0AttributeName?r.bindAttribLocation(D,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(D,0,"position"),r.linkProgram(D),this.getUniforms=function(){return void 0===J&&Z(this),J},this.getAttributes=function(){return void 0===H&&Z(this),H};let V=!1===t.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===V&&(V=r.getProgramParameter(D,ob)),V},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(D),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=M0++,this.cacheKey=e,this.usedTimes=1,this.program=D,this.vertexShader=q,this.fragmentShader=Y,this}let vb=0;class f_{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.fragmentShader,r=this._getShaderStage(e.vertexShader),o=this._getShaderStage(n),c=this._getShaderCacheForMaterial(e);return!1===c.has(r)&&(c.add(r),r.usedTimes++),!1===c.has(o)&&(c.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new xb(e),t.set(e,n)),n}}class xb{constructor(e){this.id=vb++,this.code=e,this.usedTimes=0}}function I0(l,e,t,n,r,o,c){const d=new Au,f=new f_,p=new Set,g=[],y=r.logarithmicDepthBuffer,M=r.vertexTextures;let S=r.precision;const C={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function D(H){return p.add(H),0===H?"uv":`uv${H}`}return{getParameters:function A(H,V,se,Me,xe){const De=Me.fog,ze=xe.geometry,tt=(H.isMeshStandardMaterial?t:e).get(H.envMap||(H.isMeshStandardMaterial?Me.environment:null)),Oe=tt&&tt.mapping===Se?tt.image.height:null,Ct=C[H.type];null!==H.precision&&(S=r.getMaxPrecision(H.precision),S!==H.precision&&console.warn("THREE.WebGLProgram.getParameters:",H.precision,"not supported, using",S,"instead."));const kt=ze.morphAttributes.position||ze.morphAttributes.normal||ze.morphAttributes.color,Zt=void 0!==kt?kt.length:0;let xi,$e,pt,cn,An=0;if(void 0!==ze.morphAttributes.position&&(An=1),void 0!==ze.morphAttributes.normal&&(An=2),void 0!==ze.morphAttributes.color&&(An=3),Ct){const zi=qa[Ct];xi=zi.vertexShader,$e=zi.fragmentShader}else xi=H.vertexShader,$e=H.fragmentShader,f.update(H),pt=f.getVertexShaderID(H),cn=f.getFragmentShaderID(H);const Nt=l.getRenderTarget(),Dn=l.state.buffers.depth.getReversed(),hi=!0===xe.isInstancedMesh,Mn=!0===xe.isBatchedMesh,Di=!!H.map,ai=!!tt,ce=!!H.aoMap,Fr=!!H.lightMap,rt=!!H.bumpMap,ut=!!H.normalMap,Ye=!!H.displacementMap,Ft=!!H.emissiveMap,qe=!!H.metalnessMap,Q=!!H.roughnessMap,W=H.anisotropy>0,ge=H.clearcoat>0,Ze=H.iridescence>0,We=H.sheen>0,an=H.transmission>0,Tt=W&&!!H.anisotropyMap,Jt=ge&&!!H.clearcoatMap,li=ge&&!!H.clearcoatNormalMap,vt=ge&&!!H.clearcoatRoughnessMap,tn=Ze&&!!H.iridescenceMap,Ln=Ze&&!!H.iridescenceThicknessMap,Un=We&&!!H.sheenColorMap,Qt=We&&!!H.sheenRoughnessMap,fi=!!H.specularMap,Jn=!!H.specularColorMap,ir=!!H.specularIntensityMap,pe=an&&!!H.transmissionMap,Wt=an&&!!H.thicknessMap,at=!!H.alphaMap,qn=!!H.extensions;let Ur=Qe;H.toneMapped&&(null===Nt||!0===Nt.isXRRenderTarget)&&(Ur=l.toneMapping);const ao={shaderID:Ct,shaderType:H.type,shaderName:H.name,vertexShader:xi,fragmentShader:$e,defines:H.defines,customVertexShaderID:pt,customFragmentShaderID:cn,isRawShaderMaterial:!0===H.isRawShaderMaterial,glslVersion:H.glslVersion,precision:S,batching:Mn,batchingColor:Mn&&null!==xe._colorsTexture,instancing:hi,instancingColor:hi&&null!==xe.instanceColor,instancingMorph:hi&&null!==xe.morphTexture,supportsVertexTextures:M,outputColorSpace:null===Nt?l.outputColorSpace:!0===Nt.isXRRenderTarget?Nt.texture.colorSpace:Ra,alphaToCoverage:!!H.alphaToCoverage,map:Di,matcap:!!H.matcap,envMap:ai,envMapMode:ai&&tt.mapping,envMapCubeUVHeight:Oe,aoMap:ce,lightMap:Fr,bumpMap:rt,normalMap:ut,displacementMap:M&&Ye,emissiveMap:Ft,normalMapObjectSpace:ut&&H.normalMapType===_u,normalMapTangentSpace:ut&&H.normalMapType===Qo,metalnessMap:qe,roughnessMap:Q,anisotropy:W,anisotropyMap:Tt,clearcoat:ge,clearcoatMap:Jt,clearcoatNormalMap:li,clearcoatRoughnessMap:vt,dispersion:H.dispersion>0,iridescence:Ze,iridescenceMap:tn,iridescenceThicknessMap:Ln,sheen:We,sheenColorMap:Un,sheenRoughnessMap:Qt,specularMap:fi,specularColorMap:Jn,specularIntensityMap:ir,transmission:an,transmissionMap:pe,thicknessMap:Wt,gradientMap:!!H.gradientMap,opaque:!1===H.transparent&&H.blending===ke&&!1===H.alphaToCoverage,alphaMap:at,alphaTest:H.alphaTest>0,alphaHash:!!H.alphaHash,combine:H.combine,mapUv:Di&&D(H.map.channel),aoMapUv:ce&&D(H.aoMap.channel),lightMapUv:Fr&&D(H.lightMap.channel),bumpMapUv:rt&&D(H.bumpMap.channel),normalMapUv:ut&&D(H.normalMap.channel),displacementMapUv:Ye&&D(H.displacementMap.channel),emissiveMapUv:Ft&&D(H.emissiveMap.channel),metalnessMapUv:qe&&D(H.metalnessMap.channel),roughnessMapUv:Q&&D(H.roughnessMap.channel),anisotropyMapUv:Tt&&D(H.anisotropyMap.channel),clearcoatMapUv:Jt&&D(H.clearcoatMap.channel),clearcoatNormalMapUv:li&&D(H.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:vt&&D(H.clearcoatRoughnessMap.channel),iridescenceMapUv:tn&&D(H.iridescenceMap.channel),iridescenceThicknessMapUv:Ln&&D(H.iridescenceThicknessMap.channel),sheenColorMapUv:Un&&D(H.sheenColorMap.channel),sheenRoughnessMapUv:Qt&&D(H.sheenRoughnessMap.channel),specularMapUv:fi&&D(H.specularMap.channel),specularColorMapUv:Jn&&D(H.specularColorMap.channel),specularIntensityMapUv:ir&&D(H.specularIntensityMap.channel),transmissionMapUv:pe&&D(H.transmissionMap.channel),thicknessMapUv:Wt&&D(H.thicknessMap.channel),alphaMapUv:at&&D(H.alphaMap.channel),vertexTangents:!!ze.attributes.tangent&&(ut||W),vertexColors:H.vertexColors,vertexAlphas:!0===H.vertexColors&&!!ze.attributes.color&&4===ze.attributes.color.itemSize,pointsUvs:!0===xe.isPoints&&!!ze.attributes.uv&&(Di||at),fog:!!De,useFog:!0===H.fog,fogExp2:!!De&&De.isFogExp2,flatShading:!0===H.flatShading,sizeAttenuation:!0===H.sizeAttenuation,logarithmicDepthBuffer:y,reverseDepthBuffer:Dn,skinning:!0===xe.isSkinnedMesh,morphTargets:void 0!==ze.morphAttributes.position,morphNormals:void 0!==ze.morphAttributes.normal,morphColors:void 0!==ze.morphAttributes.color,morphTargetsCount:Zt,morphTextureStride:An,numDirLights:V.directional.length,numPointLights:V.point.length,numSpotLights:V.spot.length,numSpotLightMaps:V.spotLightMap.length,numRectAreaLights:V.rectArea.length,numHemiLights:V.hemi.length,numDirLightShadows:V.directionalShadowMap.length,numPointLightShadows:V.pointShadowMap.length,numSpotLightShadows:V.spotShadowMap.length,numSpotLightShadowsWithMaps:V.numSpotLightShadowsWithMaps,numLightProbes:V.numLightProbes,numClippingPlanes:c.numPlanes,numClipIntersection:c.numIntersection,dithering:H.dithering,shadowMapEnabled:l.shadowMap.enabled&&se.length>0,shadowMapType:l.shadowMap.type,toneMapping:Ur,decodeVideoTexture:Di&&!0===H.map.isVideoTexture&&I.getTransfer(H.map.colorSpace)===ii,decodeVideoTextureEmissive:Ft&&!0===H.emissiveMap.isVideoTexture&&I.getTransfer(H.emissiveMap.colorSpace)===ii,premultipliedAlpha:H.premultipliedAlpha,doubleSided:H.side===Ge,flipSided:H.side===gn,useDepthPacking:H.depthPacking>=0,depthPacking:H.depthPacking||0,index0AttributeName:H.index0AttributeName,extensionClipCullDistance:qn&&!0===H.extensions.clipCullDistance&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(qn&&!0===H.extensions.multiDraw||Mn)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:H.customProgramCacheKey()};return ao.vertexUv1s=p.has(1),ao.vertexUv2s=p.has(2),ao.vertexUv3s=p.has(3),p.clear(),ao},getProgramCacheKey:function T(H){const V=[];if(H.shaderID?V.push(H.shaderID):(V.push(H.customVertexShaderID),V.push(H.customFragmentShaderID)),void 0!==H.defines)for(const se in H.defines)V.push(se),V.push(H.defines[se]);return!1===H.isRawShaderMaterial&&(function U(H,V){H.push(V.precision),H.push(V.outputColorSpace),H.push(V.envMapMode),H.push(V.envMapCubeUVHeight),H.push(V.mapUv),H.push(V.alphaMapUv),H.push(V.lightMapUv),H.push(V.aoMapUv),H.push(V.bumpMapUv),H.push(V.normalMapUv),H.push(V.displacementMapUv),H.push(V.emissiveMapUv),H.push(V.metalnessMapUv),H.push(V.roughnessMapUv),H.push(V.anisotropyMapUv),H.push(V.clearcoatMapUv),H.push(V.clearcoatNormalMapUv),H.push(V.clearcoatRoughnessMapUv),H.push(V.iridescenceMapUv),H.push(V.iridescenceThicknessMapUv),H.push(V.sheenColorMapUv),H.push(V.sheenRoughnessMapUv),H.push(V.specularMapUv),H.push(V.specularColorMapUv),H.push(V.specularIntensityMapUv),H.push(V.transmissionMapUv),H.push(V.thicknessMapUv),H.push(V.combine),H.push(V.fogExp2),H.push(V.sizeAttenuation),H.push(V.morphTargetsCount),H.push(V.morphAttributeCount),H.push(V.numDirLights),H.push(V.numPointLights),H.push(V.numSpotLights),H.push(V.numSpotLightMaps),H.push(V.numHemiLights),H.push(V.numRectAreaLights),H.push(V.numDirLightShadows),H.push(V.numPointLightShadows),H.push(V.numSpotLightShadows),H.push(V.numSpotLightShadowsWithMaps),H.push(V.numLightProbes),H.push(V.shadowMapType),H.push(V.toneMapping),H.push(V.numClippingPlanes),H.push(V.numClipIntersection),H.push(V.depthPacking)}(V,H),function N(H,V){d.disableAll(),V.supportsVertexTextures&&d.enable(0),V.instancing&&d.enable(1),V.instancingColor&&d.enable(2),V.instancingMorph&&d.enable(3),V.matcap&&d.enable(4),V.envMap&&d.enable(5),V.normalMapObjectSpace&&d.enable(6),V.normalMapTangentSpace&&d.enable(7),V.clearcoat&&d.enable(8),V.iridescence&&d.enable(9),V.alphaTest&&d.enable(10),V.vertexColors&&d.enable(11),V.vertexAlphas&&d.enable(12),V.vertexUv1s&&d.enable(13),V.vertexUv2s&&d.enable(14),V.vertexUv3s&&d.enable(15),V.vertexTangents&&d.enable(16),V.anisotropy&&d.enable(17),V.alphaHash&&d.enable(18),V.batching&&d.enable(19),V.dispersion&&d.enable(20),V.batchingColor&&d.enable(21),H.push(d.mask),d.disableAll(),V.fog&&d.enable(0),V.useFog&&d.enable(1),V.flatShading&&d.enable(2),V.logarithmicDepthBuffer&&d.enable(3),V.reverseDepthBuffer&&d.enable(4),V.skinning&&d.enable(5),V.morphTargets&&d.enable(6),V.morphNormals&&d.enable(7),V.morphColors&&d.enable(8),V.premultipliedAlpha&&d.enable(9),V.shadowMapEnabled&&d.enable(10),V.doubleSided&&d.enable(11),V.flipSided&&d.enable(12),V.useDepthPacking&&d.enable(13),V.dithering&&d.enable(14),V.transmission&&d.enable(15),V.sheen&&d.enable(16),V.opaque&&d.enable(17),V.pointsUvs&&d.enable(18),V.decodeVideoTexture&&d.enable(19),V.decodeVideoTextureEmissive&&d.enable(20),V.alphaToCoverage&&d.enable(21),H.push(d.mask)}(V,H),V.push(l.outputColorSpace)),V.push(H.customProgramCacheKey),V.join()},getUniforms:function O(H){const V=C[H.type];let se;return se=V?gw.clone(qa[V].uniforms):H.uniforms,se},acquireProgram:function q(H,V){let se;for(let Me=0,xe=g.length;Me<xe;Me++){const De=g[Me];if(De.cacheKey===V){se=De,++se.usedTimes;break}}return void 0===se&&(se=new yb(l,V,H,o),g.push(se)),se},releaseProgram:function Y(H){if(0==--H.usedTimes){const V=g.indexOf(H);g[V]=g[g.length-1],g.pop(),H.destroy()}},releaseShaderCache:function Z(H){f.remove(H)},programs:g,dispose:function J(){f.dispose()}}}function Md(){let l=new WeakMap;return{has:function e(c){return l.has(c)},get:function t(c){let d=l.get(c);return void 0===d&&(d={},l.set(c,d)),d},remove:function n(c){l.delete(c)},update:function r(c,d,f){l.get(c)[d]=f},dispose:function o(){l=new WeakMap}}}function R0(l,e){return l.groupOrder!==e.groupOrder?l.groupOrder-e.groupOrder:l.renderOrder!==e.renderOrder?l.renderOrder-e.renderOrder:l.material.id!==e.material.id?l.material.id-e.material.id:l.z!==e.z?l.z-e.z:l.id-e.id}function P0(l,e){return l.groupOrder!==e.groupOrder?l.groupOrder-e.groupOrder:l.renderOrder!==e.renderOrder?l.renderOrder-e.renderOrder:l.z!==e.z?e.z-l.z:l.id-e.id}function Mb(){const l=[];let e=0;const t=[],n=[],r=[];function c(y,M,S,C,D,A){let T=l[e];return void 0===T?(T={id:y.id,object:y,geometry:M,material:S,groupOrder:C,renderOrder:y.renderOrder,z:D,group:A},l[e]=T):(T.id=y.id,T.object=y,T.geometry=M,T.material=S,T.groupOrder=C,T.renderOrder=y.renderOrder,T.z=D,T.group=A),e++,T}return{opaque:t,transmissive:n,transparent:r,init:function o(){e=0,t.length=0,n.length=0,r.length=0},push:function d(y,M,S,C,D,A){const T=c(y,M,S,C,D,A);S.transmission>0?n.push(T):!0===S.transparent?r.push(T):t.push(T)},unshift:function f(y,M,S,C,D,A){const T=c(y,M,S,C,D,A);S.transmission>0?n.unshift(T):!0===S.transparent?r.unshift(T):t.unshift(T)},finish:function g(){for(let y=e,M=l.length;y<M;y++){const S=l[y];if(null===S.id)break;S.id=null,S.object=null,S.geometry=null,S.material=null,S.group=null}},sort:function p(y,M){t.length>1&&t.sort(y||R0),n.length>1&&n.sort(M||P0),r.length>1&&r.sort(M||P0)}}}function L0(){let l=new WeakMap;return{get:function e(n,r){const o=l.get(n);let c;return void 0===o?(c=new Mb,l.set(n,[c])):r>=o.length?(c=new Mb,o.push(c)):c=o[r],c},dispose:function t(){l=new WeakMap}}}function p_(){const l={};return{get:function(e){if(void 0!==l[e.id])return l[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ne,color:new w};break;case"SpotLight":t={position:new ne,direction:new ne,color:new w,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ne,color:new w,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ne,skyColor:new w,groundColor:new w};break;case"RectAreaLight":t={color:new w,position:new ne,halfWidth:new ne,halfHeight:new ne}}return l[e.id]=t,t}}}let m_=0;function bb(l,e){return(e.castShadow?2:0)-(l.castShadow?2:0)+(e.map?1:0)-(l.map?1:0)}function O0(l){const e=new p_,t=function Sb(){const l={};return{get:function(e){if(void 0!==l[e.id])return l[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new it};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new it,shadowCameraNear:1,shadowCameraFar:1e3}}return l[e.id]=t,t}}}(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)n.probe.push(new ne);const r=new ne,o=new yn,c=new yn;return{setup:function d(p){let g=0,y=0,M=0;for(let H=0;H<9;H++)n.probe[H].set(0,0,0);let S=0,C=0,D=0,A=0,T=0,U=0,N=0,O=0,q=0,Y=0,Z=0;p.sort(bb);for(let H=0,V=p.length;H<V;H++){const se=p[H],Me=se.color,xe=se.intensity,De=se.distance,ze=se.shadow&&se.shadow.map?se.shadow.map.texture:null;if(se.isAmbientLight)g+=Me.r*xe,y+=Me.g*xe,M+=Me.b*xe;else if(se.isLightProbe){for(let Te=0;Te<9;Te++)n.probe[Te].addScaledVector(se.sh.coefficients[Te],xe);Z++}else if(se.isDirectionalLight){const Te=e.get(se);if(Te.color.copy(se.color).multiplyScalar(se.intensity),se.castShadow){const tt=se.shadow,Oe=t.get(se);Oe.shadowIntensity=tt.intensity,Oe.shadowBias=tt.bias,Oe.shadowNormalBias=tt.normalBias,Oe.shadowRadius=tt.radius,Oe.shadowMapSize=tt.mapSize,n.directionalShadow[S]=Oe,n.directionalShadowMap[S]=ze,n.directionalShadowMatrix[S]=se.shadow.matrix,U++}n.directional[S]=Te,S++}else if(se.isSpotLight){const Te=e.get(se);Te.position.setFromMatrixPosition(se.matrixWorld),Te.color.copy(Me).multiplyScalar(xe),Te.distance=De,Te.coneCos=Math.cos(se.angle),Te.penumbraCos=Math.cos(se.angle*(1-se.penumbra)),Te.decay=se.decay,n.spot[D]=Te;const tt=se.shadow;if(se.map&&(n.spotLightMap[q]=se.map,q++,tt.updateMatrices(se),se.castShadow&&Y++),n.spotLightMatrix[D]=tt.matrix,se.castShadow){const Oe=t.get(se);Oe.shadowIntensity=tt.intensity,Oe.shadowBias=tt.bias,Oe.shadowNormalBias=tt.normalBias,Oe.shadowRadius=tt.radius,Oe.shadowMapSize=tt.mapSize,n.spotShadow[D]=Oe,n.spotShadowMap[D]=ze,O++}D++}else if(se.isRectAreaLight){const Te=e.get(se);Te.color.copy(Me).multiplyScalar(xe),Te.halfWidth.set(.5*se.width,0,0),Te.halfHeight.set(0,.5*se.height,0),n.rectArea[A]=Te,A++}else if(se.isPointLight){const Te=e.get(se);if(Te.color.copy(se.color).multiplyScalar(se.intensity),Te.distance=se.distance,Te.decay=se.decay,se.castShadow){const tt=se.shadow,Oe=t.get(se);Oe.shadowIntensity=tt.intensity,Oe.shadowBias=tt.bias,Oe.shadowNormalBias=tt.normalBias,Oe.shadowRadius=tt.radius,Oe.shadowMapSize=tt.mapSize,Oe.shadowCameraNear=tt.camera.near,Oe.shadowCameraFar=tt.camera.far,n.pointShadow[C]=Oe,n.pointShadowMap[C]=ze,n.pointShadowMatrix[C]=se.shadow.matrix,N++}n.point[C]=Te,C++}else if(se.isHemisphereLight){const Te=e.get(se);Te.skyColor.copy(se.color).multiplyScalar(xe),Te.groundColor.copy(se.groundColor).multiplyScalar(xe),n.hemi[T]=Te,T++}}A>0&&(!0===l.has("OES_texture_float_linear")?(n.rectAreaLTC1=Ot.LTC_FLOAT_1,n.rectAreaLTC2=Ot.LTC_FLOAT_2):(n.rectAreaLTC1=Ot.LTC_HALF_1,n.rectAreaLTC2=Ot.LTC_HALF_2)),n.ambient[0]=g,n.ambient[1]=y,n.ambient[2]=M;const J=n.hash;(J.directionalLength!==S||J.pointLength!==C||J.spotLength!==D||J.rectAreaLength!==A||J.hemiLength!==T||J.numDirectionalShadows!==U||J.numPointShadows!==N||J.numSpotShadows!==O||J.numSpotMaps!==q||J.numLightProbes!==Z)&&(n.directional.length=S,n.spot.length=D,n.rectArea.length=A,n.point.length=C,n.hemi.length=T,n.directionalShadow.length=U,n.directionalShadowMap.length=U,n.pointShadow.length=N,n.pointShadowMap.length=N,n.spotShadow.length=O,n.spotShadowMap.length=O,n.directionalShadowMatrix.length=U,n.pointShadowMatrix.length=N,n.spotLightMatrix.length=O+q-Y,n.spotLightMap.length=q,n.numSpotLightShadowsWithMaps=Y,n.numLightProbes=Z,J.directionalLength=S,J.pointLength=C,J.spotLength=D,J.rectAreaLength=A,J.hemiLength=T,J.numDirectionalShadows=U,J.numPointShadows=N,J.numSpotShadows=O,J.numSpotMaps=q,J.numLightProbes=Z,n.version=m_++)},setupView:function f(p,g){let y=0,M=0,S=0,C=0,D=0;const A=g.matrixWorldInverse;for(let T=0,U=p.length;T<U;T++){const N=p[T];if(N.isDirectionalLight){const O=n.directional[y];O.direction.setFromMatrixPosition(N.matrixWorld),r.setFromMatrixPosition(N.target.matrixWorld),O.direction.sub(r),O.direction.transformDirection(A),y++}else if(N.isSpotLight){const O=n.spot[S];O.position.setFromMatrixPosition(N.matrixWorld),O.position.applyMatrix4(A),O.direction.setFromMatrixPosition(N.matrixWorld),r.setFromMatrixPosition(N.target.matrixWorld),O.direction.sub(r),O.direction.transformDirection(A),S++}else if(N.isRectAreaLight){const O=n.rectArea[C];O.position.setFromMatrixPosition(N.matrixWorld),O.position.applyMatrix4(A),c.identity(),o.copy(N.matrixWorld),o.premultiply(A),c.extractRotation(o),O.halfWidth.set(.5*N.width,0,0),O.halfHeight.set(0,.5*N.height,0),O.halfWidth.applyMatrix4(c),O.halfHeight.applyMatrix4(c),C++}else if(N.isPointLight){const O=n.point[M];O.position.setFromMatrixPosition(N.matrixWorld),O.position.applyMatrix4(A),M++}else if(N.isHemisphereLight){const O=n.hemi[D];O.direction.setFromMatrixPosition(N.matrixWorld),O.direction.transformDirection(A),D++}}},state:n}}function Fp(l){const e=new O0(l),t=[],n=[],p={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:function r(g){p.camera=g,t.length=0,n.length=0},state:p,setupLights:function d(){e.setup(t)},setupLightsView:function f(g){e.setupView(t,g)},pushLight:function o(g){t.push(g)},pushShadow:function c(g){n.push(g)}}}function N0(l){let e=new WeakMap;return{get:function t(r,o=0){const c=e.get(r);let d;return void 0===c?(d=new Fp(l),e.set(r,[d])):o>=c.length?(d=new Fp(l),c.push(d)):d=c[o],d},dispose:function n(){e=new WeakMap}}}const F0="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",U0="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function k0(l,e,t){let n=new ph;const r=new it,o=new it,c=new qt,d=new ky({depthPacking:Bd}),f=new tM,p={},g=t.maxTextureSize,y={[Kt]:gn,[gn]:Kt,[Ge]:Ge},M=new ma({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new it},radius:{value:4}},vertexShader:F0,fragmentShader:U0}),S=M.clone();S.defines.HORIZONTAL_PASS=1;const C=new Xn;C.setAttribute("position",new Kn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const D=new Zr(C,M),A=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Pt;let T=this.type;function U(Y,Z){const J=e.update(D);M.defines.VSM_SAMPLES!==Y.blurSamples&&(M.defines.VSM_SAMPLES=Y.blurSamples,S.defines.VSM_SAMPLES=Y.blurSamples,M.needsUpdate=!0,S.needsUpdate=!0),null===Y.mapPass&&(Y.mapPass=new si(r.x,r.y)),M.uniforms.shadow_pass.value=Y.map.texture,M.uniforms.resolution.value=Y.mapSize,M.uniforms.radius.value=Y.radius,l.setRenderTarget(Y.mapPass),l.clear(),l.renderBufferDirect(Z,null,J,M,D,null),S.uniforms.shadow_pass.value=Y.mapPass.texture,S.uniforms.resolution.value=Y.mapSize,S.uniforms.radius.value=Y.radius,l.setRenderTarget(Y.map),l.clear(),l.renderBufferDirect(Z,null,J,S,D,null)}function N(Y,Z,J,H){let V=null;const se=!0===J.isPointLight?Y.customDistanceMaterial:Y.customDepthMaterial;if(void 0!==se)V=se;else if(V=!0===J.isPointLight?f:d,l.localClippingEnabled&&!0===Z.clipShadows&&Array.isArray(Z.clippingPlanes)&&0!==Z.clippingPlanes.length||Z.displacementMap&&0!==Z.displacementScale||Z.alphaMap&&Z.alphaTest>0||Z.map&&Z.alphaTest>0){const Me=V.uuid,xe=Z.uuid;let De=p[Me];void 0===De&&(De={},p[Me]=De);let ze=De[xe];void 0===ze&&(ze=V.clone(),De[xe]=ze,Z.addEventListener("dispose",q)),V=ze}return V.visible=Z.visible,V.wireframe=Z.wireframe,V.side=H===dt?null!==Z.shadowSide?Z.shadowSide:Z.side:null!==Z.shadowSide?Z.shadowSide:y[Z.side],V.alphaMap=Z.alphaMap,V.alphaTest=Z.alphaTest,V.map=Z.map,V.clipShadows=Z.clipShadows,V.clippingPlanes=Z.clippingPlanes,V.clipIntersection=Z.clipIntersection,V.displacementMap=Z.displacementMap,V.displacementScale=Z.displacementScale,V.displacementBias=Z.displacementBias,V.wireframeLinewidth=Z.wireframeLinewidth,V.linewidth=Z.linewidth,!0===J.isPointLight&&!0===V.isMeshDistanceMaterial&&(l.properties.get(V).light=J),V}function O(Y,Z,J,H,V){if(!1===Y.visible)return;if(Y.layers.test(Z.layers)&&(Y.isMesh||Y.isLine||Y.isPoints)&&(Y.castShadow||Y.receiveShadow&&V===dt)&&(!Y.frustumCulled||n.intersectsObject(Y))){Y.modelViewMatrix.multiplyMatrices(J.matrixWorldInverse,Y.matrixWorld);const xe=e.update(Y),De=Y.material;if(Array.isArray(De)){const ze=xe.groups;for(let Te=0,tt=ze.length;Te<tt;Te++){const Oe=ze[Te],Ct=De[Oe.materialIndex];if(Ct&&Ct.visible){const kt=N(Y,Ct,H,V);Y.onBeforeShadow(l,Y,Z,J,xe,kt,Oe),l.renderBufferDirect(J,null,xe,kt,Y,Oe),Y.onAfterShadow(l,Y,Z,J,xe,kt,Oe)}}}else if(De.visible){const ze=N(Y,De,H,V);Y.onBeforeShadow(l,Y,Z,J,xe,ze,null),l.renderBufferDirect(J,null,xe,ze,Y,null),Y.onAfterShadow(l,Y,Z,J,xe,ze,null)}}const Me=Y.children;for(let xe=0,De=Me.length;xe<De;xe++)O(Me[xe],Z,J,H,V)}function q(Y){Y.target.removeEventListener("dispose",q);for(const J in p){const H=p[J],V=Y.target.uuid;V in H&&(H[V].dispose(),delete H[V])}}this.render=function(Y,Z,J){if(!1===A.enabled||!1===A.autoUpdate&&!1===A.needsUpdate||0===Y.length)return;const H=l.getRenderTarget(),V=l.getActiveCubeFace(),se=l.getActiveMipmapLevel(),Me=l.state;Me.setBlending(ht),Me.buffers.color.setClear(1,1,1,1),Me.buffers.depth.setTest(!0),Me.setScissorTest(!1);const xe=T!==dt&&this.type===dt,De=T===dt&&this.type!==dt;for(let ze=0,Te=Y.length;ze<Te;ze++){const tt=Y[ze],Oe=tt.shadow;if(void 0===Oe){console.warn("THREE.WebGLShadowMap:",tt,"has no shadow.");continue}if(!1===Oe.autoUpdate&&!1===Oe.needsUpdate)continue;r.copy(Oe.mapSize);const Ct=Oe.getFrameExtents();if(r.multiply(Ct),o.copy(Oe.mapSize),(r.x>g||r.y>g)&&(r.x>g&&(o.x=Math.floor(g/Ct.x),r.x=o.x*Ct.x,Oe.mapSize.x=o.x),r.y>g&&(o.y=Math.floor(g/Ct.y),r.y=o.y*Ct.y,Oe.mapSize.y=o.y)),null===Oe.map||!0===xe||!0===De){const Zt=this.type!==dt?{minFilter:Be,magFilter:Be}:{};null!==Oe.map&&Oe.map.dispose(),Oe.map=new si(r.x,r.y,Zt),Oe.map.texture.name=tt.name+".shadowMap",Oe.camera.updateProjectionMatrix()}l.setRenderTarget(Oe.map),l.clear();const kt=Oe.getViewportCount();for(let Zt=0;Zt<kt;Zt++){const An=Oe.getViewport(Zt);c.set(o.x*An.x,o.y*An.y,o.x*An.z,o.y*An.w),Me.viewport(c),Oe.updateMatrices(tt,Zt),n=Oe.getFrustum(),O(Z,J,Oe.camera,tt,this.type)}!0!==Oe.isPointLightShadow&&this.type===dt&&U(Oe,J),Oe.needsUpdate=!1}T=this.type,A.needsUpdate=!1,l.setRenderTarget(H,V,se)}}const wb={[Gi]:Ki,[Dt]:jo,[Ao]:Ps,[Mi]:hs,[Ki]:Gi,[jo]:Dt,[Ps]:Ao,[hs]:Mi};function Eb(l,e){const o=new function t(){let pe=!1;const Wt=new qt;let Ve=null;const at=new qt(0,0,0,0);return{setMask:function(Xt){Ve!==Xt&&!pe&&(l.colorMask(Xt,Xt,Xt,Xt),Ve=Xt)},setLocked:function(Xt){pe=Xt},setClear:function(Xt,$t,qn,Ur,ao){!0===ao&&(Xt*=Ur,$t*=Ur,qn*=Ur),Wt.set(Xt,$t,qn,Ur),!1===at.equals(Wt)&&(l.clearColor(Xt,$t,qn,Ur),at.copy(Wt))},reset:function(){pe=!1,Ve=null,at.set(-1,0,0,0)}}},c=new function n(){let pe=!1,Wt=!1,Ve=null,at=null,Xt=null;return{setReversed:function($t){if(Wt!==$t){const qn=e.get("EXT_clip_control");qn.clipControlEXT(qn.LOWER_LEFT_EXT,$t?qn.ZERO_TO_ONE_EXT:qn.NEGATIVE_ONE_TO_ONE_EXT),Wt=$t;const Ur=Xt;Xt=null,this.setClear(Ur)}},getReversed:function(){return Wt},setTest:function($t){$t?Nt(l.DEPTH_TEST):Dn(l.DEPTH_TEST)},setMask:function($t){Ve!==$t&&!pe&&(l.depthMask($t),Ve=$t)},setFunc:function($t){if(Wt&&($t=wb[$t]),at!==$t){switch($t){case Gi:l.depthFunc(l.NEVER);break;case Ki:l.depthFunc(l.ALWAYS);break;case Dt:l.depthFunc(l.LESS);break;case Mi:l.depthFunc(l.LEQUAL);break;case Ao:l.depthFunc(l.EQUAL);break;case hs:l.depthFunc(l.GEQUAL);break;case jo:l.depthFunc(l.GREATER);break;case Ps:l.depthFunc(l.NOTEQUAL);break;default:l.depthFunc(l.LEQUAL)}at=$t}},setLocked:function($t){pe=$t},setClear:function($t){Xt!==$t&&(Wt&&($t=1-$t),l.clearDepth($t),Xt=$t)},reset:function(){pe=!1,Ve=null,at=null,Xt=null,Wt=!1}}},d=new function r(){let pe=!1,Wt=null,Ve=null,at=null,Xt=null,$t=null,qn=null,Ur=null,ao=null;return{setTest:function(zi){pe||(zi?Nt(l.STENCIL_TEST):Dn(l.STENCIL_TEST))},setMask:function(zi){Wt!==zi&&!pe&&(l.stencilMask(zi),Wt=zi)},setFunc:function(zi,Rl,pu){(Ve!==zi||at!==Rl||Xt!==pu)&&(l.stencilFunc(zi,Rl,pu),Ve=zi,at=Rl,Xt=pu)},setOp:function(zi,Rl,pu){($t!==zi||qn!==Rl||Ur!==pu)&&(l.stencilOp(zi,Rl,pu),$t=zi,qn=Rl,Ur=pu)},setLocked:function(zi){pe=zi},setClear:function(zi){ao!==zi&&(l.clearStencil(zi),ao=zi)},reset:function(){pe=!1,Wt=null,Ve=null,at=null,Xt=null,$t=null,qn=null,Ur=null,ao=null}}},f=new WeakMap,p=new WeakMap;let g={},y={},M=new WeakMap,S=[],C=null,D=!1,A=null,T=null,U=null,N=null,O=null,q=null,Y=null,Z=new w(0,0,0),J=0,H=!1,V=null,se=null,Me=null,xe=null,De=null;const ze=l.getParameter(l.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Te=!1,tt=0;const Oe=l.getParameter(l.VERSION);-1!==Oe.indexOf("WebGL")?(tt=parseFloat(/^WebGL (\d)/.exec(Oe)[1]),Te=tt>=1):-1!==Oe.indexOf("OpenGL ES")&&(tt=parseFloat(/^OpenGL ES (\d)/.exec(Oe)[1]),Te=tt>=2);let Ct=null,kt={};const Zt=l.getParameter(l.SCISSOR_BOX),An=l.getParameter(l.VIEWPORT),xi=(new qt).fromArray(Zt),$e=(new qt).fromArray(An);function pt(pe,Wt,Ve,at){const Xt=new Uint8Array(4),$t=l.createTexture();l.bindTexture(pe,$t),l.texParameteri(pe,l.TEXTURE_MIN_FILTER,l.NEAREST),l.texParameteri(pe,l.TEXTURE_MAG_FILTER,l.NEAREST);for(let qn=0;qn<Ve;qn++)pe===l.TEXTURE_3D||pe===l.TEXTURE_2D_ARRAY?l.texImage3D(Wt,0,l.RGBA,1,1,at,0,l.RGBA,l.UNSIGNED_BYTE,Xt):l.texImage2D(Wt+qn,0,l.RGBA,1,1,0,l.RGBA,l.UNSIGNED_BYTE,Xt);return $t}const cn={};function Nt(pe){!0!==g[pe]&&(l.enable(pe),g[pe]=!0)}function Dn(pe){!1!==g[pe]&&(l.disable(pe),g[pe]=!1)}cn[l.TEXTURE_2D]=pt(l.TEXTURE_2D,l.TEXTURE_2D,1),cn[l.TEXTURE_CUBE_MAP]=pt(l.TEXTURE_CUBE_MAP,l.TEXTURE_CUBE_MAP_POSITIVE_X,6),cn[l.TEXTURE_2D_ARRAY]=pt(l.TEXTURE_2D_ARRAY,l.TEXTURE_2D_ARRAY,1,1),cn[l.TEXTURE_3D]=pt(l.TEXTURE_3D,l.TEXTURE_3D,1,1),o.setClear(0,0,0,1),c.setClear(1),d.setClear(0),Nt(l.DEPTH_TEST),c.setFunc(Mi),rt(!1),ut(en),Nt(l.CULL_FACE),ce(ht);const qi={[pi]:l.FUNC_ADD,[hn]:l.FUNC_SUBTRACT,[yr]:l.FUNC_REVERSE_SUBTRACT};qi[Qr]=l.MIN,qi[wa]=l.MAX;const ai={[Vi]:l.ZERO,[ve]:l.ONE,[Ae]:l.SRC_COLOR,[Le]:l.SRC_ALPHA,[bt]:l.SRC_ALPHA_SATURATE,[Wn]:l.DST_COLOR,[Ke]:l.DST_ALPHA,[Pe]:l.ONE_MINUS_SRC_COLOR,[nt]:l.ONE_MINUS_SRC_ALPHA,[ui]:l.ONE_MINUS_DST_COLOR,[At]:l.ONE_MINUS_DST_ALPHA,[mi]:l.CONSTANT_COLOR,[Li]:l.ONE_MINUS_CONSTANT_COLOR,[Rs]:l.CONSTANT_ALPHA,[wn]:l.ONE_MINUS_CONSTANT_ALPHA};function ce(pe,Wt,Ve,at,Xt,$t,qn,Ur,ao,zi){if(pe!==ht){if(!1===D&&(Nt(l.BLEND),D=!0),pe===jt)Xt=Xt||Wt,$t=$t||Ve,qn=qn||at,(Wt!==T||Xt!==O)&&(l.blendEquationSeparate(qi[Wt],qi[Xt]),T=Wt,O=Xt),(Ve!==U||at!==N||$t!==q||qn!==Y)&&(l.blendFuncSeparate(ai[Ve],ai[at],ai[$t],ai[qn]),U=Ve,N=at,q=$t,Y=qn),(!1===Ur.equals(Z)||ao!==J)&&(l.blendColor(Ur.r,Ur.g,Ur.b,ao),Z.copy(Ur),J=ao),A=pe,H=!1;else if(pe!==A||zi!==H){if((T!==pi||O!==pi)&&(l.blendEquation(l.FUNC_ADD),T=pi,O=pi),zi)switch(pe){case ke:l.blendFuncSeparate(l.ONE,l.ONE_MINUS_SRC_ALPHA,l.ONE,l.ONE_MINUS_SRC_ALPHA);break;case yt:l.blendFunc(l.ONE,l.ONE);break;case Ut:l.blendFuncSeparate(l.ZERO,l.ONE_MINUS_SRC_COLOR,l.ZERO,l.ONE);break;case Gn:l.blendFuncSeparate(l.ZERO,l.SRC_COLOR,l.ZERO,l.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",pe)}else switch(pe){case ke:l.blendFuncSeparate(l.SRC_ALPHA,l.ONE_MINUS_SRC_ALPHA,l.ONE,l.ONE_MINUS_SRC_ALPHA);break;case yt:l.blendFunc(l.SRC_ALPHA,l.ONE);break;case Ut:l.blendFuncSeparate(l.ZERO,l.ONE_MINUS_SRC_COLOR,l.ZERO,l.ONE);break;case Gn:l.blendFunc(l.ZERO,l.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",pe)}U=null,N=null,q=null,Y=null,Z.set(0,0,0),J=0,A=pe,H=zi}}else!0===D&&(Dn(l.BLEND),D=!1)}function rt(pe){V!==pe&&(l.frontFace(pe?l.CW:l.CCW),V=pe)}function ut(pe){pe!==un?(Nt(l.CULL_FACE),pe!==se&&l.cullFace(pe===en?l.BACK:pe===kn?l.FRONT:l.FRONT_AND_BACK)):Dn(l.CULL_FACE),se=pe}function Ft(pe,Wt,Ve){pe?(Nt(l.POLYGON_OFFSET_FILL),(xe!==Wt||De!==Ve)&&(l.polygonOffset(Wt,Ve),xe=Wt,De=Ve)):Dn(l.POLYGON_OFFSET_FILL)}return{buffers:{color:o,depth:c,stencil:d},enable:Nt,disable:Dn,bindFramebuffer:function hi(pe,Wt){return y[pe]!==Wt&&(l.bindFramebuffer(pe,Wt),y[pe]=Wt,pe===l.DRAW_FRAMEBUFFER&&(y[l.FRAMEBUFFER]=Wt),pe===l.FRAMEBUFFER&&(y[l.DRAW_FRAMEBUFFER]=Wt),!0)},drawBuffers:function Mn(pe,Wt){let Ve=S,at=!1;if(pe){Ve=M.get(Wt),void 0===Ve&&(Ve=[],M.set(Wt,Ve));const Xt=pe.textures;if(Ve.length!==Xt.length||Ve[0]!==l.COLOR_ATTACHMENT0){for(let $t=0,qn=Xt.length;$t<qn;$t++)Ve[$t]=l.COLOR_ATTACHMENT0+$t;Ve.length=Xt.length,at=!0}}else Ve[0]!==l.BACK&&(Ve[0]=l.BACK,at=!0);at&&l.drawBuffers(Ve)},useProgram:function Di(pe){return C!==pe&&(l.useProgram(pe),C=pe,!0)},setBlending:ce,setMaterial:function Fr(pe,Wt){pe.side===Ge?Dn(l.CULL_FACE):Nt(l.CULL_FACE);let Ve=pe.side===gn;Wt&&(Ve=!Ve),rt(Ve),pe.blending===ke&&!1===pe.transparent?ce(ht):ce(pe.blending,pe.blendEquation,pe.blendSrc,pe.blendDst,pe.blendEquationAlpha,pe.blendSrcAlpha,pe.blendDstAlpha,pe.blendColor,pe.blendAlpha,pe.premultipliedAlpha),c.setFunc(pe.depthFunc),c.setTest(pe.depthTest),c.setMask(pe.depthWrite),o.setMask(pe.colorWrite);const at=pe.stencilWrite;d.setTest(at),at&&(d.setMask(pe.stencilWriteMask),d.setFunc(pe.stencilFunc,pe.stencilRef,pe.stencilFuncMask),d.setOp(pe.stencilFail,pe.stencilZFail,pe.stencilZPass)),Ft(pe.polygonOffset,pe.polygonOffsetFactor,pe.polygonOffsetUnits),!0===pe.alphaToCoverage?Nt(l.SAMPLE_ALPHA_TO_COVERAGE):Dn(l.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:rt,setCullFace:ut,setLineWidth:function Ye(pe){pe!==Me&&(Te&&l.lineWidth(pe),Me=pe)},setPolygonOffset:Ft,setScissorTest:function qe(pe){pe?Nt(l.SCISSOR_TEST):Dn(l.SCISSOR_TEST)},activeTexture:function Q(pe){void 0===pe&&(pe=l.TEXTURE0+ze-1),Ct!==pe&&(l.activeTexture(pe),Ct=pe)},bindTexture:function W(pe,Wt,Ve){void 0===Ve&&(Ve=null===Ct?l.TEXTURE0+ze-1:Ct);let at=kt[Ve];void 0===at&&(at={type:void 0,texture:void 0},kt[Ve]=at),(at.type!==pe||at.texture!==Wt)&&(Ct!==Ve&&(l.activeTexture(Ve),Ct=Ve),l.bindTexture(pe,Wt||cn[pe]),at.type=pe,at.texture=Wt)},unbindTexture:function ge(){const pe=kt[Ct];void 0!==pe&&void 0!==pe.type&&(l.bindTexture(pe.type,null),pe.type=void 0,pe.texture=void 0)},compressedTexImage2D:function He(){try{l.compressedTexImage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}},compressedTexImage3D:function Ze(){try{l.compressedTexImage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}},texImage2D:function tn(){try{l.texImage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}},texImage3D:function Ln(){try{l.texImage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}},updateUBOMapping:function fi(pe,Wt){let Ve=p.get(Wt);void 0===Ve&&(Ve=new WeakMap,p.set(Wt,Ve));let at=Ve.get(pe);void 0===at&&(at=l.getUniformBlockIndex(Wt,pe.name),Ve.set(pe,at))},uniformBlockBinding:function Jn(pe,Wt){const at=p.get(Wt).get(pe);f.get(Wt)!==at&&(l.uniformBlockBinding(Wt,at,pe.__bindingPointIndex),f.set(Wt,at))},texStorage2D:function li(){try{l.texStorage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}},texStorage3D:function vt(){try{l.texStorage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}},texSubImage2D:function We(){try{l.texSubImage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}},texSubImage3D:function an(){try{l.texSubImage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}},compressedTexSubImage2D:function Tt(){try{l.compressedTexSubImage2D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}},compressedTexSubImage3D:function Jt(){try{l.compressedTexSubImage3D(...arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}},scissor:function Un(pe){!1===xi.equals(pe)&&(l.scissor(pe.x,pe.y,pe.z,pe.w),xi.copy(pe))},viewport:function Qt(pe){!1===$e.equals(pe)&&(l.viewport(pe.x,pe.y,pe.z,pe.w),$e.copy(pe))},reset:function ir(){l.disable(l.BLEND),l.disable(l.CULL_FACE),l.disable(l.DEPTH_TEST),l.disable(l.POLYGON_OFFSET_FILL),l.disable(l.SCISSOR_TEST),l.disable(l.STENCIL_TEST),l.disable(l.SAMPLE_ALPHA_TO_COVERAGE),l.blendEquation(l.FUNC_ADD),l.blendFunc(l.ONE,l.ZERO),l.blendFuncSeparate(l.ONE,l.ZERO,l.ONE,l.ZERO),l.blendColor(0,0,0,0),l.colorMask(!0,!0,!0,!0),l.clearColor(0,0,0,0),l.depthMask(!0),l.depthFunc(l.LESS),c.setReversed(!1),l.clearDepth(1),l.stencilMask(4294967295),l.stencilFunc(l.ALWAYS,0,4294967295),l.stencilOp(l.KEEP,l.KEEP,l.KEEP),l.clearStencil(0),l.cullFace(l.BACK),l.frontFace(l.CCW),l.polygonOffset(0,0),l.activeTexture(l.TEXTURE0),l.bindFramebuffer(l.FRAMEBUFFER,null),l.bindFramebuffer(l.DRAW_FRAMEBUFFER,null),l.bindFramebuffer(l.READ_FRAMEBUFFER,null),l.useProgram(null),l.lineWidth(1),l.scissor(0,0,l.canvas.width,l.canvas.height),l.viewport(0,0,l.canvas.width,l.canvas.height),g={},Ct=null,kt={},y={},M=new WeakMap,S=[],C=null,D=!1,A=null,T=null,U=null,N=null,O=null,q=null,Y=null,Z=new w(0,0,0),J=0,H=!1,V=null,se=null,Me=null,xe=null,De=null,xi.set(0,0,l.canvas.width,l.canvas.height),$e.set(0,0,l.canvas.width,l.canvas.height),o.reset(),c.reset(),d.reset()}}}function Cb(l,e,t,n,r,o,c){const d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),p=new it,g=new WeakMap;let y;const M=new WeakMap;let S=!1;try{S=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function C(Q,W){return S?new OffscreenCanvas(Q,W):Fo("canvas")}function D(Q,W,ge){let He=1;const Ze=qe(Q);if((Ze.width>ge||Ze.height>ge)&&(He=ge/Math.max(Ze.width,Ze.height)),He<1){if(typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Q instanceof ImageBitmap||typeof VideoFrame<"u"&&Q instanceof VideoFrame){const We=Math.floor(He*Ze.width),an=Math.floor(He*Ze.height);void 0===y&&(y=C(We,an));const Tt=W?C(We,an):y;return Tt.width=We,Tt.height=an,Tt.getContext("2d").drawImage(Q,0,0,We,an),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ze.width+"x"+Ze.height+") to ("+We+"x"+an+")."),Tt}return"data"in Q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ze.width+"x"+Ze.height+")."),Q}return Q}function A(Q){return Q.generateMipmaps}function T(Q){l.generateMipmap(Q)}function U(Q){return Q.isWebGLCubeRenderTarget?l.TEXTURE_CUBE_MAP:Q.isWebGL3DRenderTarget?l.TEXTURE_3D:Q.isWebGLArrayRenderTarget||Q.isCompressedArrayTexture?l.TEXTURE_2D_ARRAY:l.TEXTURE_2D}function N(Q,W,ge,He,Ze=!1){if(null!==Q){if(void 0!==l[Q])return l[Q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Q+"'")}let We=W;if(W===l.RED&&(ge===l.FLOAT&&(We=l.R32F),ge===l.HALF_FLOAT&&(We=l.R16F),ge===l.UNSIGNED_BYTE&&(We=l.R8)),W===l.RED_INTEGER&&(ge===l.UNSIGNED_BYTE&&(We=l.R8UI),ge===l.UNSIGNED_SHORT&&(We=l.R16UI),ge===l.UNSIGNED_INT&&(We=l.R32UI),ge===l.BYTE&&(We=l.R8I),ge===l.SHORT&&(We=l.R16I),ge===l.INT&&(We=l.R32I)),W===l.RG&&(ge===l.FLOAT&&(We=l.RG32F),ge===l.HALF_FLOAT&&(We=l.RG16F),ge===l.UNSIGNED_BYTE&&(We=l.RG8)),W===l.RG_INTEGER&&(ge===l.UNSIGNED_BYTE&&(We=l.RG8UI),ge===l.UNSIGNED_SHORT&&(We=l.RG16UI),ge===l.UNSIGNED_INT&&(We=l.RG32UI),ge===l.BYTE&&(We=l.RG8I),ge===l.SHORT&&(We=l.RG16I),ge===l.INT&&(We=l.RG32I)),W===l.RGB_INTEGER&&(ge===l.UNSIGNED_BYTE&&(We=l.RGB8UI),ge===l.UNSIGNED_SHORT&&(We=l.RGB16UI),ge===l.UNSIGNED_INT&&(We=l.RGB32UI),ge===l.BYTE&&(We=l.RGB8I),ge===l.SHORT&&(We=l.RGB16I),ge===l.INT&&(We=l.RGB32I)),W===l.RGBA_INTEGER&&(ge===l.UNSIGNED_BYTE&&(We=l.RGBA8UI),ge===l.UNSIGNED_SHORT&&(We=l.RGBA16UI),ge===l.UNSIGNED_INT&&(We=l.RGBA32UI),ge===l.BYTE&&(We=l.RGBA8I),ge===l.SHORT&&(We=l.RGBA16I),ge===l.INT&&(We=l.RGBA32I)),W===l.RGB&&ge===l.UNSIGNED_INT_5_9_9_9_REV&&(We=l.RGB9_E5),W===l.RGBA){const an=Ze?yu:I.getTransfer(He);ge===l.FLOAT&&(We=l.RGBA32F),ge===l.HALF_FLOAT&&(We=l.RGBA16F),ge===l.UNSIGNED_BYTE&&(We=an===ii?l.SRGB8_ALPHA8:l.RGBA8),ge===l.UNSIGNED_SHORT_4_4_4_4&&(We=l.RGBA4),ge===l.UNSIGNED_SHORT_5_5_5_1&&(We=l.RGB5_A1)}return(We===l.R16F||We===l.R32F||We===l.RG16F||We===l.RG32F||We===l.RGBA16F||We===l.RGBA32F)&&e.get("EXT_color_buffer_float"),We}function O(Q,W){let ge;return Q?null===W||W===ni||W===uo?ge=l.DEPTH24_STENCIL8:W===Ni?ge=l.DEPTH32F_STENCIL8:W===Vt&&(ge=l.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===W||W===ni||W===uo?ge=l.DEPTH_COMPONENT24:W===Ni?ge=l.DEPTH_COMPONENT32F:W===Vt&&(ge=l.DEPTH_COMPONENT16),ge}function q(Q,W){return!0===A(Q)||Q.isFramebufferTexture&&Q.minFilter!==Be&&Q.minFilter!==Fn?Math.log2(Math.max(W.width,W.height))+1:void 0!==Q.mipmaps&&Q.mipmaps.length>0?Q.mipmaps.length:Q.isCompressedTexture&&Array.isArray(Q.image)?W.mipmaps.length:1}function Y(Q){const W=Q.target;W.removeEventListener("dispose",Y),function J(Q){const W=n.get(Q);if(void 0===W.__webglInit)return;const ge=Q.source,He=M.get(ge);if(He){const Ze=He[W.__cacheKey];Ze.usedTimes--,0===Ze.usedTimes&&H(Q),0===Object.keys(He).length&&M.delete(ge)}n.remove(Q)}(W),W.isVideoTexture&&g.delete(W)}function Z(Q){const W=Q.target;W.removeEventListener("dispose",Z),function V(Q){const W=n.get(Q);if(Q.depthTexture&&(Q.depthTexture.dispose(),n.remove(Q.depthTexture)),Q.isWebGLCubeRenderTarget)for(let He=0;He<6;He++){if(Array.isArray(W.__webglFramebuffer[He]))for(let Ze=0;Ze<W.__webglFramebuffer[He].length;Ze++)l.deleteFramebuffer(W.__webglFramebuffer[He][Ze]);else l.deleteFramebuffer(W.__webglFramebuffer[He]);W.__webglDepthbuffer&&l.deleteRenderbuffer(W.__webglDepthbuffer[He])}else{if(Array.isArray(W.__webglFramebuffer))for(let He=0;He<W.__webglFramebuffer.length;He++)l.deleteFramebuffer(W.__webglFramebuffer[He]);else l.deleteFramebuffer(W.__webglFramebuffer);if(W.__webglDepthbuffer&&l.deleteRenderbuffer(W.__webglDepthbuffer),W.__webglMultisampledFramebuffer&&l.deleteFramebuffer(W.__webglMultisampledFramebuffer),W.__webglColorRenderbuffer)for(let He=0;He<W.__webglColorRenderbuffer.length;He++)W.__webglColorRenderbuffer[He]&&l.deleteRenderbuffer(W.__webglColorRenderbuffer[He]);W.__webglDepthRenderbuffer&&l.deleteRenderbuffer(W.__webglDepthRenderbuffer)}const ge=Q.textures;for(let He=0,Ze=ge.length;He<Ze;He++){const We=n.get(ge[He]);We.__webglTexture&&(l.deleteTexture(We.__webglTexture),c.memory.textures--),n.remove(ge[He])}n.remove(Q)}(W)}function H(Q){const W=n.get(Q);l.deleteTexture(W.__webglTexture),delete M.get(Q.source)[W.__cacheKey],c.memory.textures--}let se=0;function ze(Q,W){const ge=n.get(Q);if(Q.isVideoTexture&&function Ye(Q){const W=c.render.frame;g.get(Q)!==W&&(g.set(Q,W),Q.update())}(Q),!1===Q.isRenderTargetTexture&&Q.version>0&&ge.__version!==Q.version){const He=Q.image;if(null===He)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==He.complete)return void $e(ge,Q,W);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(l.TEXTURE_2D,ge.__webglTexture,l.TEXTURE0+W)}const Ct={[ae]:l.REPEAT,[he]:l.CLAMP_TO_EDGE,[et]:l.MIRRORED_REPEAT},kt={[Be]:l.NEAREST,[Et]:l.NEAREST_MIPMAP_NEAREST,[gi]:l.NEAREST_MIPMAP_LINEAR,[Fn]:l.LINEAR,[Cr]:l.LINEAR_MIPMAP_NEAREST,[le]:l.LINEAR_MIPMAP_LINEAR},Zt={[ks]:l.NEVER,[Tc]:l.ALWAYS,[Sf]:l.LESS,[Qi]:l.LEQUAL,[Gd]:l.EQUAL,[_s]:l.GEQUAL,[Wd]:l.GREATER,[Vl]:l.NOTEQUAL};function An(Q,W){if(W.type===Ni&&!1===e.has("OES_texture_float_linear")&&(W.magFilter===Fn||W.magFilter===Cr||W.magFilter===gi||W.magFilter===le||W.minFilter===Fn||W.minFilter===Cr||W.minFilter===gi||W.minFilter===le)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),l.texParameteri(Q,l.TEXTURE_WRAP_S,Ct[W.wrapS]),l.texParameteri(Q,l.TEXTURE_WRAP_T,Ct[W.wrapT]),(Q===l.TEXTURE_3D||Q===l.TEXTURE_2D_ARRAY)&&l.texParameteri(Q,l.TEXTURE_WRAP_R,Ct[W.wrapR]),l.texParameteri(Q,l.TEXTURE_MAG_FILTER,kt[W.magFilter]),l.texParameteri(Q,l.TEXTURE_MIN_FILTER,kt[W.minFilter]),W.compareFunction&&(l.texParameteri(Q,l.TEXTURE_COMPARE_MODE,l.COMPARE_REF_TO_TEXTURE),l.texParameteri(Q,l.TEXTURE_COMPARE_FUNC,Zt[W.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){if(W.magFilter===Be||W.minFilter!==gi&&W.minFilter!==le||W.type===Ni&&!1===e.has("OES_texture_float_linear"))return;if(W.anisotropy>1||n.get(W).__currentAnisotropy){const ge=e.get("EXT_texture_filter_anisotropic");l.texParameterf(Q,ge.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,r.getMaxAnisotropy())),n.get(W).__currentAnisotropy=W.anisotropy}}}function xi(Q,W){let ge=!1;void 0===Q.__webglInit&&(Q.__webglInit=!0,W.addEventListener("dispose",Y));const He=W.source;let Ze=M.get(He);void 0===Ze&&(Ze={},M.set(He,Ze));const We=function De(Q){const W=[];return W.push(Q.wrapS),W.push(Q.wrapT),W.push(Q.wrapR||0),W.push(Q.magFilter),W.push(Q.minFilter),W.push(Q.anisotropy),W.push(Q.internalFormat),W.push(Q.format),W.push(Q.type),W.push(Q.generateMipmaps),W.push(Q.premultiplyAlpha),W.push(Q.flipY),W.push(Q.unpackAlignment),W.push(Q.colorSpace),W.join()}(W);if(We!==Q.__cacheKey){void 0===Ze[We]&&(Ze[We]={texture:l.createTexture(),usedTimes:0},c.memory.textures++,ge=!0),Ze[We].usedTimes++;const an=Ze[Q.__cacheKey];void 0!==an&&(Ze[Q.__cacheKey].usedTimes--,0===an.usedTimes&&H(W)),Q.__cacheKey=We,Q.__webglTexture=Ze[We].texture}return ge}function $e(Q,W,ge){let He=l.TEXTURE_2D;(W.isDataArrayTexture||W.isCompressedArrayTexture)&&(He=l.TEXTURE_2D_ARRAY),W.isData3DTexture&&(He=l.TEXTURE_3D);const Ze=xi(Q,W),We=W.source;t.bindTexture(He,Q.__webglTexture,l.TEXTURE0+ge);const an=n.get(We);if(We.version!==an.__version||!0===Ze){t.activeTexture(l.TEXTURE0+ge);const Tt=I.getPrimaries(I.workingColorSpace),Jt=W.colorSpace===Lo?null:I.getPrimaries(W.colorSpace),li=W.colorSpace===Lo||Tt===Jt?l.NONE:l.BROWSER_DEFAULT_WEBGL;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,W.flipY),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),l.pixelStorei(l.UNPACK_ALIGNMENT,W.unpackAlignment),l.pixelStorei(l.UNPACK_COLORSPACE_CONVERSION_WEBGL,li);let vt=D(W.image,!1,r.maxTextureSize);vt=Ft(W,vt);const tn=o.convert(W.format,W.colorSpace),Ln=o.convert(W.type);let Qt,Un=N(W.internalFormat,tn,Ln,W.colorSpace,W.isVideoTexture);An(He,W);const fi=W.mipmaps,Jn=!0!==W.isVideoTexture,ir=void 0===an.__version||!0===Ze,pe=We.dataReady,Wt=q(W,vt);if(W.isDepthTexture)Un=O(W.format===Yo,W.type),ir&&(Jn?t.texStorage2D(l.TEXTURE_2D,1,Un,vt.width,vt.height):t.texImage2D(l.TEXTURE_2D,0,Un,vt.width,vt.height,0,tn,Ln,null));else if(W.isDataTexture)if(fi.length>0){Jn&&ir&&t.texStorage2D(l.TEXTURE_2D,Wt,Un,fi[0].width,fi[0].height);for(let Ve=0,at=fi.length;Ve<at;Ve++)Qt=fi[Ve],Jn?pe&&t.texSubImage2D(l.TEXTURE_2D,Ve,0,0,Qt.width,Qt.height,tn,Ln,Qt.data):t.texImage2D(l.TEXTURE_2D,Ve,Un,Qt.width,Qt.height,0,tn,Ln,Qt.data);W.generateMipmaps=!1}else Jn?(ir&&t.texStorage2D(l.TEXTURE_2D,Wt,Un,vt.width,vt.height),pe&&t.texSubImage2D(l.TEXTURE_2D,0,0,0,vt.width,vt.height,tn,Ln,vt.data)):t.texImage2D(l.TEXTURE_2D,0,Un,vt.width,vt.height,0,tn,Ln,vt.data);else if(W.isCompressedTexture)if(W.isCompressedArrayTexture){Jn&&ir&&t.texStorage3D(l.TEXTURE_2D_ARRAY,Wt,Un,fi[0].width,fi[0].height,vt.depth);for(let Ve=0,at=fi.length;Ve<at;Ve++)if(Qt=fi[Ve],W.format!==jr)if(null!==tn)if(Jn){if(pe)if(W.layerUpdates.size>0){const Xt=Og(Qt.width,Qt.height,W.format,W.type);for(const $t of W.layerUpdates){const qn=Qt.data.subarray($t*Xt/Qt.data.BYTES_PER_ELEMENT,($t+1)*Xt/Qt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(l.TEXTURE_2D_ARRAY,Ve,0,0,$t,Qt.width,Qt.height,1,tn,qn)}W.clearLayerUpdates()}else t.compressedTexSubImage3D(l.TEXTURE_2D_ARRAY,Ve,0,0,0,Qt.width,Qt.height,vt.depth,tn,Qt.data)}else t.compressedTexImage3D(l.TEXTURE_2D_ARRAY,Ve,Un,Qt.width,Qt.height,vt.depth,0,Qt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Jn?pe&&t.texSubImage3D(l.TEXTURE_2D_ARRAY,Ve,0,0,0,Qt.width,Qt.height,vt.depth,tn,Ln,Qt.data):t.texImage3D(l.TEXTURE_2D_ARRAY,Ve,Un,Qt.width,Qt.height,vt.depth,0,tn,Ln,Qt.data)}else{Jn&&ir&&t.texStorage2D(l.TEXTURE_2D,Wt,Un,fi[0].width,fi[0].height);for(let Ve=0,at=fi.length;Ve<at;Ve++)Qt=fi[Ve],W.format!==jr?null!==tn?Jn?pe&&t.compressedTexSubImage2D(l.TEXTURE_2D,Ve,0,0,Qt.width,Qt.height,tn,Qt.data):t.compressedTexImage2D(l.TEXTURE_2D,Ve,Un,Qt.width,Qt.height,0,Qt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Jn?pe&&t.texSubImage2D(l.TEXTURE_2D,Ve,0,0,Qt.width,Qt.height,tn,Ln,Qt.data):t.texImage2D(l.TEXTURE_2D,Ve,Un,Qt.width,Qt.height,0,tn,Ln,Qt.data)}else if(W.isDataArrayTexture)if(Jn){if(ir&&t.texStorage3D(l.TEXTURE_2D_ARRAY,Wt,Un,vt.width,vt.height,vt.depth),pe)if(W.layerUpdates.size>0){const Ve=Og(vt.width,vt.height,W.format,W.type);for(const at of W.layerUpdates){const Xt=vt.data.subarray(at*Ve/vt.data.BYTES_PER_ELEMENT,(at+1)*Ve/vt.data.BYTES_PER_ELEMENT);t.texSubImage3D(l.TEXTURE_2D_ARRAY,0,0,0,at,vt.width,vt.height,1,tn,Ln,Xt)}W.clearLayerUpdates()}else t.texSubImage3D(l.TEXTURE_2D_ARRAY,0,0,0,0,vt.width,vt.height,vt.depth,tn,Ln,vt.data)}else t.texImage3D(l.TEXTURE_2D_ARRAY,0,Un,vt.width,vt.height,vt.depth,0,tn,Ln,vt.data);else if(W.isData3DTexture)Jn?(ir&&t.texStorage3D(l.TEXTURE_3D,Wt,Un,vt.width,vt.height,vt.depth),pe&&t.texSubImage3D(l.TEXTURE_3D,0,0,0,0,vt.width,vt.height,vt.depth,tn,Ln,vt.data)):t.texImage3D(l.TEXTURE_3D,0,Un,vt.width,vt.height,vt.depth,0,tn,Ln,vt.data);else if(W.isFramebufferTexture){if(ir)if(Jn)t.texStorage2D(l.TEXTURE_2D,Wt,Un,vt.width,vt.height);else{let Ve=vt.width,at=vt.height;for(let Xt=0;Xt<Wt;Xt++)t.texImage2D(l.TEXTURE_2D,Xt,Un,Ve,at,0,tn,Ln,null),Ve>>=1,at>>=1}}else if(fi.length>0){if(Jn&&ir){const Ve=qe(fi[0]);t.texStorage2D(l.TEXTURE_2D,Wt,Un,Ve.width,Ve.height)}for(let Ve=0,at=fi.length;Ve<at;Ve++)Qt=fi[Ve],Jn?pe&&t.texSubImage2D(l.TEXTURE_2D,Ve,0,0,tn,Ln,Qt):t.texImage2D(l.TEXTURE_2D,Ve,Un,tn,Ln,Qt);W.generateMipmaps=!1}else if(Jn){if(ir){const Ve=qe(vt);t.texStorage2D(l.TEXTURE_2D,Wt,Un,Ve.width,Ve.height)}pe&&t.texSubImage2D(l.TEXTURE_2D,0,0,0,tn,Ln,vt)}else t.texImage2D(l.TEXTURE_2D,0,Un,tn,Ln,vt);A(W)&&T(He),an.__version=We.version,W.onUpdate&&W.onUpdate(W)}Q.__version=W.version}function cn(Q,W,ge,He,Ze,We){const an=o.convert(ge.format,ge.colorSpace),Tt=o.convert(ge.type),Jt=N(ge.internalFormat,an,Tt,ge.colorSpace),li=n.get(W),vt=n.get(ge);if(vt.__renderTarget=W,!li.__hasExternalTextures){const tn=Math.max(1,W.width>>We),Ln=Math.max(1,W.height>>We);Ze===l.TEXTURE_3D||Ze===l.TEXTURE_2D_ARRAY?t.texImage3D(Ze,We,Jt,tn,Ln,W.depth,0,an,Tt,null):t.texImage2D(Ze,We,Jt,tn,Ln,0,an,Tt,null)}t.bindFramebuffer(l.FRAMEBUFFER,Q),ut(W)?d.framebufferTexture2DMultisampleEXT(l.FRAMEBUFFER,He,Ze,vt.__webglTexture,0,rt(W)):(Ze===l.TEXTURE_2D||Ze>=l.TEXTURE_CUBE_MAP_POSITIVE_X&&Ze<=l.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&l.framebufferTexture2D(l.FRAMEBUFFER,He,Ze,vt.__webglTexture,We),t.bindFramebuffer(l.FRAMEBUFFER,null)}function Nt(Q,W,ge){if(l.bindRenderbuffer(l.RENDERBUFFER,Q),W.depthBuffer){const He=W.depthTexture,We=O(W.stencilBuffer,He&&He.isDepthTexture?He.type:null),an=W.stencilBuffer?l.DEPTH_STENCIL_ATTACHMENT:l.DEPTH_ATTACHMENT,Tt=rt(W);ut(W)?d.renderbufferStorageMultisampleEXT(l.RENDERBUFFER,Tt,We,W.width,W.height):ge?l.renderbufferStorageMultisample(l.RENDERBUFFER,Tt,We,W.width,W.height):l.renderbufferStorage(l.RENDERBUFFER,We,W.width,W.height),l.framebufferRenderbuffer(l.FRAMEBUFFER,an,l.RENDERBUFFER,Q)}else{const He=W.textures;for(let Ze=0;Ze<He.length;Ze++){const We=He[Ze],an=o.convert(We.format,We.colorSpace),Tt=o.convert(We.type),Jt=N(We.internalFormat,an,Tt,We.colorSpace),li=rt(W);ge&&!1===ut(W)?l.renderbufferStorageMultisample(l.RENDERBUFFER,li,Jt,W.width,W.height):ut(W)?d.renderbufferStorageMultisampleEXT(l.RENDERBUFFER,li,Jt,W.width,W.height):l.renderbufferStorage(l.RENDERBUFFER,Jt,W.width,W.height)}}l.bindRenderbuffer(l.RENDERBUFFER,null)}function hi(Q){const W=n.get(Q),ge=!0===Q.isWebGLCubeRenderTarget;if(W.__boundDepthTexture!==Q.depthTexture){const He=Q.depthTexture;if(W.__depthDisposeCallback&&W.__depthDisposeCallback(),He){const Ze=()=>{delete W.__boundDepthTexture,delete W.__depthDisposeCallback,He.removeEventListener("dispose",Ze)};He.addEventListener("dispose",Ze),W.__depthDisposeCallback=Ze}W.__boundDepthTexture=He}if(Q.depthTexture&&!W.__autoAllocateDepthBuffer){if(ge)throw new Error("target.depthTexture not supported in Cube render targets");!function Dn(Q,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(l.FRAMEBUFFER,Q),!W.depthTexture||!W.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const He=n.get(W.depthTexture);He.__renderTarget=W,(!He.__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),ze(W.depthTexture,0);const Ze=He.__webglTexture,We=rt(W);if(W.depthTexture.format===al)ut(W)?d.framebufferTexture2DMultisampleEXT(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.TEXTURE_2D,Ze,0,We):l.framebufferTexture2D(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.TEXTURE_2D,Ze,0);else{if(W.depthTexture.format!==Yo)throw new Error("Unknown depthTexture format");ut(W)?d.framebufferTexture2DMultisampleEXT(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.TEXTURE_2D,Ze,0,We):l.framebufferTexture2D(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.TEXTURE_2D,Ze,0)}}(W.__webglFramebuffer,Q)}else if(ge){W.__webglDepthbuffer=[];for(let He=0;He<6;He++)if(t.bindFramebuffer(l.FRAMEBUFFER,W.__webglFramebuffer[He]),void 0===W.__webglDepthbuffer[He])W.__webglDepthbuffer[He]=l.createRenderbuffer(),Nt(W.__webglDepthbuffer[He],Q,!1);else{const Ze=Q.stencilBuffer?l.DEPTH_STENCIL_ATTACHMENT:l.DEPTH_ATTACHMENT,We=W.__webglDepthbuffer[He];l.bindRenderbuffer(l.RENDERBUFFER,We),l.framebufferRenderbuffer(l.FRAMEBUFFER,Ze,l.RENDERBUFFER,We)}}else if(t.bindFramebuffer(l.FRAMEBUFFER,W.__webglFramebuffer),void 0===W.__webglDepthbuffer)W.__webglDepthbuffer=l.createRenderbuffer(),Nt(W.__webglDepthbuffer,Q,!1);else{const He=Q.stencilBuffer?l.DEPTH_STENCIL_ATTACHMENT:l.DEPTH_ATTACHMENT,Ze=W.__webglDepthbuffer;l.bindRenderbuffer(l.RENDERBUFFER,Ze),l.framebufferRenderbuffer(l.FRAMEBUFFER,He,l.RENDERBUFFER,Ze)}t.bindFramebuffer(l.FRAMEBUFFER,null)}const ai=[],ce=[];function rt(Q){return Math.min(r.maxSamples,Q.samples)}function ut(Q){const W=n.get(Q);return Q.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==W.__useRenderToTexture}function Ft(Q,W){const ge=Q.colorSpace,He=Q.format,Ze=Q.type;return!0===Q.isCompressedTexture||!0===Q.isVideoTexture||ge!==Ra&&ge!==Lo&&(I.getTransfer(ge)===ii?(He!==jr||Ze!==fe)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ge)),W}function qe(Q){return typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement?(p.width=Q.naturalWidth||Q.width,p.height=Q.naturalHeight||Q.height):typeof VideoFrame<"u"&&Q instanceof VideoFrame?(p.width=Q.displayWidth,p.height=Q.displayHeight):(p.width=Q.width,p.height=Q.height),p}this.allocateTextureUnit=function xe(){const Q=se;return Q>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Q+" texture units while this GPU supports only "+r.maxTextures),se+=1,Q},this.resetTextureUnits=function Me(){se=0},this.setTexture2D=ze,this.setTexture2DArray=function Te(Q,W){const ge=n.get(Q);Q.version>0&&ge.__version!==Q.version?$e(ge,Q,W):t.bindTexture(l.TEXTURE_2D_ARRAY,ge.__webglTexture,l.TEXTURE0+W)},this.setTexture3D=function tt(Q,W){const ge=n.get(Q);Q.version>0&&ge.__version!==Q.version?$e(ge,Q,W):t.bindTexture(l.TEXTURE_3D,ge.__webglTexture,l.TEXTURE0+W)},this.setTextureCube=function Oe(Q,W){const ge=n.get(Q);Q.version>0&&ge.__version!==Q.version?function pt(Q,W,ge){if(6!==W.image.length)return;const He=xi(Q,W),Ze=W.source;t.bindTexture(l.TEXTURE_CUBE_MAP,Q.__webglTexture,l.TEXTURE0+ge);const We=n.get(Ze);if(Ze.version!==We.__version||!0===He){t.activeTexture(l.TEXTURE0+ge);const an=I.getPrimaries(I.workingColorSpace),Tt=W.colorSpace===Lo?null:I.getPrimaries(W.colorSpace),Jt=W.colorSpace===Lo||an===Tt?l.NONE:l.BROWSER_DEFAULT_WEBGL;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,W.flipY),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),l.pixelStorei(l.UNPACK_ALIGNMENT,W.unpackAlignment),l.pixelStorei(l.UNPACK_COLORSPACE_CONVERSION_WEBGL,Jt);const li=W.isCompressedTexture||W.image[0].isCompressedTexture,vt=W.image[0]&&W.image[0].isDataTexture,tn=[];for(let at=0;at<6;at++)tn[at]=li||vt?vt?W.image[at].image:W.image[at]:D(W.image[at],!0,r.maxCubemapSize),tn[at]=Ft(W,tn[at]);const Ln=tn[0],Un=o.convert(W.format,W.colorSpace),Qt=o.convert(W.type),fi=N(W.internalFormat,Un,Qt,W.colorSpace),Jn=!0!==W.isVideoTexture,ir=void 0===We.__version||!0===He,pe=Ze.dataReady;let Ve,Wt=q(W,Ln);if(An(l.TEXTURE_CUBE_MAP,W),li){Jn&&ir&&t.texStorage2D(l.TEXTURE_CUBE_MAP,Wt,fi,Ln.width,Ln.height);for(let at=0;at<6;at++){Ve=tn[at].mipmaps;for(let Xt=0;Xt<Ve.length;Xt++){const $t=Ve[Xt];W.format!==jr?null!==Un?Jn?pe&&t.compressedTexSubImage2D(l.TEXTURE_CUBE_MAP_POSITIVE_X+at,Xt,0,0,$t.width,$t.height,Un,$t.data):t.compressedTexImage2D(l.TEXTURE_CUBE_MAP_POSITIVE_X+at,Xt,fi,$t.width,$t.height,0,$t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Jn?pe&&t.texSubImage2D(l.TEXTURE_CUBE_MAP_POSITIVE_X+at,Xt,0,0,$t.width,$t.height,Un,Qt,$t.data):t.texImage2D(l.TEXTURE_CUBE_MAP_POSITIVE_X+at,Xt,fi,$t.width,$t.height,0,Un,Qt,$t.data)}}}else{if(Ve=W.mipmaps,Jn&&ir){Ve.length>0&&Wt++;const at=qe(tn[0]);t.texStorage2D(l.TEXTURE_CUBE_MAP,Wt,fi,at.width,at.height)}for(let at=0;at<6;at++)if(vt){Jn?pe&&t.texSubImage2D(l.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,0,0,tn[at].width,tn[at].height,Un,Qt,tn[at].data):t.texImage2D(l.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,fi,tn[at].width,tn[at].height,0,Un,Qt,tn[at].data);for(let Xt=0;Xt<Ve.length;Xt++){const qn=Ve[Xt].image[at].image;Jn?pe&&t.texSubImage2D(l.TEXTURE_CUBE_MAP_POSITIVE_X+at,Xt+1,0,0,qn.width,qn.height,Un,Qt,qn.data):t.texImage2D(l.TEXTURE_CUBE_MAP_POSITIVE_X+at,Xt+1,fi,qn.width,qn.height,0,Un,Qt,qn.data)}}else{Jn?pe&&t.texSubImage2D(l.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,0,0,Un,Qt,tn[at]):t.texImage2D(l.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,fi,Un,Qt,tn[at]);for(let Xt=0;Xt<Ve.length;Xt++){const $t=Ve[Xt];Jn?pe&&t.texSubImage2D(l.TEXTURE_CUBE_MAP_POSITIVE_X+at,Xt+1,0,0,Un,Qt,$t.image[at]):t.texImage2D(l.TEXTURE_CUBE_MAP_POSITIVE_X+at,Xt+1,fi,Un,Qt,$t.image[at])}}}A(W)&&T(l.TEXTURE_CUBE_MAP),We.__version=Ze.version,W.onUpdate&&W.onUpdate(W)}Q.__version=W.version}(ge,Q,W):t.bindTexture(l.TEXTURE_CUBE_MAP,ge.__webglTexture,l.TEXTURE0+W)},this.rebindTextures=function Mn(Q,W,ge){const He=n.get(Q);void 0!==W&&cn(He.__webglFramebuffer,Q,Q.texture,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,0),void 0!==ge&&hi(Q)},this.setupRenderTarget=function Di(Q){const W=Q.texture,ge=n.get(Q),He=n.get(W);Q.addEventListener("dispose",Z);const Ze=Q.textures,We=!0===Q.isWebGLCubeRenderTarget,an=Ze.length>1;if(an||(void 0===He.__webglTexture&&(He.__webglTexture=l.createTexture()),He.__version=W.version,c.memory.textures++),We){ge.__webglFramebuffer=[];for(let Tt=0;Tt<6;Tt++)if(W.mipmaps&&W.mipmaps.length>0){ge.__webglFramebuffer[Tt]=[];for(let Jt=0;Jt<W.mipmaps.length;Jt++)ge.__webglFramebuffer[Tt][Jt]=l.createFramebuffer()}else ge.__webglFramebuffer[Tt]=l.createFramebuffer()}else{if(W.mipmaps&&W.mipmaps.length>0){ge.__webglFramebuffer=[];for(let Tt=0;Tt<W.mipmaps.length;Tt++)ge.__webglFramebuffer[Tt]=l.createFramebuffer()}else ge.__webglFramebuffer=l.createFramebuffer();if(an)for(let Tt=0,Jt=Ze.length;Tt<Jt;Tt++){const li=n.get(Ze[Tt]);void 0===li.__webglTexture&&(li.__webglTexture=l.createTexture(),c.memory.textures++)}if(Q.samples>0&&!1===ut(Q)){ge.__webglMultisampledFramebuffer=l.createFramebuffer(),ge.__webglColorRenderbuffer=[],t.bindFramebuffer(l.FRAMEBUFFER,ge.__webglMultisampledFramebuffer);for(let Tt=0;Tt<Ze.length;Tt++){const Jt=Ze[Tt];ge.__webglColorRenderbuffer[Tt]=l.createRenderbuffer(),l.bindRenderbuffer(l.RENDERBUFFER,ge.__webglColorRenderbuffer[Tt]);const li=o.convert(Jt.format,Jt.colorSpace),vt=o.convert(Jt.type),tn=N(Jt.internalFormat,li,vt,Jt.colorSpace,!0===Q.isXRRenderTarget),Ln=rt(Q);l.renderbufferStorageMultisample(l.RENDERBUFFER,Ln,tn,Q.width,Q.height),l.framebufferRenderbuffer(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0+Tt,l.RENDERBUFFER,ge.__webglColorRenderbuffer[Tt])}l.bindRenderbuffer(l.RENDERBUFFER,null),Q.depthBuffer&&(ge.__webglDepthRenderbuffer=l.createRenderbuffer(),Nt(ge.__webglDepthRenderbuffer,Q,!0)),t.bindFramebuffer(l.FRAMEBUFFER,null)}}if(We){t.bindTexture(l.TEXTURE_CUBE_MAP,He.__webglTexture),An(l.TEXTURE_CUBE_MAP,W);for(let Tt=0;Tt<6;Tt++)if(W.mipmaps&&W.mipmaps.length>0)for(let Jt=0;Jt<W.mipmaps.length;Jt++)cn(ge.__webglFramebuffer[Tt][Jt],Q,W,l.COLOR_ATTACHMENT0,l.TEXTURE_CUBE_MAP_POSITIVE_X+Tt,Jt);else cn(ge.__webglFramebuffer[Tt],Q,W,l.COLOR_ATTACHMENT0,l.TEXTURE_CUBE_MAP_POSITIVE_X+Tt,0);A(W)&&T(l.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(an){for(let Tt=0,Jt=Ze.length;Tt<Jt;Tt++){const li=Ze[Tt],vt=n.get(li);t.bindTexture(l.TEXTURE_2D,vt.__webglTexture),An(l.TEXTURE_2D,li),cn(ge.__webglFramebuffer,Q,li,l.COLOR_ATTACHMENT0+Tt,l.TEXTURE_2D,0),A(li)&&T(l.TEXTURE_2D)}t.unbindTexture()}else{let Tt=l.TEXTURE_2D;if((Q.isWebGL3DRenderTarget||Q.isWebGLArrayRenderTarget)&&(Tt=Q.isWebGL3DRenderTarget?l.TEXTURE_3D:l.TEXTURE_2D_ARRAY),t.bindTexture(Tt,He.__webglTexture),An(Tt,W),W.mipmaps&&W.mipmaps.length>0)for(let Jt=0;Jt<W.mipmaps.length;Jt++)cn(ge.__webglFramebuffer[Jt],Q,W,l.COLOR_ATTACHMENT0,Tt,Jt);else cn(ge.__webglFramebuffer,Q,W,l.COLOR_ATTACHMENT0,Tt,0);A(W)&&T(Tt),t.unbindTexture()}Q.depthBuffer&&hi(Q)},this.updateRenderTargetMipmap=function qi(Q){const W=Q.textures;for(let ge=0,He=W.length;ge<He;ge++){const Ze=W[ge];if(A(Ze)){const We=U(Q),an=n.get(Ze).__webglTexture;t.bindTexture(We,an),T(We),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Fr(Q){if(Q.samples>0)if(!1===ut(Q)){const W=Q.textures,ge=Q.width,He=Q.height;let Ze=l.COLOR_BUFFER_BIT;const We=Q.stencilBuffer?l.DEPTH_STENCIL_ATTACHMENT:l.DEPTH_ATTACHMENT,an=n.get(Q),Tt=W.length>1;if(Tt)for(let Jt=0;Jt<W.length;Jt++)t.bindFramebuffer(l.FRAMEBUFFER,an.__webglMultisampledFramebuffer),l.framebufferRenderbuffer(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0+Jt,l.RENDERBUFFER,null),t.bindFramebuffer(l.FRAMEBUFFER,an.__webglFramebuffer),l.framebufferTexture2D(l.DRAW_FRAMEBUFFER,l.COLOR_ATTACHMENT0+Jt,l.TEXTURE_2D,null,0);t.bindFramebuffer(l.READ_FRAMEBUFFER,an.__webglMultisampledFramebuffer),t.bindFramebuffer(l.DRAW_FRAMEBUFFER,an.__webglFramebuffer);for(let Jt=0;Jt<W.length;Jt++){if(Q.resolveDepthBuffer&&(Q.depthBuffer&&(Ze|=l.DEPTH_BUFFER_BIT),Q.stencilBuffer&&Q.resolveStencilBuffer&&(Ze|=l.STENCIL_BUFFER_BIT)),Tt){l.framebufferRenderbuffer(l.READ_FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.RENDERBUFFER,an.__webglColorRenderbuffer[Jt]);const li=n.get(W[Jt]).__webglTexture;l.framebufferTexture2D(l.DRAW_FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,li,0)}l.blitFramebuffer(0,0,ge,He,0,0,ge,He,Ze,l.NEAREST),!0===f&&(ai.length=0,ce.length=0,ai.push(l.COLOR_ATTACHMENT0+Jt),Q.depthBuffer&&!1===Q.resolveDepthBuffer&&(ai.push(We),ce.push(We),l.invalidateFramebuffer(l.DRAW_FRAMEBUFFER,ce)),l.invalidateFramebuffer(l.READ_FRAMEBUFFER,ai))}if(t.bindFramebuffer(l.READ_FRAMEBUFFER,null),t.bindFramebuffer(l.DRAW_FRAMEBUFFER,null),Tt)for(let Jt=0;Jt<W.length;Jt++){t.bindFramebuffer(l.FRAMEBUFFER,an.__webglMultisampledFramebuffer),l.framebufferRenderbuffer(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0+Jt,l.RENDERBUFFER,an.__webglColorRenderbuffer[Jt]);const li=n.get(W[Jt]).__webglTexture;t.bindFramebuffer(l.FRAMEBUFFER,an.__webglFramebuffer),l.framebufferTexture2D(l.DRAW_FRAMEBUFFER,l.COLOR_ATTACHMENT0+Jt,l.TEXTURE_2D,li,0)}t.bindFramebuffer(l.DRAW_FRAMEBUFFER,an.__webglMultisampledFramebuffer)}else Q.depthBuffer&&!1===Q.resolveDepthBuffer&&f&&l.invalidateFramebuffer(l.DRAW_FRAMEBUFFER,[Q.stencilBuffer?l.DEPTH_STENCIL_ATTACHMENT:l.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=hi,this.setupFrameBufferTexture=cn,this.useMultisampledRTT=ut}function Tb(l,e){return{convert:function t(n,r=Lo){let o;const c=I.getTransfer(r);if(n===fe)return l.UNSIGNED_BYTE;if(n===Ol)return l.UNSIGNED_SHORT_4_4_4_4;if(n===Ls)return l.UNSIGNED_SHORT_5_5_5_1;if(n===Nl)return l.UNSIGNED_INT_5_9_9_9_REV;if(n===Fe)return l.BYTE;if(n===St)return l.SHORT;if(n===Vt)return l.UNSIGNED_SHORT;if(n===rn)return l.INT;if(n===ni)return l.UNSIGNED_INT;if(n===Ni)return l.FLOAT;if(n===fs)return l.HALF_FLOAT;if(n===sl)return l.ALPHA;if(n===ol)return l.RGB;if(n===jr)return l.RGBA;if(n===Zs)return l.LUMINANCE;if(n===Do)return l.LUMINANCE_ALPHA;if(n===al)return l.DEPTH_COMPONENT;if(n===Yo)return l.DEPTH_STENCIL;if(n===Fl)return l.RED;if(n===ll)return l.RED_INTEGER;if(n===$n)return l.RG;if(n===Fi)return l.RG_INTEGER;if(n===ho)return l.RGBA_INTEGER;if(n===hr||n===qo||n===Ks||n===Io)if(c===ii){if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(n===hr)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===qo)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Ks)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Io)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=e.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(n===hr)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===qo)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Ks)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Io)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===ps||n===Lt||n===En||n===wi){if(o=e.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(n===ps)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Lt)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===En)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===wi)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===rr||n===Os||n===$i){if(o=e.get("WEBGL_compressed_texture_etc"),null===o)return null;if(n===rr||n===Os)return c===ii?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===$i)return c===ii?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(n===Ro||n===Ii||n===Ea||n===Ns||n===fn||n===Ca||n===ts||n===Ta||n===Zi||n===Ji||n===Zo||n===Po||n===ms||n===Ko){if(o=e.get("WEBGL_compressed_texture_astc"),null===o)return null;if(n===Ro)return c===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Ii)return c===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Ea)return c===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Ns)return c===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===fn)return c===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Ca)return c===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===ts)return c===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Ta)return c===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Zi)return c===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Ji)return c===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Zo)return c===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Po)return c===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===ms)return c===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Ko)return c===ii?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===cl||n===_i||n===mu){if(o=e.get("EXT_texture_compression_bptc"),null===o)return null;if(n===cl)return c===ii?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===_i)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===mu)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===Ul||n===kl||n===Aa||n===Da){if(o=e.get("EXT_texture_compression_rgtc"),null===o)return null;if(n===cl)return o.COMPRESSED_RED_RGTC1_EXT;if(n===kl)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Aa)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Da)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===uo?l.UNSIGNED_INT_24_8:void 0!==l[n]?l[n]:null}}}class z0{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(null===this.texture){const r=new jn;e.properties.get(r).__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,n=new ma({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Zr(new Ah(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Ab extends fo{constructor(e,t){super();const n=this;let r=null,o=1,c=null,d="local-floor",f=1,p=null,g=null,y=null,M=null,S=null,C=null;const D=new z0,A=t.getContextAttributes();let T=null,U=null;const N=[],O=[],q=new it;let Y=null;const Z=new as;Z.viewport=new qt;const J=new as;J.viewport=new qt;const H=[Z,J],V=new bg;let se=null,Me=null;function xe($e){const pt=O.indexOf($e.inputSource);if(-1===pt)return;const cn=N[pt];void 0!==cn&&(cn.update($e.inputSource,$e.frame,p||c),cn.dispatchEvent({type:$e.type,data:$e.inputSource}))}function De(){r.removeEventListener("select",xe),r.removeEventListener("selectstart",xe),r.removeEventListener("selectend",xe),r.removeEventListener("squeeze",xe),r.removeEventListener("squeezestart",xe),r.removeEventListener("squeezeend",xe),r.removeEventListener("end",De),r.removeEventListener("inputsourceschange",ze);for(let $e=0;$e<N.length;$e++){const pt=O[$e];null!==pt&&(O[$e]=null,N[$e].disconnect(pt))}se=null,Me=null,D.reset(),e.setRenderTarget(T),S=null,M=null,y=null,r=null,U=null,xi.stop(),n.isPresenting=!1,e.setPixelRatio(Y),e.setSize(q.width,q.height,!1),n.dispatchEvent({type:"sessionend"})}function ze($e){for(let pt=0;pt<$e.removed.length;pt++){const cn=$e.removed[pt],Nt=O.indexOf(cn);Nt>=0&&(O[Nt]=null,N[Nt].disconnect(cn))}for(let pt=0;pt<$e.added.length;pt++){const cn=$e.added[pt];let Nt=O.indexOf(cn);if(-1===Nt){for(let hi=0;hi<N.length;hi++){if(hi>=O.length){O.push(cn),Nt=hi;break}if(null===O[hi]){O[hi]=cn,Nt=hi;break}}if(-1===Nt)break}const Dn=N[Nt];Dn&&Dn.connect(cn)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function($e){let pt=N[$e];return void 0===pt&&(pt=new Df,N[$e]=pt),pt.getTargetRaySpace()},this.getControllerGrip=function($e){let pt=N[$e];return void 0===pt&&(pt=new Df,N[$e]=pt),pt.getGripSpace()},this.getHand=function($e){let pt=N[$e];return void 0===pt&&(pt=new Df,N[$e]=pt),pt.getHandSpace()},this.setFramebufferScaleFactor=function($e){o=$e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function($e){d=$e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||c},this.setReferenceSpace=function($e){p=$e},this.getBaseLayer=function(){return null!==M?M:S},this.getBinding=function(){return y},this.getFrame=function(){return C},this.getSession=function(){return r},this.setSession=function(){var $e=kM(function*(pt){if(r=pt,null!==r){if(T=e.getRenderTarget(),r.addEventListener("select",xe),r.addEventListener("selectstart",xe),r.addEventListener("selectend",xe),r.addEventListener("squeeze",xe),r.addEventListener("squeezestart",xe),r.addEventListener("squeezeend",xe),r.addEventListener("end",De),r.addEventListener("inputsourceschange",ze),!0!==A.xrCompatible&&(yield t.makeXRCompatible()),Y=e.getPixelRatio(),e.getSize(q),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Nt=null,Dn=null,hi=null;A.depth&&(hi=A.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Nt=A.stencil?Yo:al,Dn=A.stencil?uo:ni);const Mn={colorFormat:t.RGBA8,depthFormat:hi,scaleFactor:o};y=new XRWebGLBinding(r,t),M=y.createProjectionLayer(Mn),r.updateRenderState({layers:[M]}),e.setPixelRatio(1),e.setSize(M.textureWidth,M.textureHeight,!1),U=new si(M.textureWidth,M.textureHeight,{format:jr,type:fe,depthTexture:new vy(M.textureWidth,M.textureHeight,Dn,void 0,void 0,void 0,void 0,void 0,void 0,Nt),stencilBuffer:A.stencil,colorSpace:e.outputColorSpace,samples:A.antialias?4:0,resolveDepthBuffer:!1===M.ignoreDepthValues,resolveStencilBuffer:!1===M.ignoreDepthValues})}else S=new XRWebGLLayer(r,t,{antialias:A.antialias,alpha:!0,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:o}),r.updateRenderState({baseLayer:S}),e.setPixelRatio(1),e.setSize(S.framebufferWidth,S.framebufferHeight,!1),U=new si(S.framebufferWidth,S.framebufferHeight,{format:jr,type:fe,colorSpace:e.outputColorSpace,stencilBuffer:A.stencil,resolveDepthBuffer:!1===S.ignoreDepthValues,resolveStencilBuffer:!1===S.ignoreDepthValues});U.isXRRenderTarget=!0,this.setFoveation(f),p=null,c=yield r.requestReferenceSpace(d),xi.setContext(r),xi.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(pt){return $e.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return D.getDepthTexture()};const Te=new ne,tt=new ne;function Ct($e,pt){null===pt?$e.matrixWorld.copy($e.matrix):$e.matrixWorld.multiplyMatrices(pt.matrixWorld,$e.matrix),$e.matrixWorldInverse.copy($e.matrixWorld).invert()}this.updateCamera=function($e){if(null===r)return;let pt=$e.near,cn=$e.far;null!==D.texture&&(D.depthNear>0&&(pt=D.depthNear),D.depthFar>0&&(cn=D.depthFar)),V.near=J.near=Z.near=pt,V.far=J.far=Z.far=cn,(se!==V.near||Me!==V.far)&&(r.updateRenderState({depthNear:V.near,depthFar:V.far}),se=V.near,Me=V.far),Z.layers.mask=2|$e.layers.mask,J.layers.mask=4|$e.layers.mask,V.layers.mask=Z.layers.mask|J.layers.mask;const Nt=$e.parent,Dn=V.cameras;Ct(V,Nt);for(let hi=0;hi<Dn.length;hi++)Ct(Dn[hi],Nt);2===Dn.length?function Oe($e,pt,cn){Te.setFromMatrixPosition(pt.matrixWorld),tt.setFromMatrixPosition(cn.matrixWorld);const Nt=Te.distanceTo(tt),Dn=pt.projectionMatrix.elements,hi=cn.projectionMatrix.elements,Mn=Dn[14]/(Dn[10]-1),Di=Dn[14]/(Dn[10]+1),qi=(Dn[9]+1)/Dn[5],ai=(Dn[9]-1)/Dn[5],ce=(Dn[8]-1)/Dn[0],Fr=(hi[8]+1)/hi[0],rt=Mn*ce,ut=Mn*Fr,Ye=Nt/(-ce+Fr),Ft=Ye*-ce;if(pt.matrixWorld.decompose($e.position,$e.quaternion,$e.scale),$e.translateX(Ft),$e.translateZ(Ye),$e.matrixWorld.compose($e.position,$e.quaternion,$e.scale),$e.matrixWorldInverse.copy($e.matrixWorld).invert(),-1===Dn[10])$e.projectionMatrix.copy(pt.projectionMatrix),$e.projectionMatrixInverse.copy(pt.projectionMatrixInverse);else{const qe=Mn+Ye,Q=Di+Ye;$e.projectionMatrix.makePerspective(rt-Ft,ut+(Nt-Ft),qi*Di/Q*qe,ai*Di/Q*qe,qe,Q),$e.projectionMatrixInverse.copy($e.projectionMatrix).invert()}}(V,Z,J):V.projectionMatrix.copy(Z.projectionMatrix),function kt($e,pt,cn){null===cn?$e.matrix.copy(pt.matrixWorld):($e.matrix.copy(cn.matrixWorld),$e.matrix.invert(),$e.matrix.multiply(pt.matrixWorld)),$e.matrix.decompose($e.position,$e.quaternion,$e.scale),$e.updateMatrixWorld(!0),$e.projectionMatrix.copy(pt.projectionMatrix),$e.projectionMatrixInverse.copy(pt.projectionMatrixInverse),$e.isPerspectiveCamera&&($e.fov=2*Xe*Math.atan(1/$e.projectionMatrix.elements[5]),$e.zoom=1)}($e,V,Nt)},this.getCamera=function(){return V},this.getFoveation=function(){if(null!==M||null!==S)return f},this.setFoveation=function($e){f=$e,null!==M&&(M.fixedFoveation=$e),null!==S&&void 0!==S.fixedFoveation&&(S.fixedFoveation=$e)},this.hasDepthSensing=function(){return null!==D.texture},this.getDepthSensingMesh=function(){return D.getMesh(V)};let Zt=null;const xi=new Ng;xi.setAnimationLoop(function An($e,pt){if(g=pt.getViewerPose(p||c),C=pt,null!==g){const cn=g.views;null!==S&&(e.setRenderTargetFramebuffer(U,S.framebuffer),e.setRenderTarget(U));let Nt=!1;cn.length!==V.cameras.length&&(V.cameras.length=0,Nt=!0);for(let Mn=0;Mn<cn.length;Mn++){const Di=cn[Mn];let qi=null;if(null!==S)qi=S.getViewport(Di);else{const ce=y.getViewSubImage(M,Di);qi=ce.viewport,0===Mn&&(e.setRenderTargetTextures(U,ce.colorTexture,ce.depthStencilTexture),e.setRenderTarget(U))}let ai=H[Mn];void 0===ai&&(ai=new as,ai.layers.enable(Mn),ai.viewport=new qt,H[Mn]=ai),ai.matrix.fromArray(Di.transform.matrix),ai.matrix.decompose(ai.position,ai.quaternion,ai.scale),ai.projectionMatrix.fromArray(Di.projectionMatrix),ai.projectionMatrixInverse.copy(ai.projectionMatrix).invert(),ai.viewport.set(qi.x,qi.y,qi.width,qi.height),0===Mn&&(V.matrix.copy(ai.matrix),V.matrix.decompose(V.position,V.quaternion,V.scale)),!0===Nt&&V.cameras.push(ai)}const Dn=r.enabledFeatures;if(Dn&&Dn.includes("depth-sensing")&&"gpu-optimized"==r.depthUsage&&y){const Mn=y.getDepthInformation(cn[0]);Mn&&Mn.isValid&&Mn.texture&&D.init(e,Mn,r.renderState)}}for(let cn=0;cn<N.length;cn++){const Nt=O[cn],Dn=N[cn];null!==Nt&&void 0!==Dn&&Dn.update(Nt,pt,p||c)}Zt&&Zt($e,pt),pt.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:pt}),C=null}),this.setAnimationLoop=function($e){Zt=$e},this.dispose=function(){}}}const au=new Ms,yE=new yn;function Db(l,e){function t(A,T){!0===A.matrixAutoUpdate&&A.updateMatrix(),T.value.copy(A.matrix)}function o(A,T){A.opacity.value=T.opacity,T.color&&A.diffuse.value.copy(T.color),T.emissive&&A.emissive.value.copy(T.emissive).multiplyScalar(T.emissiveIntensity),T.map&&(A.map.value=T.map,t(T.map,A.mapTransform)),T.alphaMap&&(A.alphaMap.value=T.alphaMap,t(T.alphaMap,A.alphaMapTransform)),T.bumpMap&&(A.bumpMap.value=T.bumpMap,t(T.bumpMap,A.bumpMapTransform),A.bumpScale.value=T.bumpScale,T.side===gn&&(A.bumpScale.value*=-1)),T.normalMap&&(A.normalMap.value=T.normalMap,t(T.normalMap,A.normalMapTransform),A.normalScale.value.copy(T.normalScale),T.side===gn&&A.normalScale.value.negate()),T.displacementMap&&(A.displacementMap.value=T.displacementMap,t(T.displacementMap,A.displacementMapTransform),A.displacementScale.value=T.displacementScale,A.displacementBias.value=T.displacementBias),T.emissiveMap&&(A.emissiveMap.value=T.emissiveMap,t(T.emissiveMap,A.emissiveMapTransform)),T.specularMap&&(A.specularMap.value=T.specularMap,t(T.specularMap,A.specularMapTransform)),T.alphaTest>0&&(A.alphaTest.value=T.alphaTest);const U=e.get(T),N=U.envMap,O=U.envMapRotation;N&&(A.envMap.value=N,au.copy(O),au.x*=-1,au.y*=-1,au.z*=-1,N.isCubeTexture&&!1===N.isRenderTargetTexture&&(au.y*=-1,au.z*=-1),A.envMapRotation.value.setFromMatrix4(yE.makeRotationFromEuler(au)),A.flipEnvMap.value=N.isCubeTexture&&!1===N.isRenderTargetTexture?-1:1,A.reflectivity.value=T.reflectivity,A.ior.value=T.ior,A.refractionRatio.value=T.refractionRatio),T.lightMap&&(A.lightMap.value=T.lightMap,A.lightMapIntensity.value=T.lightMapIntensity,t(T.lightMap,A.lightMapTransform)),T.aoMap&&(A.aoMap.value=T.aoMap,A.aoMapIntensity.value=T.aoMapIntensity,t(T.aoMap,A.aoMapTransform))}return{refreshFogUniforms:function n(A,T){T.color.getRGB(A.fogColor.value,Rx(l)),T.isFog?(A.fogNear.value=T.near,A.fogFar.value=T.far):T.isFogExp2&&(A.fogDensity.value=T.density)},refreshMaterialUniforms:function r(A,T,U,N,O){T.isMeshBasicMaterial||T.isMeshLambertMaterial?o(A,T):T.isMeshToonMaterial?(o(A,T),function y(A,T){T.gradientMap&&(A.gradientMap.value=T.gradientMap)}(A,T)):T.isMeshPhongMaterial?(o(A,T),function g(A,T){A.specular.value.copy(T.specular),A.shininess.value=Math.max(T.shininess,1e-4)}(A,T)):T.isMeshStandardMaterial?(o(A,T),function M(A,T){A.metalness.value=T.metalness,T.metalnessMap&&(A.metalnessMap.value=T.metalnessMap,t(T.metalnessMap,A.metalnessMapTransform)),A.roughness.value=T.roughness,T.roughnessMap&&(A.roughnessMap.value=T.roughnessMap,t(T.roughnessMap,A.roughnessMapTransform)),T.envMap&&(A.envMapIntensity.value=T.envMapIntensity)}(A,T),T.isMeshPhysicalMaterial&&function S(A,T,U){A.ior.value=T.ior,T.sheen>0&&(A.sheenColor.value.copy(T.sheenColor).multiplyScalar(T.sheen),A.sheenRoughness.value=T.sheenRoughness,T.sheenColorMap&&(A.sheenColorMap.value=T.sheenColorMap,t(T.sheenColorMap,A.sheenColorMapTransform)),T.sheenRoughnessMap&&(A.sheenRoughnessMap.value=T.sheenRoughnessMap,t(T.sheenRoughnessMap,A.sheenRoughnessMapTransform))),T.clearcoat>0&&(A.clearcoat.value=T.clearcoat,A.clearcoatRoughness.value=T.clearcoatRoughness,T.clearcoatMap&&(A.clearcoatMap.value=T.clearcoatMap,t(T.clearcoatMap,A.clearcoatMapTransform)),T.clearcoatRoughnessMap&&(A.clearcoatRoughnessMap.value=T.clearcoatRoughnessMap,t(T.clearcoatRoughnessMap,A.clearcoatRoughnessMapTransform)),T.clearcoatNormalMap&&(A.clearcoatNormalMap.value=T.clearcoatNormalMap,t(T.clearcoatNormalMap,A.clearcoatNormalMapTransform),A.clearcoatNormalScale.value.copy(T.clearcoatNormalScale),T.side===gn&&A.clearcoatNormalScale.value.negate())),T.dispersion>0&&(A.dispersion.value=T.dispersion),T.iridescence>0&&(A.iridescence.value=T.iridescence,A.iridescenceIOR.value=T.iridescenceIOR,A.iridescenceThicknessMinimum.value=T.iridescenceThicknessRange[0],A.iridescenceThicknessMaximum.value=T.iridescenceThicknessRange[1],T.iridescenceMap&&(A.iridescenceMap.value=T.iridescenceMap,t(T.iridescenceMap,A.iridescenceMapTransform)),T.iridescenceThicknessMap&&(A.iridescenceThicknessMap.value=T.iridescenceThicknessMap,t(T.iridescenceThicknessMap,A.iridescenceThicknessMapTransform))),T.transmission>0&&(A.transmission.value=T.transmission,A.transmissionSamplerMap.value=U.texture,A.transmissionSamplerSize.value.set(U.width,U.height),T.transmissionMap&&(A.transmissionMap.value=T.transmissionMap,t(T.transmissionMap,A.transmissionMapTransform)),A.thickness.value=T.thickness,T.thicknessMap&&(A.thicknessMap.value=T.thicknessMap,t(T.thicknessMap,A.thicknessMapTransform)),A.attenuationDistance.value=T.attenuationDistance,A.attenuationColor.value.copy(T.attenuationColor)),T.anisotropy>0&&(A.anisotropyVector.value.set(T.anisotropy*Math.cos(T.anisotropyRotation),T.anisotropy*Math.sin(T.anisotropyRotation)),T.anisotropyMap&&(A.anisotropyMap.value=T.anisotropyMap,t(T.anisotropyMap,A.anisotropyMapTransform))),A.specularIntensity.value=T.specularIntensity,A.specularColor.value.copy(T.specularColor),T.specularColorMap&&(A.specularColorMap.value=T.specularColorMap,t(T.specularColorMap,A.specularColorMapTransform)),T.specularIntensityMap&&(A.specularIntensityMap.value=T.specularIntensityMap,t(T.specularIntensityMap,A.specularIntensityMapTransform))}(A,T,O)):T.isMeshMatcapMaterial?(o(A,T),function C(A,T){T.matcap&&(A.matcap.value=T.matcap)}(A,T)):T.isMeshDepthMaterial?o(A,T):T.isMeshDistanceMaterial?(o(A,T),function D(A,T){const U=e.get(T).light;A.referencePosition.value.setFromMatrixPosition(U.matrixWorld),A.nearDistance.value=U.shadow.camera.near,A.farDistance.value=U.shadow.camera.far}(A,T)):T.isMeshNormalMaterial?o(A,T):T.isLineBasicMaterial?(function c(A,T){A.diffuse.value.copy(T.color),A.opacity.value=T.opacity,T.map&&(A.map.value=T.map,t(T.map,A.mapTransform))}(A,T),T.isLineDashedMaterial&&function d(A,T){A.dashSize.value=T.dashSize,A.totalSize.value=T.dashSize+T.gapSize,A.scale.value=T.scale}(A,T)):T.isPointsMaterial?function f(A,T,U,N){A.diffuse.value.copy(T.color),A.opacity.value=T.opacity,A.size.value=T.size*U,A.scale.value=.5*N,T.map&&(A.map.value=T.map,t(T.map,A.uvTransform)),T.alphaMap&&(A.alphaMap.value=T.alphaMap,t(T.alphaMap,A.alphaMapTransform)),T.alphaTest>0&&(A.alphaTest.value=T.alphaTest)}(A,T,U,N):T.isSpriteMaterial?function p(A,T){A.diffuse.value.copy(T.color),A.opacity.value=T.opacity,A.rotation.value=T.rotation,T.map&&(A.map.value=T.map,t(T.map,A.mapTransform)),T.alphaMap&&(A.alphaMap.value=T.alphaMap,t(T.alphaMap,A.alphaMapTransform)),T.alphaTest>0&&(A.alphaTest.value=T.alphaTest)}(A,T):T.isShadowMaterial?(A.color.value.copy(T.color),A.opacity.value=T.opacity):T.isShaderMaterial&&(T.uniformsNeedUpdate=!1)}}}function Ib(l,e,t,n){let r={},o={},c=[];const d=l.getParameter(l.MAX_UNIFORM_BUFFER_BINDINGS);function S(U,N,O,q){const Y=U.value,Z=N+"_"+O;if(void 0===q[Z])return q[Z]="number"==typeof Y||"boolean"==typeof Y?Y:Y.clone(),!0;{const J=q[Z];if("number"==typeof Y||"boolean"==typeof Y){if(J!==Y)return q[Z]=Y,!0}else if(!1===J.equals(Y))return J.copy(Y),!0}return!1}function D(U){const N={boundary:0,storage:0};return"number"==typeof U||"boolean"==typeof U?(N.boundary=4,N.storage=4):U.isVector2?(N.boundary=8,N.storage=8):U.isVector3||U.isColor?(N.boundary=16,N.storage=12):U.isVector4?(N.boundary=16,N.storage=16):U.isMatrix3?(N.boundary=48,N.storage=48):U.isMatrix4?(N.boundary=64,N.storage=64):U.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",U),N}function A(U){const N=U.target;N.removeEventListener("dispose",A);const O=c.indexOf(N.__bindingPointIndex);c.splice(O,1),l.deleteBuffer(r[N.id]),delete r[N.id],delete o[N.id]}return{bind:function f(U,N){n.uniformBlockBinding(U,N.program)},update:function p(U,N){let O=r[U.id];void 0===O&&(function C(U){const N=U.uniforms;let O=0;for(let Z=0,J=N.length;Z<J;Z++){const H=Array.isArray(N[Z])?N[Z]:[N[Z]];for(let V=0,se=H.length;V<se;V++){const Me=H[V],xe=Array.isArray(Me.value)?Me.value:[Me.value];for(let De=0,ze=xe.length;De<ze;De++){const tt=D(xe[De]),Oe=O%16,Ct=Oe%tt.boundary,kt=Oe+Ct;O+=Ct,0!==kt&&16-kt<tt.storage&&(O+=16-kt),Me.__data=new Float32Array(tt.storage/Float32Array.BYTES_PER_ELEMENT),Me.__offset=O,O+=tt.storage}}}const Y=O%16;Y>0&&(O+=16-Y),U.__size=O,U.__cache={}}(U),O=function g(U){const N=function y(){for(let U=0;U<d;U++)if(-1===c.indexOf(U))return c.push(U),U;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();U.__bindingPointIndex=N;const O=l.createBuffer(),q=U.__size,Y=U.usage;return l.bindBuffer(l.UNIFORM_BUFFER,O),l.bufferData(l.UNIFORM_BUFFER,q,Y),l.bindBuffer(l.UNIFORM_BUFFER,null),l.bindBufferBase(l.UNIFORM_BUFFER,N,O),O}(U),r[U.id]=O,U.addEventListener("dispose",A)),n.updateUBOMapping(U,N.program);const Y=e.render.frame;o[U.id]!==Y&&(function M(U){const O=U.uniforms,q=U.__cache;l.bindBuffer(l.UNIFORM_BUFFER,r[U.id]);for(let Y=0,Z=O.length;Y<Z;Y++){const J=Array.isArray(O[Y])?O[Y]:[O[Y]];for(let H=0,V=J.length;H<V;H++){const se=J[H];if(!0===S(se,Y,H,q)){const Me=se.__offset,xe=Array.isArray(se.value)?se.value:[se.value];let De=0;for(let ze=0;ze<xe.length;ze++){const Te=xe[ze],tt=D(Te);"number"==typeof Te||"boolean"==typeof Te?(se.__data[0]=Te,l.bufferSubData(l.UNIFORM_BUFFER,Me+De,se.__data)):Te.isMatrix3?(se.__data[0]=Te.elements[0],se.__data[1]=Te.elements[1],se.__data[2]=Te.elements[2],se.__data[3]=0,se.__data[4]=Te.elements[3],se.__data[5]=Te.elements[4],se.__data[6]=Te.elements[5],se.__data[7]=0,se.__data[8]=Te.elements[6],se.__data[9]=Te.elements[7],se.__data[10]=Te.elements[8],se.__data[11]=0):(Te.toArray(se.__data,De),De+=tt.storage/Float32Array.BYTES_PER_ELEMENT)}l.bufferSubData(l.UNIFORM_BUFFER,Me,se.__data)}}}l.bindBuffer(l.UNIFORM_BUFFER,null)}(U),o[U.id]=Y)},dispose:function T(){for(const U in r)l.deleteBuffer(r[U]);c=[],r={},o={}}}}class Rb{constructor(e={}){const{canvas:t=jl(),context:n=null,depth:r=!0,stencil:o=!1,alpha:c=!1,antialias:d=!1,premultipliedAlpha:f=!0,preserveDrawingBuffer:p=!1,powerPreference:g="default",failIfMajorPerformanceCaveat:y=!1,reverseDepthBuffer:M=!1}=e;let S;if(this.isWebGLRenderer=!0,null!==n){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");S=n.getContextAttributes().alpha}else S=c;const C=new Uint32Array(4),D=new Int32Array(4);let A=null,T=null;const U=[],N=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Qe,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const O=this;let q=!1;this._outputColorSpace=is;let Y=0,Z=0,J=null,H=-1,V=null;const se=new qt,Me=new qt;let xe=null;const De=new w(0);let ze=0,Te=t.width,tt=t.height,Oe=1,Ct=null,kt=null;const Zt=new qt(0,0,Te,tt),An=new qt(0,0,Te,tt);let xi=!1;const $e=new ph;let pt=!1,cn=!1;const Nt=new yn,Dn=new yn,hi=new ne,Mn=new qt,Di={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let qi=!1;function ai(){return null===J?Oe:1}let rt,ut,Ye,Ft,qe,Q,W,ge,He,Ze,We,an,Tt,Jt,li,vt,tn,Ln,Un,Qt,fi,Jn,ir,pe,ce=n;function Fr(K,me){return t.getContext(K,me)}try{const K={alpha:!0,depth:r,stencil:o,antialias:d,premultipliedAlpha:f,preserveDrawingBuffer:p,powerPreference:g,failIfMajorPerformanceCaveat:y};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r175"),t.addEventListener("webglcontextlost",at,!1),t.addEventListener("webglcontextrestored",Xt,!1),t.addEventListener("webglcontextcreationerror",$t,!1),null===ce){const me="webgl2";if(ce=Fr(me,K),null===ce)throw Fr(me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(K){throw console.error("THREE.WebGLRenderer: "+K.message),K}function Wt(){rt=new OS(ce),rt.init(),Jn=new Tb(ce,rt),ut=new DS(ce,rt,e,Jn),Ye=new Eb(ce,rt),ut.reverseDepthBuffer&&M&&Ye.buffers.depth.setReversed(!0),Ft=new vd(ce),qe=new Md,Q=new Cb(ce,rt,Ye,qe,ut,Jn,Ft),W=new RS(O),ge=new mn(O),He=new Xw(ce),ir=new TS(ce,He),Ze=new NS(ce,He,Ft,ir),We=new Dp(ce,Ze,He,Ft),Un=new US(ce,ut,Q),vt=new IS(qe),an=new I0(O,W,ge,rt,ut,ir,vt),Tt=new Db(O,qe),Jt=new L0,li=new N0(rt),Ln=new CS(O,W,ge,Ye,We,S,f),tn=new k0(O,We,ut),pe=new Ib(ce,Ft,ut,Ye),Qt=new AS(ce,rt,Ft),fi=new FS(ce,rt,Ft),Ft.programs=an.programs,O.capabilities=ut,O.extensions=rt,O.properties=qe,O.renderLists=Jt,O.shadowMap=tn,O.state=Ye,O.info=Ft}Wt();const Ve=new Ab(O,ce);function at(K){K.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),q=!0}function Xt(){console.log("THREE.WebGLRenderer: Context Restored."),q=!1;const K=Ft.autoReset,me=tn.enabled,Ie=tn.autoUpdate,Re=tn.needsUpdate,ye=tn.type;Wt(),Ft.autoReset=K,tn.enabled=me,tn.autoUpdate=Ie,tn.needsUpdate=Re,tn.type=ye}function $t(K){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",K.statusMessage)}function qn(K){const me=K.target;me.removeEventListener("dispose",qn),function Ur(K){(function ao(K){const me=qe.get(K).programs;void 0!==me&&(me.forEach(function(Ie){an.releaseProgram(Ie)}),K.isShaderMaterial&&an.releaseShaderCache(K))})(K),qe.remove(K)}(me)}function zi(K,me,Ie){!0===K.transparent&&K.side===Ge&&!1===K.forceSinglePass?(K.side=gn,K.needsUpdate=!0,Dx(K,me,Ie),K.side=Kt,K.needsUpdate=!0,Dx(K,me,Ie),K.side=Ge):Dx(K,me,Ie)}this.xr=Ve,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){const K=rt.get("WEBGL_lose_context");K&&K.loseContext()},this.forceContextRestore=function(){const K=rt.get("WEBGL_lose_context");K&&K.restoreContext()},this.getPixelRatio=function(){return Oe},this.setPixelRatio=function(K){void 0!==K&&(Oe=K,this.setSize(Te,tt,!1))},this.getSize=function(K){return K.set(Te,tt)},this.setSize=function(K,me,Ie=!0){Ve.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Te=K,tt=me,t.width=Math.floor(K*Oe),t.height=Math.floor(me*Oe),!0===Ie&&(t.style.width=K+"px",t.style.height=me+"px"),this.setViewport(0,0,K,me))},this.getDrawingBufferSize=function(K){return K.set(Te*Oe,tt*Oe).floor()},this.setDrawingBufferSize=function(K,me,Ie){Te=K,tt=me,Oe=Ie,t.width=Math.floor(K*Ie),t.height=Math.floor(me*Ie),this.setViewport(0,0,K,me)},this.getCurrentViewport=function(K){return K.copy(se)},this.getViewport=function(K){return K.copy(Zt)},this.setViewport=function(K,me,Ie,Re){K.isVector4?Zt.set(K.x,K.y,K.z,K.w):Zt.set(K,me,Ie,Re),Ye.viewport(se.copy(Zt).multiplyScalar(Oe).round())},this.getScissor=function(K){return K.copy(An)},this.setScissor=function(K,me,Ie,Re){K.isVector4?An.set(K.x,K.y,K.z,K.w):An.set(K,me,Ie,Re),Ye.scissor(Me.copy(An).multiplyScalar(Oe).round())},this.getScissorTest=function(){return xi},this.setScissorTest=function(K){Ye.setScissorTest(xi=K)},this.setOpaqueSort=function(K){Ct=K},this.setTransparentSort=function(K){kt=K},this.getClearColor=function(K){return K.copy(Ln.getClearColor())},this.setClearColor=function(){Ln.setClearColor(...arguments)},this.getClearAlpha=function(){return Ln.getClearAlpha()},this.setClearAlpha=function(){Ln.setClearAlpha(...arguments)},this.clear=function(K=!0,me=!0,Ie=!0){let Re=0;if(K){let ye=!1;if(null!==J){const _t=J.texture.format;ye=_t===ho||_t===Fi||_t===ll}if(ye){const _t=J.texture.type,Bt=_t===fe||_t===ni||_t===Vt||_t===uo||_t===Ol||_t===Ls,sn=Ln.getClearColor(),nn=Ln.getClearAlpha(),Vn=sn.r,Hn=sn.g,Sn=sn.b;Bt?(C[0]=Vn,C[1]=Hn,C[2]=Sn,C[3]=nn,ce.clearBufferuiv(ce.COLOR,0,C)):(D[0]=Vn,D[1]=Hn,D[2]=Sn,D[3]=nn,ce.clearBufferiv(ce.COLOR,0,D))}else Re|=ce.COLOR_BUFFER_BIT}me&&(Re|=ce.DEPTH_BUFFER_BIT),Ie&&(Re|=ce.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ce.clear(Re)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",at,!1),t.removeEventListener("webglcontextrestored",Xt,!1),t.removeEventListener("webglcontextcreationerror",$t,!1),Ln.dispose(),Jt.dispose(),li.dispose(),qe.dispose(),W.dispose(),ge.dispose(),We.dispose(),ir.dispose(),pe.dispose(),an.dispose(),Ve.dispose(),Ve.removeEventListener("sessionstart",qE),Ve.removeEventListener("sessionend",ZE),gf.stop()},this.renderBufferDirect=function(K,me,Ie,Re,ye,_t){null===me&&(me=Di);const Bt=ye.isMesh&&ye.matrixWorld.determinant()<0,sn=function AC(K,me,Ie,Re,ye){!0!==me.isScene&&(me=Di),Q.resetTextureUnits();const _t=me.fog,sn=null===J?O.outputColorSpace:!0===J.isXRRenderTarget?J.texture.colorSpace:Ra,nn=(Re.isMeshStandardMaterial?ge:W).get(Re.envMap||(Re.isMeshStandardMaterial?me.environment:null)),Vn=!0===Re.vertexColors&&!!Ie.attributes.color&&4===Ie.attributes.color.itemSize,Hn=!!Ie.attributes.tangent&&(!!Re.normalMap||Re.anisotropy>0),Sn=!!Ie.morphAttributes.position,di=!!Ie.morphAttributes.normal,Hi=!!Ie.morphAttributes.color;let br=Qe;Re.toneMapped&&(null===J||!0===J.isXRRenderTarget)&&(br=O.toneMapping);const kr=Ie.morphAttributes.position||Ie.morphAttributes.normal||Ie.morphAttributes.color,Ei=void 0!==kr?kr.length:0,bn=qe.get(Re),qs=T.state.lights;!0!==pt||!0!==cn&&K===V||vt.setState(Re,K,K===V&&Re.id===H);let Pi=!1;Re.version===bn.__version?(bn.needsLights&&bn.lightsStateVersion!==qs.state.version||bn.outputColorSpace!==sn||ye.isBatchedMesh&&!1===bn.batching||!ye.isBatchedMesh&&!0===bn.batching||ye.isBatchedMesh&&!0===bn.batchingColor&&null===ye.colorTexture||ye.isBatchedMesh&&!1===bn.batchingColor&&null!==ye.colorTexture||ye.isInstancedMesh&&!1===bn.instancing||!ye.isInstancedMesh&&!0===bn.instancing||ye.isSkinnedMesh&&!1===bn.skinning||!ye.isSkinnedMesh&&!0===bn.skinning||ye.isInstancedMesh&&!0===bn.instancingColor&&null===ye.instanceColor||ye.isInstancedMesh&&!1===bn.instancingColor&&null!==ye.instanceColor||ye.isInstancedMesh&&!0===bn.instancingMorph&&null===ye.morphTexture||ye.isInstancedMesh&&!1===bn.instancingMorph&&null!==ye.morphTexture||bn.envMap!==nn||!0===Re.fog&&bn.fog!==_t||void 0!==bn.numClippingPlanes&&(bn.numClippingPlanes!==vt.numPlanes||bn.numIntersection!==vt.numIntersection)||bn.vertexAlphas!==Vn||bn.vertexTangents!==Hn||bn.morphTargets!==Sn||bn.morphNormals!==di||bn.morphColors!==Hi||bn.toneMapping!==br||bn.morphTargetsCount!==Ei)&&(Pi=!0):(Pi=!0,bn.__version=Re.version);let Pl=bn.currentProgram;!0===Pi&&(Pl=Dx(Re,me,ye));let fm=!1,ba=!1,Z_=!1;const _r=Pl.getUniforms(),il=bn.uniforms;if(Ye.useProgram(Pl.program)&&(fm=!0,ba=!0,Z_=!0),Re.id!==H&&(H=Re.id,ba=!0),fm||V!==K){Ye.buffers.depth.getReversed()?(Nt.copy(K.projectionMatrix),function wf(l){const e=l.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}(Nt),function qr(l){const e=l.elements;-1===e[11]?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=1-e[14])}(Nt),_r.setValue(ce,"projectionMatrix",Nt)):_r.setValue(ce,"projectionMatrix",K.projectionMatrix),_r.setValue(ce,"viewMatrix",K.matrixWorldInverse);const $o=_r.map.cameraPosition;void 0!==$o&&$o.setValue(ce,hi.setFromMatrixPosition(K.matrixWorld)),ut.logarithmicDepthBuffer&&_r.setValue(ce,"logDepthBufFC",2/(Math.log(K.far+1)/Math.LN2)),(Re.isMeshPhongMaterial||Re.isMeshToonMaterial||Re.isMeshLambertMaterial||Re.isMeshBasicMaterial||Re.isMeshStandardMaterial||Re.isShaderMaterial)&&_r.setValue(ce,"isOrthographic",!0===K.isOrthographicCamera),V!==K&&(V=K,ba=!0,Z_=!0)}if(ye.isSkinnedMesh){_r.setOptional(ce,ye,"bindMatrix"),_r.setOptional(ce,ye,"bindMatrixInverse");const To=ye.skeleton;To&&(null===To.boneTexture&&To.computeBoneTexture(),_r.setValue(ce,"boneTexture",To.boneTexture,Q))}ye.isBatchedMesh&&(_r.setOptional(ce,ye,"batchingTexture"),_r.setValue(ce,"batchingTexture",ye._matricesTexture,Q),_r.setOptional(ce,ye,"batchingIdTexture"),_r.setValue(ce,"batchingIdTexture",ye._indirectTexture,Q),_r.setOptional(ce,ye,"batchingColorTexture"),null!==ye._colorsTexture&&_r.setValue(ce,"batchingColorTexture",ye._colorsTexture,Q));const rl=Ie.morphAttributes;if((void 0!==rl.position||void 0!==rl.normal||void 0!==rl.color)&&Un.update(ye,Ie,Pl),(ba||bn.receiveShadow!==ye.receiveShadow)&&(bn.receiveShadow=ye.receiveShadow,_r.setValue(ce,"receiveShadow",ye.receiveShadow)),Re.isMeshGouraudMaterial&&null!==Re.envMap&&(il.envMap.value=nn,il.flipEnvMap.value=nn.isCubeTexture&&!1===nn.isRenderTargetTexture?-1:1),Re.isMeshStandardMaterial&&null===Re.envMap&&null!==me.environment&&(il.envMapIntensity.value=me.environmentIntensity),ba&&(_r.setValue(ce,"toneMappingExposure",O.toneMappingExposure),bn.needsLights&&function DC(K,me){K.ambientLightColor.needsUpdate=me,K.lightProbe.needsUpdate=me,K.directionalLights.needsUpdate=me,K.directionalLightShadows.needsUpdate=me,K.pointLights.needsUpdate=me,K.pointLightShadows.needsUpdate=me,K.spotLights.needsUpdate=me,K.spotLightShadows.needsUpdate=me,K.rectAreaLights.needsUpdate=me,K.hemisphereLights.needsUpdate=me}(il,Z_),_t&&!0===Re.fog&&Tt.refreshFogUniforms(il,_t),Tt.refreshMaterialUniforms(il,Re,Oe,tt,T.state.transmissionRenderTarget[K.id]),Lp.upload(ce,eC(bn),il,Q)),Re.isShaderMaterial&&!0===Re.uniformsNeedUpdate&&(Lp.upload(ce,eC(bn),il,Q),Re.uniformsNeedUpdate=!1),Re.isSpriteMaterial&&_r.setValue(ce,"center",ye.center),_r.setValue(ce,"modelViewMatrix",ye.modelViewMatrix),_r.setValue(ce,"normalMatrix",ye.normalMatrix),_r.setValue(ce,"modelMatrix",ye.matrixWorld),Re.isShaderMaterial||Re.isRawShaderMaterial){const To=Re.uniformsGroups;for(let $o=0,hw=To.length;$o<hw;$o++){const _f=To[$o];pe.update(_f,Pl),pe.bind(_f,Pl)}}return Pl}(K,me,Ie,Re,ye);Ye.setMaterial(Re,Bt);let nn=Ie.index,Vn=1;if(!0===Re.wireframe){if(nn=Ze.getWireframeAttribute(Ie),void 0===nn)return;Vn=2}const Hn=Ie.drawRange,Sn=Ie.attributes.position;let di=Hn.start*Vn,Hi=(Hn.start+Hn.count)*Vn;null!==_t&&(di=Math.max(di,_t.start*Vn),Hi=Math.min(Hi,(_t.start+_t.count)*Vn)),null!==nn?(di=Math.max(di,0),Hi=Math.min(Hi,nn.count)):null!=Sn&&(di=Math.max(di,0),Hi=Math.min(Hi,Sn.count));const br=Hi-di;if(br<0||br===1/0)return;ir.setup(ye,Re,sn,Ie,nn);let kr,Ei=Qt;if(null!==nn&&(kr=He.get(nn),Ei=fi,Ei.setIndex(kr)),ye.isMesh)!0===Re.wireframe?(Ye.setLineWidth(Re.wireframeLinewidth*ai()),Ei.setMode(ce.LINES)):Ei.setMode(ce.TRIANGLES);else if(ye.isLine){let bn=Re.linewidth;void 0===bn&&(bn=1),Ye.setLineWidth(bn*ai()),Ei.setMode(ye.isLineSegments?ce.LINES:ye.isLineLoop?ce.LINE_LOOP:ce.LINE_STRIP)}else ye.isPoints?Ei.setMode(ce.POINTS):ye.isSprite&&Ei.setMode(ce.TRIANGLES);if(ye.isBatchedMesh)if(null!==ye._multiDrawInstances)go("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Ei.renderMultiDrawInstances(ye._multiDrawStarts,ye._multiDrawCounts,ye._multiDrawCount,ye._multiDrawInstances);else if(rt.get("WEBGL_multi_draw"))Ei.renderMultiDraw(ye._multiDrawStarts,ye._multiDrawCounts,ye._multiDrawCount);else{const bn=ye._multiDrawStarts,qs=ye._multiDrawCounts,Pi=ye._multiDrawCount,Pl=nn?He.get(nn).bytesPerElement:1,fm=qe.get(Re).currentProgram.getUniforms();for(let ba=0;ba<Pi;ba++)fm.setValue(ce,"_gl_DrawID",ba),Ei.render(bn[ba]/Pl,qs[ba])}else if(ye.isInstancedMesh)Ei.renderInstances(di,br,ye.count);else if(Ie.isInstancedBufferGeometry){const qs=Math.min(Ie.instanceCount,void 0!==Ie._maxInstanceCount?Ie._maxInstanceCount:1/0);Ei.renderInstances(di,br,qs)}else Ei.render(di,br)},this.compile=function(K,me,Ie=null){null===Ie&&(Ie=K),T=li.get(Ie),T.init(me),N.push(T),Ie.traverseVisible(function(ye){ye.isLight&&ye.layers.test(me.layers)&&(T.pushLight(ye),ye.castShadow&&T.pushShadow(ye))}),K!==Ie&&K.traverseVisible(function(ye){ye.isLight&&ye.layers.test(me.layers)&&(T.pushLight(ye),ye.castShadow&&T.pushShadow(ye))}),T.setupLights();const Re=new Set;return K.traverse(function(ye){if(!(ye.isMesh||ye.isPoints||ye.isLine||ye.isSprite))return;const _t=ye.material;if(_t)if(Array.isArray(_t))for(let Bt=0;Bt<_t.length;Bt++){const sn=_t[Bt];zi(sn,Ie,ye),Re.add(sn)}else zi(_t,Ie,ye),Re.add(_t)}),T=N.pop(),Re},this.compileAsync=function(K,me,Ie=null){const Re=this.compile(K,me,Ie);return new Promise(ye=>{function _t(){Re.forEach(function(Bt){qe.get(Bt).currentProgram.isReady()&&Re.delete(Bt)}),0!==Re.size?setTimeout(_t,10):ye(K)}null!==rt.get("KHR_parallel_shader_compile")?_t():setTimeout(_t,10)})};let Rl=null;function qE(){gf.stop()}function ZE(){gf.start()}const gf=new Ng;function dw(K,me,Ie,Re){if(!1===K.visible)return;if(K.layers.test(me.layers))if(K.isGroup)Ie=K.renderOrder;else if(K.isLOD)!0===K.autoUpdate&&K.update(me);else if(K.isLight)T.pushLight(K),K.castShadow&&T.pushShadow(K);else if(K.isSprite){if(!K.frustumCulled||$e.intersectsSprite(K)){Re&&Mn.setFromMatrixPosition(K.matrixWorld).applyMatrix4(Dn);const Bt=We.update(K),sn=K.material;sn.visible&&A.push(K,Bt,sn,Ie,Mn.z,null)}}else if((K.isMesh||K.isLine||K.isPoints)&&(!K.frustumCulled||$e.intersectsObject(K))){const Bt=We.update(K),sn=K.material;if(Re&&(void 0!==K.boundingSphere?(null===K.boundingSphere&&K.computeBoundingSphere(),Mn.copy(K.boundingSphere.center)):(null===Bt.boundingSphere&&Bt.computeBoundingSphere(),Mn.copy(Bt.boundingSphere.center)),Mn.applyMatrix4(K.matrixWorld).applyMatrix4(Dn)),Array.isArray(sn)){const nn=Bt.groups;for(let Vn=0,Hn=nn.length;Vn<Hn;Vn++){const Sn=nn[Vn],di=sn[Sn.materialIndex];di&&di.visible&&A.push(K,Bt,di,Ie,Mn.z,Sn)}}else sn.visible&&A.push(K,Bt,sn,Ie,Mn.z,null)}const _t=K.children;for(let Bt=0,sn=_t.length;Bt<sn;Bt++)dw(_t[Bt],me,Ie,Re)}function KE(K,me,Ie,Re){const ye=K.opaque,_t=K.transmissive,Bt=K.transparent;T.setupLightsView(Ie),!0===pt&&vt.setGlobalState(O.clippingPlanes,Ie),Re&&Ye.viewport(se.copy(Re)),ye.length>0&&Ax(ye,me,Ie),_t.length>0&&Ax(_t,me,Ie),Bt.length>0&&Ax(Bt,me,Ie),Ye.buffers.depth.setTest(!0),Ye.buffers.depth.setMask(!0),Ye.buffers.color.setMask(!0),Ye.setPolygonOffset(!1)}function JE(K,me,Ie,Re){if(null!==(!0===Ie.isScene?Ie.overrideMaterial:null))return;void 0===T.state.transmissionRenderTarget[Re.id]&&(T.state.transmissionRenderTarget[Re.id]=new si(1,1,{generateMipmaps:!0,type:rt.has("EXT_color_buffer_half_float")||rt.has("EXT_color_buffer_float")?fs:fe,minFilter:le,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:I.workingColorSpace}));const _t=T.state.transmissionRenderTarget[Re.id],Bt=Re.viewport||se;_t.setSize(Bt.z*O.transmissionResolutionScale,Bt.w*O.transmissionResolutionScale);const sn=O.getRenderTarget();O.setRenderTarget(_t),O.getClearColor(De),ze=O.getClearAlpha(),ze<1&&O.setClearColor(16777215,.5),O.clear(),qi&&Ln.render(Ie);const nn=O.toneMapping;O.toneMapping=Qe;const Vn=Re.viewport;if(void 0!==Re.viewport&&(Re.viewport=void 0),T.setupLightsView(Re),!0===pt&&vt.setGlobalState(O.clippingPlanes,Re),Ax(K,Ie,Re),Q.updateMultisampleRenderTarget(_t),Q.updateRenderTargetMipmap(_t),!1===rt.has("WEBGL_multisampled_render_to_texture")){let Hn=!1;for(let Sn=0,di=me.length;Sn<di;Sn++){const Hi=me[Sn],br=Hi.object,kr=Hi.geometry,Ei=Hi.material,bn=Hi.group;if(Ei.side===Ge&&br.layers.test(Re.layers)){const qs=Ei.side;Ei.side=gn,Ei.needsUpdate=!0,QE(br,Ie,Re,kr,Ei,bn),Ei.side=qs,Ei.needsUpdate=!0,Hn=!0}}!0===Hn&&(Q.updateMultisampleRenderTarget(_t),Q.updateRenderTargetMipmap(_t))}O.setRenderTarget(sn),O.setClearColor(De,ze),void 0!==Vn&&(Re.viewport=Vn),O.toneMapping=nn}function Ax(K,me,Ie){const Re=!0===me.isScene?me.overrideMaterial:null;for(let ye=0,_t=K.length;ye<_t;ye++){const Bt=K[ye],sn=Bt.object,nn=Bt.geometry,Vn=Bt.group;let Hn=Bt.material;!0===Hn.allowOverride&&null!==Re&&(Hn=Re),sn.layers.test(Ie.layers)&&QE(sn,me,Ie,nn,Hn,Vn)}}function QE(K,me,Ie,Re,ye,_t){K.onBeforeRender(O,me,Ie,Re,ye,_t),K.modelViewMatrix.multiplyMatrices(Ie.matrixWorldInverse,K.matrixWorld),K.normalMatrix.getNormalMatrix(K.modelViewMatrix),ye.onBeforeRender(O,me,Ie,Re,K,_t),!0===ye.transparent&&ye.side===Ge&&!1===ye.forceSinglePass?(ye.side=gn,ye.needsUpdate=!0,O.renderBufferDirect(Ie,me,Re,ye,K,_t),ye.side=Kt,ye.needsUpdate=!0,O.renderBufferDirect(Ie,me,Re,ye,K,_t),ye.side=Ge):O.renderBufferDirect(Ie,me,Re,ye,K,_t),K.onAfterRender(O,me,Ie,Re,ye,_t)}function Dx(K,me,Ie){!0!==me.isScene&&(me=Di);const Re=qe.get(K),ye=T.state.lights,Bt=ye.state.version,sn=an.getParameters(K,ye.state,T.state.shadowsArray,me,Ie),nn=an.getProgramCacheKey(sn);let Vn=Re.programs;Re.environment=K.isMeshStandardMaterial?me.environment:null,Re.fog=me.fog,Re.envMap=(K.isMeshStandardMaterial?ge:W).get(K.envMap||Re.environment),Re.envMapRotation=null!==Re.environment&&null===K.envMap?me.environmentRotation:K.envMapRotation,void 0===Vn&&(K.addEventListener("dispose",qn),Vn=new Map,Re.programs=Vn);let Hn=Vn.get(nn);if(void 0!==Hn){if(Re.currentProgram===Hn&&Re.lightsStateVersion===Bt)return tC(K,sn),Hn}else sn.uniforms=an.getUniforms(K),K.onBeforeCompile(sn,O),Hn=an.acquireProgram(sn,nn),Vn.set(nn,Hn),Re.uniforms=sn.uniforms;const Sn=Re.uniforms;return(!K.isShaderMaterial&&!K.isRawShaderMaterial||!0===K.clipping)&&(Sn.clippingPlanes=vt.uniform),tC(K,sn),Re.needsLights=function IC(K){return K.isMeshLambertMaterial||K.isMeshToonMaterial||K.isMeshPhongMaterial||K.isMeshStandardMaterial||K.isShadowMaterial||K.isShaderMaterial&&!0===K.lights}(K),Re.lightsStateVersion=Bt,Re.needsLights&&(Sn.ambientLightColor.value=ye.state.ambient,Sn.lightProbe.value=ye.state.probe,Sn.directionalLights.value=ye.state.directional,Sn.directionalLightShadows.value=ye.state.directionalShadow,Sn.spotLights.value=ye.state.spot,Sn.spotLightShadows.value=ye.state.spotShadow,Sn.rectAreaLights.value=ye.state.rectArea,Sn.ltc_1.value=ye.state.rectAreaLTC1,Sn.ltc_2.value=ye.state.rectAreaLTC2,Sn.pointLights.value=ye.state.point,Sn.pointLightShadows.value=ye.state.pointShadow,Sn.hemisphereLights.value=ye.state.hemi,Sn.directionalShadowMap.value=ye.state.directionalShadowMap,Sn.directionalShadowMatrix.value=ye.state.directionalShadowMatrix,Sn.spotShadowMap.value=ye.state.spotShadowMap,Sn.spotLightMatrix.value=ye.state.spotLightMatrix,Sn.spotLightMap.value=ye.state.spotLightMap,Sn.pointShadowMap.value=ye.state.pointShadowMap,Sn.pointShadowMatrix.value=ye.state.pointShadowMatrix),Re.currentProgram=Hn,Re.uniformsList=null,Hn}function eC(K){if(null===K.uniformsList){const me=K.currentProgram.getUniforms();K.uniformsList=Lp.seqWithValue(me.seq,K.uniforms)}return K.uniformsList}function tC(K,me){const Ie=qe.get(K);Ie.outputColorSpace=me.outputColorSpace,Ie.batching=me.batching,Ie.batchingColor=me.batchingColor,Ie.instancing=me.instancing,Ie.instancingColor=me.instancingColor,Ie.instancingMorph=me.instancingMorph,Ie.skinning=me.skinning,Ie.morphTargets=me.morphTargets,Ie.morphNormals=me.morphNormals,Ie.morphColors=me.morphColors,Ie.morphTargetsCount=me.morphTargetsCount,Ie.numClippingPlanes=me.numClippingPlanes,Ie.numIntersection=me.numClipIntersection,Ie.vertexAlphas=me.vertexAlphas,Ie.vertexTangents=me.vertexTangents,Ie.toneMapping=me.toneMapping}gf.setAnimationLoop(function pu(K){Rl&&Rl(K)}),typeof self<"u"&&gf.setContext(self),this.setAnimationLoop=function(K){Rl=K,Ve.setAnimationLoop(K),null===K?gf.stop():gf.start()},Ve.addEventListener("sessionstart",qE),Ve.addEventListener("sessionend",ZE),this.render=function(K,me){if(void 0!==me&&!0!==me.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===q)return;if(!0===K.matrixWorldAutoUpdate&&K.updateMatrixWorld(),null===me.parent&&!0===me.matrixWorldAutoUpdate&&me.updateMatrixWorld(),!0===Ve.enabled&&!0===Ve.isPresenting&&(!0===Ve.cameraAutoUpdate&&Ve.updateCamera(me),me=Ve.getCamera()),!0===K.isScene&&K.onBeforeRender(O,K,me,J),T=li.get(K,N.length),T.init(me),N.push(T),Dn.multiplyMatrices(me.projectionMatrix,me.matrixWorldInverse),$e.setFromProjectionMatrix(Dn),cn=this.localClippingEnabled,pt=vt.init(this.clippingPlanes,cn),A=Jt.get(K,U.length),A.init(),U.push(A),!0===Ve.enabled&&!0===Ve.isPresenting){const _t=O.xr.getDepthSensingMesh();null!==_t&&dw(_t,me,-1/0,O.sortObjects)}dw(K,me,0,O.sortObjects),A.finish(),!0===O.sortObjects&&A.sort(Ct,kt),qi=!1===Ve.enabled||!1===Ve.isPresenting||!1===Ve.hasDepthSensing(),qi&&Ln.addToRenderList(A,K),this.info.render.frame++,!0===pt&&vt.beginShadows(),tn.render(T.state.shadowsArray,K,me),!0===pt&&vt.endShadows(),!0===this.info.autoReset&&this.info.reset();const Re=A.opaque,ye=A.transmissive;if(T.setupLights(),me.isArrayCamera){const _t=me.cameras;if(ye.length>0)for(let Bt=0,sn=_t.length;Bt<sn;Bt++)JE(Re,ye,K,_t[Bt]);qi&&Ln.render(K);for(let Bt=0,sn=_t.length;Bt<sn;Bt++){const nn=_t[Bt];KE(A,K,nn,nn.viewport)}}else ye.length>0&&JE(Re,ye,K,me),qi&&Ln.render(K),KE(A,K,me);null!==J&&0===Z&&(Q.updateMultisampleRenderTarget(J),Q.updateRenderTargetMipmap(J)),!0===K.isScene&&K.onAfterRender(O,K,me),ir.resetDefaultState(),H=-1,V=null,N.pop(),N.length>0?(T=N[N.length-1],!0===pt&&vt.setGlobalState(O.clippingPlanes,T.state.camera)):T=null,U.pop(),A=U.length>0?U[U.length-1]:null},this.getActiveCubeFace=function(){return Y},this.getActiveMipmapLevel=function(){return Z},this.getRenderTarget=function(){return J},this.setRenderTargetTextures=function(K,me,Ie){const Re=qe.get(K);Re.__autoAllocateDepthBuffer=!1===K.resolveDepthBuffer,!1===Re.__autoAllocateDepthBuffer&&(Re.__useRenderToTexture=!1),qe.get(K.texture).__webglTexture=me,qe.get(K.depthTexture).__webglTexture=Re.__autoAllocateDepthBuffer?void 0:Ie,Re.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(K,me){const Ie=qe.get(K);Ie.__webglFramebuffer=me,Ie.__useDefaultFramebuffer=void 0===me};const RC=ce.createFramebuffer();this.setRenderTarget=function(K,me=0,Ie=0){J=K,Y=me,Z=Ie;let Re=!0,ye=null,_t=!1,Bt=!1;if(K){const nn=qe.get(K);if(void 0!==nn.__useDefaultFramebuffer)Ye.bindFramebuffer(ce.FRAMEBUFFER,null),Re=!1;else if(void 0===nn.__webglFramebuffer)Q.setupRenderTarget(K);else if(nn.__hasExternalTextures)Q.rebindTextures(K,qe.get(K.texture).__webglTexture,qe.get(K.depthTexture).__webglTexture);else if(K.depthBuffer){const Sn=K.depthTexture;if(nn.__boundDepthTexture!==Sn){if(null!==Sn&&qe.has(Sn)&&(K.width!==Sn.image.width||K.height!==Sn.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Q.setupDepthRenderbuffer(K)}}const Vn=K.texture;(Vn.isData3DTexture||Vn.isDataArrayTexture||Vn.isCompressedArrayTexture)&&(Bt=!0);const Hn=qe.get(K).__webglFramebuffer;K.isWebGLCubeRenderTarget?(ye=Array.isArray(Hn[me])?Hn[me][Ie]:Hn[me],_t=!0):ye=K.samples>0&&!1===Q.useMultisampledRTT(K)?qe.get(K).__webglMultisampledFramebuffer:Array.isArray(Hn)?Hn[Ie]:Hn,se.copy(K.viewport),Me.copy(K.scissor),xe=K.scissorTest}else se.copy(Zt).multiplyScalar(Oe).floor(),Me.copy(An).multiplyScalar(Oe).floor(),xe=xi;if(0!==Ie&&(ye=RC),Ye.bindFramebuffer(ce.FRAMEBUFFER,ye)&&Re&&Ye.drawBuffers(K,ye),Ye.viewport(se),Ye.scissor(Me),Ye.setScissorTest(xe),_t){const nn=qe.get(K.texture);ce.framebufferTexture2D(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_CUBE_MAP_POSITIVE_X+me,nn.__webglTexture,Ie)}else if(Bt){const nn=qe.get(K.texture);ce.framebufferTextureLayer(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,nn.__webglTexture,Ie,me)}else if(null!==K&&0!==Ie){const nn=qe.get(K.texture);ce.framebufferTexture2D(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,nn.__webglTexture,Ie)}H=-1},this.readRenderTargetPixels=function(K,me,Ie,Re,ye,_t,Bt){if(!K||!K.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let sn=qe.get(K).__webglFramebuffer;if(K.isWebGLCubeRenderTarget&&void 0!==Bt&&(sn=sn[Bt]),sn){Ye.bindFramebuffer(ce.FRAMEBUFFER,sn);try{const nn=K.texture,Vn=nn.format,Hn=nn.type;if(!ut.textureFormatReadable(Vn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!ut.textureTypeReadable(Hn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");me>=0&&me<=K.width-Re&&Ie>=0&&Ie<=K.height-ye&&ce.readPixels(me,Ie,Re,ye,Jn.convert(Vn),Jn.convert(Hn),_t)}finally{const nn=null!==J?qe.get(J).__webglFramebuffer:null;Ye.bindFramebuffer(ce.FRAMEBUFFER,nn)}}},this.readRenderTargetPixelsAsync=function(){var K=kM(function*(me,Ie,Re,ye,_t,Bt,sn){if(!me||!me.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let nn=qe.get(me).__webglFramebuffer;if(me.isWebGLCubeRenderTarget&&void 0!==sn&&(nn=nn[sn]),nn){if(Ie>=0&&Ie<=me.width-ye&&Re>=0&&Re<=me.height-_t){Ye.bindFramebuffer(ce.FRAMEBUFFER,nn);const Vn=me.texture,Hn=Vn.format,Sn=Vn.type;if(!ut.textureFormatReadable(Hn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ut.textureTypeReadable(Sn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const di=ce.createBuffer();ce.bindBuffer(ce.PIXEL_PACK_BUFFER,di),ce.bufferData(ce.PIXEL_PACK_BUFFER,Bt.byteLength,ce.STREAM_READ),ce.readPixels(Ie,Re,ye,_t,Jn.convert(Hn),Jn.convert(Sn),0);const Hi=null!==J?qe.get(J).__webglFramebuffer:null;Ye.bindFramebuffer(ce.FRAMEBUFFER,Hi);const br=ce.fenceSync(ce.SYNC_GPU_COMMANDS_COMPLETE,0);return ce.flush(),yield function Qd(l,e,t){return new Promise(function(n,r){setTimeout(function o(){switch(l.clientWaitSync(e,l.SYNC_FLUSH_COMMANDS_BIT,0)){case l.WAIT_FAILED:r();break;case l.TIMEOUT_EXPIRED:setTimeout(o,t);break;default:n()}},t)})}(ce,br,4),ce.bindBuffer(ce.PIXEL_PACK_BUFFER,di),ce.getBufferSubData(ce.PIXEL_PACK_BUFFER,0,Bt),ce.deleteBuffer(di),ce.deleteSync(br),Bt}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}});return function(me,Ie,Re,ye,_t,Bt,sn){return K.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(K,me=null,Ie=0){const Re=Math.pow(2,-Ie),ye=Math.floor(K.image.width*Re),_t=Math.floor(K.image.height*Re),Bt=null!==me?me.x:0,sn=null!==me?me.y:0;Q.setTexture2D(K,0),ce.copyTexSubImage2D(ce.TEXTURE_2D,Ie,0,0,Bt,sn,ye,_t),Ye.unbindTexture()};const PC=ce.createFramebuffer(),LC=ce.createFramebuffer();this.copyTextureToTexture=function(K,me,Ie=null,Re=null,ye=0,_t=null){let Bt,sn,nn,Vn,Hn,Sn,di,Hi,br;null===_t&&(0!==ye?(go("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),_t=ye,ye=0):_t=0);const kr=K.isCompressedTexture?K.mipmaps[_t]:K.image;if(null!==Ie)Bt=Ie.max.x-Ie.min.x,sn=Ie.max.y-Ie.min.y,nn=Ie.isBox3?Ie.max.z-Ie.min.z:1,Vn=Ie.min.x,Hn=Ie.min.y,Sn=Ie.isBox3?Ie.min.z:0;else{const rl=Math.pow(2,-ye);Bt=Math.floor(kr.width*rl),sn=Math.floor(kr.height*rl),nn=K.isDataArrayTexture?kr.depth:K.isData3DTexture?Math.floor(kr.depth*rl):1,Vn=0,Hn=0,Sn=0}null!==Re?(di=Re.x,Hi=Re.y,br=Re.z):(di=0,Hi=0,br=0);const Ei=Jn.convert(me.format),bn=Jn.convert(me.type);let qs;me.isData3DTexture?(Q.setTexture3D(me,0),qs=ce.TEXTURE_3D):me.isDataArrayTexture||me.isCompressedArrayTexture?(Q.setTexture2DArray(me,0),qs=ce.TEXTURE_2D_ARRAY):(Q.setTexture2D(me,0),qs=ce.TEXTURE_2D),ce.pixelStorei(ce.UNPACK_FLIP_Y_WEBGL,me.flipY),ce.pixelStorei(ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,me.premultiplyAlpha),ce.pixelStorei(ce.UNPACK_ALIGNMENT,me.unpackAlignment);const Pi=ce.getParameter(ce.UNPACK_ROW_LENGTH),Pl=ce.getParameter(ce.UNPACK_IMAGE_HEIGHT),fm=ce.getParameter(ce.UNPACK_SKIP_PIXELS),ba=ce.getParameter(ce.UNPACK_SKIP_ROWS),Z_=ce.getParameter(ce.UNPACK_SKIP_IMAGES);ce.pixelStorei(ce.UNPACK_ROW_LENGTH,kr.width),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,kr.height),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,Vn),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,Hn),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,Sn);const _r=K.isDataArrayTexture||K.isData3DTexture,il=me.isDataArrayTexture||me.isData3DTexture;if(K.isDepthTexture){const rl=qe.get(K),To=qe.get(me),$o=qe.get(rl.__renderTarget),hw=qe.get(To.__renderTarget);Ye.bindFramebuffer(ce.READ_FRAMEBUFFER,$o.__webglFramebuffer),Ye.bindFramebuffer(ce.DRAW_FRAMEBUFFER,hw.__webglFramebuffer);for(let _f=0;_f<nn;_f++)_r&&(ce.framebufferTextureLayer(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,qe.get(K).__webglTexture,ye,Sn+_f),ce.framebufferTextureLayer(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,qe.get(me).__webglTexture,_t,br+_f)),ce.blitFramebuffer(Vn,Hn,Bt,sn,di,Hi,Bt,sn,ce.DEPTH_BUFFER_BIT,ce.NEAREST);Ye.bindFramebuffer(ce.READ_FRAMEBUFFER,null),Ye.bindFramebuffer(ce.DRAW_FRAMEBUFFER,null)}else if(0!==ye||K.isRenderTargetTexture||qe.has(K)){const rl=qe.get(K),To=qe.get(me);Ye.bindFramebuffer(ce.READ_FRAMEBUFFER,PC),Ye.bindFramebuffer(ce.DRAW_FRAMEBUFFER,LC);for(let $o=0;$o<nn;$o++)_r?ce.framebufferTextureLayer(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,rl.__webglTexture,ye,Sn+$o):ce.framebufferTexture2D(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,rl.__webglTexture,ye),il?ce.framebufferTextureLayer(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,To.__webglTexture,_t,br+$o):ce.framebufferTexture2D(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,To.__webglTexture,_t),0!==ye?ce.blitFramebuffer(Vn,Hn,Bt,sn,di,Hi,Bt,sn,ce.COLOR_BUFFER_BIT,ce.NEAREST):il?ce.copyTexSubImage3D(qs,_t,di,Hi,br+$o,Vn,Hn,Bt,sn):ce.copyTexSubImage2D(qs,_t,di,Hi,Vn,Hn,Bt,sn);Ye.bindFramebuffer(ce.READ_FRAMEBUFFER,null),Ye.bindFramebuffer(ce.DRAW_FRAMEBUFFER,null)}else il?K.isDataTexture||K.isData3DTexture?ce.texSubImage3D(qs,_t,di,Hi,br,Bt,sn,nn,Ei,bn,kr.data):me.isCompressedArrayTexture?ce.compressedTexSubImage3D(qs,_t,di,Hi,br,Bt,sn,nn,Ei,kr.data):ce.texSubImage3D(qs,_t,di,Hi,br,Bt,sn,nn,Ei,bn,kr):K.isDataTexture?ce.texSubImage2D(ce.TEXTURE_2D,_t,di,Hi,Bt,sn,Ei,bn,kr.data):K.isCompressedTexture?ce.compressedTexSubImage2D(ce.TEXTURE_2D,_t,di,Hi,kr.width,kr.height,Ei,kr.data):ce.texSubImage2D(ce.TEXTURE_2D,_t,di,Hi,Bt,sn,Ei,bn,kr);ce.pixelStorei(ce.UNPACK_ROW_LENGTH,Pi),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,Pl),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,fm),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,ba),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,Z_),0===_t&&me.generateMipmaps&&ce.generateMipmap(qs),Ye.unbindTexture()},this.copyTextureToTexture3D=function(K,me,Ie=null,Re=null,ye=0){return go('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(K,me,Ie,Re,ye)},this.initRenderTarget=function(K){void 0===qe.get(K).__webglFramebuffer&&Q.setupRenderTarget(K)},this.initTexture=function(K){K.isCubeTexture?Q.setTextureCube(K,0):K.isData3DTexture?Q.setTexture3D(K,0):K.isDataArrayTexture||K.isCompressedArrayTexture?Q.setTexture2DArray(K,0):Q.setTexture2D(K,0),Ye.unbindTexture()},this.resetState=function(){Y=0,Z=0,J=null,Ye.reset(),ir.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Oo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=I._getDrawingBufferColorSpace(e),t.unpackColorSpace=I._getUnpackColorSpace()}}function Cl(l){if(void 0===l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function H0(l,e){l.prototype=Object.create(e.prototype),l.prototype.constructor=l,l.__proto__=e}var g_,cs,tr,lr,xo,Cd,x_,M_,E_,du,tm,f,p,g,y,M,S,l,e,t,n,r,o,c,d,C,vo={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Sd={duration:.5,overwrite:!1,delay:0},Go=1e8,ki=1/Go,lu=2*Math.PI,V0=lu/4,G0=0,__=Math.sqrt,W0=Math.cos,$0=Math.sin,Jr=function(e){return"string"==typeof e},mr=function(e){return"function"==typeof e},mc=function(e){return"number"==typeof e},y_=function(e){return typeof e>"u"},Za=function(e){return"object"==typeof e},io=function(e){return!1!==e},v_=function(){return typeof window<"u"},Up=function(e){return mr(e)||Jr(e)},bd="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Ds=Array.isArray,Zh=/(?:-?\.?\d|\.)+/gi,Sa=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,wd=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Kh=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Ed=/[+-]=-?[.\d]+/,j0=/[^,'"\[\]\s]+/gi,Pb=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Mo={},Jh={},kp=function(e){return(Jh=Ka(e,Mo))&&Eo},Bp=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},cu=function(e,t){return!t&&console.warn(e)},zp=function(e,t){return e&&(Mo[e]=t)&&Jh&&(Jh[e]=t)||Mo},Td=function(){return 0},S_={suppressEvents:!0,isStart:!0,kill:!1},Ad={suppressEvents:!0,kill:!1},Lb={suppressEvents:!0},b_={},gc=[],w_={},Xs={},Hp={},C_=30,Qh=[],Vp="",T_=function(e){var n,r,t=e[0];if(Za(t)||mr(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(r=Qh.length;r--&&!Qh[r].targetTest(t););n=Qh[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new wo(e[r],n)))||e.splice(r,1);return e},_c=function(e){return e._gsap||T_(bo(e))[0]._gsap},A_=function(e,t,n){return(n=e[t])&&mr(n)?e[t]():y_(n)&&e.getAttribute&&e.getAttribute(t)||n},ro=function(e,t){return(e=e.split(",")).forEach(t)||e},gr=function(e){return Math.round(1e5*e)/1e5||0},Or=function(e){return Math.round(1e7*e)/1e7||0},Nr=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),"+"===n?e+r:"-"===n?e-r:"*"===n?e*r:e/r},Dd=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},Gp=function(){var n,r,e=gc.length,t=gc.slice(0);for(w_={},gc.length=0,n=0;n<e;n++)(r=t[n])&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},X0=function(e,t,n,r){gc.length&&!cs&&Gp(),e.render(t,n,r||cs&&t<0&&(e._initted||e._startAt)),gc.length&&!cs&&Gp()},Ob=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(j0).length<2?t:Jr(e)?e.trim():e},Nb=function(e){return e},so=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Ka=function(e,t){for(var n in t)e[n]=t[n];return e},Y0=function l(e,t){for(var n in t)"__proto__"!==n&&"constructor"!==n&&"prototype"!==n&&(e[n]=Za(t[n])?l(e[n]||(e[n]={}),t[n]):t[n]);return e},Id=function(e,t){var r,n={};for(r in e)r in t||(n[r]=e[r]);return n},ef=function(e){var t=e.parent||lr,n=e.keyframes?function(e){return function(t,n){for(var r in n)r in t||"duration"===r&&e||"ease"===r||(t[r]=n[r])}}(Ds(e.keyframes)):so;if(io(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},Z0=function(e,t,n,r,o){void 0===n&&(n="_first"),void 0===r&&(r="_last");var d,c=e[r];if(o)for(d=t[o];c&&c[o]>d;)c=c._prev;return c?(t._next=c._next,c._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=c,t.parent=t._dp=e,t},Wp=function(e,t,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var o=t._prev,c=t._next;o?o._next=c:e[n]===t&&(e[n]=c),c?c._prev=o:e[r]===t&&(e[r]=o),t._next=t._prev=t.parent=null},yc=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Tl=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},K0=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},$p=function(e,t,n,r){return e._startAt&&(cs?e._startAt.revert(Ad):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},jp=function l(e){return!e||e._ts&&l(e.parent)},Xp=function(e){return e._repeat?tf(e._tTime,e=e.duration()+e._rDelay)*e:0},tf=function(e,t){var n=Math.floor(e=Or(e/t));return e&&n===e?n-1:n},nf=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Yp=function(e){return e._end=Or(e._start+(e._tDur/Math.abs(e._ts||e._rts||ki)||0))},rf=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Or(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Yp(e),n._dirty||Tl(n,e)),e},uu=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=nf(e.rawTime(),t),(!t._dur||Pd(0,t.totalDuration(),n)-t._tTime>ki)&&t.render(n,!0)),Tl(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-ki}},Ja=function(e,t,n,r){return t.parent&&yc(t),t._start=Or((mc(n)?n:n||e!==lr?So(e,n,t):e._time)+t._delay),t._end=Or(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Z0(e,t,"_first","_last",e._sort?"_start":0),R_(t)||(e._recent=t),r||uu(e,t),e._ts<0&&rf(e,e._tTime),e},I_=function(e,t){return(Mo.ScrollTrigger||Bp("scrollTrigger",t))&&Mo.ScrollTrigger.create(t,e)},qp=function(e,t,n,r,o){return im(e,t,o),e._initted?!n&&e._pt&&!cs&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&E_!==Wo.frame?(gc.push(e),e._lazy=[o,r],1):void 0:1},vE=function l(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||l(t))},R_=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Rd=function(e,t,n,r){var o=e._repeat,c=Or(t)||0,d=e._tTime/e._tDur;return d&&!r&&(e._time*=c/e._dur),e._dur=c,e._tDur=o?o<0?1e10:Or(c*(o+1)+e._rDelay*o):c,d>0&&!r&&rf(e,e._tTime=e._tDur*d),e.parent&&Yp(e),n||Tl(e.parent,e),e},J0=function(e){return e instanceof ds?Tl(e):Rd(e,e._dur)},Q0={_start:0,endTime:Td,totalDuration:Td},So=function l(e,t,n){var d,f,p,r=e.labels,o=e._recent||Q0,c=e.duration()>=Go?o.endTime(!1):e._dur;return Jr(t)&&(isNaN(t)||t in r)?(f=t.charAt(0),p="%"===t.substr(-1),d=t.indexOf("="),"<"===f||">"===f?(d>=0&&(t=t.replace(/=/,"")),("<"===f?o._start:o.endTime(o._repeat>=0))+(parseFloat(t.substr(1))||0)*(p?(d<0?o:n).totalDuration()/100:1)):d<0?(t in r||(r[t]=c),r[t]):(f=parseFloat(t.charAt(d-1)+t.substr(d+1)),p&&n&&(f=f/100*(Ds(n)?n[0]:n).totalDuration()),d>1?l(e,t.substr(0,d-1),n)+f:c+f)):null==t?c:+t},sf=function(e,t,n){var d,f,r=mc(t[1]),o=(r?2:1)+(e<2?0:1),c=t[o];if(r&&(c.duration=t[1]),c.parent=n,e){for(d=c,f=n;f&&!("immediateRender"in d);)d=f.vars.defaults||{},f=io(f.vars.inherit)&&f.parent;c.immediateRender=io(d.immediateRender),e<2?c.runBackwards=1:c.startAt=t[o-1]}return new Bi(t[0],c,t[o+1])},Al=function(e,t){return e||0===e?t(e):t},Pd=function(e,t,n){return n<e?e:n>t?t:n},Is=function(e,t){return Jr(e)&&(t=Pb.exec(e))?t[1]:""},Zp=[].slice,ex=function(e,t){return e&&Za(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Za(e[0]))&&!e.nodeType&&e!==xo},bo=function(e,t,n){return tr&&!t&&tr.selector?tr.selector(e):!Jr(e)||n||!Cd&&af()?Ds(e)?function(e,t,n){return void 0===n&&(n=[]),e.forEach(function(r){var o;return Jr(r)&&!t||ex(r,1)?(o=n).push.apply(o,bo(r)):n.push(r)})||n}(e,n):ex(e)?Zp.call(e,0):e?[e]:[]:Zp.call((t||x_).querySelectorAll(e),0)},Kp=function(e){return e=bo(e)[0]||cu("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return bo(t,n.querySelectorAll?n:n===e?cu("Invalid scope")||x_.createElement("div"):e)}},P_=function(e){return e.sort(function(){return.5-Math.random()})},nx=function(e){if(mr(e))return e;var t=Za(e)?e:{each:e},n=us(t.ease),r=t.from||0,o=parseFloat(t.base)||0,c={},d=r>0&&r<1,f=isNaN(r)||d,p=t.axis,g=r,y=r;return Jr(r)?g=y={center:.5,edges:.5,end:1}[r]||0:!d&&f&&(g=r[0],y=r[1]),function(M,S,C){var T,U,N,O,q,Y,Z,J,H,D=(C||t).length,A=c[D];if(!A){if(!(H="auto"===t.grid?0:(t.grid||[1,Go])[1])){for(Z=-Go;Z<(Z=C[H++].getBoundingClientRect().left)&&H<D;);H<D&&H--}for(A=c[D]=[],T=f?Math.min(H,D)*g-.5:r%H,U=H===Go?0:f?D*y/H-.5:r/H|0,Z=0,J=Go,Y=0;Y<D;Y++)N=Y%H-T,O=U-(Y/H|0),A[Y]=q=p?Math.abs("y"===p?O:N):__(N*N+O*O),q>Z&&(Z=q),q<J&&(J=q);"random"===r&&P_(A),A.max=Z-J,A.min=J,A.v=D=(parseFloat(t.amount)||parseFloat(t.each)*(H>D?D-1:p?"y"===p?D/H:H:Math.max(H,D/H))||0)*("edges"===r?-1:1),A.b=D<0?o-D:o,A.u=Is(t.amount||t.each)||0,n=n&&D<0?U_(n):n}return D=(A[M]-A.min)/A.max||0,Or(A.b+(n?n(D):D)*A.v)+A.u}},L_=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=Or(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(mc(n)?0:Is(n))}},kb=function(e,t){var r,o,n=Ds(e);return!n&&Za(e)&&(r=n=e.radius||Go,e.values?(e=bo(e.values),(o=!mc(e[0]))&&(r*=r)):e=L_(e.increment)),Al(t,n?mr(e)?function(c){return o=e(c),Math.abs(o-c)<=r?o:c}:function(c){for(var M,S,d=parseFloat(o?c.x:c),f=parseFloat(o?c.y:0),p=Go,g=0,y=e.length;y--;)(M=o?(M=e[y].x-d)*M+(S=e[y].y-f)*S:Math.abs(e[y]-d))<p&&(p=M,g=y);return g=!r||p<=r?e[g]:c,o||g===c||mc(c)?g:g+Is(c)}:L_(e))},O_=function(e,t,n,r){return Al(Ds(e)?!t:!0===n?!!(n=0):!r,function(){return Ds(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*r)/r})},Bb=function(e,t,n){return Al(n,function(r){return e[~~t(r)]})},Jp=function(e){for(var r,o,c,d,t=0,n="";~(r=e.indexOf("random(",t));)c=e.indexOf(")",r),d="["===e.charAt(r+7),o=e.substr(r+7,c-r-7).match(d?j0:Zh),n+=e.substr(t,r-t)+O_(d?o:+o[0],d?0:+o[1],+o[2]||1e-5),t=c+1;return n+e.substr(t,e.length-t)},zb=function(e,t,n,r,o){var c=t-e,d=r-n;return Al(o,function(f){return n+((f-e)/c*d||0)})},Hb=function(e,t,n){var c,d,f,r=e.labels,o=Go;for(c in r)(d=r[c]-t)<0==!!n&&d&&o>(d=Math.abs(d))&&(f=c,o=d);return f},oo=function(e,t,n){var f,p,g,r=e.vars,o=r[t],c=tr,d=e._ctx;if(o)return f=r[t+"Params"],p=r.callbackScope||e,n&&gc.length&&Gp(),d&&(tr=d),g=f?o.apply(p,f):o.call(p),tr=c,g},vc=function(e){return yc(e),e.scrollTrigger&&e.scrollTrigger.kill(!!cs),e.progress()<1&&oo(e,"onInterrupt"),e},N_=[],Vb=function(e){if(e)if(e=!e.name&&e.default||e,v_()||e.headless){var t=e.name,n=mr(e),r=t&&!n&&e.init?function(){this._props=[]}:e,o={init:Td,render:G_,add:B_,kill:Qb,modifier:fx,rawVars:0},c={targetTest:0,get:0,getSetter:ux,aliases:{},register:0};if(af(),e!==r){if(Xs[t])return;so(r,so(Id(e,o),c)),Ka(r.prototype,Ka(o,Id(e,c))),Xs[r.prop=t]=r,e.targetTest&&(Qh.push(r),b_[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}zp(t,r),e.register&&e.register(Eo,r,Ys)}else N_.push(e)},Ai=255,Ld={aqua:[0,Ai,Ai],lime:[0,Ai,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ai],navy:[0,0,128],white:[Ai,Ai,Ai],olive:[128,128,0],yellow:[Ai,Ai,0],orange:[Ai,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ai,0,0],pink:[Ai,192,203],cyan:[0,Ai,Ai],transparent:[Ai,Ai,Ai,0]},F_=function(e,t,n){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*Ai+.5|0},Gb=function(e,t,n){var o,c,d,f,p,g,y,M,S,C,r=e?mc(e)?[e>>16,e>>8&Ai,e&Ai]:0:Ld.black;if(!r){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),Ld[e])r=Ld[e];else if("#"===e.charAt(0)){if(e.length<6&&(o=e.charAt(1),c=e.charAt(2),d=e.charAt(3),e="#"+o+o+c+c+d+d+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(r=parseInt(e.substr(1,6),16))>>16,r>>8&Ai,r&Ai,parseInt(e.substr(7),16)/255];r=[(e=parseInt(e.substr(1),16))>>16,e>>8&Ai,e&Ai]}else if("hsl"===e.substr(0,3))if(r=C=e.match(Zh),t){if(~e.indexOf("="))return r=e.match(Sa),n&&r.length<4&&(r[3]=1),r}else f=+r[0]%360/360,p=+r[1]/100,o=2*(g=+r[2]/100)-(c=g<=.5?g*(p+1):g+p-g*p),r.length>3&&(r[3]*=1),r[0]=F_(f+1/3,o,c),r[1]=F_(f,o,c),r[2]=F_(f-1/3,o,c);else r=e.match(Zh)||Ld.transparent;r=r.map(Number)}return t&&!C&&(o=r[0]/Ai,c=r[1]/Ai,d=r[2]/Ai,g=((y=Math.max(o,c,d))+(M=Math.min(o,c,d)))/2,y===M?f=p=0:(S=y-M,p=g>.5?S/(2-y-M):S/(y+M),f=y===o?(c-d)/S+(c<d?6:0):y===c?(d-o)/S+2:(o-c)/S+4,f*=60),r[0]=~~(f+.5),r[1]=~~(100*p+.5),r[2]=~~(100*g+.5)),n&&r.length<4&&(r[3]=1),r},Wb=function(e){var t=[],n=[],r=-1;return e.split(xc).forEach(function(o){var c=o.match(wd)||[];t.push.apply(t,c),n.push(r+=c.length+1)}),t.c=n,t},ix=function(e,t,n){var f,p,g,y,r="",o=(e+r).match(xc),c=t?"hsla(":"rgba(",d=0;if(!o)return e;if(o=o.map(function(M){return(M=Gb(M,t,1))&&c+(t?M[0]+","+M[1]+"%,"+M[2]+"%,"+M[3]:M.join(","))+")"}),n&&(g=Wb(e),(f=n.c).join(r)!==g.c.join(r)))for(y=(p=e.replace(xc,"1").split(wd)).length-1;d<y;d++)r+=p[d]+(~f.indexOf(d)?o.shift()||c+"0,0,0,0)":(g.length?g:o.length?o:n).shift());if(!p)for(y=(p=e.split(xc)).length-1;d<y;d++)r+=p[d]+o[d];return r+p[y]},xc=function(){var e,l="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in Ld)l+="|"+e+"\\b";return new RegExp(l+")","gi")}(),em=/hsl[a]?\(/,rx=function(e){var n,t=e.join(" ");if(xc.lastIndex=0,xc.test(t))return n=em.test(t),e[1]=ix(e[1],n),e[0]=ix(e[0],n,Wb(e[1])),!0},Wo=(l=Date.now,e=500,t=33,n=l(),r=n,c=o=1e3/240,C=function D(A){var N,O,q,Y,T=l()-r,U=!0===A;if((T>e||T<0)&&(n+=T-t),((N=(q=(r+=T)-n)-c)>0||U)&&(Y=++y.frame,M=q-1e3*y.time,y.time=q/=1e3,c+=N+(N>=o?4:o-N),O=1),U||(f=p(D)),O)for(S=0;S<d.length;S++)d[S](q,M,Y,A)},y={time:0,frame:0,tick:function(){C(!0)},deltaRatio:function(A){return M/(1e3/(A||60))},wake:function(){M_&&(!Cd&&v_()&&(xo=Cd=window,x_=xo.document||{},Mo.gsap=Eo,(xo.gsapVersions||(xo.gsapVersions=[])).push(Eo.version),kp(Jh||xo.GreenSockGlobals||!xo.gsap&&xo||{}),N_.forEach(Vb)),g=typeof requestAnimationFrame<"u"&&requestAnimationFrame,f&&y.sleep(),p=g||function(A){return setTimeout(A,c-1e3*y.time+1|0)},tm=1,C(2))},sleep:function(){(g?cancelAnimationFrame:clearTimeout)(f),tm=0,p=Td},lagSmoothing:function(A,T){e=A||1/0,t=Math.min(T||33,e)},fps:function(A){c=1e3*y.time+(o=1e3/(A||240))},add:function(A,T,U){var N=T?function(O,q,Y,Z){A(O,q,Y,Z),y.remove(N)}:A;return y.remove(A),d[U?"unshift":"push"](N),af(),N},remove:function(A,T){~(T=d.indexOf(A))&&d.splice(T,1)&&S>=T&&S--},_listeners:d=[]}),af=function(){return!tm&&Wo.wake()},ti={},$b=/^[\d.\-M][\d.\-,\s]/,jb=/["']/g,CE=function(e){for(var d,f,p,t={},n=e.substr(1,e.length-3).split(":"),r=n[0],o=1,c=n.length;o<c;o++)f=n[o],d=o!==c-1?f.lastIndexOf(","):f.length,p=f.substr(0,d),t[r]=isNaN(p)?p.replace(jb,"").trim():+p,r=f.substr(d+1).trim();return t},U_=function(e){return function(t){return 1-e(1-t)}},Yb=function l(e,t){for(var r,n=e._first;n;)n instanceof ds?l(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?l(n.timeline,t):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=t)),n=n._next},us=function(e,t){return e&&(mr(e)?e:ti[e]||function(e){var t=(e+"").split("("),n=ti[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[CE(t[1])]:function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<n?e.indexOf(")",n+1):n)}(e).split(",").map(Ob)):ti._CE&&$b.test(e)?ti._CE("",e):n}(e))||t},hu=function(e,t,n,r){void 0===n&&(n=function(f){return 1-t(1-f)}),void 0===r&&(r=function(f){return f<.5?t(2*f)/2:1-t(2*(1-f))/2});var c,o={easeIn:t,easeOut:n,easeInOut:r};return ro(e,function(d){for(var f in ti[d]=Mo[d]=o,ti[c=d.toLowerCase()]=n,o)ti[c+("easeIn"===f?".in":"easeOut"===f?".out":".inOut")]=ti[d+"."+f]=o[f]}),o},nm=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},k_=function l(e,t,n){var r=t>=1?t:1,o=(n||(e?.3:.45))/(t<1?t:1),c=o/lu*(Math.asin(1/r)||0),d=function(g){return 1===g?1:r*Math.pow(2,-10*g)*$0((g-c)*o)+1},f="out"===e?d:"in"===e?function(p){return 1-d(1-p)}:nm(d);return o=lu/o,f.config=function(p,g){return l(e,p,g)},f},ox=function l(e,t){void 0===t&&(t=1.70158);var n=function(c){return c?--c*c*((t+1)*c+t)+1:0},r="out"===e?n:"in"===e?function(o){return 1-n(1-o)}:nm(n);return r.config=function(o){return l(e,o)},r};ro("Linear,Quad,Cubic,Quart,Quint,Strong",function(l,e){var t=e<5?e+1:e;hu(l+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(2*n,t)/2:1-Math.pow(2*(1-n),t)/2})}),ti.Linear.easeNone=ti.none=ti.Linear.easeIn,hu("Elastic",k_("in"),k_("out"),k_()),function(l,e){var o=function(d){return d<.36363636363636365?l*d*d:d<.7272727272727273?l*Math.pow(d-1.5/e,2)+.75:d<.9090909090909092?l*(d-=2.25/e)*d+.9375:l*Math.pow(d-2.625/e,2)+.984375};hu("Bounce",function(c){return 1-o(1-c)},o)}(7.5625,2.75),hu("Expo",function(l){return Math.pow(2,10*(l-1))*l+l*l*l*l*l*l*(1-l)}),hu("Circ",function(l){return-(__(1-l*l)-1)}),hu("Sine",function(l){return 1===l?1:1-W0(l*V0)}),hu("Back",ox("in"),ox("out"),ox()),ti.SteppedEase=ti.steps=Mo.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,r=e+(t?0:1),o=t?1:0,c=1-ki;return function(d){return((r*Pd(0,c,d)|0)+o)*n}}},Sd.ease=ti["quad.out"],ro("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(l){return Vp+=l+","+l+"Params,"});var wo=function(e,t){this.id=G0++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:A_,this.set=t?t.getSetter:ux},lf=function(){function l(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Rd(this,+t.duration,1,1),this.data=t.data,tr&&(this._ctx=tr,tr.data.push(this)),tm||Wo.wake()}var e=l.prototype;return e.delay=function(n){return n||0===n?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,Rd(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,r){if(af(),!arguments.length)return this._tTime;var o=this._dp;if(o&&o.smoothChildTiming&&this._ts){for(rf(this,n),!o._dp||o.parent||uu(o,this);o&&o.parent;)o.parent._time!==o._start+(o._ts>=0?o._tTime/o._ts:(o.totalDuration()-o._tTime)/-o._ts)&&o.totalTime(o._tTime,!0),o=o.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Ja(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===ki||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),X0(this,n,r)),this},e.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+Xp(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},e.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?n:1-n)+Xp(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,r){var o=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*o,r):this._repeat?tf(this._tTime,o)+1:1},e.timeScale=function(n,r){if(!arguments.length)return this._rts===-ki?0:this._rts;if(this._rts===n)return this;var o=this.parent&&this._ts?nf(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-ki?0:this._rts,this.totalTime(Pd(-Math.abs(this._delay),this._tDur,o),!1!==r),Yp(this),K0(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(af(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==ki&&(this._tTime-=ki)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Ja(r,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(io(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?nf(r.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){void 0===n&&(n=Lb);var r=cs;return cs=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),"nested"!==this.data&&!1!==n.kill&&this.kill(),cs=r,this},e.globalTime=function(n){for(var r=this,o=arguments.length?n:r.rawTime();r;)o=r._start+o/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(n):o},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,J0(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,J0(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,r){return this.totalTime(So(this,n),io(r))},e.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,io(r)),this._dur||(this._zTime=-ki),this},e.play=function(n,r){return null!=n&&this.seek(n,r),this.reversed(!1).paused(!1)},e.reverse=function(n,r){return null!=n&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(n,r){return null!=n&&this.seek(n,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-ki:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-ki,this},e.isActive=function(){var o,n=this.parent||this._dp,r=this._start;return!(n&&!(this._ts&&this._initted&&n.isActive()&&(o=n.rawTime(!0))>=r&&o<this.endTime(!0)-ki))},e.eventCallback=function(n,r,o){var c=this.vars;return arguments.length>1?(r?(c[n]=r,o&&(c[n+"Params"]=o),"onUpdate"===n&&(this._onUpdate=r)):delete c[n],this):c[n]},e.then=function(n){var r=this;return new Promise(function(o){var c=mr(n)?n:Nb,d=function(){var p=r.then;r.then=null,mr(c)&&(c=c(r))&&(c.then||c===r)&&(r.then=p),o(c),r.then=p};r._initted&&1===r.totalProgress()&&r._ts>=0||!r._tTime&&r._ts<0?d():r._prom=d})},e.kill=function(){vc(this)},l}();so(lf.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-ki,_prom:0,_ps:!1,_rts:1});var ds=function(l){function e(n,r){var o;return void 0===n&&(n={}),(o=l.call(this,n)||this).labels={},o.smoothChildTiming=!!n.smoothChildTiming,o.autoRemoveChildren=!!n.autoRemoveChildren,o._sort=io(n.sortChildren),lr&&Ja(n.parent||lr,Cl(o),r),n.reversed&&o.reverse(),n.paused&&o.paused(!0),n.scrollTrigger&&I_(Cl(o),n.scrollTrigger),o}H0(e,l);var t=e.prototype;return t.to=function(r,o,c){return sf(0,arguments,this),this},t.from=function(r,o,c){return sf(1,arguments,this),this},t.fromTo=function(r,o,c,d){return sf(2,arguments,this),this},t.set=function(r,o,c){return o.duration=0,o.parent=this,ef(o).repeatDelay||(o.repeat=0),o.immediateRender=!!o.immediateRender,new Bi(r,o,So(this,c),1),this},t.call=function(r,o,c){return Ja(this,Bi.delayedCall(0,r,o),c)},t.staggerTo=function(r,o,c,d,f,p,g){return c.duration=o,c.stagger=c.stagger||d,c.onComplete=p,c.onCompleteParams=g,c.parent=this,new Bi(r,c,So(this,f)),this},t.staggerFrom=function(r,o,c,d,f,p,g){return c.runBackwards=1,ef(c).immediateRender=io(c.immediateRender),this.staggerTo(r,o,c,d,f,p,g)},t.staggerFromTo=function(r,o,c,d,f,p,g,y){return d.startAt=c,ef(d).immediateRender=io(d.immediateRender),this.staggerTo(r,o,d,f,p,g,y)},t.render=function(r,o,c){var M,S,C,D,A,T,U,N,O,q,Y,Z,d=this._time,f=this._dirty?this.totalDuration():this._tDur,p=this._dur,g=r<=0?0:Or(r),y=this._zTime<0!=r<0&&(this._initted||!p);if(this!==lr&&g>f&&r>=0&&(g=f),g!==this._tTime||c||y){if(d!==this._time&&p&&(g+=this._time-d,r+=this._time-d),M=g,O=this._start,T=!(N=this._ts),y&&(p||(d=this._zTime),(r||!o)&&(this._zTime=r)),this._repeat){if(Y=this._yoyo,A=p+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(100*A+r,o,c);if(M=Or(g%A),g===f?(D=this._repeat,M=p):((D=~~(q=Or(g/A)))&&D===q&&(M=p,D--),M>p&&(M=p)),q=tf(this._tTime,A),!d&&this._tTime&&q!==D&&this._tTime-q*A-this._dur<=0&&(q=D),Y&&1&D&&(M=p-M,Z=1),D!==q&&!this._lock){var J=Y&&1&q,H=J===(Y&&1&D);if(D<q&&(J=!J),d=J?0:g%p?p:g,this._lock=1,this.render(d||(Z?0:Or(D*A)),o,!p)._lock=0,this._tTime=g,!o&&this.parent&&oo(this,"onRepeat"),this.vars.repeatRefresh&&!Z&&(this.invalidate()._lock=1),d&&d!==this._time||T!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(p=this._dur,f=this._tDur,H&&(this._lock=2,this.render(d=J?p:-1e-4,!0),this.vars.repeatRefresh&&!Z&&this.invalidate()),this._lock=0,!this._ts&&!T)return this;Yb(this,Z)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(U=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,Or(d),Or(M)),U&&(g-=M-(M=U._start))),this._tTime=g,this._time=M,this._act=!N,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,d=0),!d&&M&&!o&&!D&&(oo(this,"onStart"),this._tTime!==g))return this;if(M>=d&&r>=0)for(S=this._first;S;){if(C=S._next,(S._act||M>=S._start)&&S._ts&&U!==S){if(S.parent!==this)return this.render(r,o,c);if(S.render(S._ts>0?(M-S._start)*S._ts:(S._dirty?S.totalDuration():S._tDur)+(M-S._start)*S._ts,o,c),M!==this._time||!this._ts&&!T){U=0,C&&(g+=this._zTime=-ki);break}}S=C}else{S=this._last;for(var V=r<0?r:M;S;){if(C=S._prev,(S._act||V<=S._end)&&S._ts&&U!==S){if(S.parent!==this)return this.render(r,o,c);if(S.render(S._ts>0?(V-S._start)*S._ts:(S._dirty?S.totalDuration():S._tDur)+(V-S._start)*S._ts,o,c||cs&&(S._initted||S._startAt)),M!==this._time||!this._ts&&!T){U=0,C&&(g+=this._zTime=V?-ki:ki);break}}S=C}}if(U&&!o&&(this.pause(),U.render(M>=d?0:-ki)._zTime=M>=d?1:-1,this._ts))return this._start=O,Yp(this),this.render(r,o,c);this._onUpdate&&!o&&oo(this,"onUpdate",!0),(g===f&&this._tTime>=this.totalDuration()||!g&&d)&&(O===this._start||Math.abs(N)!==Math.abs(this._ts))&&(this._lock||((r||!p)&&(g===f&&this._ts>0||!g&&this._ts<0)&&yc(this,1),!o&&(!(r<0)||d)&&(g||d||!f)&&(oo(this,g===f&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(g<f&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,o){var c=this;if(mc(o)||(o=So(this,o,r)),!(r instanceof lf)){if(Ds(r))return r.forEach(function(d){return c.add(d,o)}),this;if(Jr(r))return this.addLabel(r,o);if(!mr(r))return this;r=Bi.delayedCall(0,r)}return this!==r?Ja(this,r,o):this},t.getChildren=function(r,o,c,d){void 0===r&&(r=!0),void 0===o&&(o=!0),void 0===c&&(c=!0),void 0===d&&(d=-Go);for(var f=[],p=this._first;p;)p._start>=d&&(p instanceof Bi?o&&f.push(p):(c&&f.push(p),r&&f.push.apply(f,p.getChildren(!0,o,c)))),p=p._next;return f},t.getById=function(r){for(var o=this.getChildren(1,1,1),c=o.length;c--;)if(o[c].vars.id===r)return o[c]},t.remove=function(r){return Jr(r)?this.removeLabel(r):mr(r)?this.killTweensOf(r):(r.parent===this&&Wp(this,r),r===this._recent&&(this._recent=this._last),Tl(this))},t.totalTime=function(r,o){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Or(Wo.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),l.prototype.totalTime.call(this,r,o),this._forcing=0,this):this._tTime},t.addLabel=function(r,o){return this.labels[r]=So(this,o),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,o,c){var d=Bi.delayedCall(0,o||Td,c);return d.data="isPause",this._hasPause=1,Ja(this,d,So(this,r))},t.removePause=function(r){var o=this._first;for(r=So(this,r);o;)o._start===r&&"isPause"===o.data&&yc(o),o=o._next},t.killTweensOf=function(r,o,c){for(var d=this.getTweensOf(r,c),f=d.length;f--;)Dl!==d[f]&&d[f].kill(r,o);return this},t.getTweensOf=function(r,o){for(var g,c=[],d=bo(r),f=this._first,p=mc(o);f;)f instanceof Bi?Dd(f._targets,d)&&(p?(!Dl||f._initted&&f._ts)&&f.globalTime(0)<=o&&f.globalTime(f.totalDuration())>o:!o||f.isActive())&&c.push(f):(g=f.getTweensOf(d,o)).length&&c.push.apply(c,g),f=f._next;return c},t.tweenTo=function(r,o){o=o||{};var S,c=this,d=So(c,r),p=o.startAt,g=o.onStart,y=o.onStartParams,M=o.immediateRender,C=Bi.to(c,so({ease:o.ease||"none",lazy:!1,immediateRender:!1,time:d,overwrite:"auto",duration:o.duration||Math.abs((d-(p&&"time"in p?p.time:c._time))/c.timeScale())||ki,onStart:function(){if(c.pause(),!S){var A=o.duration||Math.abs((d-(p&&"time"in p?p.time:c._time))/c.timeScale());C._dur!==A&&Rd(C,A,0,1).render(C._time,!0,!0),S=1}g&&g.apply(C,y||[])}},o));return M?C.render(0):C},t.tweenFromTo=function(r,o,c){return this.tweenTo(o,so({startAt:{time:So(this,r)}},c))},t.recent=function(){return this._recent},t.nextLabel=function(r){return void 0===r&&(r=this._time),Hb(this,So(this,r))},t.previousLabel=function(r){return void 0===r&&(r=this._time),Hb(this,So(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+ki)},t.shiftChildren=function(r,o,c){void 0===c&&(c=0);for(var p,d=this._first,f=this.labels;d;)d._start>=c&&(d._start+=r,d._end+=r),d=d._next;if(o)for(p in f)f[p]>=c&&(f[p]+=r);return Tl(this)},t.invalidate=function(r){var o=this._first;for(this._lock=0;o;)o.invalidate(r),o=o._next;return l.prototype.invalidate.call(this,r)},t.clear=function(r){void 0===r&&(r=!0);for(var c,o=this._first;o;)c=o._next,this.remove(o),o=c;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Tl(this)},t.totalDuration=function(r){var p,g,y,o=0,c=this,d=c._last,f=Go;if(arguments.length)return c.timeScale((c._repeat<0?c.duration():c.totalDuration())/(c.reversed()?-r:r));if(c._dirty){for(y=c.parent;d;)p=d._prev,d._dirty&&d.totalDuration(),(g=d._start)>f&&c._sort&&d._ts&&!c._lock?(c._lock=1,Ja(c,d,g-d._delay,1)._lock=0):f=g,g<0&&d._ts&&(o-=g,(!y&&!c._dp||y&&y.smoothChildTiming)&&(c._start+=g/c._ts,c._time-=g,c._tTime-=g),c.shiftChildren(-g,!1,-1/0),f=0),d._end>o&&d._ts&&(o=d._end),d=p;Rd(c,c===lr&&c._time>o?c._time:o,1,1),c._dirty=0}return c._tDur},e.updateRoot=function(r){if(lr._ts&&(X0(lr,nf(r,lr)),E_=Wo.frame),Wo.frame>=C_){C_+=vo.autoSleep||120;var o=lr._first;if((!o||!o._ts)&&vo.autoSleep&&Wo._listeners.length<2){for(;o&&!o._ts;)o=o._next;o||Wo.sleep()}}},e}(lf);so(ds.prototype,{_lock:0,_hasPause:0,_forcing:0});var Dl,V_,qb=function(e,t,n,r,o,c,d){var y,M,S,C,D,A,T,U,f=new Ys(this._pt,e,t,0,1,hx,null,o),p=0,g=0;for(f.b=n,f.e=r,n+="",(T=~(r+="").indexOf("random("))&&(r=Jp(r)),c&&(c(U=[n,r],e,t),n=U[0],r=U[1]),M=n.match(Kh)||[];y=Kh.exec(r);)C=y[0],D=r.substring(p,y.index),S?S=(S+1)%5:"rgba("===D.substr(-5)&&(S=1),C!==M[g++]&&(A=parseFloat(M[g-1])||0,f._pt={_next:f._pt,p:D||1===g?D:",",s:A,c:"="===C.charAt(1)?Nr(A,C)-A:parseFloat(C)-A,m:S&&S<4?Math.round:0},p=Kh.lastIndex);return f.c=p<r.length?r.substring(p,r.length):"",f.fp=d,(Ed.test(r)||T)&&(f.e=0),this._pt=f,f},B_=function(e,t,n,r,o,c,d,f,p,g){mr(r)&&(r=r(o||0,e,c));var C,y=e[t],M="get"!==n?n:mr(y)?p?e[t.indexOf("set")||!mr(e["get"+t.substr(3)])?t:"get"+t.substr(3)](p):e[t]():y,S=mr(y)?p?cx:om:sm;if(Jr(r)&&(~r.indexOf("random(")&&(r=Jp(r)),"="===r.charAt(1)&&((C=Nr(M,r)+(Is(M)||0))||0===C)&&(r=C)),!g||M!==r||V_)return isNaN(M*r)||""===r?(!y&&!(t in e)&&Bp(t,r),qb.call(this,e,t,M,r,S,f||vo.stringFilter,p)):(C=new Ys(this._pt,e,t,+M||0,r-(M||0),"boolean"==typeof y?Jb:dx,0,S),p&&(C.fp=p),d&&C.modifier(d,this,e),this._pt=C)},H_=function(e,t,n,r,o,c){var d,f,p,g;if(Xs[e]&&!1!==(d=new Xs[e]).init(o,d.rawVars?t[e]:function(e,t,n,r,o){if(mr(e)&&(e=cf(e,o,t,n,r)),!Za(e)||e.style&&e.nodeType||Ds(e)||bd(e))return Jr(e)?cf(e,o,t,n,r):e;var d,c={};for(d in e)c[d]=cf(e[d],o,t,n,r);return c}(t[e],r,o,c,n),n,r,c)&&(n._pt=f=new Ys(n._pt,o,e,0,1,d.render,d,0,d.priority),n!==du))for(p=n._ptLookup[n._targets.indexOf(o)],g=d._props.length;g--;)p[d._props[g]]=f;return d},im=function l(e,t,n){var q,Y,Z,J,H,V,se,Me,xe,De,ze,Te,tt,r=e.vars,o=r.ease,c=r.startAt,d=r.immediateRender,f=r.lazy,p=r.onUpdate,g=r.runBackwards,y=r.yoyoEase,M=r.keyframes,S=r.autoRevert,C=e._dur,D=e._startAt,A=e._targets,T=e.parent,U=T&&"nested"===T.data?T.vars.targets:A,N="auto"===e._overwrite&&!g_,O=e.timeline;if(O&&(!M||!o)&&(o="none"),e._ease=us(o,Sd.ease),e._yEase=y?U_(us(!0===y?o:y,Sd.ease)):0,y&&e._yoyo&&!e._repeat&&(y=e._yEase,e._yEase=e._ease,e._ease=y),e._from=!O&&!!r.runBackwards,!O||M&&!r.stagger){if(Te=(Me=A[0]?_c(A[0]).harness:0)&&r[Me.prop],q=Id(r,b_),D&&(D._zTime<0&&D.progress(1),t<0&&g&&d&&!S?D.render(-1,!0):D.revert(g&&C?Ad:S_),D._lazy=0),c){if(yc(e._startAt=Bi.set(A,so({data:"isStart",overwrite:!1,parent:T,immediateRender:!0,lazy:!D&&io(f),startAt:null,delay:0,onUpdate:p&&function(){return oo(e,"onUpdate")},stagger:0},c))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(cs||!d&&!S)&&e._startAt.revert(Ad),d&&C&&t<=0&&n<=0)return void(t&&(e._zTime=t))}else if(g&&C&&!D)if(t&&(d=!1),Z=so({overwrite:!1,data:"isFromStart",lazy:d&&!D&&io(f),immediateRender:d,stagger:0,parent:T},q),Te&&(Z[Me.prop]=Te),yc(e._startAt=Bi.set(A,Z)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(cs?e._startAt.revert(Ad):e._startAt.render(-1,!0)),e._zTime=t,d){if(!t)return}else l(e._startAt,ki,ki);for(e._pt=e._ptCache=0,f=C&&io(f)||f&&!C,Y=0;Y<A.length;Y++){if(se=(H=A[Y])._gsap||T_(A)[Y]._gsap,e._ptLookup[Y]=De={},w_[se.id]&&gc.length&&Gp(),ze=U===A?Y:U.indexOf(H),Me&&!1!==(xe=new Me).init(H,Te||q,e,ze,U)&&(e._pt=J=new Ys(e._pt,H,xe.name,0,1,xe.render,xe,0,xe.priority),xe._props.forEach(function(Oe){De[Oe]=J}),xe.priority&&(V=1)),!Me||Te)for(Z in q)Xs[Z]&&(xe=H_(Z,q,e,ze,H,U))?xe.priority&&(V=1):De[Z]=J=B_.call(e,H,Z,"get",q[Z],ze,U,0,r.stringFilter);e._op&&e._op[Y]&&e.kill(H,e._op[Y]),N&&e._pt&&(Dl=e,lr.killTweensOf(H,De,e.globalTime(t)),tt=!e.parent,Dl=0),e._pt&&f&&(w_[se.id]=1)}V&&px(e),e._onInit&&e._onInit(e)}e._onUpdate=p,e._initted=(!e._op||e._pt)&&!tt,M&&t<=0&&O.render(Go,!0,!0)},lx=function(e,t,n,r){var c,d,o=t.ease||r||"power1.inOut";if(Ds(t))d=n[e]||(n[e]=[]),t.forEach(function(f,p){return d.push({t:p/(t.length-1)*100,v:f,e:o})});else for(c in t)d=n[c]||(n[c]=[]),"ease"===c||d.push({t:parseFloat(e),v:t[c],e:o})},cf=function(e,t,n,r,o){return mr(e)?e.call(t,n,r,o):Jr(e)&&~e.indexOf("random(")?Jp(e):e},rm=Vp+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Qa={};ro(rm+",id,stagger,delay,duration,paused,scrollTrigger",function(l){return Qa[l]=1});var Bi=function(l){function e(n,r,o,c){var d;"number"==typeof r&&(o.duration=r,r=o,o=null);var O,q,Y,Z,J,H,V,se,f=(d=l.call(this,c?r:ef(r))||this).vars,p=f.duration,g=f.delay,y=f.immediateRender,M=f.stagger,S=f.overwrite,C=f.keyframes,D=f.defaults,A=f.scrollTrigger,T=f.yoyoEase,U=r.parent||lr,N=(Ds(n)||bd(n)?mc(n[0]):"length"in r)?[n]:bo(n);if(d._targets=N.length?T_(N):cu("GSAP target "+n+" not found. https://gsap.com",!vo.nullTargetWarn)||[],d._ptLookup=[],d._overwrite=S,C||M||Up(p)||Up(g)){if(r=d.vars,(O=d.timeline=new ds({data:"nested",defaults:D||{},targets:U&&"nested"===U.data?U.vars.targets:N})).kill(),O.parent=O._dp=Cl(d),O._start=0,M||Up(p)||Up(g)){if(Z=N.length,V=M&&nx(M),Za(M))for(J in M)~rm.indexOf(J)&&(se||(se={}),se[J]=M[J]);for(q=0;q<Z;q++)(Y=Id(r,Qa)).stagger=0,T&&(Y.yoyoEase=T),se&&Ka(Y,se),H=N[q],Y.duration=+cf(p,Cl(d),q,H,N),Y.delay=(+cf(g,Cl(d),q,H,N)||0)-d._delay,!M&&1===Z&&Y.delay&&(d._delay=g=Y.delay,d._start+=g,Y.delay=0),O.to(H,Y,V?V(q,H,N):0),O._ease=ti.none;O.duration()?p=g=0:d.timeline=0}else if(C){ef(so(O.vars.defaults,{ease:"none"})),O._ease=us(C.ease||r.ease||"none");var xe,De,ze,Me=0;if(Ds(C))C.forEach(function(Te){return O.to(N,Te,">")}),O.duration();else{for(J in Y={},C)"ease"===J||"easeEach"===J||lx(J,C[J],Y,C.easeEach);for(J in Y)for(xe=Y[J].sort(function(Te,tt){return Te.t-tt.t}),Me=0,q=0;q<xe.length;q++)(ze={ease:(De=xe[q]).e,duration:(De.t-(q?xe[q-1].t:0))/100*p})[J]=De.v,O.to(N,ze,Me),Me+=ze.duration;O.duration()<p&&O.to({},{duration:p-O.duration()})}}p||d.duration(p=O.duration())}else d.timeline=0;return!0===S&&!g_&&(Dl=Cl(d),lr.killTweensOf(N),Dl=0),Ja(U,Cl(d),o),r.reversed&&d.reverse(),r.paused&&d.paused(!0),(y||!p&&!C&&d._start===Or(U._time)&&io(y)&&jp(Cl(d))&&"nested"!==U.data)&&(d._tTime=-ki,d.render(Math.max(0,-g)||0)),A&&I_(Cl(d),A),d}H0(e,l);var t=e.prototype;return t.render=function(r,o,c){var M,S,C,D,A,T,U,N,O,d=this._time,f=this._tDur,p=this._dur,g=r<0,y=r>f-ki&&!g?f:r<ki?0:r;if(p){if(y!==this._tTime||!r||c||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==g||this._lazy){if(M=y,N=this.timeline,this._repeat){if(D=p+this._rDelay,this._repeat<-1&&g)return this.totalTime(100*D+r,o,c);if(M=Or(y%D),y===f?(C=this._repeat,M=p):(C=~~(A=Or(y/D)))&&C===A?(M=p,C--):M>p&&(M=p),(T=this._yoyo&&1&C)&&(O=this._yEase,M=p-M),A=tf(this._tTime,D),M===d&&!c&&this._initted&&C===A)return this._tTime=y,this;C!==A&&(N&&this._yEase&&Yb(N,T),this.vars.repeatRefresh&&!T&&!this._lock&&M!==D&&this._initted&&(this._lock=c=1,this.render(Or(D*C),!0).invalidate()._lock=0))}if(!this._initted){if(qp(this,g?r:M,c,o,y))return this._tTime=0,this;if(!(d===this._time||c&&this.vars.repeatRefresh&&C!==A))return this;if(p!==this._dur)return this.render(r,o,c)}if(this._tTime=y,this._time=M,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=U=(O||this._ease)(M/p),this._from&&(this.ratio=U=1-U),M&&!d&&!o&&!C&&(oo(this,"onStart"),this._tTime!==y))return this;for(S=this._pt;S;)S.r(U,S.d),S=S._next;N&&N.render(r<0?r:N._dur*N._ease(M/this._dur),o,c)||this._startAt&&(this._zTime=r),this._onUpdate&&!o&&(g&&$p(this,r,0,c),oo(this,"onUpdate")),this._repeat&&C!==A&&this.vars.onRepeat&&!o&&this.parent&&oo(this,"onRepeat"),(y===this._tDur||!y)&&this._tTime===y&&(g&&!this._onUpdate&&$p(this,r,0,!0),(r||!p)&&(y===this._tDur&&this._ts>0||!y&&this._ts<0)&&yc(this,1),!o&&(!g||d)&&(y||d||T)&&(oo(this,y===f?"onComplete":"onReverseComplete",!0),this._prom&&!(y<f&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,r){var p,g,y,o=e.ratio,c=t<0||!t&&(!e._start&&vE(e)&&(e._initted||!R_(e))||(e._ts<0||e._dp._ts<0)&&!R_(e))?0:1,d=e._rDelay,f=0;if(d&&e._repeat&&(f=Pd(0,e._tDur,t),g=tf(f,d),e._yoyo&&1&g&&(c=1-c),g!==tf(e._tTime,d)&&(o=1-c,e.vars.repeatRefresh&&e._initted&&e.invalidate())),c!==o||cs||r||e._zTime===ki||!t&&e._zTime){if(!e._initted&&qp(e,t,r,n,f))return;for(y=e._zTime,e._zTime=t||(n?ki:0),n||(n=t&&!y),e.ratio=c,e._from&&(c=1-c),e._time=0,e._tTime=f,p=e._pt;p;)p.r(c,p.d),p=p._next;t<0&&$p(e,t,0,!0),e._onUpdate&&!n&&oo(e,"onUpdate"),f&&e._repeat&&!n&&e.parent&&oo(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===c&&(c&&yc(e,1),!n&&!cs&&(oo(e,c?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,r,o,c);return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),l.prototype.invalidate.call(this,r)},t.resetTo=function(r,o,c,d,f){tm||Wo.wake(),this._ts||this.play();var p=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||im(this,p),function(e,t,n,r,o,c,d,f){var g,y,M,S,p=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!p)for(p=e._ptCache[t]=[],M=e._ptLookup,S=e._targets.length;S--;){if((g=M[S][t])&&g.d&&g.d._pt)for(g=g.d._pt;g&&g.p!==t&&g.fp!==t;)g=g._next;if(!g)return V_=1,e.vars[t]="+=0",im(e,d),V_=0,f?cu(t+" not eligible for reset"):1;p.push(g)}for(S=p.length;S--;)(g=(y=p[S])._pt||y).s=!r&&0!==r||o?g.s+(r||0)+c*g.c:r,g.c=n-g.s,y.e&&(y.e=gr(n)+Is(y.e)),y.b&&(y.b=g.s+Is(y.b))}(this,r,o,c,d,this._ease(p/this._dur),p,f)?this.resetTo(r,o,c,d,1):(rf(this,0),this.parent||Z0(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,o){if(void 0===o&&(o="all"),!(r||o&&"all"!==o))return this._lazy=this._pt=0,this.parent?vc(this):this.scrollTrigger&&this.scrollTrigger.kill(!!cs),this;if(this.timeline){var c=this.timeline.totalDuration();return this.timeline.killTweensOf(r,o,Dl&&!0!==Dl.vars.overwrite)._first||vc(this),this.parent&&c!==this.timeline.totalDuration()&&Rd(this,this._dur*this.timeline._tDur/c,0,1),this}var y,M,S,C,D,A,T,d=this._targets,f=r?bo(r):d,p=this._ptLookup,g=this._pt;if((!o||"all"===o)&&function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0}(d,f))return"all"===o&&(this._pt=0),vc(this);for(y=this._op=this._op||[],"all"!==o&&(Jr(o)&&(D={},ro(o,function(U){return D[U]=1}),o=D),o=function(e,t){var o,c,d,f,n=e[0]?_c(e[0]).harness:0,r=n&&n.aliases;if(!r)return t;for(c in o=Ka({},t),r)if(c in o)for(d=(f=r[c].split(",")).length;d--;)o[f[d]]=o[c];return o}(d,o)),T=d.length;T--;)if(~f.indexOf(d[T]))for(D in M=p[T],"all"===o?(y[T]=o,C=M,S={}):(S=y[T]=y[T]||{},C=o),C)(A=M&&M[D])&&((!("kill"in A.d)||!0===A.d.kill(D))&&Wp(this,A,"_pt"),delete M[D]),"all"!==S&&(S[D]=1);return this._initted&&!this._pt&&g&&vc(this),this},e.to=function(r,o){return new e(r,o,arguments[2])},e.from=function(r,o){return sf(1,arguments)},e.delayedCall=function(r,o,c,d){return new e(o,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:o,onReverseComplete:o,onCompleteParams:c,onReverseCompleteParams:c,callbackScope:d})},e.fromTo=function(r,o,c){return sf(2,arguments)},e.set=function(r,o){return o.duration=0,o.repeatDelay||(o.repeat=0),new e(r,o)},e.killTweensOf=function(r,o,c){return lr.killTweensOf(r,o,c)},e}(lf);so(Bi.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),ro("staggerTo,staggerFrom,staggerFromTo",function(l){Bi[l]=function(){var e=new ds,t=Zp.call(arguments,0);return t.splice("staggerFromTo"===l?5:4,0,0),e[l].apply(e,t)}});var sm=function(e,t,n){return e[t]=n},om=function(e,t,n){return e[t](n)},cx=function(e,t,n,r){return e[t](r.fp,n)},Kb=function(e,t,n){return e.setAttribute(t,n)},ux=function(e,t){return mr(e[t])?om:y_(e[t])&&e.setAttribute?Kb:sm},dx=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},Jb=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},hx=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},G_=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},fx=function(e,t,n,r){for(var c,o=this._pt;o;)c=o._next,o.p===r&&o.modifier(e,t,n),o=c},Qb=function(e){for(var n,r,t=this._pt;t;)r=t._next,t.p===e&&!t.op||t.op===e?Wp(this,t,"_pt"):t.dep||(n=1),t=r;return!n},TE=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},px=function(e){for(var n,r,o,c,t=e._pt;t;){for(n=t._next,r=o;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:c)?t._prev._next=t:o=t,(t._next=r)?r._prev=t:c=t,t=n}e._pt=o},Ys=function(){function l(t,n,r,o,c,d,f,p,g){this.t=n,this.s=o,this.c=c,this.p=r,this.r=d||dx,this.d=f||this,this.set=p||sm,this.pr=g||0,this._next=t,t&&(t._prev=this)}return l.prototype.modifier=function(n,r,o){this.mSet=this.mSet||this.set,this.set=TE,this.m=n,this.mt=o,this.tween=r},l}();ro(Vp+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(l){return b_[l]=1}),Mo.TweenMax=Mo.TweenLite=Bi,Mo.TimelineLite=Mo.TimelineMax=ds,lr=new ds({sortChildren:!1,defaults:Sd,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),vo.stringFilter=rx;var Od=[],Nd={},mx=[],W_=0,gx=0,am=function(e){return(Nd[e]||mx).map(function(t){return t()})},lm=function(){var e=Date.now(),t=[];e-W_>2&&(am("matchMediaInit"),Od.forEach(function(n){var c,d,f,p,r=n.queries,o=n.conditions;for(d in r)(c=xo.matchMedia(r[d]).matches)&&(f=1),c!==o[d]&&(o[d]=c,p=1);p&&(n.revert(),f&&t.push(n))}),am("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(r){return n.add(null,r)})}),W_=e,am("matchMedia"))},uf=function(){function l(t,n){this.selector=n&&Kp(n),this.data=[],this._r=[],this.isReverted=!1,this.id=gx++,t&&this.add(t)}var e=l.prototype;return e.add=function(n,r,o){mr(n)&&(o=r,r=n,n=mr);var c=this,d=function(){var y,p=tr,g=c.selector;return p&&p!==c&&p.data.push(c),o&&(c.selector=Kp(o)),tr=c,y=r.apply(c,arguments),mr(y)&&c._r.push(y),tr=p,c.selector=g,c.isReverted=!1,y};return c.last=d,n===mr?d(c,function(f){return c.add(null,f)}):n?c[n]=d:d},e.ignore=function(n){var r=tr;tr=null,n(this),tr=r},e.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof l?n.push.apply(n,r.getTweens()):r instanceof Bi&&!(r.parent&&"nested"===r.parent.data)&&n.push(r)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,r){var o=this;if(n?function(){for(var p,d=o.getTweens(),f=o.data.length;f--;)"isFlip"===(p=o.data[f]).data&&(p.revert(),p.getChildren(!0,!0,!1).forEach(function(g){return d.splice(d.indexOf(g),1)}));for(d.map(function(g){return{g:g._dur||g._delay||g._sat&&!g._sat.vars.immediateRender?g.globalTime(0):-1/0,t:g}}).sort(function(g,y){return y.g-g.g||-1/0}).forEach(function(g){return g.t.revert(n)}),f=o.data.length;f--;)(p=o.data[f])instanceof ds?"nested"!==p.data&&(p.scrollTrigger&&p.scrollTrigger.revert(),p.kill()):!(p instanceof Bi)&&p.revert&&p.revert(n);o._r.forEach(function(g){return g(n,o)}),o.isReverted=!0}():this.data.forEach(function(d){return d.kill&&d.kill()}),this.clear(),r)for(var c=Od.length;c--;)Od[c].id===this.id&&Od.splice(c,1)},e.revert=function(n){this.kill(n||{})},l}(),cm=function(){function l(t){this.contexts=[],this.scope=t,tr&&tr.data.push(this)}var e=l.prototype;return e.add=function(n,r,o){Za(n)||(n={matches:n});var f,p,g,c=new uf(0,o||this.scope),d=c.conditions={};for(p in tr&&!c.selector&&(c.selector=tr.selector),this.contexts.push(c),r=c.add("onMatch",r),c.queries=n,n)"all"===p?g=1:(f=xo.matchMedia(n[p]))&&(Od.indexOf(c)<0&&Od.push(c),(d[p]=f.matches)&&(g=1),f.addListener?f.addListener(lm):f.addEventListener("change",lm));return g&&r(c,function(y){return c.add(null,y)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},l}(),df={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(r){return Vb(r)})},timeline:function(e){return new ds(e)},getTweensOf:function(e,t){return lr.getTweensOf(e,t)},getProperty:function(e,t,n,r){Jr(e)&&(e=bo(e)[0]);var o=_c(e||{}).get,c=n?Nb:Ob;return"native"===n&&(n=""),e&&(t?c((Xs[t]&&Xs[t].get||o)(e,t,n,r)):function(d,f,p){return c((Xs[d]&&Xs[d].get||o)(e,d,f,p))})},quickSetter:function(e,t,n){if((e=bo(e)).length>1){var r=e.map(function(g){return Eo.quickSetter(g,t,n)}),o=r.length;return function(g){for(var y=o;y--;)r[y](g)}}var c=Xs[t],d=_c(e=e[0]||{}),f=d.harness&&(d.harness.aliases||{})[t]||t,p=c?function(g){var y=new c;du._pt=0,y.init(e,n?g+n:g,du,0,[e]),y.render(1,y),du._pt&&G_(1,du)}:d.set(e,f);return c?p:function(g){return p(e,f,n?g+n:g,d,1)}},quickTo:function(e,t,n){var r,o=Eo.to(e,so(((r={})[t]="+=0.1",r.paused=!0,r.stagger=0,r),n||{})),c=function(f,p,g){return o.resetTo(t,f,p,g)};return c.tween=o,c},isTweening:function(e){return lr.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=us(e.ease,Sd.ease)),Y0(Sd,e||{})},config:function(e){return Y0(vo,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,o=e.defaults,c=e.extendTimeline;(e.plugins||"").split(",").forEach(function(d){return d&&!Xs[d]&&!Mo[d]&&cu(t+" effect requires "+d+" plugin.")}),Hp[t]=function(d,f,p){return n(bo(d),so(f||{},o),p)},c&&(ds.prototype[t]=function(d,f,p){return this.add(Hp[t](d,Za(f)?f:(p=f)&&{},this),p)})},registerEase:function(e,t){ti[e]=us(t)},parseEase:function(e,t){return arguments.length?us(e,t):ti},getById:function(e){return lr.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var r,o,n=new ds(e);for(n.smoothChildTiming=io(e.smoothChildTiming),lr.remove(n),n._dp=0,n._time=n._tTime=lr._time,r=lr._first;r;)o=r._next,(t||!(!r._dur&&r instanceof Bi&&r.vars.onComplete===r._targets[0]))&&Ja(n,r,r._start-r._delay),r=o;return Ja(lr,n,0),n},context:function(e,t){return e?new uf(e,t):tr},matchMedia:function(e){return new cm(e)},matchMediaRefresh:function(){return Od.forEach(function(e){var n,r,t=e.conditions;for(r in t)t[r]&&(t[r]=!1,n=1);n&&e.revert()})||lm()},addEventListener:function(e,t){var n=Nd[e]||(Nd[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=Nd[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:function l(e,t,n){var r=t-e;return Ds(e)?Bb(e,l(0,e.length),t):Al(n,function(o){return(r+(o-e)%r)%r+e})},wrapYoyo:function l(e,t,n){var r=t-e,o=2*r;return Ds(e)?Bb(e,l(0,e.length-1),t):Al(n,function(c){return e+((c=(o+(c-e)%o)%o||0)>r?o-c:c)})},distribute:nx,random:O_,snap:kb,normalize:function(e,t,n){return zb(e,t,0,1,n)},getUnit:Is,clamp:function(e,t,n){return Al(n,function(r){return Pd(e,t,r)})},splitColor:Gb,toArray:bo,selector:Kp,mapRange:zb,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduce(function(o,c){return c(o)},r)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||Is(n))}},interpolate:function l(e,t,n,r){var o=isNaN(e+t)?0:function(S){return(1-S)*e+S*t};if(!o){var f,p,g,y,M,c=Jr(e),d={};if(!0===n&&(r=1)&&(n=null),c)e={p:e},t={p:t};else if(Ds(e)&&!Ds(t)){for(g=[],M=(y=e.length)-2,p=1;p<y;p++)g.push(l(e[p-1],e[p]));y--,o=function(C){C*=y;var D=Math.min(M,~~C);return g[D](C-D)},n=t}else r||(e=Ka(Ds(e)?[]:{},e));if(!g){for(f in t)B_.call(d,e,f,"get",t[f]);o=function(C){return G_(C,d)||(c?e.p:e)}}}return Al(n,o)},shuffle:P_},install:kp,effects:Hp,ticker:Wo,updateRoot:ds.updateRoot,plugins:Xs,globalTimeline:lr,core:{PropTween:Ys,globals:zp,Tween:Bi,Timeline:ds,Animation:lf,getCache:_c,_removeLinkedListItem:Wp,reverting:function(){return cs},context:function(e){return e&&tr&&(tr.data.push(e),e._ctx=tr),tr},suppressOverwrites:function(e){return g_=e}}};ro("to,from,fromTo,delayedCall,set,killTweensOf",function(l){return df[l]=Bi[l]}),Wo.add(ds.updateRoot),du=df.to({},{duration:0});var ew=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},_x=function(e,t){return{name:e,rawVars:1,init:function(r,o,c){c._onInit=function(d){var f,p;if(Jr(o)&&(f={},ro(o,function(g){return f[g]=1}),o=f),t){for(p in f={},o)f[p]=t(o[p]);o=f}!function(e,t){var r,o,c,n=e._targets;for(r in t)for(o=n.length;o--;)(c=e._ptLookup[o][r])&&(c=c.d)&&(c._pt&&(c=ew(c,r)),c&&c.modifier&&c.modifier(t[r],e,n[o],r))}(d,o)}}}},Eo=df.registerPlugin({name:"attr",init:function(e,t,n,r,o){var c,d,f;for(c in this.tween=n,t)f=e.getAttribute(c)||"",(d=this.add(e,"setAttribute",(f||0)+"",t[c],r,o,0,0,c)).op=c,d.b=f,this._props.push(c)},render:function(e,t){for(var n=t._pt;n;)cs?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},_x("roundProps",L_),_x("modifiers"),_x("snap",kb))||df;Bi.version=ds.version=Eo.version="3.12.7",M_=1,v_()&&af();var um,Mc,Sc,hf,el,rw,vx,lw,tl={},fu=180/Math.PI,Ud=Math.PI/180,kd=Math.atan2,xx=1e8,dm=/([A-Z])/g,Mx=/(left|right|width|margin|padding|x)/i,Sx=/[\s,\(]\S/,nl={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},j_=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},bx=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},X_=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},UE=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},Y_=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},hm=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},sw=function(e,t,n){return e.style[t]=n},ow=function(e,t,n){return e.style.setProperty(t,n)},kE=function(e,t,n){return e._gsap[t]=n},BE=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},zE=function(e,t,n,r,o){var c=e._gsap;c.scaleX=c.scaleY=n,c.renderTransform(o,c)},HE=function(e,t,n,r,o){var c=e._gsap;c[t]=n,c.renderTransform(o,c)},cr="transform",Co=cr+"Origin",VE=function l(e,t){var n=this,r=this.target,o=r.style,c=r._gsap;if(e in tl&&o){if(this.tfm=this.tfm||{},"transform"===e)return nl.transform.split(",").forEach(function(d){return l.call(n,d,t)});if(~(e=nl[e]||e).indexOf(",")?e.split(",").forEach(function(d){return n.tfm[d]=F(r,d)}):this.tfm[e]=c.x?c[e]:F(r,e),e===Co&&(this.tfm.zOrigin=c.zOrigin),this.props.indexOf(cr)>=0)return;c.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Co,t,"")),e=cr}(o||t)&&this.props.push(e,t,o[e])},aw=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},GE=function(){var o,c,e=this.props,t=this.target,n=t.style,r=t._gsap;for(o=0;o<e.length;o+=3)e[o+1]?2===e[o+1]?t[e[o]](e[o+2]):t[e[o]]=e[o+2]:e[o+2]?n[e[o]]=e[o+2]:n.removeProperty("--"===e[o].substr(0,2)?e[o]:e[o].replace(dm,"-$1").toLowerCase());if(this.tfm){for(c in this.tfm)r[c]=this.tfm[c];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),(!(o=vx())||!o.isStart)&&!n[cr]&&(aw(n),r.zOrigin&&n[Co]&&(n[Co]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},wx=function(e,t){var n={target:e,props:[],revert:GE,save:VE};return e._gsap||Eo.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(r){return n.save(r)}),n},Ex=function(e,t){var n=Mc.createElementNS?Mc.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Mc.createElement(e);return n&&n.style?n:Mc.createElement(e)},Il=function l(e,t,n){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(dm,"-$1").toLowerCase())||r.getPropertyValue(t)||!n&&l(e,ff(t)||t,1)||""},cw="O,Moz,ms,Ms,Webkit".split(","),ff=function(e,t,n){var o=(t||el).style,c=5;if(e in o&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);c--&&!(cw[c]+e in o););return c<0?null:(3===c?"ms":c>=0?cw[c]:"")+e},Cx=function(){typeof window<"u"&&window.document&&(um=window,Sc=(Mc=um.document).documentElement,el=Ex("div")||{style:{}},Ex("div"),cr=ff(cr),Co=cr+"Origin",el.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",lw=!!ff("perspective"),vx=Eo.core.reverting,hf=1)},i=function(e){var o,t=e.ownerSVGElement,n=Ex("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=e.cloneNode(!0);r.style.display="block",n.appendChild(r),Sc.appendChild(n);try{o=r.getBBox()}catch{}return n.removeChild(r),Sc.removeChild(n),o},s=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},a=function(e){var t,n;try{t=e.getBBox()}catch{t=i(e),n=1}return t&&(t.width||t.height)||n||(t=i(e)),!t||t.width||t.x||t.y?t:{x:+s(e,["x","cx","x1"])||0,y:+s(e,["y","cy","y1"])||0,width:0,height:0}},u=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!a(e))},h=function(e,t){if(t){var r,n=e.style;t in tl&&t!==Co&&(t=cr),n.removeProperty?(("ms"===(r=t.substr(0,2))||"webkit"===t.substr(0,6))&&(t="-"+t),n.removeProperty("--"===r?t:t.replace(dm,"-$1").toLowerCase())):n.removeAttribute(t)}},m=function(e,t,n,r,o,c){var d=new Ys(e._pt,t,n,0,1,c?hm:Y_);return e._pt=d,d.b=r,d.e=o,e._props.push(n),d},v={deg:1,rad:1,turn:1},E={grid:1,flex:1},R=function l(e,t,n,r){var C,D,A,T,o=parseFloat(n)||0,c=(n+"").trim().substr((o+"").length)||"px",d=el.style,f=Mx.test(t),p="svg"===e.tagName.toLowerCase(),g=(p?"client":"offset")+(f?"Width":"Height"),y=100,M="px"===r,S="%"===r;if(r===c||!o||v[r]||v[c])return o;if("px"!==c&&!M&&(o=l(e,t,n,"px")),T=e.getCTM&&u(e),(S||"%"===c)&&(tl[t]||~t.indexOf("adius")))return C=T?e.getBBox()[f?"width":"height"]:e[g],gr(S?o/C*y:o/100*C);if(d[f?"width":"height"]=y+(M?c:r),D="rem"!==r&&~t.indexOf("adius")||"em"===r&&e.appendChild&&!p?e:e.parentNode,T&&(D=(e.ownerSVGElement||{}).parentNode),(!D||D===Mc||!D.appendChild)&&(D=Mc.body),(A=D._gsap)&&S&&A.width&&f&&A.time===Wo.time&&!A.uncache)return gr(o/A.width*y);if(!S||"height"!==t&&"width"!==t)(S||"%"===c)&&!E[Il(D,"display")]&&(d.position=Il(e,"position")),D===e&&(d.position="static"),D.appendChild(el),C=el[g],D.removeChild(el),d.position="absolute";else{var U=e.style[t];e.style[t]=y+r,C=e[g],U?e.style[t]=U:h(e,t)}return f&&S&&((A=_c(D)).time=Wo.time,A.width=D[g]),gr(M?C*o/y:C&&o?y/C*o:0)},F=function(e,t,n,r){var o;return hf||Cx(),t in nl&&"transform"!==t&&~(t=nl[t]).indexOf(",")&&(t=t.split(",")[0]),tl[t]&&"transform"!==t?(o=Ri(e,r),o="transformOrigin"!==t?o[t]:o.svg?o.origin:nr(Il(e,Co))+" "+o.zOrigin+"px"):(!(o=e.style[t])||"auto"===o||r||~(o+"").indexOf("calc("))&&(o=Ue[t]&&Ue[t](e,t,n)||Il(e,t)||A_(e,t)||("opacity"===t?1:0)),n&&!~(o+"").trim().indexOf(" ")?R(e,t,o,n)+n:o},$=function(e,t,n,r){if(!n||"none"===n){var o=ff(t,e,1),c=o&&Il(e,o,1);c&&c!==n?(t=o,n=c):"borderColor"===t&&(n=Il(e,"borderTopColor"))}var g,y,M,S,C,D,A,T,U,N,O,d=new Ys(this._pt,e.style,t,0,1,hx),f=0,p=0;if(d.b=n,d.e=r,n+="","auto"==(r+="")&&(D=e.style[t],e.style[t]=r,r=Il(e,t)||r,D?e.style[t]=D:h(e,t)),rx(g=[n,r]),r=g[1],M=(n=g[0]).match(wd)||[],(r.match(wd)||[]).length){for(;y=wd.exec(r);)A=y[0],U=r.substring(f,y.index),C?C=(C+1)%5:("rgba("===U.substr(-5)||"hsla("===U.substr(-5))&&(C=1),A!==(D=M[p++]||"")&&(S=parseFloat(D)||0,O=D.substr((S+"").length),"="===A.charAt(1)&&(A=Nr(S,A)+O),T=parseFloat(A),N=A.substr((T+"").length),f=wd.lastIndex-N.length,N||(N=N||vo.units[t]||O,f===r.length&&(r+=N,d.e+=N)),O!==N&&(S=R(e,t,D,N)||0),d._pt={_next:d._pt,p:U||1===p?U:",",s:S,c:T-S,m:C&&C<4||"zIndex"===t?Math.round:0});d.c=f<r.length?r.substring(f,r.length):""}else d.r="display"===t&&"none"===r?hm:Y_;return Ed.test(r)&&(d.e=0),this._pt=d,d},ee={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},ue=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return("top"===n||"bottom"===n||"left"===r||"right"===r)&&(e=n,n=r,r=e),t[0]=ee[n]||n,t[1]=ee[r]||r,t.join(" ")},_e=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var d,f,p,n=t.t,r=n.style,o=t.u,c=n._gsap;if("all"===o||!0===o)r.cssText="",f=1;else for(p=(o=o.split(",")).length;--p>-1;)tl[d=o[p]]&&(f=1,d="transformOrigin"===d?Co:cr),h(n,d);f&&(h(n,cr),c&&(c.svg&&n.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",Ri(n,1),c.uncache=1,aw(r)))}},Ue={clearProps:function(e,t,n,r,o){if("isFromStart"!==o.data){var c=e._pt=new Ys(e._pt,t,n,0,0,_e);return c.u=r,c.pr=-10,c.tween=o,e._props.push(n),1}}},ct=[1,0,0,1,0,0],wt={},zt=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},dn=function(e){var t=Il(e,cr);return zt(t)?ct:t.substr(7).match(Sa).map(gr)},st=function(e,t){var c,d,f,p,n=e._gsap||_c(e),r=e.style,o=dn(e);return n.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(o=[(f=e.transform.baseVal.consolidate().matrix).a,f.b,f.c,f.d,f.e,f.f]).join(",")?ct:o:(o===ct&&!e.offsetParent&&e!==Sc&&!n.svg&&(f=r.display,r.display="block",(!(c=e.parentNode)||!e.offsetParent&&!e.getBoundingClientRect().width)&&(p=1,d=e.nextElementSibling,Sc.appendChild(e)),o=dn(e),f?r.display=f:h(e,"display"),p&&(d?c.insertBefore(e,d):c?c.appendChild(e):Sc.removeChild(e))),t&&o.length>6?[o[0],o[1],o[4],o[5],o[12],o[13]]:o)},Pn=function(e,t,n,r,o,c){var Y,Z,H,d=e._gsap,f=o||st(e,!0),p=d.xOrigin||0,g=d.yOrigin||0,y=d.xOffset||0,M=d.yOffset||0,S=f[0],C=f[1],D=f[2],A=f[3],T=f[4],U=f[5],N=t.split(" "),O=parseFloat(N[0])||0,q=parseFloat(N[1])||0;n?f!==ct&&(Z=S*A-C*D)&&(H=O*(-C/Z)+q*(S/Z)-(S*U-C*T)/Z,O=O*(A/Z)+q*(-D/Z)+(D*U-A*T)/Z,q=H):(O=(Y=a(e)).x+(~N[0].indexOf("%")?O/100*Y.width:O),q=Y.y+(~(N[1]||N[0]).indexOf("%")?q/100*Y.height:q)),r||!1!==r&&d.smooth?(d.xOffset=y+((T=O-p)*S+(U=q-g)*D)-T,d.yOffset=M+(T*C+U*A)-U):d.xOffset=d.yOffset=0,d.xOrigin=O,d.yOrigin=q,d.smooth=!!r,d.origin=t,d.originIsAbsolute=!!n,e.style[Co]="0px 0px",c&&(m(c,d,"xOrigin",p,O),m(c,d,"yOrigin",g,q),m(c,d,"xOffset",y,d.xOffset),m(c,d,"yOffset",M,d.yOffset)),e.setAttribute("data-svg-origin",O+" "+q)},Ri=function(e,t){var n=e._gsap||new wo(e);if("x"in n&&!t&&!n.uncache)return n;var g,y,M,S,C,D,A,T,U,N,O,q,Y,Z,J,H,V,se,Me,xe,De,ze,Te,tt,Oe,Ct,kt,Zt,An,xi,$e,pt,r=e.style,o=n.scaleX<0,c="px",d="deg",f=getComputedStyle(e),p=Il(e,Co)||"0";return g=y=M=D=A=T=U=N=O=0,S=C=1,n.svg=!(!e.getCTM||!u(e)),f.translate&&(("none"!==f.translate||"none"!==f.scale||"none"!==f.rotate)&&(r[cr]=("none"!==f.translate?"translate3d("+(f.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==f.rotate?"rotate("+f.rotate+") ":"")+("none"!==f.scale?"scale("+f.scale.split(" ").join(",")+") ":"")+("none"!==f[cr]?f[cr]:"")),r.scale=r.rotate=r.translate="none"),Z=st(e,n.svg),n.svg&&(n.uncache?(Oe=e.getBBox(),p=n.xOrigin-Oe.x+"px "+(n.yOrigin-Oe.y)+"px",tt=""):tt=!t&&e.getAttribute("data-svg-origin"),Pn(e,tt||p,!!tt||n.originIsAbsolute,!1!==n.smooth,Z)),q=n.xOrigin||0,Y=n.yOrigin||0,Z!==ct&&(se=Z[0],Me=Z[1],xe=Z[2],De=Z[3],g=ze=Z[4],y=Te=Z[5],6===Z.length?(S=Math.sqrt(se*se+Me*Me),C=Math.sqrt(De*De+xe*xe),D=se||Me?kd(Me,se)*fu:0,(U=xe||De?kd(xe,De)*fu+D:0)&&(C*=Math.abs(Math.cos(U*Ud))),n.svg&&(g-=q-(q*se+Y*xe),y-=Y-(q*Me+Y*De))):(xi=Z[7],kt=Z[8],Zt=Z[9],$e=Z[11],g=Z[12],y=Z[13],M=Z[14],A=(J=kd(pt=Z[6],An=Z[10]))*fu,J&&(tt=ze*(H=Math.cos(-J))+kt*(V=Math.sin(-J)),Oe=Te*H+Zt*V,Ct=pt*H+An*V,kt=ze*-V+kt*H,Zt=Te*-V+Zt*H,An=pt*-V+An*H,$e=xi*-V+$e*H,ze=tt,Te=Oe,pt=Ct),T=(J=kd(-xe,An))*fu,J&&(H=Math.cos(-J),$e=De*(V=Math.sin(-J))+$e*H,se=tt=se*H-kt*V,Me=Oe=Me*H-Zt*V,xe=Ct=xe*H-An*V),D=(J=kd(Me,se))*fu,J&&(tt=se*(H=Math.cos(J))+Me*(V=Math.sin(J)),Oe=ze*H+Te*V,Me=Me*H-se*V,Te=Te*H-ze*V,se=tt,ze=Oe),A&&Math.abs(A)+Math.abs(D)>359.9&&(A=D=0,T=180-T),S=gr(Math.sqrt(se*se+Me*Me+xe*xe)),C=gr(Math.sqrt(Te*Te+pt*pt)),J=kd(ze,Te),U=Math.abs(J)>2e-4?J*fu:0,O=$e?1/($e<0?-$e:$e):0),n.svg&&(tt=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!zt(Il(e,cr)),tt&&e.setAttribute("transform",tt))),Math.abs(U)>90&&Math.abs(U)<270&&(o?(S*=-1,U+=D<=0?180:-180,D+=D<=0?180:-180):(C*=-1,U+=U<=0?180:-180)),t=t||n.uncache,n.x=g-((n.xPercent=g&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-g)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+c,n.y=y-((n.yPercent=y&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-y)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+c,n.z=M+c,n.scaleX=gr(S),n.scaleY=gr(C),n.rotation=gr(D)+d,n.rotationX=gr(A)+d,n.rotationY=gr(T)+d,n.skewX=U+d,n.skewY=N+d,n.transformPerspective=O+c,(n.zOrigin=parseFloat(p.split(" ")[2])||!t&&n.zOrigin||0)&&(r[Co]=nr(p)),n.xOffset=n.yOffset=0,n.force3D=vo.force3D,n.renderTransform=n.svg?gC:lw?WE:mC,n.uncache=0,n},nr=function(e){return(e=e.split(" "))[0]+" "+e[1]},Tx=function(e,t,n){var r=Is(t);return gr(parseFloat(t)+parseFloat(R(e,"x",n+"px",r)))+r},mC=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,WE(e,t)},pf="0deg",q_="0px",mf=") ",WE=function(e,t){var n=t||this,r=n.xPercent,o=n.yPercent,c=n.x,d=n.y,f=n.z,p=n.rotation,g=n.rotationY,y=n.rotationX,M=n.skewX,S=n.skewY,C=n.scaleX,D=n.scaleY,A=n.transformPerspective,T=n.force3D,U=n.target,N=n.zOrigin,O="",q="auto"===T&&e&&1!==e||!0===T;if(N&&(y!==pf||g!==pf)){var H,Y=parseFloat(g)*Ud,Z=Math.sin(Y),J=Math.cos(Y);Y=parseFloat(y)*Ud,H=Math.cos(Y),c=Tx(U,c,Z*H*-N),d=Tx(U,d,-Math.sin(Y)*-N),f=Tx(U,f,J*H*-N+N)}A!==q_&&(O+="perspective("+A+mf),(r||o)&&(O+="translate("+r+"%, "+o+"%) "),(q||c!==q_||d!==q_||f!==q_)&&(O+=f!==q_||q?"translate3d("+c+", "+d+", "+f+") ":"translate("+c+", "+d+mf),p!==pf&&(O+="rotate("+p+mf),g!==pf&&(O+="rotateY("+g+mf),y!==pf&&(O+="rotateX("+y+mf),(M!==pf||S!==pf)&&(O+="skew("+M+", "+S+mf),(1!==C||1!==D)&&(O+="scale("+C+", "+D+mf),U.style[cr]=O||"translate(0, 0)"},gC=function(e,t){var q,Y,Z,J,H,n=t||this,r=n.xPercent,o=n.yPercent,c=n.x,d=n.y,f=n.rotation,p=n.skewX,g=n.skewY,y=n.scaleX,M=n.scaleY,S=n.target,C=n.xOrigin,D=n.yOrigin,A=n.xOffset,T=n.yOffset,U=n.forceCSS,N=parseFloat(c),O=parseFloat(d);f=parseFloat(f),p=parseFloat(p),(g=parseFloat(g))&&(p+=g=parseFloat(g),f+=g),f||p?(f*=Ud,p*=Ud,q=Math.cos(f)*y,Y=Math.sin(f)*y,Z=Math.sin(f-p)*-M,J=Math.cos(f-p)*M,p&&(g*=Ud,H=Math.tan(p-g),Z*=H=Math.sqrt(1+H*H),J*=H,g&&(H=Math.tan(g),q*=H=Math.sqrt(1+H*H),Y*=H)),q=gr(q),Y=gr(Y),Z=gr(Z),J=gr(J)):(q=y,J=M,Y=Z=0),(N&&!~(c+"").indexOf("px")||O&&!~(d+"").indexOf("px"))&&(N=R(S,"x",c,"px"),O=R(S,"y",d,"px")),(C||D||A||T)&&(N=gr(N+C-(C*q+D*Z)+A),O=gr(O+D-(C*Y+D*J)+T)),(r||o)&&(H=S.getBBox(),N=gr(N+r/100*H.width),O=gr(O+o/100*H.height)),S.setAttribute("transform",H="matrix("+q+","+Y+","+Z+","+J+","+N+","+O+")"),U&&(S.style[cr]=H)},_C=function(e,t,n,r,o){var y,M,c=360,d=Jr(o),p=parseFloat(o)*(d&&~o.indexOf("rad")?fu:1)-r,g=r+p+"deg";return d&&("short"===(y=o.split("_")[1])&&(p%=c)!=p%180&&(p+=p<0?c:-c),"cw"===y&&p<0?p=(p+c*xx)%c-~~(p/c)*c:"ccw"===y&&p>0&&(p=(p-c*xx)%c-~~(p/c)*c)),e._pt=M=new Ys(e._pt,t,n,r,p,bx),M.e=g,M.u="deg",e._props.push(n),M},$E=function(e,t){for(var n in t)e[n]=t[n];return e},yC=function(e,t,n){var d,f,p,g,y,M,C,r=$E({},n._gsap),c=n.style;for(f in r.svg?(p=n.getAttribute("transform"),n.setAttribute("transform",""),c[cr]=t,d=Ri(n,1),h(n,cr),n.setAttribute("transform",p)):(p=getComputedStyle(n)[cr],c[cr]=t,d=Ri(n,1),c[cr]=p),tl)(p=r[f])!==(g=d[f])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(f)<0&&(y=Is(p)!==(C=Is(g))?R(n,f,p,C):parseFloat(p),M=parseFloat(g),e._pt=new Ys(e._pt,d,f,y,M-y,j_),e._pt.u=C||0,e._props.push(f));$E(d,r)};ro("padding,margin,Width,Radius",function(l,e){var t="Top",n="Right",r="Bottom",o="Left",c=(e<3?[t,n,r,o]:[t+o,t+n,r+n,r+o]).map(function(d){return e<2?l+d:"border"+d+l});Ue[e>1?"border"+l:l]=function(d,f,p,g,y){var M,S;if(arguments.length<4)return M=c.map(function(C){return F(d,C,p)}),5===(S=M.join(" ")).split(M[0]).length?M[0]:S;M=(g+"").split(" "),S={},c.forEach(function(C,D){return S[C]=M[D]=M[D]||M[(D-1)/2|0]}),d.init(f,S,y)}});var jE={name:"css",register:Cx,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,o){var p,g,y,M,S,C,D,A,T,U,N,O,q,Y,Z,J,c=this._props,d=e.style,f=n.vars.startAt;for(D in hf||Cx(),this.styles=this.styles||wx(e),J=this.styles.props,this.tween=n,t)if("autoRound"!==D&&(g=t[D],!Xs[D]||!H_(D,t,n,r,e,o)))if(C=Ue[D],"function"==(S=typeof g)&&(S=typeof(g=g.call(n,r,e,o))),"string"===S&&~g.indexOf("random(")&&(g=Jp(g)),C)C(this,e,D,g,n)&&(Z=1);else if("--"===D.substr(0,2))p=(getComputedStyle(e).getPropertyValue(D)+"").trim(),g+="",xc.lastIndex=0,xc.test(p)||(A=Is(p),T=Is(g)),T?A!==T&&(p=R(e,D,p,T)+T):A&&(g+=A),this.add(d,"setProperty",p,g,r,o,0,0,D),c.push(D),J.push(D,0,d[D]);else if("undefined"!==S){if(f&&D in f?(p="function"==typeof f[D]?f[D].call(n,r,e,o):f[D],Jr(p)&&~p.indexOf("random(")&&(p=Jp(p)),Is(p+"")||"auto"===p||(p+=vo.units[D]||Is(F(e,D))||""),"="===(p+"").charAt(1)&&(p=F(e,D))):p=F(e,D),M=parseFloat(p),(U="string"===S&&"="===g.charAt(1)&&g.substr(0,2))&&(g=g.substr(2)),y=parseFloat(g),D in nl&&("autoAlpha"===D&&(1===M&&"hidden"===F(e,"visibility")&&y&&(M=0),J.push("visibility",0,d.visibility),m(this,d,"visibility",M?"inherit":"hidden",y?"inherit":"hidden",!y)),"scale"!==D&&"transform"!==D&&~(D=nl[D]).indexOf(",")&&(D=D.split(",")[0])),N=D in tl)if(this.styles.save(D),O||((q=e._gsap).renderTransform&&!t.parseTransform||Ri(e,t.parseTransform),Y=!1!==t.smoothOrigin&&q.smooth,(O=this._pt=new Ys(this._pt,d,cr,0,1,q.renderTransform,q,0,-1)).dep=1),"scale"===D)this._pt=new Ys(this._pt,q,"scaleY",q.scaleY,(U?Nr(q.scaleY,U+y):y)-q.scaleY||0,j_),this._pt.u=0,c.push("scaleY",D),D+="X";else{if("transformOrigin"===D){J.push(Co,0,d[Co]),g=ue(g),q.svg?Pn(e,g,0,Y,0,this):((T=parseFloat(g.split(" ")[2])||0)!==q.zOrigin&&m(this,q,"zOrigin",q.zOrigin,T),m(this,d,D,nr(p),nr(g)));continue}if("svgOrigin"===D){Pn(e,g,1,Y,0,this);continue}if(D in wt){_C(this,q,D,M,U?Nr(M,U+g):g);continue}if("smoothOrigin"===D){m(this,q,"smooth",q.smooth,g);continue}if("force3D"===D){q[D]=g;continue}if("transform"===D){yC(this,g,e);continue}}else D in d||(D=ff(D)||D);if(N||(y||0===y)&&(M||0===M)&&!Sx.test(g)&&D in d)y||(y=0),(A=(p+"").substr((M+"").length))!==(T=Is(g)||(D in vo.units?vo.units[D]:A))&&(M=R(e,D,p,T)),this._pt=new Ys(this._pt,N?q:d,D,M,(U?Nr(M,U+y):y)-M,N||"px"!==T&&"zIndex"!==D||!1===t.autoRound?j_:UE),this._pt.u=T||0,A!==T&&"%"!==T&&(this._pt.b=p,this._pt.r=X_);else if(D in d)$.call(this,e,D,p,U?U+g:g);else if(D in e)this.add(e,D,p||e[D],U?U+g:g,r,o);else if("parseTransform"!==D){Bp(D,g);continue}N||(D in d?J.push(D,0,d[D]):"function"==typeof e[D]?J.push(D,2,e[D]()):J.push(D,1,p||e[D])),c.push(D)}Z&&px(this)},render:function(e,t){if(t.tween._time||!vx())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:F,aliases:nl,getSetter:function(e,t,n){var r=nl[t];return r&&r.indexOf(",")<0&&(t=r),t in tl&&t!==Co&&(e._gsap.x||F(e,"x"))?n&&rw===n?"scale"===t?BE:kE:(rw=n||{})&&("scale"===t?zE:HE):e.style&&!y_(e.style[t])?sw:~t.indexOf("-")?ow:ux(e,t)},core:{_removeProperty:h,_getMatrix:st}};Eo.utils.checkPrefix=ff,Eo.core.getStyleSaver=wx,function(l,e,t,n){var r=ro(l+","+e+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(o){tl[o]=1});ro(e,function(o){vo.units[o]="deg",wt[o]=1}),nl[r[13]]=l+","+e,ro("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(o){var c=o.split(":");nl[c[1]]=r[c[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),ro("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(l){vo.units[l]="px"}),Eo.registerPlugin(jE);var uw=Eo.registerPlugin(jE)||Eo;const vC=["canvas"];let xC=(()=>{const e=class{constructor(){this.clock=new id,this.mouseX=0,this.mouseY=0,this.targetMouseX=0,this.targetMouseY=0,this.windowHalfX=window.innerWidth/2,this.windowHalfY=window.innerHeight/2}ngOnInit(){}ngAfterViewInit(){this.initThree(),this.createScene(),this.startRenderingLoop(),this.addEventListeners()}ngOnDestroy(){this.removeEventListeners(),cancelAnimationFrame(this.animationFrameId),this.scene.remove(this.cube),this.scene.remove(this.particles),this.cube.material.dispose(),this.cube.geometry.dispose(),this.particles.material.dispose(),this.particles.geometry.dispose(),this.renderer.dispose()}onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.windowHalfX=window.innerWidth/2,this.windowHalfY=window.innerHeight/2}initThree(){this.scene=new Ws;const r=window.innerWidth/window.innerHeight;this.camera=new as(60,r,.1,1e3),this.camera.position.z=30,this.renderer=new Rb({canvas:this.canvasRef.nativeElement,alpha:!0,antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2))}createScene(){const n=new Zy(16777215,.5);this.scene.add(n);const r=new qy(16777215,.8);r.position.set(1,1,1),this.scene.add(r),this.createCube(),this.createParticles()}createCube(){const n=new gl(6,6,6),r=[new oc({color:4149685,metalness:.2,roughness:.5}),new oc({color:3162015,metalness:.2,roughness:.5}),new oc({color:6056896,metalness:.2,roughness:.5}),new oc({color:3754411,metalness:.2,roughness:.5}),new oc({color:7964363,metalness:.2,roughness:.5}),new oc({color:10463450,metalness:.2,roughness:.5})];this.cube=new Zr(n,r),this.addTextToCube(),this.cube.position.set(0,0,0),this.scene.add(this.cube),uw.from(this.cube.position,{y:-50,duration:2,ease:"elastic.out(1, 0.3)"}),uw.from(this.cube.rotation,{x:2*Math.PI,y:2*Math.PI,duration:2.5,ease:"elastic.out(1, 0.3)"})}addTextToCube(){}createParticles(){const r=new Xn,o=new Float32Array(9e3),c=new Float32Array(9e3),d=new w;for(let p=0;p<9e3;p+=3)o[p]=100*(Math.random()-.5),o[p+1]=100*(Math.random()-.5),o[p+2]=100*(Math.random()-.5),d.setHSL(.2*Math.random()+.6,.8,.5),c[p]=d.r,c[p+1]=d.g,c[p+2]=d.b;r.setAttribute("position",new Kn(o,3)),r.setAttribute("color",new Kn(c,3));const f=new Zm({size:.4,vertexColors:!0,transparent:!0,opacity:.8,sizeAttenuation:!0});this.particles=new vl(r,f),this.scene.add(this.particles)}startRenderingLoop(){const n=this;!function r(){n.animationFrameId=requestAnimationFrame(r);const o=n.clock.getElapsedTime();n.mouseX+=.05*(n.targetMouseX-n.mouseX),n.mouseY+=.05*(n.targetMouseY-n.mouseY),n.cube.rotation.x=.15*o,n.cube.rotation.y=.2*o,n.cube.rotation.x+=.001*n.mouseY,n.cube.rotation.y+=.001*n.mouseX,n.particles.rotation.y=.05*o,n.particles.rotation.x=5e-4*n.mouseY,n.particles.rotation.y+=5e-4*n.mouseX,n.renderer.render(n.scene,n.camera)}()}addEventListeners(){window.addEventListener("mousemove",this.onMouseMove.bind(this))}removeEventListeners(){window.removeEventListener("mousemove",this.onMouseMove.bind(this))}onMouseMove(n){this.targetMouseX=.5*(n.clientX-this.windowHalfX),this.targetMouseY=.5*(n.clientY-this.windowHalfY)}};let l=e;return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=X.Xpm({type:e,selectors:[["app-three-scene"]],viewQuery:function(r,o){if(1&r&&X.Gf(vC,7),2&r){let c;X.iGM(c=X.CRH())&&(o.canvasRef=c.first)}},hostBindings:function(r,o){1&r&&X.NdJ("resize",function(){return o.onWindowResize()},!1,X.Jf7)},standalone:!0,features:[X.jDz],decls:2,vars:0,consts:[[1,"webgl-canvas"],["canvas",""]],template:function(r,o){1&r&&X._UZ(0,"canvas",0,1)},dependencies:[Ce.ez],styles:[".webgl-canvas[_ngcontent-%COMP%]{display:block;width:100%;height:100%;position:absolute;top:0;left:0;outline:none}"]}),l})();const MC=["overlayElement"],SC=["logoBadge"],bC=["letterS","letterA","letterG","letterA2","letterR","letterD","letterE","letterS2","letterA3","letterI"];let XE=(()=>{const e=class{constructor(n,r){this.router=n,this.renderer=r,this.animationComplete=new X.vpe,this.visible=!1,this.animating=!1,this.completed=!1,this.letterDelays=[0,.1,.2,.3,.4,.6,.7,.8,.9,1],this.mouseX=0,this.mouseY=0}ngOnInit(){}ngAfterViewInit(){this.logoBadge&&this.logoBadge.nativeElement.addEventListener("click",()=>{this.finishAnimation()})}onMouseMove(n){if(!this.completed||!this.logoBadge)return;const r=this.logoBadge.nativeElement,o=r.getBoundingClientRect(),f=n.clientX-(o.left+o.width/2),p=n.clientY-(o.top+o.height/2);Math.sqrt(f*f+p*p)<200?this.renderer.setStyle(r,"transform",`rotateX(${.1*-p}deg) rotateY(${.1*f}deg) scale(1.05)`):this.renderer.setStyle(r,"transform","rotateX(0) rotateY(0) scale(1)")}prepareAnimation(){this.visible=!0,this.completed=!1,this.resetLetters()}resetAnimation(){this.visible=!1,this.animating=!1,this.completed=!1,setTimeout(()=>{this.resetLetters()},100)}resetLetters(){this.letterElements&&(this.letterElements.toArray().forEach(r=>{this.renderer.removeClass(r.nativeElement,"animated"),this.renderer.setStyle(r.nativeElement,"opacity","0")}),this.logoBadge&&(this.renderer.removeClass(this.logoBadge.nativeElement,"show"),this.renderer.setStyle(this.logoBadge.nativeElement,"transform","scale(0.5) rotateY(45deg)")))}playAnimation(){this.animating||(this.animating=!0,this.completed=!1,this.animateLetters())}animateLetters(){this.letterElements.toArray().forEach((o,c)=>{setTimeout(()=>{this.renderer.addClass(o.nativeElement,"animated")},1e3*this.letterDelays[c])});const r=Math.max(...this.letterDelays)+.6;setTimeout(()=>{this.completed=!0,this.logoBadge&&this.renderer.addClass(this.logoBadge.nativeElement,"show"),setTimeout(()=>{this.finishAnimation()},3e3)},1e3*r)}finishAnimation(){!this.visible||!this.completed||(this.visible=!1,setTimeout(()=>{this.animating=!1,this.completed=!1,this.animationComplete.emit(),this.resetLetters(),this.router.navigate(["/about"])},500))}};let l=e;return e.\u0275fac=function(r){return new(r||e)(X.Y36(oe.F0),X.Y36(X.Qsj))},e.\u0275cmp=X.Xpm({type:e,selectors:[["app-signature-animation"]],viewQuery:function(r,o){if(1&r&&(X.Gf(MC,5),X.Gf(SC,5),X.Gf(bC,5)),2&r){let c;X.iGM(c=X.CRH())&&(o.overlayElement=c.first),X.iGM(c=X.CRH())&&(o.logoBadge=c.first),X.iGM(c=X.CRH())&&(o.letterElements=c)}},hostBindings:function(r,o){1&r&&X.NdJ("mousemove",function(d){return o.onMouseMove(d)})},outputs:{animationComplete:"animationComplete"},standalone:!0,features:[X.jDz],decls:38,vars:4,consts:[[1,"signature-overlay"],["overlayElement",""],[1,"signature-container"],[1,"signature-text"],[1,"letter"],["letterS",""],["letterA",""],["letterG",""],["letterA2",""],["letterR",""],[1,"letter","space-letter"],["letterD",""],["letterE",""],["letterS2",""],["letterA3",""],["letterI",""],[1,"logo-badge",3,"click"],["logoBadge",""]],template:function(r,o){1&r&&(X.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"div",4,5),X._uU(6,"S"),X.qZA(),X.TgZ(7,"div",4,6),X._uU(9,"a"),X.qZA(),X.TgZ(10,"div",4,7),X._uU(12,"g"),X.qZA(),X.TgZ(13,"div",4,8),X._uU(15,"a"),X.qZA(),X.TgZ(16,"div",4,9),X._uU(18,"r"),X.qZA(),X._UZ(19,"div",10),X.TgZ(20,"div",4,11),X._uU(22,"D"),X.qZA(),X.TgZ(23,"div",4,12),X._uU(25,"e"),X.qZA(),X.TgZ(26,"div",4,13),X._uU(28,"s"),X.qZA(),X.TgZ(29,"div",4,14),X._uU(31,"a"),X.qZA(),X.TgZ(32,"div",4,15),X._uU(34,"i"),X.qZA()(),X.TgZ(35,"div",16,17),X.NdJ("click",function(){return o.finishAnimation()}),X._uU(37," SD "),X.qZA()()()),2&r&&(X.ekj("visible",o.visible),X.xp6(35),X.ekj("show",o.completed))},dependencies:[Ce.ez],styles:['.signature-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0f1025;display:flex;justify-content:center;align-items:center;opacity:0;visibility:hidden;z-index:1000;transition:opacity .3s ease,visibility .3s ease}.signature-overlay.visible[_ngcontent-%COMP%]{opacity:1;visibility:visible}.signature-container[_ngcontent-%COMP%]{width:90%;max-width:700px;text-align:center;position:relative;padding:0 20px}.signature-text[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap;overflow:visible}.letter[_ngcontent-%COMP%]{font-size:5rem;font-family:Agustina Regular,cursive;color:#fff;display:inline-block;opacity:0;transform:translateY(50px)}.letter.animated[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s forwards}.space-letter[_ngcontent-%COMP%]{width:.5em}.logo-badge[_ngcontent-%COMP%]{width:90px;height:90px;margin:40px auto 0;background:linear-gradient(145deg,#6e45c1,#3949ab);border-radius:50%;display:flex;justify-content:center;align-items:center;font-size:2.2rem;font-weight:700;font-family:Agustina Regular,cursive;color:#fff;box-shadow:0 5px 15px #0000004d,inset 0 2px 10px #fff3;opacity:0;transform:scale(.5) rotateY(45deg);transition:all .3s ease;position:relative;text-shadow:0 2px 5px rgba(0,0,0,.3)}.logo-badge[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:-5px;border-radius:50%;background:linear-gradient(45deg,#8e65f1,transparent,#4959cb);z-index:-1;opacity:0;transition:opacity .5s ease}.logo-badge.show[_ngcontent-%COMP%]{opacity:1;transform:scale(1) rotateY(0);animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}.logo-badge.show[_ngcontent-%COMP%]:before{opacity:.7;animation:_ngcontent-%COMP%_spin 8s linear infinite}.logo-badge.show[_ngcontent-%COMP%]:hover{transform:scale(1.1);cursor:pointer;box-shadow:0 10px 20px #0006,inset 0 2px 15px #fff6}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) scale(1)}50%{transform:translateY(-10px) scale(1.05)}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.signature-overlay[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle at 20% 30%,rgba(94,53,177,.3) 0%,rgba(94,53,177,0) 50%),radial-gradient(circle at 80% 70%,rgba(57,73,171,.3) 0%,rgba(57,73,171,0) 50%)}.click-instruction[_ngcontent-%COMP%]{margin-top:15px;color:#b4b4ff;font-size:1rem;opacity:0;animation:_ngcontent-%COMP%_fadeIn 1s .5s forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:.8}}@media (max-width: 768px){.letter[_ngcontent-%COMP%]{font-size:4rem}.logo-badge[_ngcontent-%COMP%]{width:80px;height:80px;font-size:2rem}.click-instruction[_ngcontent-%COMP%]{font-size:.9rem;margin-top:10px}}@media (max-width: 576px){.letter[_ngcontent-%COMP%]{font-size:3rem}.signature-container[_ngcontent-%COMP%]{width:95%;padding:0 10px}.signature-text[_ngcontent-%COMP%]{justify-content:center}}@media (max-width: 380px){.letter[_ngcontent-%COMP%]{font-size:2.5rem}.logo-badge[_ngcontent-%COMP%]{width:70px;height:70px;font-size:1.8rem;margin-top:20px}.signature-container[_ngcontent-%COMP%]{padding:0 5px}.click-instruction[_ngcontent-%COMP%]{font-size:.8rem;margin-top:5px}}']}),l})();var wC=re(9300);let EC=(()=>{const e=class{constructor(n,r){this.router=n,this.route=r,this.title="Sagar's Portfolio",this.showInitialAnimation=!1}ngOnInit(){this.router.events.pipe((0,wC.h)(n=>n instanceof oe.m2)).subscribe(n=>{"/"===(n.urlAfterRedirects||n.url)&&(console.log("Setting showInitialAnimation to true"),this.showInitialAnimation=!0)})}ngAfterViewInit(){setTimeout(()=>{this.showInitialAnimation&&this.signatureAnimation&&(console.log("Playing animation from afterViewInit"),this.signatureAnimation.prepareAnimation(),setTimeout(()=>{this.signatureAnimation.playAnimation()},100),this.showInitialAnimation=!1)},200)}playSignatureAnimation(){console.log("Logo clicked - playing animation"),this.signatureAnimation&&(this.signatureAnimation.resetAnimation(),setTimeout(()=>{this.signatureAnimation.prepareAnimation(),setTimeout(()=>{this.signatureAnimation.playAnimation()},100)},50))}onActivate(n){window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0}};let l=e;return e.\u0275fac=function(r){return new(r||e)(X.Y36(oe.F0),X.Y36(oe.gz))},e.\u0275cmp=X.Xpm({type:e,selectors:[["app-root"]],viewQuery:function(r,o){if(1&r&&(X.Gf(oe.lC,5),X.Gf(XE,5)),2&r){let c;X.iGM(c=X.CRH())&&(o.outlet=c.first),X.iGM(c=X.CRH())&&(o.signatureAnimation=c.first)}},standalone:!0,features:[X.jDz],decls:7,vars:0,consts:[[3,"logoClick"],[1,"main-content"],[1,"hero-section"],[1,"content-wrapper"],[3,"activate"]],template:function(r,o){1&r&&(X.TgZ(0,"app-header",0),X.NdJ("logoClick",function(){return o.playSignatureAnimation()}),X.qZA(),X.TgZ(1,"main",1),X._UZ(2,"app-three-scene",2),X.TgZ(3,"div",3)(4,"router-outlet",4),X.NdJ("activate",function(d){return o.onActivate(d)}),X.qZA()()(),X._UZ(5,"app-footer")(6,"app-signature-animation"))},dependencies:[Ce.ez,oe.Bz,oe.lC,ln,Je,xC,XE],styles:['@font-face{font-family:Agustina Regular;src:url(Agustina.776c0532ce483ede.woff) format("woff");font-weight:400;font-style:normal;font-display:swap}']}),l})();const CC=[{path:"",pathMatch:"full",children:[]},{path:"about",loadComponent:()=>re.e(468).then(re.bind(re,2468)).then(l=>l.AboutComponent)},{path:"skills",loadComponent:()=>re.e(308).then(re.bind(re,6308)).then(l=>l.SkillsComponent)},{path:"projects",loadComponent:()=>re.e(607).then(re.bind(re,9607)).then(l=>l.ProjectsComponent)},{path:"education",loadComponent:()=>re.e(658).then(re.bind(re,5658)).then(l=>l.EducationComponent)},{path:"experience",loadComponent:()=>re.e(885).then(re.bind(re,9885)).then(l=>l.ExperienceComponent)},{path:"contact",loadComponent:()=>re.e(720).then(re.bind(re,5720)).then(l=>l.ContactComponent)},{path:"**",redirectTo:""}];var TC=re(529);const YE=new URLSearchParams(window.location.search).get("redirect");YE&&window.history.replaceState({},"",YE),(0,B.Cg)(EC,{providers:[(0,oe.bU)(CC),(0,TC.h_)()]}).catch(l=>console.error(l))},9751:(In,mt,re)=>{re.d(mt,{y:()=>ln});var B=re(2961),oe=re(727),Ce=re(8822),X=re(9635),je=re(2416),Ht=re(576),Mt=re(2806);let ln=(()=>{class xt{constructor(lt){lt&&(this._subscribe=lt)}lift(lt){const un=new xt;return un.source=this,un.operator=lt,un}subscribe(lt,un,en){const kn=function Je(xt){return xt&&xt instanceof B.Lv||function ot(xt){return xt&&(0,Ht.m)(xt.next)&&(0,Ht.m)(xt.error)&&(0,Ht.m)(xt.complete)}(xt)&&(0,oe.Nn)(xt)}(lt)?lt:new B.Hp(lt,un,en);return(0,Mt.x)(()=>{const{operator:On,source:ci}=this;kn.add(On?On.call(kn,ci):ci?this._subscribe(kn):this._trySubscribe(kn))}),kn}_trySubscribe(lt){try{return this._subscribe(lt)}catch(un){lt.error(un)}}forEach(lt,un){return new(un=Yt(un))((en,kn)=>{const On=new B.Hp({next:ci=>{try{lt(ci)}catch(Pt){kn(Pt),On.unsubscribe()}},error:kn,complete:en});this.subscribe(On)})}_subscribe(lt){var un;return null===(un=this.source)||void 0===un?void 0:un.subscribe(lt)}[Ce.L](){return this}pipe(...lt){return(0,X.U)(lt)(this)}toPromise(lt){return new(lt=Yt(lt))((un,en)=>{let kn;this.subscribe(On=>kn=On,On=>en(On),()=>un(kn))})}}return xt.create=zn=>new xt(zn),xt})();function Yt(xt){var zn;return null!==(zn=xt??je.v.Promise)&&void 0!==zn?zn:Promise}},7579:(In,mt,re)=>{re.d(mt,{x:()=>Mt});var B=re(9751),oe=re(727);const X=(0,re(3888).d)(Yt=>function(){Yt(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var je=re(8737),Ht=re(2806);let Mt=(()=>{class Yt extends B.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Je){const xt=new ln(this,this);return xt.operator=Je,xt}_throwIfClosed(){if(this.closed)throw new X}next(Je){(0,Ht.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const xt of this.currentObservers)xt.next(Je)}})}error(Je){(0,Ht.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Je;const{observers:xt}=this;for(;xt.length;)xt.shift().error(Je)}})}complete(){(0,Ht.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Je}=this;for(;Je.length;)Je.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Je;return(null===(Je=this.observers)||void 0===Je?void 0:Je.length)>0}_trySubscribe(Je){return this._throwIfClosed(),super._trySubscribe(Je)}_subscribe(Je){return this._throwIfClosed(),this._checkFinalizedStatuses(Je),this._innerSubscribe(Je)}_innerSubscribe(Je){const{hasError:xt,isStopped:zn,observers:lt}=this;return xt||zn?oe.Lc:(this.currentObservers=null,lt.push(Je),new oe.w0(()=>{this.currentObservers=null,(0,je.P)(lt,Je)}))}_checkFinalizedStatuses(Je){const{hasError:xt,thrownError:zn,isStopped:lt}=this;xt?Je.error(zn):lt&&Je.complete()}asObservable(){const Je=new B.y;return Je.source=this,Je}}return Yt.create=(ot,Je)=>new ln(ot,Je),Yt})();class ln extends Mt{constructor(ot,Je){super(),this.destination=ot,this.source=Je}next(ot){var Je,xt;null===(xt=null===(Je=this.destination)||void 0===Je?void 0:Je.next)||void 0===xt||xt.call(Je,ot)}error(ot){var Je,xt;null===(xt=null===(Je=this.destination)||void 0===Je?void 0:Je.error)||void 0===xt||xt.call(Je,ot)}complete(){var ot,Je;null===(Je=null===(ot=this.destination)||void 0===ot?void 0:ot.complete)||void 0===Je||Je.call(ot)}_subscribe(ot){var Je,xt;return null!==(xt=null===(Je=this.source)||void 0===Je?void 0:Je.subscribe(ot))&&void 0!==xt?xt:oe.Lc}}},2961:(In,mt,re)=>{re.d(mt,{Hp:()=>en,Lv:()=>xt});var B=re(576),oe=re(727),Ce=re(2416),X=re(7849);function je(){}const Ht=Yt("C",void 0,void 0);function Yt(It,dt,Kt){return{kind:It,value:dt,error:Kt}}var ot=re(3410),Je=re(2806);class xt extends oe.w0{constructor(dt){super(),this.isStopped=!1,dt?(this.destination=dt,(0,oe.Nn)(dt)&&dt.add(this)):this.destination=Pt}static create(dt,Kt,gn){return new en(dt,Kt,gn)}next(dt){this.isStopped?ci(function ln(It){return Yt("N",It,void 0)}(dt),this):this._next(dt)}error(dt){this.isStopped?ci(function Mt(It){return Yt("E",void 0,It)}(dt),this):(this.isStopped=!0,this._error(dt))}complete(){this.isStopped?ci(Ht,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(dt){this.destination.next(dt)}_error(dt){try{this.destination.error(dt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const zn=Function.prototype.bind;function lt(It,dt){return zn.call(It,dt)}class un{constructor(dt){this.partialObserver=dt}next(dt){const{partialObserver:Kt}=this;if(Kt.next)try{Kt.next(dt)}catch(gn){kn(gn)}}error(dt){const{partialObserver:Kt}=this;if(Kt.error)try{Kt.error(dt)}catch(gn){kn(gn)}else kn(dt)}complete(){const{partialObserver:dt}=this;if(dt.complete)try{dt.complete()}catch(Kt){kn(Kt)}}}class en extends xt{constructor(dt,Kt,gn){let Ge;if(super(),(0,B.m)(dt)||!dt)Ge={next:dt??void 0,error:Kt??void 0,complete:gn??void 0};else{let ht;this&&Ce.v.useDeprecatedNextContext?(ht=Object.create(dt),ht.unsubscribe=()=>this.unsubscribe(),Ge={next:dt.next&&lt(dt.next,ht),error:dt.error&&lt(dt.error,ht),complete:dt.complete&&lt(dt.complete,ht)}):Ge=dt}this.destination=new un(Ge)}}function kn(It){Ce.v.useDeprecatedSynchronousErrorHandling?(0,Je.O)(It):(0,X.h)(It)}function ci(It,dt){const{onStoppedNotification:Kt}=Ce.v;Kt&&ot.z.setTimeout(()=>Kt(It,dt))}const Pt={closed:!0,next:je,error:function On(It){throw It},complete:je}},727:(In,mt,re)=>{re.d(mt,{Lc:()=>Ht,w0:()=>je,Nn:()=>Mt});var B=re(576);const Ce=(0,re(3888).d)(Yt=>function(Je){Yt(this),this.message=Je?`${Je.length} errors occurred during unsubscription:\n${Je.map((xt,zn)=>`${zn+1}) ${xt.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Je});var X=re(8737);class je{constructor(ot){this.initialTeardown=ot,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ot;if(!this.closed){this.closed=!0;const{_parentage:Je}=this;if(Je)if(this._parentage=null,Array.isArray(Je))for(const lt of Je)lt.remove(this);else Je.remove(this);const{initialTeardown:xt}=this;if((0,B.m)(xt))try{xt()}catch(lt){ot=lt instanceof Ce?lt.errors:[lt]}const{_finalizers:zn}=this;if(zn){this._finalizers=null;for(const lt of zn)try{ln(lt)}catch(un){ot=ot??[],un instanceof Ce?ot=[...ot,...un.errors]:ot.push(un)}}if(ot)throw new Ce(ot)}}add(ot){var Je;if(ot&&ot!==this)if(this.closed)ln(ot);else{if(ot instanceof je){if(ot.closed||ot._hasParent(this))return;ot._addParent(this)}(this._finalizers=null!==(Je=this._finalizers)&&void 0!==Je?Je:[]).push(ot)}}_hasParent(ot){const{_parentage:Je}=this;return Je===ot||Array.isArray(Je)&&Je.includes(ot)}_addParent(ot){const{_parentage:Je}=this;this._parentage=Array.isArray(Je)?(Je.push(ot),Je):Je?[Je,ot]:ot}_removeParent(ot){const{_parentage:Je}=this;Je===ot?this._parentage=null:Array.isArray(Je)&&(0,X.P)(Je,ot)}remove(ot){const{_finalizers:Je}=this;Je&&(0,X.P)(Je,ot),ot instanceof je&&ot._removeParent(this)}}je.EMPTY=(()=>{const Yt=new je;return Yt.closed=!0,Yt})();const Ht=je.EMPTY;function Mt(Yt){return Yt instanceof je||Yt&&"closed"in Yt&&(0,B.m)(Yt.remove)&&(0,B.m)(Yt.add)&&(0,B.m)(Yt.unsubscribe)}function ln(Yt){(0,B.m)(Yt)?Yt():Yt.unsubscribe()}},2416:(In,mt,re)=>{re.d(mt,{v:()=>B});const B={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(In,mt,re)=>{re.d(mt,{E:()=>oe});const oe=new(re(9751).y)(je=>je.complete())},2076:(In,mt,re)=>{re.d(mt,{D:()=>gn});var B=re(8421),oe=re(9672),Ce=re(4482),X=re(5403);function je(Ge,ht=0){return(0,Ce.e)((ke,yt)=>{ke.subscribe((0,X.x)(yt,Ut=>(0,oe.f)(yt,Ge,()=>yt.next(Ut),ht),()=>(0,oe.f)(yt,Ge,()=>yt.complete(),ht),Ut=>(0,oe.f)(yt,Ge,()=>yt.error(Ut),ht)))})}function Ht(Ge,ht=0){return(0,Ce.e)((ke,yt)=>{yt.add(Ge.schedule(()=>ke.subscribe(yt),ht))})}var Yt=re(9751),Je=re(2202),xt=re(576);function lt(Ge,ht){if(!Ge)throw new Error("Iterable cannot be null");return new Yt.y(ke=>{(0,oe.f)(ke,ht,()=>{const yt=Ge[Symbol.asyncIterator]();(0,oe.f)(ke,ht,()=>{yt.next().then(Ut=>{Ut.done?ke.complete():ke.next(Ut.value)})},0,!0)})})}var un=re(3670),en=re(8239),kn=re(1144),On=re(6495),ci=re(2206),Pt=re(4532),It=re(3260);function gn(Ge,ht){return ht?function Kt(Ge,ht){if(null!=Ge){if((0,un.c)(Ge))return function Mt(Ge,ht){return(0,B.Xf)(Ge).pipe(Ht(ht),je(ht))}(Ge,ht);if((0,kn.z)(Ge))return function ot(Ge,ht){return new Yt.y(ke=>{let yt=0;return ht.schedule(function(){yt===Ge.length?ke.complete():(ke.next(Ge[yt++]),ke.closed||this.schedule())})})}(Ge,ht);if((0,en.t)(Ge))return function ln(Ge,ht){return(0,B.Xf)(Ge).pipe(Ht(ht),je(ht))}(Ge,ht);if((0,ci.D)(Ge))return lt(Ge,ht);if((0,On.T)(Ge))return function zn(Ge,ht){return new Yt.y(ke=>{let yt;return(0,oe.f)(ke,ht,()=>{yt=Ge[Je.h](),(0,oe.f)(ke,ht,()=>{let Ut,Gn;try{({value:Ut,done:Gn}=yt.next())}catch(jt){return void ke.error(jt)}Gn?ke.complete():ke.next(Ut)},0,!0)}),()=>(0,xt.m)(yt?.return)&&yt.return()})}(Ge,ht);if((0,It.L)(Ge))return function dt(Ge,ht){return lt((0,It.Q)(Ge),ht)}(Ge,ht)}throw(0,Pt.z)(Ge)}(Ge,ht):(0,B.Xf)(Ge)}},8421:(In,mt,re)=>{re.d(mt,{Xf:()=>zn});var B=re(7582),oe=re(1144),Ce=re(8239),X=re(9751),je=re(3670),Ht=re(2206),Mt=re(4532),ln=re(6495),Yt=re(3260),ot=re(576),Je=re(7849),xt=re(8822);function zn(It){if(It instanceof X.y)return It;if(null!=It){if((0,je.c)(It))return function lt(It){return new X.y(dt=>{const Kt=It[xt.L]();if((0,ot.m)(Kt.subscribe))return Kt.subscribe(dt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(It);if((0,oe.z)(It))return function un(It){return new X.y(dt=>{for(let Kt=0;Kt<It.length&&!dt.closed;Kt++)dt.next(It[Kt]);dt.complete()})}(It);if((0,Ce.t)(It))return function en(It){return new X.y(dt=>{It.then(Kt=>{dt.closed||(dt.next(Kt),dt.complete())},Kt=>dt.error(Kt)).then(null,Je.h)})}(It);if((0,Ht.D)(It))return On(It);if((0,ln.T)(It))return function kn(It){return new X.y(dt=>{for(const Kt of It)if(dt.next(Kt),dt.closed)return;dt.complete()})}(It);if((0,Yt.L)(It))return function ci(It){return On((0,Yt.Q)(It))}(It)}throw(0,Mt.z)(It)}function On(It){return new X.y(dt=>{(function Pt(It,dt){var Kt,gn,Ge,ht;return(0,B.mG)(this,void 0,void 0,function*(){try{for(Kt=(0,B.KL)(It);!(gn=yield Kt.next()).done;)if(dt.next(gn.value),dt.closed)return}catch(ke){Ge={error:ke}}finally{try{gn&&!gn.done&&(ht=Kt.return)&&(yield ht.call(Kt))}finally{if(Ge)throw Ge.error}}dt.complete()})})(It,dt).catch(Kt=>dt.error(Kt))})}},9646:(In,mt,re)=>{re.d(mt,{of:()=>Ce});var B=re(7669),oe=re(2076);function Ce(...X){const je=(0,B.yG)(X);return(0,oe.D)(X,je)}},5403:(In,mt,re)=>{re.d(mt,{x:()=>oe});var B=re(2961);function oe(X,je,Ht,Mt,ln){return new Ce(X,je,Ht,Mt,ln)}class Ce extends B.Lv{constructor(je,Ht,Mt,ln,Yt,ot){super(je),this.onFinalize=Yt,this.shouldUnsubscribe=ot,this._next=Ht?function(Je){try{Ht(Je)}catch(xt){je.error(xt)}}:super._next,this._error=ln?function(Je){try{ln(Je)}catch(xt){je.error(xt)}finally{this.unsubscribe()}}:super._error,this._complete=Mt?function(){try{Mt()}catch(Je){je.error(Je)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var je;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ht}=this;super.unsubscribe(),!Ht&&(null===(je=this.onFinalize)||void 0===je||je.call(this))}}}},4351:(In,mt,re)=>{re.d(mt,{b:()=>Ce});var B=re(5577),oe=re(576);function Ce(X,je){return(0,oe.m)(je)?(0,B.z)(X,je,1):(0,B.z)(X,1)}},9300:(In,mt,re)=>{re.d(mt,{h:()=>Ce});var B=re(4482),oe=re(5403);function Ce(X,je){return(0,B.e)((Ht,Mt)=>{let ln=0;Ht.subscribe((0,oe.x)(Mt,Yt=>X.call(je,Yt,ln++)&&Mt.next(Yt)))})}},4004:(In,mt,re)=>{re.d(mt,{U:()=>Ce});var B=re(4482),oe=re(5403);function Ce(X,je){return(0,B.e)((Ht,Mt)=>{let ln=0;Ht.subscribe((0,oe.x)(Mt,Yt=>{Mt.next(X.call(je,Yt,ln++))}))})}},8189:(In,mt,re)=>{re.d(mt,{J:()=>Ce});var B=re(5577),oe=re(4671);function Ce(X=1/0){return(0,B.z)(oe.y,X)}},5577:(In,mt,re)=>{re.d(mt,{z:()=>ln});var B=re(4004),oe=re(8421),Ce=re(4482),X=re(9672),je=re(5403),Mt=re(576);function ln(Yt,ot,Je=1/0){return(0,Mt.m)(ot)?ln((xt,zn)=>(0,B.U)((lt,un)=>ot(xt,lt,zn,un))((0,oe.Xf)(Yt(xt,zn))),Je):("number"==typeof ot&&(Je=ot),(0,Ce.e)((xt,zn)=>function Ht(Yt,ot,Je,xt,zn,lt,un,en){const kn=[];let On=0,ci=0,Pt=!1;const It=()=>{Pt&&!kn.length&&!On&&ot.complete()},dt=gn=>On<xt?Kt(gn):kn.push(gn),Kt=gn=>{lt&&ot.next(gn),On++;let Ge=!1;(0,oe.Xf)(Je(gn,ci++)).subscribe((0,je.x)(ot,ht=>{zn?.(ht),lt?dt(ht):ot.next(ht)},()=>{Ge=!0},void 0,()=>{if(Ge)try{for(On--;kn.length&&On<xt;){const ht=kn.shift();un?(0,X.f)(ot,un,()=>Kt(ht)):Kt(ht)}It()}catch(ht){ot.error(ht)}}))};return Yt.subscribe((0,je.x)(ot,dt,()=>{Pt=!0,It()})),()=>{en?.()}}(xt,zn,Yt,Je)))}},3410:(In,mt,re)=>{re.d(mt,{z:()=>B});const B={setTimeout(oe,Ce,...X){const{delegate:je}=B;return je?.setTimeout?je.setTimeout(oe,Ce,...X):setTimeout(oe,Ce,...X)},clearTimeout(oe){const{delegate:Ce}=B;return(Ce?.clearTimeout||clearTimeout)(oe)},delegate:void 0}},2202:(In,mt,re)=>{re.d(mt,{h:()=>oe});const oe=function B(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(In,mt,re)=>{re.d(mt,{L:()=>B});const B="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(In,mt,re)=>{re.d(mt,{_6:()=>Ht,jO:()=>X,yG:()=>je});var B=re(576);function Ce(Mt){return Mt[Mt.length-1]}function X(Mt){return(0,B.m)(Ce(Mt))?Mt.pop():void 0}function je(Mt){return function oe(Mt){return Mt&&(0,B.m)(Mt.schedule)}(Ce(Mt))?Mt.pop():void 0}function Ht(Mt,ln){return"number"==typeof Ce(Mt)?Mt.pop():ln}},4742:(In,mt,re)=>{re.d(mt,{D:()=>je});const{isArray:B}=Array,{getPrototypeOf:oe,prototype:Ce,keys:X}=Object;function je(Mt){if(1===Mt.length){const ln=Mt[0];if(B(ln))return{args:ln,keys:null};if(function Ht(Mt){return Mt&&"object"==typeof Mt&&oe(Mt)===Ce}(ln)){const Yt=X(ln);return{args:Yt.map(ot=>ln[ot]),keys:Yt}}}return{args:Mt,keys:null}}},8737:(In,mt,re)=>{function B(oe,Ce){if(oe){const X=oe.indexOf(Ce);0<=X&&oe.splice(X,1)}}re.d(mt,{P:()=>B})},3888:(In,mt,re)=>{function B(oe){const X=oe(je=>{Error.call(je),je.stack=(new Error).stack});return X.prototype=Object.create(Error.prototype),X.prototype.constructor=X,X}re.d(mt,{d:()=>B})},1810:(In,mt,re)=>{function B(oe,Ce){return oe.reduce((X,je,Ht)=>(X[je]=Ce[Ht],X),{})}re.d(mt,{n:()=>B})},2806:(In,mt,re)=>{re.d(mt,{O:()=>X,x:()=>Ce});var B=re(2416);let oe=null;function Ce(je){if(B.v.useDeprecatedSynchronousErrorHandling){const Ht=!oe;if(Ht&&(oe={errorThrown:!1,error:null}),je(),Ht){const{errorThrown:Mt,error:ln}=oe;if(oe=null,Mt)throw ln}}else je()}function X(je){B.v.useDeprecatedSynchronousErrorHandling&&oe&&(oe.errorThrown=!0,oe.error=je)}},9672:(In,mt,re)=>{function B(oe,Ce,X,je=0,Ht=!1){const Mt=Ce.schedule(function(){X(),Ht?oe.add(this.schedule(null,je)):this.unsubscribe()},je);if(oe.add(Mt),!Ht)return Mt}re.d(mt,{f:()=>B})},4671:(In,mt,re)=>{function B(oe){return oe}re.d(mt,{y:()=>B})},1144:(In,mt,re)=>{re.d(mt,{z:()=>B});const B=oe=>oe&&"number"==typeof oe.length&&"function"!=typeof oe},2206:(In,mt,re)=>{re.d(mt,{D:()=>oe});var B=re(576);function oe(Ce){return Symbol.asyncIterator&&(0,B.m)(Ce?.[Symbol.asyncIterator])}},576:(In,mt,re)=>{function B(oe){return"function"==typeof oe}re.d(mt,{m:()=>B})},3670:(In,mt,re)=>{re.d(mt,{c:()=>Ce});var B=re(8822),oe=re(576);function Ce(X){return(0,oe.m)(X[B.L])}},6495:(In,mt,re)=>{re.d(mt,{T:()=>Ce});var B=re(2202),oe=re(576);function Ce(X){return(0,oe.m)(X?.[B.h])}},8239:(In,mt,re)=>{re.d(mt,{t:()=>oe});var B=re(576);function oe(Ce){return(0,B.m)(Ce?.then)}},3260:(In,mt,re)=>{re.d(mt,{L:()=>X,Q:()=>Ce});var B=re(7582),oe=re(576);function Ce(je){return(0,B.FC)(this,arguments,function*(){const Mt=je.getReader();try{for(;;){const{value:ln,done:Yt}=yield(0,B.qq)(Mt.read());if(Yt)return yield(0,B.qq)(void 0);yield yield(0,B.qq)(ln)}}finally{Mt.releaseLock()}})}function X(je){return(0,oe.m)(je?.getReader)}},4482:(In,mt,re)=>{re.d(mt,{A:()=>oe,e:()=>Ce});var B=re(576);function oe(X){return(0,B.m)(X?.lift)}function Ce(X){return je=>{if(oe(je))return je.lift(function(Ht){try{return X(Ht,this)}catch(Mt){this.error(Mt)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(In,mt,re)=>{re.d(mt,{Z:()=>X});var B=re(4004);const{isArray:oe}=Array;function X(je){return(0,B.U)(Ht=>function Ce(je,Ht){return oe(Ht)?je(...Ht):je(Ht)}(je,Ht))}},9635:(In,mt,re)=>{re.d(mt,{U:()=>Ce,z:()=>oe});var B=re(4671);function oe(...X){return Ce(X)}function Ce(X){return 0===X.length?B.y:1===X.length?X[0]:function(Ht){return X.reduce((Mt,ln)=>ln(Mt),Ht)}}},7849:(In,mt,re)=>{re.d(mt,{h:()=>Ce});var B=re(2416),oe=re(3410);function Ce(X){oe.z.setTimeout(()=>{const{onUnhandledError:je}=B.v;if(!je)throw X;je(X)})}},4532:(In,mt,re)=>{function B(oe){return new TypeError(`You provided ${null!==oe&&"object"==typeof oe?"an invalid object":`'${oe}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}re.d(mt,{z:()=>B})},6895:(In,mt,re)=>{re.d(mt,{Do:()=>ci,EM:()=>zd,HT:()=>X,JF:()=>ta,K0:()=>Ht,Mx:()=>ll,NF:()=>Lo,O5:()=>En,S$:()=>en,V_:()=>Yt,Ye:()=>Pt,b0:()=>On,bD:()=>vf,ez:()=>Bd,q:()=>Ce,sg:()=>Io,w_:()=>je});var B=re(8256);let oe=null;function Ce(){return oe}function X(I){oe||(oe=I)}class je{}const Ht=new B.OlP("DocumentToken");let Mt=(()=>{class I{historyGo(P){throw new Error("Not implemented")}}return I.\u0275fac=function(P){return new(P||I)},I.\u0275prov=B.Yz7({token:I,factory:function(){return function ln(){return(0,B.LFG)(ot)}()},providedIn:"platform"}),I})();const Yt=new B.OlP("Location Initialized");let ot=(()=>{class I extends Mt{constructor(P){super(),this._doc=P,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ce().getBaseHref(this._doc)}onPopState(P){const G=Ce().getGlobalEventTarget(this._doc,"window");return G.addEventListener("popstate",P,!1),()=>G.removeEventListener("popstate",P)}onHashChange(P){const G=Ce().getGlobalEventTarget(this._doc,"window");return G.addEventListener("hashchange",P,!1),()=>G.removeEventListener("hashchange",P)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(P){this._location.pathname=P}pushState(P,G,ie){Je()?this._history.pushState(P,G,ie):this._location.hash=ie}replaceState(P,G,ie){Je()?this._history.replaceState(P,G,ie):this._location.hash=ie}forward(){this._history.forward()}back(){this._history.back()}historyGo(P=0){this._history.go(P)}getState(){return this._history.state}}return I.\u0275fac=function(P){return new(P||I)(B.LFG(Ht))},I.\u0275prov=B.Yz7({token:I,factory:function(){return function xt(){return new ot((0,B.LFG)(Ht))}()},providedIn:"platform"}),I})();function Je(){return!!window.history.pushState}function zn(I,k){if(0==I.length)return k;if(0==k.length)return I;let P=0;return I.endsWith("/")&&P++,k.startsWith("/")&&P++,2==P?I+k.substring(1):1==P?I+k:I+"/"+k}function lt(I){const k=I.match(/#|\?|$/),P=k&&k.index||I.length;return I.slice(0,P-("/"===I[P-1]?1:0))+I.slice(P)}function un(I){return I&&"?"!==I[0]?"?"+I:I}let en=(()=>{class I{historyGo(P){throw new Error("Not implemented")}}return I.\u0275fac=function(P){return new(P||I)},I.\u0275prov=B.Yz7({token:I,factory:function(){return(0,B.f3M)(On)},providedIn:"root"}),I})();const kn=new B.OlP("appBaseHref");let On=(()=>{class I extends en{constructor(P,G){super(),this._platformLocation=P,this._removeListenerFns=[],this._baseHref=G??this._platformLocation.getBaseHrefFromDOM()??(0,B.f3M)(Ht).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}prepareExternalUrl(P){return zn(this._baseHref,P)}path(P=!1){const G=this._platformLocation.pathname+un(this._platformLocation.search),ie=this._platformLocation.hash;return ie&&P?`${G}${ie}`:G}pushState(P,G,ie,Ee){const Ne=this.prepareExternalUrl(ie+un(Ee));this._platformLocation.pushState(P,G,Ne)}replaceState(P,G,ie,Ee){const Ne=this.prepareExternalUrl(ie+un(Ee));this._platformLocation.replaceState(P,G,Ne)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}}return I.\u0275fac=function(P){return new(P||I)(B.LFG(Mt),B.LFG(kn,8))},I.\u0275prov=B.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})(),ci=(()=>{class I extends en{constructor(P,G){super(),this._platformLocation=P,this._baseHref="",this._removeListenerFns=[],null!=G&&(this._baseHref=G)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}path(P=!1){let G=this._platformLocation.hash;return null==G&&(G="#"),G.length>0?G.substring(1):G}prepareExternalUrl(P){const G=zn(this._baseHref,P);return G.length>0?"#"+G:G}pushState(P,G,ie,Ee){let Ne=this.prepareExternalUrl(ie+un(Ee));0==Ne.length&&(Ne=this._platformLocation.pathname),this._platformLocation.pushState(P,G,Ne)}replaceState(P,G,ie,Ee){let Ne=this.prepareExternalUrl(ie+un(Ee));0==Ne.length&&(Ne=this._platformLocation.pathname),this._platformLocation.replaceState(P,G,Ne)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}}return I.\u0275fac=function(P){return new(P||I)(B.LFG(Mt),B.LFG(kn,8))},I.\u0275prov=B.Yz7({token:I,factory:I.\u0275fac}),I})(),Pt=(()=>{class I{constructor(P){this._subject=new B.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=P;const G=this._locationStrategy.getBaseHref();this._basePath=function gn(I){if(new RegExp("^(https?:)?//").test(I)){const[,P]=I.split(/\/\/[^\/]+/);return P}return I}(lt(Kt(G))),this._locationStrategy.onPopState(ie=>{this._subject.emit({url:this.path(!0),pop:!0,state:ie.state,type:ie.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(P=!1){return this.normalize(this._locationStrategy.path(P))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(P,G=""){return this.path()==this.normalize(P+un(G))}normalize(P){return I.stripTrailingSlash(function dt(I,k){if(!I||!k.startsWith(I))return k;const P=k.substring(I.length);return""===P||["/",";","?","#"].includes(P[0])?P:k}(this._basePath,Kt(P)))}prepareExternalUrl(P){return P&&"/"!==P[0]&&(P="/"+P),this._locationStrategy.prepareExternalUrl(P)}go(P,G="",ie=null){this._locationStrategy.pushState(ie,"",P,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+un(G)),ie)}replaceState(P,G="",ie=null){this._locationStrategy.replaceState(ie,"",P,G),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+un(G)),ie)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(P=0){this._locationStrategy.historyGo?.(P)}onUrlChange(P){return this._urlChangeListeners.push(P),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(G=>{this._notifyUrlChangeListeners(G.url,G.state)})),()=>{const G=this._urlChangeListeners.indexOf(P);this._urlChangeListeners.splice(G,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(P="",G){this._urlChangeListeners.forEach(ie=>ie(P,G))}subscribe(P,G,ie){return this._subject.subscribe({next:P,error:G,complete:ie})}}return I.normalizeQueryParams=un,I.joinWithSlash=zn,I.stripTrailingSlash=lt,I.\u0275fac=function(P){return new(P||I)(B.LFG(en))},I.\u0275prov=B.Yz7({token:I,factory:function(){return function It(){return new Pt((0,B.LFG)(en))}()},providedIn:"root"}),I})();function Kt(I){return I.replace(/\/index.html$/,"")}function ll(I,k){k=encodeURIComponent(k);for(const P of I.split(";")){const G=P.indexOf("="),[ie,Ee]=-1==G?[P,""]:[P.slice(0,G),P.slice(G+1)];if(ie.trim()===k)return decodeURIComponent(Ee)}return null}class Ks{constructor(k,P,G,ie){this.$implicit=k,this.ngForOf=P,this.index=G,this.count=ie}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Io=(()=>{class I{set ngForOf(P){this._ngForOf=P,this._ngForOfDirty=!0}set ngForTrackBy(P){this._trackByFn=P}get ngForTrackBy(){return this._trackByFn}constructor(P,G,ie){this._viewContainer=P,this._template=G,this._differs=ie,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(P){P&&(this._template=P)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const P=this._ngForOf;!this._differ&&P&&(this._differ=this._differs.find(P).create(this.ngForTrackBy))}if(this._differ){const P=this._differ.diff(this._ngForOf);P&&this._applyChanges(P)}}_applyChanges(P){const G=this._viewContainer;P.forEachOperation((ie,Ee,Ne)=>{if(null==ie.previousIndex)G.createEmbeddedView(this._template,new Ks(ie.item,this._ngForOf,-1,-1),null===Ne?void 0:Ne);else if(null==Ne)G.remove(null===Ee?void 0:Ee);else if(null!==Ee){const Gt=G.get(Ee);G.move(Gt,Ne),ps(Gt,ie)}});for(let ie=0,Ee=G.length;ie<Ee;ie++){const Gt=G.get(ie).context;Gt.index=ie,Gt.count=Ee,Gt.ngForOf=this._ngForOf}P.forEachIdentityChange(ie=>{ps(G.get(ie.currentIndex),ie)})}static ngTemplateContextGuard(P,G){return!0}}return I.\u0275fac=function(P){return new(P||I)(B.Y36(B.s_b),B.Y36(B.Rgc),B.Y36(B.ZZ4))},I.\u0275dir=B.lG2({type:I,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),I})();function ps(I,k){I.context.$implicit=k.item}let En=(()=>{class I{constructor(P,G){this._viewContainer=P,this._context=new wi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=G}set ngIf(P){this._context.$implicit=this._context.ngIf=P,this._updateView()}set ngIfThen(P){rr("ngIfThen",P),this._thenTemplateRef=P,this._thenViewRef=null,this._updateView()}set ngIfElse(P){rr("ngIfElse",P),this._elseTemplateRef=P,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(P,G){return!0}}return I.\u0275fac=function(P){return new(P||I)(B.Y36(B.s_b),B.Y36(B.Rgc))},I.\u0275dir=B.lG2({type:I,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),I})();class wi{constructor(){this.$implicit=null,this.ngIf=null}}function rr(I,k){if(k&&!k.createEmbeddedView)throw new Error(`${I} must be a TemplateRef, but received '${(0,B.AaK)(k)}'.`)}let Bd=(()=>{class I{}return I.\u0275fac=function(P){return new(P||I)},I.\u0275mod=B.oAB({type:I}),I.\u0275inj=B.cJS({}),I})();const vf="browser";function Lo(I){return I===vf}let zd=(()=>{class I{}return I.\u0275prov=(0,B.Yz7)({token:I,providedIn:"root",factory:()=>new ea((0,B.LFG)(Ht),window)}),I})();class ea{constructor(k,P){this.document=k,this.window=P,this.offset=()=>[0,0]}setOffset(k){this.offset=Array.isArray(k)?()=>k:k}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(k){this.supportsScrolling()&&this.window.scrollTo(k[0],k[1])}scrollToAnchor(k){if(!this.supportsScrolling())return;const P=function xf(I,k){const P=I.getElementById(k)||I.getElementsByName(k)[0];if(P)return P;if("function"==typeof I.createTreeWalker&&I.body&&(I.body.createShadowRoot||I.body.attachShadow)){const G=I.createTreeWalker(I.body,NodeFilter.SHOW_ELEMENT);let ie=G.currentNode;for(;ie;){const Ee=ie.shadowRoot;if(Ee){const Ne=Ee.getElementById(k)||Ee.querySelector(`[name="${k}"]`);if(Ne)return Ne}ie=G.nextNode()}}return null}(this.document,k);P&&(this.scrollToElement(P),P.focus())}setHistoryScrollRestoration(k){if(this.supportScrollRestoration()){const P=this.window.history;P&&P.scrollRestoration&&(P.scrollRestoration=k)}}scrollToElement(k){const P=k.getBoundingClientRect(),G=P.left+this.window.pageXOffset,ie=P.top+this.window.pageYOffset,Ee=this.offset();this.window.scrollTo(G-Ee[0],ie-Ee[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const k=vu(this.window.history)||vu(Object.getPrototypeOf(this.window.history));return!(!k||!k.writable&&!k.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function vu(I){return Object.getOwnPropertyDescriptor(I,"scrollRestoration")}class ta{}},529:(In,mt,re)=>{re.d(mt,{eN:()=>hn,h_:()=>bi});var B=re(6895),oe=re(8256),Ce=re(9646),X=re(9751),je=re(4351),Ht=re(9300),Mt=re(4004);class ln{}class Yt{}class ot{constructor(ae){this.normalizedNames=new Map,this.lazyUpdate=null,ae?this.lazyInit="string"==typeof ae?()=>{this.headers=new Map,ae.split("\n").forEach(he=>{const et=he.indexOf(":");if(et>0){const Be=he.slice(0,et),Et=Be.toLowerCase(),ei=he.slice(et+1).trim();this.maybeSetNormalizedName(Be,Et),this.headers.has(Et)?this.headers.get(Et).push(ei):this.headers.set(Et,[ei])}})}:()=>{this.headers=new Map,Object.entries(ae).forEach(([he,et])=>{let Be;if(Be="string"==typeof et?[et]:"number"==typeof et?[et.toString()]:et.map(Et=>Et.toString()),Be.length>0){const Et=he.toLowerCase();this.headers.set(Et,Be),this.maybeSetNormalizedName(he,Et)}})}:this.headers=new Map}has(ae){return this.init(),this.headers.has(ae.toLowerCase())}get(ae){this.init();const he=this.headers.get(ae.toLowerCase());return he&&he.length>0?he[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ae){return this.init(),this.headers.get(ae.toLowerCase())||null}append(ae,he){return this.clone({name:ae,value:he,op:"a"})}set(ae,he){return this.clone({name:ae,value:he,op:"s"})}delete(ae,he){return this.clone({name:ae,value:he,op:"d"})}maybeSetNormalizedName(ae,he){this.normalizedNames.has(he)||this.normalizedNames.set(he,ae)}init(){this.lazyInit&&(this.lazyInit instanceof ot?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ae=>this.applyUpdate(ae)),this.lazyUpdate=null))}copyFrom(ae){ae.init(),Array.from(ae.headers.keys()).forEach(he=>{this.headers.set(he,ae.headers.get(he)),this.normalizedNames.set(he,ae.normalizedNames.get(he))})}clone(ae){const he=new ot;return he.lazyInit=this.lazyInit&&this.lazyInit instanceof ot?this.lazyInit:this,he.lazyUpdate=(this.lazyUpdate||[]).concat([ae]),he}applyUpdate(ae){const he=ae.name.toLowerCase();switch(ae.op){case"a":case"s":let et=ae.value;if("string"==typeof et&&(et=[et]),0===et.length)return;this.maybeSetNormalizedName(ae.name,he);const Be=("a"===ae.op?this.headers.get(he):void 0)||[];Be.push(...et),this.headers.set(he,Be);break;case"d":const Et=ae.value;if(Et){let ei=this.headers.get(he);if(!ei)return;ei=ei.filter(gi=>-1===Et.indexOf(gi)),0===ei.length?(this.headers.delete(he),this.normalizedNames.delete(he)):this.headers.set(he,ei)}else this.headers.delete(he),this.normalizedNames.delete(he)}}forEach(ae){this.init(),Array.from(this.normalizedNames.keys()).forEach(he=>ae(this.normalizedNames.get(he),this.headers.get(he)))}}class xt{encodeKey(ae){return en(ae)}encodeValue(ae){return en(ae)}decodeKey(ae){return decodeURIComponent(ae)}decodeValue(ae){return decodeURIComponent(ae)}}const lt=/%(\d[a-f0-9])/gi,un={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function en(Se){return encodeURIComponent(Se).replace(lt,(ae,he)=>un[he]??ae)}function kn(Se){return`${Se}`}class On{constructor(ae={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ae.encoder||new xt,ae.fromString){if(ae.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function zn(Se,ae){const he=new Map;return Se.length>0&&Se.replace(/^\?/,"").split("&").forEach(Be=>{const Et=Be.indexOf("="),[ei,gi]=-1==Et?[ae.decodeKey(Be),""]:[ae.decodeKey(Be.slice(0,Et)),ae.decodeValue(Be.slice(Et+1))],Nn=he.get(ei)||[];Nn.push(gi),he.set(ei,Nn)}),he}(ae.fromString,this.encoder)}else ae.fromObject?(this.map=new Map,Object.keys(ae.fromObject).forEach(he=>{const et=ae.fromObject[he],Be=Array.isArray(et)?et.map(kn):[kn(et)];this.map.set(he,Be)})):this.map=null}has(ae){return this.init(),this.map.has(ae)}get(ae){this.init();const he=this.map.get(ae);return he?he[0]:null}getAll(ae){return this.init(),this.map.get(ae)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ae,he){return this.clone({param:ae,value:he,op:"a"})}appendAll(ae){const he=[];return Object.keys(ae).forEach(et=>{const Be=ae[et];Array.isArray(Be)?Be.forEach(Et=>{he.push({param:et,value:Et,op:"a"})}):he.push({param:et,value:Be,op:"a"})}),this.clone(he)}set(ae,he){return this.clone({param:ae,value:he,op:"s"})}delete(ae,he){return this.clone({param:ae,value:he,op:"d"})}toString(){return this.init(),this.keys().map(ae=>{const he=this.encoder.encodeKey(ae);return this.map.get(ae).map(et=>he+"="+this.encoder.encodeValue(et)).join("&")}).filter(ae=>""!==ae).join("&")}clone(ae){const he=new On({encoder:this.encoder});return he.cloneFrom=this.cloneFrom||this,he.updates=(this.updates||[]).concat(ae),he}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ae=>this.map.set(ae,this.cloneFrom.map.get(ae))),this.updates.forEach(ae=>{switch(ae.op){case"a":case"s":const he=("a"===ae.op?this.map.get(ae.param):void 0)||[];he.push(kn(ae.value)),this.map.set(ae.param,he);break;case"d":if(void 0===ae.value){this.map.delete(ae.param);break}{let et=this.map.get(ae.param)||[];const Be=et.indexOf(kn(ae.value));-1!==Be&&et.splice(Be,1),et.length>0?this.map.set(ae.param,et):this.map.delete(ae.param)}}}),this.cloneFrom=this.updates=null)}}class Pt{constructor(){this.map=new Map}set(ae,he){return this.map.set(ae,he),this}get(ae){return this.map.has(ae)||this.map.set(ae,ae.defaultValue()),this.map.get(ae)}delete(ae){return this.map.delete(ae),this}has(ae){return this.map.has(ae)}keys(){return this.map.keys()}}function dt(Se){return typeof ArrayBuffer<"u"&&Se instanceof ArrayBuffer}function Kt(Se){return typeof Blob<"u"&&Se instanceof Blob}function gn(Se){return typeof FormData<"u"&&Se instanceof FormData}class ht{constructor(ae,he,et,Be){let Et;if(this.url=he,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ae.toUpperCase(),function It(Se){switch(Se){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Be?(this.body=void 0!==et?et:null,Et=Be):Et=et,Et&&(this.reportProgress=!!Et.reportProgress,this.withCredentials=!!Et.withCredentials,Et.responseType&&(this.responseType=Et.responseType),Et.headers&&(this.headers=Et.headers),Et.context&&(this.context=Et.context),Et.params&&(this.params=Et.params)),this.headers||(this.headers=new ot),this.context||(this.context=new Pt),this.params){const ei=this.params.toString();if(0===ei.length)this.urlWithParams=he;else{const gi=he.indexOf("?");this.urlWithParams=he+(-1===gi?"?":gi<he.length-1?"&":"")+ei}}else this.params=new On,this.urlWithParams=he}serializeBody(){return null===this.body?null:dt(this.body)||Kt(this.body)||gn(this.body)||function Ge(Se){return typeof URLSearchParams<"u"&&Se instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof On?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||gn(this.body)?null:Kt(this.body)?this.body.type||null:dt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof On?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ae={}){const he=ae.method||this.method,et=ae.url||this.url,Be=ae.responseType||this.responseType,Et=void 0!==ae.body?ae.body:this.body,ei=void 0!==ae.withCredentials?ae.withCredentials:this.withCredentials,gi=void 0!==ae.reportProgress?ae.reportProgress:this.reportProgress;let Nn=ae.headers||this.headers,Fn=ae.params||this.params;const Cr=ae.context??this.context;return void 0!==ae.setHeaders&&(Nn=Object.keys(ae.setHeaders).reduce((we,le)=>we.set(le,ae.setHeaders[le]),Nn)),ae.setParams&&(Fn=Object.keys(ae.setParams).reduce((we,le)=>we.set(le,ae.setParams[le]),Fn)),new ht(he,et,Et,{params:Fn,headers:Nn,context:Cr,reportProgress:gi,responseType:Be,withCredentials:ei})}}var ke=(()=>((ke=ke||{})[ke.Sent=0]="Sent",ke[ke.UploadProgress=1]="UploadProgress",ke[ke.ResponseHeader=2]="ResponseHeader",ke[ke.DownloadProgress=3]="DownloadProgress",ke[ke.Response=4]="Response",ke[ke.User=5]="User",ke))();class yt{constructor(ae,he=200,et="OK"){this.headers=ae.headers||new ot,this.status=void 0!==ae.status?ae.status:he,this.statusText=ae.statusText||et,this.url=ae.url||null,this.ok=this.status>=200&&this.status<300}}class Ut extends yt{constructor(ae={}){super(ae),this.type=ke.ResponseHeader}clone(ae={}){return new Ut({headers:ae.headers||this.headers,status:void 0!==ae.status?ae.status:this.status,statusText:ae.statusText||this.statusText,url:ae.url||this.url||void 0})}}class Gn extends yt{constructor(ae={}){super(ae),this.type=ke.Response,this.body=void 0!==ae.body?ae.body:null}clone(ae={}){return new Gn({body:void 0!==ae.body?ae.body:this.body,headers:ae.headers||this.headers,status:void 0!==ae.status?ae.status:this.status,statusText:ae.statusText||this.statusText,url:ae.url||this.url||void 0})}}class jt extends yt{constructor(ae){super(ae,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ae.url||"(unknown url)"}`:`Http failure response for ${ae.url||"(unknown url)"}: ${ae.status} ${ae.statusText}`,this.error=ae.error||null}}function pi(Se,ae){return{body:ae,headers:Se.headers,context:Se.context,observe:Se.observe,params:Se.params,reportProgress:Se.reportProgress,responseType:Se.responseType,withCredentials:Se.withCredentials}}let hn=(()=>{class Se{constructor(he){this.handler=he}request(he,et,Be={}){let Et;if(he instanceof ht)Et=he;else{let Nn,Fn;Nn=Be.headers instanceof ot?Be.headers:new ot(Be.headers),Be.params&&(Fn=Be.params instanceof On?Be.params:new On({fromObject:Be.params})),Et=new ht(he,et,void 0!==Be.body?Be.body:null,{headers:Nn,context:Be.context,params:Fn,reportProgress:Be.reportProgress,responseType:Be.responseType||"json",withCredentials:Be.withCredentials})}const ei=(0,Ce.of)(Et).pipe((0,je.b)(Nn=>this.handler.handle(Nn)));if(he instanceof ht||"events"===Be.observe)return ei;const gi=ei.pipe((0,Ht.h)(Nn=>Nn instanceof Gn));switch(Be.observe||"body"){case"body":switch(Et.responseType){case"arraybuffer":return gi.pipe((0,Mt.U)(Nn=>{if(null!==Nn.body&&!(Nn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Nn.body}));case"blob":return gi.pipe((0,Mt.U)(Nn=>{if(null!==Nn.body&&!(Nn.body instanceof Blob))throw new Error("Response is not a Blob.");return Nn.body}));case"text":return gi.pipe((0,Mt.U)(Nn=>{if(null!==Nn.body&&"string"!=typeof Nn.body)throw new Error("Response is not a string.");return Nn.body}));default:return gi.pipe((0,Mt.U)(Nn=>Nn.body))}case"response":return gi;default:throw new Error(`Unreachable: unhandled observe type ${Be.observe}}`)}}delete(he,et={}){return this.request("DELETE",he,et)}get(he,et={}){return this.request("GET",he,et)}head(he,et={}){return this.request("HEAD",he,et)}jsonp(he,et){return this.request("JSONP",he,{params:(new On).append(et,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(he,et={}){return this.request("OPTIONS",he,et)}patch(he,et,Be={}){return this.request("PATCH",he,pi(Be,et))}post(he,et,Be={}){return this.request("POST",he,pi(Be,et))}put(he,et,Be={}){return this.request("PUT",he,pi(Be,et))}}return Se.\u0275fac=function(he){return new(he||Se)(oe.LFG(ln))},Se.\u0275prov=oe.Yz7({token:Se,factory:Se.\u0275fac}),Se})();function yr(Se,ae){return ae(Se)}const ve=new oe.OlP("HTTP_INTERCEPTOR_FNS");let Pe=(()=>{class Se extends ln{constructor(he,et){super(),this.backend=he,this.injector=et,this.chain=null}handle(he){if(null===this.chain){const et=Array.from(new Set(this.injector.get(ve)));this.chain=et.reduceRight((Be,Et)=>function wa(Se,ae,he){return(et,Be)=>he.runInContext(()=>ae(et,Et=>Se(Et,Be)))}(Be,Et,this.injector),yr)}return this.chain(he,et=>this.backend.handle(et))}}return Se.\u0275fac=function(he){return new(he||Se)(oe.LFG(Yt),oe.LFG(oe.lqb))},Se.\u0275prov=oe.Yz7({token:Se,factory:Se.\u0275fac}),Se})();const Gi=/^\)\]\}',?\n/;let Dt=(()=>{class Se{constructor(he){this.xhrFactory=he}handle(he){if("JSONP"===he.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new X.y(et=>{const Be=this.xhrFactory.build();if(Be.open(he.method,he.urlWithParams),he.withCredentials&&(Be.withCredentials=!0),he.headers.forEach((te,fe)=>Be.setRequestHeader(te,fe.join(","))),he.headers.has("Accept")||Be.setRequestHeader("Accept","application/json, text/plain, */*"),!he.headers.has("Content-Type")){const te=he.detectContentTypeHeader();null!==te&&Be.setRequestHeader("Content-Type",te)}if(he.responseType){const te=he.responseType.toLowerCase();Be.responseType="json"!==te?te:"text"}const Et=he.serializeBody();let ei=null;const gi=()=>{if(null!==ei)return ei;const te=Be.statusText||"OK",fe=new ot(Be.getAllResponseHeaders()),Fe=function Ki(Se){return"responseURL"in Se&&Se.responseURL?Se.responseURL:/^X-Request-URL:/m.test(Se.getAllResponseHeaders())?Se.getResponseHeader("X-Request-URL"):null}(Be)||he.url;return ei=new Ut({headers:fe,status:Be.status,statusText:te,url:Fe}),ei},Nn=()=>{let{headers:te,status:fe,statusText:Fe,url:St}=gi(),Vt=null;204!==fe&&(Vt=typeof Be.response>"u"?Be.responseText:Be.response),0===fe&&(fe=Vt?200:0);let rn=fe>=200&&fe<300;if("json"===he.responseType&&"string"==typeof Vt){const ni=Vt;Vt=Vt.replace(Gi,"");try{Vt=""!==Vt?JSON.parse(Vt):null}catch(Ni){Vt=ni,rn&&(rn=!1,Vt={error:Ni,text:Vt})}}rn?(et.next(new Gn({body:Vt,headers:te,status:fe,statusText:Fe,url:St||void 0})),et.complete()):et.error(new jt({error:Vt,headers:te,status:fe,statusText:Fe,url:St||void 0}))},Fn=te=>{const{url:fe}=gi(),Fe=new jt({error:te,status:Be.status||0,statusText:Be.statusText||"Unknown Error",url:fe||void 0});et.error(Fe)};let Cr=!1;const we=te=>{Cr||(et.next(gi()),Cr=!0);let fe={type:ke.DownloadProgress,loaded:te.loaded};te.lengthComputable&&(fe.total=te.total),"text"===he.responseType&&Be.responseText&&(fe.partialText=Be.responseText),et.next(fe)},le=te=>{let fe={type:ke.UploadProgress,loaded:te.loaded};te.lengthComputable&&(fe.total=te.total),et.next(fe)};return Be.addEventListener("load",Nn),Be.addEventListener("error",Fn),Be.addEventListener("timeout",Fn),Be.addEventListener("abort",Fn),he.reportProgress&&(Be.addEventListener("progress",we),null!==Et&&Be.upload&&Be.upload.addEventListener("progress",le)),Be.send(Et),et.next({type:ke.Sent}),()=>{Be.removeEventListener("error",Fn),Be.removeEventListener("abort",Fn),Be.removeEventListener("load",Nn),Be.removeEventListener("timeout",Fn),he.reportProgress&&(Be.removeEventListener("progress",we),null!==Et&&Be.upload&&Be.upload.removeEventListener("progress",le)),Be.readyState!==Be.DONE&&Be.abort()}})}}return Se.\u0275fac=function(he){return new(he||Se)(oe.LFG(B.JF))},Se.\u0275prov=oe.Yz7({token:Se,factory:Se.\u0275fac}),Se})();const Mi=new oe.OlP("XSRF_ENABLED"),hs=new oe.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Ps=new oe.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Oi{}let Xo=(()=>{class Se{constructor(he,et,Be){this.doc=he,this.platform=et,this.cookieName=Be,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const he=this.doc.cookie||"";return he!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,B.Mx)(he,this.cookieName),this.lastCookieString=he),this.lastToken}}return Se.\u0275fac=function(he){return new(he||Se)(oe.LFG(B.K0),oe.LFG(oe.Lbi),oe.LFG(hs))},Se.\u0275prov=oe.Yz7({token:Se,factory:Se.\u0275fac}),Se})();function Ci(Se,ae){const he=Se.url.toLowerCase();if(!(0,oe.f3M)(Mi)||"GET"===Se.method||"HEAD"===Se.method||he.startsWith("http://")||he.startsWith("https://"))return ae(Se);const et=(0,oe.f3M)(Oi).getToken(),Be=(0,oe.f3M)(Ps);return null!=et&&!Se.headers.has(Be)&&(Se=Se.clone({headers:Se.headers.set(Be,et)})),ae(Se)}function bi(...Se){const ae=[hn,Dt,Pe,{provide:ln,useExisting:Pe},{provide:Yt,useExisting:Dt},{provide:ve,useValue:Ci,multi:!0},{provide:Mi,useValue:!0},{provide:Oi,useClass:Xo}];for(const he of Se)ae.push(...he.\u0275providers);return(0,oe.MR2)(ae)}},8256:(In,mt,re)=>{re.d(mt,{tb:()=>cx,AFp:()=>du,ip1:()=>oo,CZH:()=>vc,z2F:()=>uf,sBO:()=>DE,Sil:()=>$b,_Vd:()=>Ju,EJc:()=>rx,Xts:()=>Yu,SBq:()=>Ch,lqb:()=>Jc,qLn:()=>Ph,vpe:()=>Sa,XFs:()=>Qe,OlP:()=>Ti,zs3:()=>Ga,ZZ4:()=>X_,aQg:()=>hm,soG:()=>em,YKP:()=>R0,h0i:()=>Md,PXZ:()=>Jb,R0b:()=>wo,FiY:()=>Kn,Lbi:()=>F_,g9A:()=>Ld,Qsj:()=>Ah,FYo:()=>Th,JOm:()=>ga,tp0:()=>Jl,Rgc:()=>Ed,dDg:()=>Zb,eoX:()=>lx,GfV:()=>Ny,s_b:()=>Cd,ifc:()=>St,MMx:()=>m_,Lck:()=>P0,Gpc:()=>ci,f3M:()=>gi,$WT:()=>ho,MR2:()=>Ty,c2e:()=>ix,zSh:()=>lg,wAp:()=>mn,vHH:()=>Ge,lri:()=>im,rWj:()=>ax,D6c:()=>cr,cg1:()=>yd,kL8:()=>e_,dqk:()=>Qn,iPO:()=>Qb,Z0I:()=>Mi,eJc:()=>D_,CqO:()=>Pv,QGY:()=>Gg,F4k:()=>Rv,RDi:()=>$m,AaK:()=>en,qOj:()=>od,TTD:()=>Bl,_Bn:()=>I0,jDz:()=>O0,xp6:()=>Lh,uIk:()=>Ug,Tol:()=>t0,ekj:()=>qg,Suo:()=>Qh,Xpm:()=>sl,lG2:()=>Fl,Yz7:()=>wn,cJS:()=>Ki,oAB:()=>Do,Yjl:()=>ll,Y36:()=>Fh,_UZ:()=>zg,qZA:()=>xp,TgZ:()=>vp,EpF:()=>Iv,n5z:()=>rs,LFG:()=>Et,$8M:()=>Du,$Z:()=>Uh,NdJ:()=>Wg,CRH:()=>Vp,kcU:()=>k,O4$:()=>eh,oxw:()=>Uv,Q6J:()=>kg,iGM:()=>Hp,MAs:()=>Av,KtG:()=>Gl,Jf7:()=>oc,CHM:()=>Cn,LSH:()=>Xu,P3R:()=>Kf,YNc:()=>Tv,_uU:()=>gS,Oqu:()=>r0,hij:()=>Kg,Gf:()=>C_});var B=re(7579),oe=re(727),Ce=re(9751),X=re(8189),je=re(8421),Ht=re(515),Mt=re(7669),ln=re(2076),ot=re(2961),Je=re(4482);function zn(i,s,...a){if(!0===s)return void i();if(!1===s)return;const u=new ot.Hp({next:()=>{u.unsubscribe(),i()}});return(0,je.Xf)(s(...a)).subscribe(u)}function lt(i){for(let s in i)if(i[s]===lt)return s;throw Error("Could not find renamed property on target object.")}function un(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function en(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(en).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function kn(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const On=lt({__forward_ref__:lt});function ci(i){return i.__forward_ref__=ci,i.toString=function(){return en(this())},i}function Pt(i){return It(i)?i():i}function It(i){return"function"==typeof i&&i.hasOwnProperty(On)&&i.__forward_ref__===ci}function dt(i){return i&&!!i.\u0275providers}const gn="https://g.co/ng/security#xss";class Ge extends Error{constructor(s,a){super(ht(s,a)),this.code=s}}function ht(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}function ke(i){return"string"==typeof i?i:null==i?"":String(i)}function yt(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ke(i)}function pi(i,s){throw new Ge(-201,!1)}function ui(i,s){null==i&&function bt(i,s,a,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${a} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function wn(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ki(i){return{providers:i.providers||[],imports:i.imports||[]}}function Dt(i){return Ao(i,Ps)||Ao(i,Xo)}function Mi(i){return null!==Dt(i)}function Ao(i,s){return i.hasOwnProperty(s)?i[s]:null}function jo(i){return i&&(i.hasOwnProperty(Oi)||i.hasOwnProperty(Ci))?i[Oi]:null}const Ps=lt({\u0275prov:lt}),Oi=lt({\u0275inj:lt}),Xo=lt({ngInjectableDef:lt}),Ci=lt({ngInjectorDef:lt});var Qe=(()=>((Qe=Qe||{})[Qe.Default=0]="Default",Qe[Qe.Host=1]="Host",Qe[Qe.Self=2]="Self",Qe[Qe.SkipSelf=4]="SkipSelf",Qe[Qe.Optional=8]="Optional",Qe))();let Rt;function bi(i){const s=Rt;return Rt=i,s}function ur(i,s,a){const u=Dt(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&Qe.Optional?null:void 0!==s?s:void pi(en(i))}const Qn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Zn={},es="__NG_DI_FLAG__",wr="ngTempTokenPath",co="ngTokenPath",Er=/\n/gm,Se="\u0275",ae="__source";let he;function et(i){const s=he;return he=i,s}function Be(i,s=Qe.Default){if(void 0===he)throw new Ge(-203,!1);return null===he?ur(i,void 0,s):he.get(i,s&Qe.Optional?null:void 0,s)}function Et(i,s=Qe.Default){return(function Si(){return Rt}()||Be)(Pt(i),s)}function gi(i,s=Qe.Default){return Et(i,Nn(s))}function Nn(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Fn(i){const s=[];for(let a=0;a<i.length;a++){const u=Pt(i[a]);if(Array.isArray(u)){if(0===u.length)throw new Ge(900,!1);let h,m=Qe.Default;for(let v=0;v<u.length;v++){const E=u[v],R=we(E);"number"==typeof R?-1===R?h=E.token:m|=R:h=E}s.push(Et(h,m))}else s.push(Et(u))}return s}function Cr(i,s){return i[es]=s,i.prototype[es]=s,i}function we(i){return i[es]}function fe(i){return{toString:i}.toString()}var Fe=(()=>((Fe=Fe||{})[Fe.OnPush=0]="OnPush",Fe[Fe.Default=1]="Default",Fe))(),St=(()=>{return(i=St||(St={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",St;var i})();const Vt={},rn=[],ni=lt({\u0275cmp:lt}),Ni=lt({\u0275dir:lt}),fs=lt({\u0275pipe:lt}),Ol=lt({\u0275mod:lt}),Ls=lt({\u0275fac:lt}),uo=lt({__NG_ELEMENT_ID__:lt});let Nl=0;function sl(i){return fe(()=>{const s=qo(i),a={...s,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Fe.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||St.Emulated,id:"c"+Nl++,styles:i.styles||rn,_:null,schemas:i.schemas||null,tView:null};Ks(a);const u=i.dependencies;return a.directiveDefs=Io(u,!1),a.pipeDefs=Io(u,!0),a})}function jr(i){return $n(i)||Fi(i)}function Zs(i){return null!==i}function Do(i){return fe(()=>({type:i.type,bootstrap:i.bootstrap||rn,declarations:i.declarations||rn,imports:i.imports||rn,exports:i.exports||rn,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Yo(i,s){if(null==i)return Vt;const a={};for(const u in i)if(i.hasOwnProperty(u)){let h=i[u],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),a[h]=u,s&&(s[h]=m)}return a}function Fl(i){return fe(()=>{const s=qo(i);return Ks(s),s})}function ll(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function $n(i){return i[ni]||null}function Fi(i){return i[Ni]||null}function dr(i){return i[fs]||null}function ho(i){const s=$n(i)||Fi(i)||dr(i);return null!==s&&s.standalone}function hr(i,s){const a=i[Ol]||null;if(!a&&!0===s)throw new Error(`Type ${en(i)} does not have '\u0275mod' property.`);return a}function qo(i){const s={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:s,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||rn,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Yo(i.inputs,s),outputs:Yo(i.outputs)}}function Ks(i){i.features?.forEach(s=>s(i))}function Io(i,s){if(!i)return null;const a=s?dr:jr;return()=>("function"==typeof i?i():i).map(u=>a(u)).filter(Zs)}const ps=0,Lt=1,En=2,wi=3,rr=4,Os=5,$i=6,Ro=7,Ii=8,Ea=9,Ns=10,fn=11,Ca=12,ts=13,Ta=14,Zi=15,Ji=16,Zo=17,Po=18,ms=19,Ko=20,cl=21,_i=22,Ul=1,kl=2,Aa=7,Da=8,Jo=9,Br=10;function Tr(i){return Array.isArray(i)&&"object"==typeof i[Ul]}function ns(i){return Array.isArray(i)&&!0===i[Ul]}function ul(i){return 0!=(4&i.flags)}function Fs(i){return i.componentOffset>-1}function gs(i){return 1==(1&i.flags)}function Ar(i){return!!i.template}function Us(i){return 0!=(256&i[En])}function ta(i,s){return i.hasOwnProperty(Ls)?i[Ls]:null}class Mf{constructor(s,a,u){this.previousValue=s,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function Bl(){return zl}function zl(i){return i.type.prototype.ngOnChanges&&(i.setInput=xu),Cc}function Cc(){const i=Hl(this),s=i?.current;if(s){const a=i.previous;if(a===Vt)i.previous=s;else for(let u in s)a[u]=s[u];i.current=null,this.ngOnChanges(s)}}function xu(i,s,a,u){const h=this.declaredInputs[a],m=Hl(i)||function Mu(i,s){return i[Hd]=s}(i,{previous:Vt,current:null}),v=m.current||(m.current={}),E=m.previous,R=E[h];v[h]=new Mf(R&&R.currentValue,s,E===Vt),i[u]=s}Bl.ngInherit=!0;const Hd="__ngSimpleChanges__";function Hl(i){return i[Hd]||null}const ks=function(i,s,a){},Sf="svg";function Qi(i){for(;Array.isArray(i);)i=i[ps];return i}function Vl(i,s){return Qi(s[i])}function _s(i,s){return Qi(s[i.index])}function Dr(i,s){return i.data[s]}function vr(i,s){const a=s[i];return Tr(a)?a:a[ps]}function Ac(i){return 64==(64&i[En])}function Js(i,s){return null==s?null:i[s]}function jd(i){i[Po]=0}function Xd(i,s){i[Os]+=s;let a=i,u=i[wi];for(;null!==u&&(1===s&&1===a[Os]||-1===s&&0===a[Os]);)u[Os]+=s,a=u,u=u[wi]}const pn={lFrame:Fo(null),bindingsEnabled:!0};function Ir(){return pn.bindingsEnabled}function Xe(){return pn.lFrame.lView}function vn(){return pn.lFrame.tView}function Cn(i){return pn.lFrame.contextLView=i,i[Ii]}function Gl(i){return pn.lFrame.contextLView=null,i}function xr(){let i=Wl();for(;null!==i&&64===i.type;)i=i.parent;return i}function Wl(){return pn.lFrame.currentTNode}function sr(i,s){const a=pn.lFrame;a.currentTNode=i,a.isParent=s}function Su(){return pn.lFrame.isParent}function hl(){return pn.lFrame.bindingIndex++}function mo(i){const s=pn.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function Kd(i,s){const a=pn.lFrame;a.bindingIndex=a.bindingRootIndex=i,_n(s)}function _n(i){pn.lFrame.currentDirectiveIndex=i}function it(){return pn.lFrame.currentQueryIndex}function Rn(i){pn.lFrame.currentQueryIndex=i}function Lc(i){const s=i[Lt];return 2===s.type?s.declTNode:1===s.type?i[$i]:null}function fl(i,s,a){if(a&Qe.SkipSelf){let h=s,m=i;for(;!(h=h.parent,null!==h||a&Qe.Host||(h=Lc(m),null===h||(m=m[Zi],10&h.type))););if(null===h)return!1;s=h,i=m}const u=pn.lFrame=No();return u.currentTNode=s,u.lView=i,!0}function $l(i){const s=No(),a=i[Lt];pn.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function No(){const i=pn.lFrame,s=null===i?null:i.child;return null===s?Fo(i):s}function Fo(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function jl(){const i=pn.lFrame;return pn.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Oc=jl;function go(){const i=jl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function qr(){return pn.lFrame.selectedIndex}function ia(i){pn.lFrame.selectedIndex=i}function Ui(){const i=pn.lFrame;return Dr(i.tView,i.selectedIndex)}function eh(){pn.lFrame.currentNamespace=Sf}function k(){!function P(){pn.lFrame.currentNamespace=null}()}function Ee(i,s){for(let a=s.directiveStart,u=s.directiveEnd;a<u;a++){const m=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:R,ngAfterViewChecked:F,ngOnDestroy:$}=m;v&&(i.contentHooks??(i.contentHooks=[])).push(-a,v),E&&((i.contentHooks??(i.contentHooks=[])).push(a,E),(i.contentCheckHooks??(i.contentCheckHooks=[])).push(a,E)),R&&(i.viewHooks??(i.viewHooks=[])).push(-a,R),F&&((i.viewHooks??(i.viewHooks=[])).push(a,F),(i.viewCheckHooks??(i.viewCheckHooks=[])).push(a,F)),null!=$&&(i.destroyHooks??(i.destroyHooks=[])).push(a,$)}}function Ne(i,s,a){jn(i,s,3,a)}function Gt(i,s,a,u){(3&i[En])===a&&jn(i,s,a,u)}function ri(i,s){let a=i[En];(3&a)===s&&(a&=2047,a+=1,i[En]=a)}function jn(i,s,a,u){const m=u??-1,v=s.length-1;let E=0;for(let R=void 0!==u?65535&i[Po]:0;R<v;R++)if("number"==typeof s[R+1]){if(E=s[R],null!=u&&E>=u)break}else s[R]<0&&(i[Po]+=65536),(E<m||-1==m)&&(qt(i,a,s,R),i[Po]=(4294901760&i[Po])+R+2),R++}function qt(i,s,a,u){const h=a[u]<0,m=a[u+1],E=i[h?-a[u]:a[u]];if(h){if(i[En]>>11<i[Po]>>16&&(3&i[En])===s){i[En]+=2048,ks(4,E,m);try{m.call(E)}finally{ks(5,E,m)}}}else{ks(4,E,m);try{m.call(E)}finally{ks(5,E,m)}}}const Tn=-1;class si{constructor(s,a,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function ji(i,s,a){let u=0;for(;u<a.length;){const h=a[u];if("number"==typeof h){if(0!==h)break;u++;const m=a[u++],v=a[u++],E=a[u++];i.setAttribute(s,v,E,m)}else{const m=h,v=a[++u];Bs(m)?i.setProperty(s,m,v):i.setAttribute(s,m,v),u++}}return u}function Qs(i){return 3===i||4===i||6===i}function Bs(i){return 64===i.charCodeAt(0)}function zs(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let u=0;u<s.length;u++){const h=s[u];"number"==typeof h?a=h:0===a||oa(i,a,h,null,-1===a||2===a?s[++u]:null)}}return i}function oa(i,s,a,u,h){let m=0,v=i.length;if(-1===s)v=-1;else for(;m<i.length;){const E=i[m++];if("number"==typeof E){if(E===s){v=-1;break}if(E>s){v=m-1;break}}}for(;m<i.length;){const E=i[m];if("number"==typeof E)break;if(E===a){if(null===u)return void(null!==h&&(i[m+1]=h));if(u===i[m+1])return void(i[m+2]=h)}m++,null!==u&&m++,null!==h&&m++}-1!==v&&(i.splice(v,0,s),m=v+1),i.splice(m++,0,a),null!==u&&i.splice(m++,0,u),null!==h&&i.splice(m++,0,h)}function pl(i){return i!==Tn}function ko(i){return 32767&i}function vs(i,s){let a=function _o(i){return i>>16}(i),u=s;for(;a>0;)u=u[Zi],a--;return u}let Bo=!0;function aa(i){const s=Bo;return Bo=i,s}const Nc=255,Oa=5;let nh=0;const zo={};function Xl(i,s){const a=eo(i,s);if(-1!==a)return a;const u=s[Lt];u.firstCreatePass&&(i.injectorIndex=s.length,zr(u.data,i),zr(s,null),zr(u.blueprint,null));const h=Fc(i,s),m=i.injectorIndex;if(pl(h)){const v=ko(h),E=vs(h,s),R=E[Lt].data;for(let F=0;F<8;F++)s[m+F]=E[v+F]|R[v+F]}return s[m+8]=h,m}function zr(i,s){i.push(0,0,0,0,0,0,0,0,s)}function eo(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Fc(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,u=null,h=s;for(;null!==h;){if(u=Au(h),null===u)return Tn;if(a++,h=h[Zi],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return Tn}function Yl(i,s,a){!function Na(i,s,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(uo)&&(u=a[uo]),null==u&&(u=a[uo]=nh++);const h=u&Nc;s.data[i+(h>>Oa)]|=1<<h}(i,s,a)}function Eu(i,s,a){if(a&Qe.Optional||void 0!==i)return i;pi()}function Pr(i,s,a,u){if(a&Qe.Optional&&void 0===u&&(u=null),!(a&(Qe.Self|Qe.Host))){const h=i[Ea],m=bi(void 0);try{return h?h.get(s,u,a&Qe.Optional):ur(s,u,a&Qe.Optional)}finally{bi(m)}}return Eu(u,0,a)}function Cu(i,s,a,u=Qe.Default,h){if(null!==i){if(1024&s[En]){const v=function Ms(i,s,a,u,h){let m=i,v=s;for(;null!==m&&null!==v&&1024&v[En]&&!(256&v[En]);){const E=la(m,v,a,u|Qe.Self,zo);if(E!==zo)return E;let R=m.parent;if(!R){const F=v[cl];if(F){const $=F.get(a,zo,u);if($!==zo)return $}R=Au(v),v=v[Zi]}m=R}return h}(i,s,a,u,zo);if(v!==zo)return v}const m=la(i,s,a,u,zo);if(m!==zo)return m}return Pr(s,a,u,h)}function la(i,s,a,u,h){const m=function J_(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(uo)?i[uo]:void 0;return"number"==typeof s?s>=0?s&Nc:xs:s}(a);if("function"==typeof m){if(!fl(s,i,u))return u&Qe.Host?Eu(h,0,u):Pr(s,a,u,h);try{const v=m(u);if(null!=v||u&Qe.Optional)return v;pi()}finally{Oc()}}else if("number"==typeof m){let v=null,E=eo(i,s),R=Tn,F=u&Qe.Host?s[Ji][$i]:null;for((-1===E||u&Qe.SkipSelf)&&(R=-1===E?Fc(i,s):s[E+8],R!==Tn&&ua(u,!1)?(v=s[Lt],E=ko(R),s=vs(R,s)):E=-1);-1!==E;){const $=s[Lt];if(gm(m,E,$.data)){const ee=yn(E,s,a,v,u,F);if(ee!==zo)return ee}R=s[E+8],R!==Tn&&ua(u,s[Lt].data[E+8]===F)&&gm(m,E,s)?(v=$,E=ko(R),s=vs(R,s)):E=-1}}return h}function yn(i,s,a,u,h,m){const v=s[Lt],E=v.data[i+8],$=ca(E,v,a,null==u?Fs(E)&&Bo:u!=v&&0!=(3&E.type),h&Qe.Host&&m===E);return null!==$?Lr(s,v,$,E):zo}function ca(i,s,a,u,h){const m=i.providerIndexes,v=s.data,E=1048575&m,R=i.directiveStart,$=m>>20,ue=h?E+$:i.directiveEnd;for(let _e=u?E:E+$;_e<ue;_e++){const Ue=v[_e];if(_e<R&&a===Ue||_e>=R&&Ue.type===a)return _e}if(h){const _e=v[R];if(_e&&Ar(_e)&&_e.type===a)return R}return null}function Lr(i,s,a,u){let h=i[a];const m=s.data;if(function oi(i){return i instanceof si}(h)){const v=h;v.resolving&&function Ut(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Ge(-200,`Circular dependency in DI detected for ${i}${a}`)}(yt(m[a]));const E=aa(v.canSeeViewProviders);v.resolving=!0;const R=v.injectImpl?bi(v.injectImpl):null;fl(i,u,Qe.Default);try{h=i[a]=v.factory(void 0,m,i,u),s.firstCreatePass&&a>=u.directiveStart&&function ie(i,s,a){const{ngOnChanges:u,ngOnInit:h,ngDoCheck:m}=s.type.prototype;if(u){const v=zl(s);(a.preOrderHooks??(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(i,v)}h&&(a.preOrderHooks??(a.preOrderHooks=[])).push(0-i,h),m&&((a.preOrderHooks??(a.preOrderHooks=[])).push(i,m),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(i,m))}(a,m[a],s)}finally{null!==R&&bi(R),aa(E),v.resolving=!1,Oc()}}return h}function gm(i,s,a){return!!(a[s+(i>>Oa)]&1<<i)}function ua(i,s){return!(i&Qe.Self||i&Qe.Host&&s)}class yo{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,u){return Cu(this._tNode,this._lView,s,Nn(u),a)}}function xs(){return new yo(xr(),Xe())}function rs(i){return fe(()=>{const s=i.prototype.constructor,a=s[Ls]||Tu(s),u=Object.prototype;let h=Object.getPrototypeOf(i.prototype).constructor;for(;h&&h!==u;){const m=h[Ls]||Tu(h);if(m&&m!==a)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function Tu(i){return It(i)?()=>{const s=Tu(Pt(i));return s&&s()}:ta(i)}function Au(i){const s=i[Lt],a=s.type;return 2===a?s.declTNode:1===a?i[$i]:null}function Du(i){return function Fa(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const u=a.length;let h=0;for(;h<u;){const m=a[h];if(Qs(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<u&&"string"==typeof a[h];)h++;else{if(m===s)return a[h+1];h+=2}}}return null}(xr(),i)}const Hs="__parameters__";function ml(i,s,a){return fe(()=>{const u=function ql(i){return function(...a){if(i){const u=i(...a);for(const h in u)this[h]=u[h]}}}(s);function h(...m){if(this instanceof h)return u.apply(this,m),this;const v=new h(...m);return E.annotation=v,E;function E(R,F,$){const ee=R.hasOwnProperty(Hs)?R[Hs]:Object.defineProperty(R,Hs,{value:[]})[Hs];for(;ee.length<=$;)ee.push(null);return(ee[$]=ee[$]||[]).push(v),R}}return a&&(h.prototype=Object.create(a.prototype)),h.prototype.ngMetadataName=i,h.annotationCls=h,h})}class Ti{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=wn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function fa(i,s){i.forEach(a=>Array.isArray(a)?fa(a,s):s(a))}function Pu(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Kl(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function _(i,s,a){let u=L(i,s);return u>=0?i[1|u]=a:(u=~u,function x(i,s,a,u){let h=i.length;if(h==s)i.push(a,u);else if(1===h)i.push(u,i[0]),i[0]=a;else{for(h--,i.push(i[h-1],i[h]);h>s;)i[h]=i[h-2],h--;i[s]=a,i[s+1]=u}}(i,u,s,a)),u}function w(i,s){const a=L(i,s);if(a>=0)return i[1|a]}function L(i,s){return function j(i,s,a){let u=0,h=i.length>>a;for(;h!==u;){const m=u+(h-u>>1),v=i[m<<a];if(s===v)return m<<a;v>s?h=m:u=m+1}return~(h<<a)}(i,s,1)}const Kn=Cr(ml("Optional"),8),Jl=Cr(ml("SkipSelf"),4);var ga=(()=>((ga=ga||{})[ga.Important=1]="Important",ga[ga.DashCase=2]="DashCase",ga))();const Uu=new Map;let Lx=0;const Ql="__ngContext__";function ls(i,s){Tr(s)?(i[Ql]=s[Ko],function Ox(i){Uu.set(i[Ko],i)}(s)):i[Ql]=s}let uh;function Lf(i,s){return uh(i,s)}function ec(i){const s=i[wi];return ns(s)?s[wi]:s}function Om(i){return Nm(i[ts])}function Nf(i){return Nm(i[rr])}function Nm(i){for(;null!==i&&!ns(i);)i=i[rr];return i}function Vc(i,s,a,u,h){if(null!=u){let m,v=!1;ns(u)?m=u:Tr(u)&&(v=!0,u=u[ps]);const E=Qi(u);0===i&&null!==a?null==h?Vu(s,a,E):_a(s,a,E,h||null,!0):1===i&&null!==a?_a(s,a,E,h||null,!0):2===i?function gh(i,s,a){const u=kf(i,s);u&&function zm(i,s,a,u){i.removeChild(s,a,u)}(i,u,s,a)}(s,E,v):3===i&&s.destroyNode(E),null!=m&&function Ux(i,s,a,u,h){const m=a[Aa];m!==Qi(a)&&Vc(s,i,u,m,h);for(let E=Br;E<a.length;E++){const R=a[E];ya(R[Lt],R,i,s,u,m)}}(s,i,m,a,h)}}function dh(i,s,a){return i.createElement(s,a)}function dy(i,s){const a=i[Jo],u=a.indexOf(s),h=s[wi];512&s[En]&&(s[En]&=-513,Xd(h,-1)),a.splice(u,1)}function hh(i,s){if(i.length<=Br)return;const a=Br+s,u=i[a];if(u){const h=u[Zo];null!==h&&h!==i&&dy(h,u),s>0&&(i[a-1][rr]=u[rr]);const m=Kl(i,Br+s);!function ly(i,s){ya(i,s,s[fn],2,null,null),s[ps]=null,s[$i]=null}(u[Lt],u);const v=m[ms];null!==v&&v.detachView(m[Lt]),u[wi]=null,u[rr]=null,u[En]&=-65}return u}function Hu(i,s){if(!(128&s[En])){const a=s[fn];a.destroyNode&&ya(i,s,a,3,null,null),function cy(i){let s=i[ts];if(!s)return tc(i[Lt],i);for(;s;){let a=null;if(Tr(s))a=s[ts];else{const u=s[Br];u&&(a=u)}if(!a){for(;s&&!s[rr]&&s!==i;)Tr(s)&&tc(s[Lt],s),s=s[wi];null===s&&(s=i),Tr(s)&&tc(s[Lt],s),a=s&&s[rr]}s=a}}(s)}}function tc(i,s){if(!(128&s[En])){s[En]&=-65,s[En]|=128,function Uf(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let u=0;u<a.length;u+=2){const h=s[a[u]];if(!(h instanceof si)){const m=a[u+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const E=h[m[v]],R=m[v+1];ks(4,E,R);try{R.call(E)}finally{ks(5,E,R)}}else{ks(4,h,m);try{m.call(h)}finally{ks(5,h,m)}}}}}(i,s),function hy(i,s){const a=i.cleanup,u=s[Ro];let h=-1;if(null!==a)for(let m=0;m<a.length-1;m+=2)if("string"==typeof a[m]){const v=a[m+3];v>=0?u[h=v]():u[h=-v].unsubscribe(),m+=2}else{const v=u[h=a[m+1]];a[m].call(v)}if(null!==u){for(let m=h+1;m<u.length;m++)(0,u[m])();s[Ro]=null}}(i,s),1===s[Lt].type&&s[fn].destroy();const a=s[Zo];if(null!==a&&ns(s[wi])){a!==s[wi]&&dy(a,s);const u=s[ms];null!==u&&u.detachView(i)}!function Rm(i){Uu.delete(i[Ko])}(s)}}function Bm(i,s,a){return function fy(i,s,a){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return a[ps];{const{componentOffset:h}=u;if(h>-1){const{encapsulation:m}=i.data[u.directiveStart+h];if(m===St.None||m===St.Emulated)return null}return _s(u,a)}}(i,s.parent,a)}function _a(i,s,a,u,h){i.insertBefore(s,a,u,h)}function Vu(i,s,a){i.appendChild(s,a)}function py(i,s,a,u,h){null!==u?_a(i,s,a,u,h):Vu(i,s,a)}function kf(i,s){return i.parentNode(s)}let mh,Wu,Wc,ph=function fh(i,s,a){return 40&i.type?_s(i,a):null};function Bf(i,s,a,u){const h=Bm(i,u,s),m=s[fn],E=function nc(i,s,a){return ph(i,s,a)}(u.parent||s[$i],u,s);if(null!=h)if(Array.isArray(a))for(let R=0;R<a.length;R++)py(m,h,a[R],E,!1);else py(m,h,a,E,!1);void 0!==mh&&mh(m,u,s,a,h)}function zf(i,s){if(null!==s){const a=s.type;if(3&a)return _s(s,i);if(4&a)return Hm(-1,i[s.index]);if(8&a){const u=s.child;if(null!==u)return zf(i,u);{const h=i[s.index];return ns(h)?Hm(-1,h):Qi(h)}}if(32&a)return Lf(s,i)()||Qi(i[s.index]);{const u=$s(i,s);return null!==u?Array.isArray(u)?u[0]:zf(ec(i[Ji]),u):zf(i,s.next)}}return null}function $s(i,s){return null!==s?i[Ji][$i].projection[s.projection]:null}function Hm(i,s){const a=Br+i+1;if(a<s.length){const u=s[a],h=u[Lt].firstChild;if(null!==h)return zf(u,h)}return s[Aa]}function Gu(i,s,a,u,h,m,v){for(;null!=a;){const E=u[a.index],R=a.type;if(v&&0===s&&(E&&ls(Qi(E),u),a.flags|=2),32!=(32&a.flags))if(8&R)Gu(i,s,a.child,u,h,m,!1),Vc(s,i,h,E,m);else if(32&R){const F=Lf(a,u);let $;for(;$=F();)Vc(s,i,h,$,m);Vc(s,i,h,E,m)}else 16&R?Vm(i,s,u,a,h,m):Vc(s,i,h,E,m);a=v?a.projectionNext:a.next}}function ya(i,s,a,u,h,m){Gu(a,u,i.firstChild,s,h,m,!1)}function Vm(i,s,a,u,h,m){const v=a[Ji],R=v[$i].projection[u.projection];if(Array.isArray(R))for(let F=0;F<R.length;F++)Vc(s,i,h,R[F],m);else Gu(i,s,R,v[wi],h,m,!0)}function yh(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function gy(i,s,a){const{mergedAttrs:u,classes:h,styles:m}=a;null!==u&&ji(i,s,u),null!==h&&yh(i,s,h),null!==m&&function Ts(i,s,a){i.setAttribute(s,"style",a)}(i,s,m)}function $m(i){Wu=i}function qm(i){return function $u(){if(void 0===Wc&&(Wc=null,Qn.trustedTypes))try{Wc=Qn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Wc}()?.createScriptURL(i)||i}class _y{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gn})`}}function vl(i){return i instanceof _y?i.changingThisBreaksApplicationSecurity:i}function ju(i,s){const a=function yw(i){return i instanceof _y&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${gn})`)}return a===s}const zx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var or=(()=>((or=or||{})[or.NONE=0]="NONE",or[or.HTML=1]="HTML",or[or.STYLE=2]="STYLE",or[or.SCRIPT=3]="SCRIPT",or[or.URL=4]="URL",or[or.RESOURCE_URL=5]="RESOURCE_URL",or))();function Xu(i){const s=Yc();return s?s.sanitize(or.URL,i)||"":ju(i,"URL")?vl(i):function xh(i){return(i=String(i)).match(zx)?i:"unsafe:"+i}(ke(i))}function Zf(i){const s=Yc();if(s)return qm(s.sanitize(or.RESOURCE_URL,i)||"");if(ju(i,"ResourceURL"))return qm(vl(i));throw new Ge(904,!1)}function Kf(i,s,a){return function Xc(i,s){return"src"===s&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===s&&("base"===i||"link"===i)?Zf:Xu}(s,a)(i)}function Yc(){const i=Xe();return i&&i[Ca]}const Yu=new Ti("ENVIRONMENT_INITIALIZER"),Ey=new Ti("INJECTOR",-1),qc=new Ti("INJECTOR_DEF_TYPES");class Cy{get(s,a=Zn){if(a===Zn){const u=new Error(`NullInjectorError: No provider for ${en(s)}!`);throw u.name="NullInjectorError",u}return a}}function Ty(i){return{\u0275providers:i}}function Zc(...i){return{\u0275providers:qu(0,i),\u0275fromNgModule:!0}}function qu(i,...s){const a=[],u=new Set;let h;return fa(s,m=>{const v=m;sg(v,a,[],u)&&(h||(h=[]),h.push(v))}),void 0!==h&&Ay(h,a),a}function Ay(i,s){for(let a=0;a<i.length;a++){const{providers:h}=i[a];og(h,m=>{s.push(m)})}}function sg(i,s,a,u){if(!(i=Pt(i)))return!1;let h=null,m=jo(i);const v=!m&&$n(i);if(m||v){if(v&&!v.standalone)return!1;h=i}else{const R=i.ngModule;if(m=jo(R),!m)return!1;h=R}const E=u.has(h);if(v){if(E)return!1;if(u.add(h),v.dependencies){const R="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const F of R)sg(F,s,a,u)}}else{if(!m)return!1;{if(null!=m.imports&&!E){let F;u.add(h);try{fa(m.imports,$=>{sg($,s,a,u)&&(F||(F=[]),F.push($))})}finally{}void 0!==F&&Ay(F,s)}if(!E){const F=ta(h)||(()=>new h);s.push({provide:h,useFactory:F,deps:rn},{provide:qc,useValue:h,multi:!0},{provide:Yu,useValue:()=>Et(h),multi:!0})}const R=m.providers;null==R||E||og(R,$=>{s.push($)})}}return h!==i&&void 0!==i.providers}function og(i,s){for(let a of i)dt(a)&&(a=a.\u0275providers),Array.isArray(a)?og(a,s):s(a)}const $x=lt({provide:String,useValue:lt});function ag(i){return null!==i&&"object"==typeof i&&$x in i}function Kc(i){return"function"==typeof i}const lg=new Ti("Set Injector scope."),Zu={},Xx={};let Jf;function ic(){return void 0===Jf&&(Jf=new Cy),Jf}class Jc{}class er extends Jc{get destroyed(){return this._destroyed}constructor(s,a,u,h){super(),this.parent=a,this.source=u,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ep(s,v=>this.processProvider(v)),this.records.set(Ey,Ku(void 0,this)),h.has("environment")&&this.records.set(Jc,Ku(void 0,this));const m=this.records.get(lg);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(qc.multi,rn,Qe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=et(this),u=bi(void 0);try{return s()}finally{et(a),bi(u)}}get(s,a=Zn,u=Qe.Default){this.assertNotDestroyed(),u=Nn(u);const h=et(this),m=bi(void 0);try{if(!(u&Qe.SkipSelf)){let E=this.records.get(s);if(void 0===E){const R=function Py(i){return"function"==typeof i||"object"==typeof i&&i instanceof Ti}(s)&&Dt(s);E=R&&this.injectableDefInScope(R)?Ku(rc(s),Zu):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(u&Qe.Self?ic():this.parent).get(s,a=u&Qe.Optional&&a===Zn?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[wr]=v[wr]||[]).unshift(en(s)),h)throw v;return function le(i,s,a,u){const h=i[wr];throw s[ae]&&h.unshift(s[ae]),i.message=function te(i,s,a,u=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==Se?i.slice(2):i;let h=en(s);if(Array.isArray(s))h=s.map(en).join(" -> ");else if("object"==typeof s){let m=[];for(let v in s)if(s.hasOwnProperty(v)){let E=s[v];m.push(v+":"+("string"==typeof E?JSON.stringify(E):en(E)))}h=`{${m.join(", ")}}`}return`${a}${u?"("+u+")":""}[${h}]: ${i.replace(Er,"\n  ")}`}("\n"+i.message,h,a,u),i[co]=h,i[wr]=null,i}(v,s,"R3InjectorError",this.source)}throw v}finally{bi(m),et(h)}}resolveInjectorInitializers(){const s=et(this),a=bi(void 0);try{const u=this.get(Yu.multi,rn,Qe.Self);for(const h of u)h()}finally{et(s),bi(a)}}toString(){const s=[],a=this.records;for(const u of a.keys())s.push(en(u));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ge(205,!1)}processProvider(s){let a=Kc(s=Pt(s))?s:Pt(s&&s.provide);const u=function Qf(i){return ag(i)?Ku(void 0,i.useValue):Ku(bh(i),Zu)}(s);if(Kc(s)||!0!==s.multi)this.records.get(a);else{let h=this.records.get(a);h||(h=Ku(void 0,Zu,!0),h.factory=()=>Fn(h.multi),this.records.set(a,h)),a=s,h.multi.push(s)}this.records.set(a,u)}hydrate(s,a){return a.value===Zu&&(a.value=Xx,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Yx(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Pt(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function rc(i){const s=Dt(i),a=null!==s?s.factory:ta(i);if(null!==a)return a;if(i instanceof Ti)throw new Ge(204,!1);if(i instanceof Function)return function Ry(i){const s=i.length;if(s>0)throw function ka(i,s){const a=[];for(let u=0;u<i;u++)a.push(s);return a}(s,"?"),new Ge(204,!1);const a=function hs(i){return i&&(i[Ps]||i[Xo])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Ge(204,!1)}function bh(i,s,a){let u;if(Kc(i)){const h=Pt(i);return ta(h)||rc(h)}if(ag(i))u=()=>Pt(i.useValue);else if(function Iy(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...Fn(i.deps||[]));else if(function Dy(i){return!(!i||!i.useExisting)}(i))u=()=>Et(Pt(i.useExisting));else{const h=Pt(i&&(i.useClass||i.provide));if(!function wh(i){return!!i.deps}(i))return ta(h)||rc(h);u=()=>new h(...Fn(i.deps))}return u}function Ku(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function ep(i,s){for(const a of i)Array.isArray(a)?ep(a,s):a&&dt(a)?ep(a.\u0275providers,s):s(a)}class Eh{}class tp{}class Oy{resolveComponentFactory(s){throw function qx(i){const s=Error(`No component factory found for ${en(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Ju=(()=>{class i{}return i.NULL=new Oy,i})();function cg(){return Qu(xr(),Xe())}function Qu(i,s){return new Ch(_s(i,s))}let Ch=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=cg,i})();function ug(i){return i instanceof Ch?i.nativeElement:i}class Th{}let Ah=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function dg(){const i=Xe(),a=vr(xr().index,i);return(Tr(a)?a:i)[fn]}(),i})(),hg=(()=>{class i{}return i.\u0275prov=wn({token:i,providedIn:"root",factory:()=>null}),i})();class Ny{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const np=new Ny("15.2.10"),Dh={},Ih="ngOriginalError";function Rh(i){return i[Ih]}class Ph{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Rh(s);for(;a&&Rh(a);)a=Rh(a);return a||null}}function oc(i){return i.ownerDocument.defaultView}function xl(i){return i instanceof Function?i():i}function pg(i,s,a){let u=i.length;for(;;){const h=i.indexOf(s,a);if(-1===h)return h;if(0===h||i.charCodeAt(h-1)<=32){const m=s.length;if(h+m===u||i.charCodeAt(h+m)<=32)return h}a=h+1}}const mg="ng-template";function gg(i,s,a){let u=0,h=!0;for(;u<i.length;){let m=i[u++];if("string"==typeof m&&h){const v=i[u++];if(a&&"class"===m&&-1!==pg(v.toLowerCase(),s,0))return!0}else{if(1===m){for(;u<i.length&&"string"==typeof(m=i[u++]);)if(m.toLowerCase()===s)return!0;return!1}"number"==typeof m&&(h=!1)}}return!1}function ip(i){return 4===i.type&&i.value!==mg}function nM(i,s,a){return s===(4!==i.type||a?i.value:mg)}function iM(i,s,a){let u=4;const h=i.attrs||[],m=function rM(i){for(let s=0;s<i.length;s++)if(Qs(i[s]))return s;return i.length}(h);let v=!1;for(let E=0;E<s.length;E++){const R=s[E];if("number"!=typeof R){if(!v)if(4&u){if(u=2|1&u,""!==R&&!nM(i,R,a)||""===R&&1===s.length){if(Va(u))return!1;v=!0}}else{const F=8&u?R:s[++E];if(8&u&&null!==i.attrs){if(!gg(i.attrs,F,a)){if(Va(u))return!1;v=!0}continue}const ee=rp(8&u?"class":R,h,ip(i),a);if(-1===ee){if(Va(u))return!1;v=!0;continue}if(""!==F){let ue;ue=ee>m?"":h[ee+1].toLowerCase();const _e=8&u?ue:null;if(_e&&-1!==pg(_e,F,0)||2&u&&F!==ue){if(Va(u))return!1;v=!0}}}}else{if(!v&&!Va(u)&&!Va(R))return!1;if(v&&Va(R))continue;v=!1,u=R|1&u}}return Va(u)||v}function Va(i){return 0==(1&i)}function rp(i,s,a,u){if(null===s)return-1;let h=0;if(u||!a){let m=!1;for(;h<s.length;){const v=s[h];if(v===i)return h;if(3===v||6===v)m=!0;else{if(1===v||2===v){let E=s[++h];for(;"string"==typeof E;)E=s[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=m?1:2}return-1}return function va(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const u=i[a];if("number"==typeof u)return-1;if(u===s)return a;a++}return-1}(s,i)}function zy(i,s,a=!1){for(let u=0;u<s.length;u++)if(iM(i,s[u],a))return!0;return!1}function _g(i,s){return i?":not("+s.trim()+")":s}function sp(i){let s=i[0],a=1,u=2,h="",m=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&u){const E=i[++a];h+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&u?h+="."+v:4&u&&(h+=" "+v);else""!==h&&!Va(v)&&(s+=_g(m,h),h=""),u=v,m=m||!Va(u);a++}return""!==h&&(s+=_g(m,h)),s}const xn={};function Lh(i){Oh(vn(),Xe(),qr()+i,!1)}function Oh(i,s,a,u){if(!u)if(3==(3&s[En])){const m=i.preOrderCheckHooks;null!==m&&Ne(s,m,a)}else{const m=i.preOrderHooks;null!==m&&Gt(s,m,0,a)}ia(a)}function cM(i,s=null,a=null,u){const h=uM(i,s,a,u);return h.resolveInjectorInitializers(),h}function uM(i,s=null,a=null,u,h=new Set){const m=[a||rn,Zc(i)];return u=u||("object"==typeof i?void 0:en(i)),new er(m,s||ic(),u||null,h)}let Ga=(()=>{class i{static create(a,u){if(Array.isArray(a))return cM({name:""},u,a,"");{const h=a.name??"";return cM({name:h},a.parent,a.providers,h)}}}return i.THROW_IF_NOT_FOUND=Zn,i.NULL=new Cy,i.\u0275prov=wn({token:i,providedIn:"any",factory:()=>Et(Ey)}),i.__NG_ELEMENT_ID__=-1,i})();function Fh(i,s=Qe.Default){const a=Xe();return null===a?Et(i,s):Cu(xr(),a,Pt(i),s)}function Uh(){throw new Error("invalid")}function yM(i,s){const a=i.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const m=a[u+1];if(-1!==m){const v=i.data[m];Rn(a[u]),v.contentQueries(2,s[m],m)}}}function Wa(i,s,a,u,h,m,v,E,R,F,$){const ee=s.blueprint.slice();return ee[ps]=h,ee[En]=76|u,(null!==$||i&&1024&i[En])&&(ee[En]|=1024),jd(ee),ee[wi]=ee[Zi]=i,ee[Ii]=a,ee[Ns]=v||i&&i[Ns],ee[fn]=E||i&&i[fn],ee[Ca]=R||i&&i[Ca]||null,ee[Ea]=F||i&&i[Ea]||null,ee[$i]=m,ee[Ko]=function lh(){return Lx++}(),ee[cl]=$,ee[Ji]=2==s.type?i[Ji]:ee,ee}function kh(i,s,a,u,h){let m=i.data[s];if(null===m)m=function bg(i,s,a,u,h){const m=Wl(),v=Su(),R=i.data[s]=function Iw(i,s,a,u,h,m){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,a,s,u,h);return null===i.firstChild&&(i.firstChild=R),null!==m&&(v?null==m.child&&null!==R.parent&&(m.child=R):null===m.next&&(m.next=R,R.prev=m)),R}(i,s,a,u,h),function bf(){return pn.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=a,m.value=u,m.attrs=h;const v=function Xr(){const i=pn.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return sr(m,!0),m}function id(i,s,a,u){if(0===a)return-1;const h=s.length;for(let m=0;m<a;m++)s.push(u),i.blueprint.push(u),i.data.push(null);return h}function up(i,s,a){$l(s);try{const u=i.viewQuery;null!==u&&dp(1,u,a);const h=i.template;null!==h&&wg(i,s,h,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&yM(i,s),i.staticViewQueries&&dp(2,i.viewQuery,a);const m=i.components;null!==m&&function nv(i,s){for(let a=0;a<s.length;a++)hv(i,s[a])}(s,m)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[En]&=-5,go()}}function $a(i,s,a,u){const h=s[En];if(128!=(128&h)){$l(s);try{jd(s),function Rc(i){return pn.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&wg(i,s,a,2,u);const v=3==(3&h);if(v){const F=i.preOrderCheckHooks;null!==F&&Ne(s,F,null)}else{const F=i.preOrderHooks;null!==F&&Gt(s,F,0,null),ri(s,0)}if(function Dg(i){for(let s=Om(i);null!==s;s=Nf(s)){if(!s[kl])continue;const a=s[Jo];for(let u=0;u<a.length;u++){const h=a[u];512&h[En]||Xd(h[wi],1),h[En]|=512}}}(s),function uv(i){for(let s=Om(i);null!==s;s=Nf(s))for(let a=Br;a<s.length;a++){const u=s[a],h=u[Lt];Ac(u)&&$a(h,u,h.template,u[Ii])}}(s),null!==i.contentQueries&&yM(i,s),v){const F=i.contentCheckHooks;null!==F&&Ne(s,F)}else{const F=i.contentHooks;null!==F&&Gt(s,F,1),ri(s,1)}!function ev(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const h=a[u];if(h<0)ia(~h);else{const m=h,v=a[++u],E=a[++u];Kd(v,m),E(2,s[m])}}}finally{ia(-1)}}(i,s);const E=i.components;null!==E&&function tv(i,s){for(let a=0;a<s.length;a++)Uw(i,s[a])}(s,E);const R=i.viewQuery;if(null!==R&&dp(2,R,u),v){const F=i.viewCheckHooks;null!==F&&Ne(s,F)}else{const F=i.viewHooks;null!==F&&Gt(s,F,2),ri(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[En]&=-41,512&s[En]&&(s[En]&=-513,Xd(s[wi],-1))}finally{go()}}}function wg(i,s,a,u,h){const m=qr(),v=2&u;try{ia(-1),v&&s.length>_i&&Oh(i,s,_i,!1),ks(v?2:0,h),a(u,h)}finally{ia(m),ks(v?3:1,h)}}function Eg(i,s,a){if(ul(s)){const h=s.directiveEnd;for(let m=s.directiveStart;m<h;m++){const v=i.data[m];v.contentQueries&&v.contentQueries(1,a[m],m)}}}function Sl(i,s,a){Ir()&&(function TM(i,s,a,u){const h=a.directiveStart,m=a.directiveEnd;Fs(a)&&function DM(i,s,a){const u=_s(s,i),h=vM(a),m=i[Ns],v=Ig(i,Wa(i,h,null,a.onPush?32:16,u,s,m,m.createRenderer(u,a),null,null,null));i[s.index]=v}(s,a,i.data[h+a.componentOffset]),i.firstCreatePass||Xl(a,s),ls(u,s);const v=a.initialInputs;for(let E=h;E<m;E++){const R=i.data[E],F=Lr(s,i,E,a);ls(F,s),null!==v&&Fw(0,E-h,F,R,0,v),Ar(R)&&(vr(a.index,s)[Ii]=Lr(s,i,E,a))}}(i,s,a,_s(a,s)),64==(64&a.flags)&&Yi(i,s,a))}function iv(i,s,a=_s){const u=s.localNames;if(null!==u){let h=s.index+1;for(let m=0;m<u.length;m+=2){const v=u[m+1],E=-1===v?a(s,i):i[v];i[h++]=E}}}function vM(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=bl(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function bl(i,s,a,u,h,m,v,E,R,F){const $=_i+u,ee=$+h,ue=function rv(i,s){const a=[];for(let u=0;u<s;u++)a.push(u<i?null:xn);return a}($,ee),_e="function"==typeof F?F():F;return ue[Lt]={type:i,blueprint:ue,template:a,queries:null,viewQuery:E,declTNode:s,data:ue.slice().fill(null,$),bindingStartIndex:$,expandoStartIndex:ee,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:R,consts:_e,incompleteFirstPass:!1}}function lc(i,s,a,u){const h=El(s);null===a?h.push(u):(h.push(a),i.firstCreatePass&&zh(i).push(u,h.length-1))}function MM(i,s,a,u){for(let h in i)if(i.hasOwnProperty(h)){a=null===a?{}:a;const m=i[h];null===u?sv(a,s,h,m):u.hasOwnProperty(h)&&sv(a,s,u[h],m)}return a}function sv(i,s,a,u){i.hasOwnProperty(a)?i[a].push(s,u):i[a]=[s,u]}function Tg(i,s,a,u){if(Ir()){const h=null===u?null:{"":-1},m=function AM(i,s){const a=i.directiveRegistry;let u=null,h=null;if(a)for(let m=0;m<a.length;m++){const v=a[m];if(zy(s,v.selectors,!1))if(u||(u=[]),Ar(v))if(null!==v.findHostDirectiveDefs){const E=[];h=h||new Map,v.findHostDirectiveDefs(v,E,h),u.unshift(...E,v),Ag(i,s,E.length)}else u.unshift(v),Ag(i,s,0);else h=h||new Map,v.findHostDirectiveDefs?.(v,u,h),u.push(v)}return null===u?null:[u,h]}(i,a);let v,E;null===m?v=E=null:[v,E]=m,null!==v&&ov(i,s,a,v,h,E),h&&function Lw(i,s,a){if(s){const u=i.localNames=[];for(let h=0;h<s.length;h+=2){const m=a[s[h+1]];if(null==m)throw new Ge(-301,!1);u.push(s[h],m)}}}(a,u,h)}a.mergedAttrs=zs(a.mergedAttrs,a.attrs)}function ov(i,s,a,u,h,m){for(let F=0;F<u.length;F++)Yl(Xl(a,s),i,u[F].type);!function Nw(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,u.length);for(let F=0;F<u.length;F++){const $=u[F];$.providersResolver&&$.providersResolver($)}let v=!1,E=!1,R=id(i,s,u.length,null);for(let F=0;F<u.length;F++){const $=u[F];a.mergedAttrs=zs(a.mergedAttrs,$.hostAttrs),av(i,a,s,R,$),Ow(R,$,h),null!==$.contentQueries&&(a.flags|=4),(null!==$.hostBindings||null!==$.hostAttrs||0!==$.hostVars)&&(a.flags|=64);const ee=$.type.prototype;!v&&(ee.ngOnChanges||ee.ngOnInit||ee.ngDoCheck)&&((i.preOrderHooks??(i.preOrderHooks=[])).push(a.index),v=!0),!E&&(ee.ngOnChanges||ee.ngDoCheck)&&((i.preOrderCheckHooks??(i.preOrderCheckHooks=[])).push(a.index),E=!0),R++}!function Cg(i,s,a){const h=s.directiveEnd,m=i.data,v=s.attrs,E=[];let R=null,F=null;for(let $=s.directiveStart;$<h;$++){const ee=m[$],ue=a?a.get(ee):null,Ue=ue?ue.outputs:null;R=MM(ee.inputs,$,R,ue?ue.inputs:null),F=MM(ee.outputs,$,F,Ue);const ct=null===R||null===v||ip(s)?null:cv(R,$,v);E.push(ct)}null!==R&&(R.hasOwnProperty("class")&&(s.flags|=8),R.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=E,s.inputs=R,s.outputs=F}(i,a,m)}function Yi(i,s,a){const u=a.directiveStart,h=a.directiveEnd,m=a.index,v=function Rr(){return pn.lFrame.currentDirectiveIndex}();try{ia(m);for(let E=u;E<h;E++){const R=i.data[E],F=s[E];_n(E),(null!==R.hostBindings||0!==R.hostVars||null!==R.hostAttrs)&&Pw(R,F)}}finally{ia(-1),_n(v)}}function Pw(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Ag(i,s,a){s.componentOffset=a,(i.components??(i.components=[])).push(s.index)}function Ow(i,s,a){if(a){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)a[s.exportAs[u]]=i;Ar(s)&&(a[""]=i)}}function av(i,s,a,u,h){i.data[u]=h;const m=h.factory||(h.factory=ta(h.type)),v=new si(m,Ar(h),Fh);i.blueprint[u]=v,a[u]=v,function EM(i,s,a,u,h){const m=h.hostBindings;if(m){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const E=~s.index;(function CM(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(v)!=E&&v.push(E),v.push(a,u,m)}}(i,s,u,id(i,a,h.hostVars,xn),h)}function wl(i,s,a,u,h,m){const v=_s(i,s);!function lv(i,s,a,u,h,m,v){if(null==m)i.removeAttribute(s,h,a);else{const E=null==v?ke(m):v(m,u||"",h);i.setAttribute(s,h,E,a)}}(s[fn],v,m,i.value,a,u,h)}function Fw(i,s,a,u,h,m){const v=m[s];if(null!==v){const E=u.setInput;for(let R=0;R<v.length;){const F=v[R++],$=v[R++],ee=v[R++];null!==E?u.setInput(a,ee,F,$):a[$]=ee}}}function cv(i,s,a){let u=null,h=0;for(;h<a.length;){const m=a[h];if(0!==m)if(5!==m){if("number"==typeof m)break;if(i.hasOwnProperty(m)){null===u&&(u=[]);const v=i[m];for(let E=0;E<v.length;E+=2)if(v[E]===s){u.push(m,v[E+1],a[h+1]);break}}h+=2}else h+=2;else h+=4}return u}function IM(i,s,a,u){return[i,!0,!1,s,null,0,u,a,null,null]}function Uw(i,s){const a=vr(s,i);if(Ac(a)){const u=a[Lt];48&a[En]?$a(u,a,u.template,a[Ii]):a[Os]>0&&dv(a)}}function dv(i){for(let u=Om(i);null!==u;u=Nf(u))for(let h=Br;h<u.length;h++){const m=u[h];if(Ac(m))if(512&m[En]){const v=m[Lt];$a(v,m,v.template,m[Ii])}else m[Os]>0&&dv(m)}const a=i[Lt].components;if(null!==a)for(let u=0;u<a.length;u++){const h=vr(a[u],i);Ac(h)&&h[Os]>0&&dv(h)}}function hv(i,s){const a=vr(s,i),u=a[Lt];(function fv(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(u,a),up(u,a,a[Ii])}function Ig(i,s){return i[ts]?i[Ta][rr]=s:i[ts]=s,i[Ta]=s,s}function Bh(i){for(;i;){i[En]|=32;const s=ec(i);if(Us(i)&&!s)return i;i=s}return null}function tu(i,s,a,u=!0){const h=s[Ns];h.begin&&h.begin();try{$a(i,s,i.template,a)}catch(v){throw u&&RM(s,v),v}finally{h.end&&h.end()}}function dp(i,s,a){Rn(0),s(i,a)}function El(i){return i[Ro]||(i[Ro]=[])}function zh(i){return i.cleanup||(i.cleanup=[])}function RM(i,s){const a=i[Ea],u=a?a.get(Ph,null):null;u&&u.handleError(s)}function fp(i,s,a,u,h){for(let m=0;m<a.length;){const v=a[m++],E=a[m++],R=s[v],F=i.data[v];null!==F.setInput?F.setInput(R,h,u,E):R[E]=h}}function pp(i,s,a){let u=a?i.styles:null,h=a?i.classes:null,m=0;if(null!==s)for(let v=0;v<s.length;v++){const E=s[v];"number"==typeof E?m=E:1==m?h=kn(h,E):2==m&&(u=kn(u,E+": "+s[++v]+";"))}a?i.styles=u:i.stylesWithoutHost=u,a?i.classes=h:i.classesWithoutHost=h}function Hh(i,s,a,u,h=!1){for(;null!==a;){const m=s[a.index];if(null!==m&&u.push(Qi(m)),ns(m))for(let E=Br;E<m.length;E++){const R=m[E],F=R[Lt].firstChild;null!==F&&Hh(R[Lt],R,F,u)}const v=a.type;if(8&v)Hh(i,s,a.child,u);else if(32&v){const E=Lf(a,s);let R;for(;R=E();)u.push(R)}else if(16&v){const E=$s(s,a);if(Array.isArray(E))u.push(...E);else{const R=ec(s[Ji]);Hh(R[Lt],R,E,u,!0)}}a=h?a.projectionNext:a.next}return u}class rd{get rootNodes(){const s=this._lView,a=s[Lt];return Hh(a,s,a.firstChild,[])}constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ii]}set context(s){this._lView[Ii]=s}get destroyed(){return 128==(128&this._lView[En])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[wi];if(ns(s)){const a=s[Da],u=a?a.indexOf(this):-1;u>-1&&(hh(s,u),Kl(a,u))}this._attachedToViewContainer=!1}Hu(this._lView[Lt],this._lView)}onDestroy(s){lc(this._lView[Lt],this._lView,null,s)}markForCheck(){Bh(this._cdRefInjectingView||this._lView)}detach(){this._lView[En]&=-65}reattach(){this._lView[En]|=64}detectChanges(){tu(this._lView[Lt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Fx(i,s){ya(i,s,s[fn],2,null,null)}(this._lView[Lt],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Ge(902,!1);this._appRef=s}}class kw extends rd{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;tu(s[Lt],s,s[Ii],!1)}checkNoChanges(){}get context(){return null}}class PM extends Ju{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=$n(s);return new sd(a,this.ngModule)}}function LM(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class mp{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,u){u=Nn(u);const h=this.injector.get(s,Dh,u);return h!==Dh||a===Dh?h:this.parentInjector.get(s,a,u)}}class sd extends tp{get inputs(){return LM(this.componentDef.inputs)}get outputs(){return LM(this.componentDef.outputs)}constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function sM(i){return i.map(sp).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}create(s,a,u,h){let m=(h=h||this.ngModule)instanceof Jc?h:h?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const v=m?new mp(s,m):s,E=v.get(Th,null);if(null===E)throw new Ge(407,!1);const R=v.get(hg,null),F=E.createRenderer(null,this.componentDef),$=this.componentDef.selectors[0][0]||"div",ee=u?function xM(i,s,a){return i.selectRootElement(s,a===St.ShadowDom)}(F,u,this.componentDef.encapsulation):dh(F,$,function pv(i){const s=i.toLowerCase();return"svg"===s?Sf:"math"===s?"math":null}($)),ue=this.componentDef.onPush?288:272,_e=bl(0,null,null,1,0,null,null,null,null,null),Ue=Wa(null,_e,null,ue,null,null,E,F,R,v,null);let ct,wt;$l(Ue);try{const zt=this.componentDef;let dn,st=null;zt.findHostDirectiveDefs?(dn=[],st=new Map,zt.findHostDirectiveDefs(zt,dn,st),dn.push(zt)):dn=[zt];const Pn=function pr(i,s){const a=i[Lt],u=_i;return i[u]=s,kh(a,u,2,"#host",null)}(Ue,ee),Ri=function zw(i,s,a,u,h,m,v,E){const R=h[Lt];!function Sr(i,s,a,u){for(const h of i)s.mergedAttrs=zs(s.mergedAttrs,h.hostAttrs);null!==s.mergedAttrs&&(pp(s,s.mergedAttrs,!0),null!==a&&gy(u,a,s))}(u,i,s,v);const F=m.createRenderer(s,a),$=Wa(h,vM(a),null,a.onPush?32:16,h[i.index],i,m,F,E||null,null,null);return R.firstCreatePass&&Ag(R,i,u.length-1),Ig(h,$),h[i.index]=$}(Pn,ee,zt,dn,Ue,E,F);wt=Dr(_e,_i),ee&&function Hw(i,s,a,u){if(u)ji(i,a,["ng-version",np.full]);else{const{attrs:h,classes:m}=function op(i){const s=[],a=[];let u=1,h=2;for(;u<i.length;){let m=i[u];if("string"==typeof m)2===h?""!==m&&s.push(m,i[++u]):8===h&&a.push(m);else{if(!Va(h))break;h=m}u++}return{attrs:s,classes:a}}(s.selectors[0]);h&&ji(i,a,h),m&&m.length>0&&yh(i,a,m.join(" "))}}(F,zt,ee,u),void 0!==a&&function Vw(i,s,a){const u=i.projection=[];for(let h=0;h<s.length;h++){const m=a[h];u.push(null!=m?Array.from(m):null)}}(wt,this.ngContentSelectors,a),ct=function gp(i,s,a,u,h,m){const v=xr(),E=h[Lt],R=_s(v,h);ov(E,h,v,a,null,u);for(let $=0;$<a.length;$++)ls(Lr(h,E,v.directiveStart+$,v),h);Yi(E,h,v),R&&ls(R,h);const F=Lr(h,E,v.directiveStart+v.componentOffset,v);if(i[Ii]=h[Ii]=F,null!==m)for(const $ of m)$(F,s);return Eg(E,v,i),F}(Ri,zt,dn,st,Ue,[Gw]),up(_e,Ue,null)}finally{go()}return new Bw(this.componentType,ct,Qu(wt,Ue),Ue,wt)}}class Bw extends Eh{constructor(s,a,u,h,m){super(),this.location=u,this._rootLView=h,this._tNode=m,this.instance=a,this.hostView=this.changeDetectorRef=new kw(h),this.componentType=s}setInput(s,a){const u=this._tNode.inputs;let h;if(null!==u&&(h=u[s])){const m=this._rootLView;fp(m[Lt],m,h,s,a),Bh(vr(this._tNode.index,m))}}get injector(){return new yo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function Gw(){const i=xr();Ee(Xe()[Lt],i)}function od(i){let s=function Pg(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const u=[i];for(;s;){let h;if(Ar(i))h=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Ge(903,!1);h=s.\u0275dir}if(h){if(a){u.push(h);const v=i;v.inputs=mv(i.inputs),v.declaredInputs=mv(i.declaredInputs),v.outputs=mv(i.outputs);const E=h.hostBindings;E&&jw(i,E);const R=h.viewQuery,F=h.contentQueries;if(R&&Ww(i,R),F&&$w(i,F),un(i.inputs,h.inputs),un(i.declaredInputs,h.declaredInputs),un(i.outputs,h.outputs),Ar(h)&&h.data.animation){const $=i.data;$.animation=($.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let v=0;v<m.length;v++){const E=m[v];E&&E.ngInherit&&E(i),E===od&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Lg(i){let s=0,a=null;for(let u=i.length-1;u>=0;u--){const h=i[u];h.hostVars=s+=h.hostVars,h.hostAttrs=zs(h.hostAttrs,a=zs(a,h.hostAttrs))}}(u)}function mv(i){return i===Vt?{}:i===rn?[]:i}function Ww(i,s){const a=i.viewQuery;i.viewQuery=a?(u,h)=>{s(u,h),a(u,h)}:s}function $w(i,s){const a=i.contentQueries;i.contentQueries=a?(u,h,m)=>{s(u,h,m),a(u,h,m)}:s}function jw(i,s){const a=i.hostBindings;i.hostBindings=a?(u,h)=>{s(u,h),a(u,h)}:s}function _p(i){return!!Fg(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function Fg(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function As(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Ug(i,s,a,u){const h=Xe();return As(h,hl(),s)&&(vn(),wl(Ui(),h,i,s,a,u)),Ug}function Tv(i,s,a,u,h,m,v,E){const R=Xe(),F=vn(),$=i+_i,ee=F.firstCreatePass?function GM(i,s,a,u,h,m,v,E,R){const F=s.consts,$=kh(s,i,4,v||null,Js(F,E));Tg(s,a,$,Js(F,R)),Ee(s,$);const ee=$.tView=bl(2,$,u,h,m,s.directiveRegistry,s.pipeRegistry,null,s.schemas,F);return null!==s.queries&&(s.queries.template(s,$),ee.queries=s.queries.embeddedTView($)),$}($,F,R,s,a,u,h,m,v):F.data[$];sr(ee,!1);const ue=R[fn].createComment("");Bf(F,R,ue,ee),ls(ue,R),Ig(R,R[$]=IM(ue,R,ue,ee)),gs(ee)&&Sl(F,R,ee),null!=v&&iv(R,ee,E)}function Av(i){return function La(i,s){return i[s]}(function wu(){return pn.lFrame.contextLView}(),_i+i)}function kg(i,s,a){const u=Xe();return As(u,hl(),s)&&function js(i,s,a,u,h,m,v,E){const R=_s(s,a);let $,F=s.inputs;!E&&null!=F&&($=F[u])?(fp(i,a,$,u,h),Fs(s)&&function bM(i,s){const a=vr(s,i);16&a[En]||(a[En]|=32)}(a,s.index)):3&s.type&&(u=function SM(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),h=null!=v?v(h,s.value||"",u):h,m.setProperty(R,u,h))}(vn(),Ui(),u,i,s,u[fn],a,!1),kg}function Bg(i,s,a,u,h){const v=h?"class":"style";fp(i,a,s.inputs[v],v,u)}function vp(i,s,a,u){const h=Xe(),m=vn(),v=_i+i,E=h[fn],R=m.firstCreatePass?function $M(i,s,a,u,h,m){const v=s.consts,R=kh(s,i,2,u,Js(v,h));return Tg(s,a,R,Js(v,m)),null!==R.attrs&&pp(R,R.attrs,!1),null!==R.mergedAttrs&&pp(R,R.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,R),R}(v,m,h,s,a,u):m.data[v],F=h[v]=dh(E,s,function G(){return pn.lFrame.currentNamespace}()),$=gs(R);return sr(R,!0),gy(E,F,R),32!=(32&R.flags)&&Bf(m,h,F,R),0===function Dc(){return pn.lFrame.elementDepthCount}()&&ls(F,h),function Ic(){pn.lFrame.elementDepthCount++}(),$&&(Sl(m,h,R),Eg(m,R,h)),null!==u&&iv(h,R),vp}function xp(){let i=xr();Su()?function bu(){pn.lFrame.isParent=!1}():(i=i.parent,sr(i,!1));const s=i;!function fo(){pn.lFrame.elementDepthCount--}();const a=vn();return a.firstCreatePass&&(Ee(a,i),ul(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function fr(i){return 0!=(8&i.flags)}(s)&&Bg(a,s,Xe(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function ne(i){return 0!=(16&i.flags)}(s)&&Bg(a,s,Xe(),s.stylesWithoutHost,!1),xp}function zg(i,s,a,u){return vp(i,s,a,u),xp(),zg}function Iv(){return Xe()}function Gg(i){return!!i&&"function"==typeof i.then}function Rv(i){return!!i&&"function"==typeof i.subscribe}const Pv=Rv;function Wg(i,s,a,u){const h=Xe(),m=vn(),v=xr();return function Ov(i,s,a,u,h,m,v){const E=gs(u),F=i.firstCreatePass&&zh(i),$=s[Ii],ee=El(s);let ue=!0;if(3&u.type||v){const ct=_s(u,s),wt=v?v(ct):ct,zt=ee.length,dn=v?Pn=>v(Qi(Pn[u.index])):u.index;let st=null;if(!v&&E&&(st=function XM(i,s,a,u){const h=i.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const v=h[m];if(v===a&&h[m+1]===u){const E=s[Ro],R=h[m+2];return E.length>R?E[R]:null}"string"==typeof v&&(m+=2)}return null}(i,s,h,u.index)),null!==st)(st.__ngLastListenerFn__||st).__ngNextListenerFn__=m,st.__ngLastListenerFn__=m,ue=!1;else{m=Fv(u,s,$,m,!1);const Pn=a.listen(wt,h,m);ee.push(m,Pn),F&&F.push(h,dn,zt,zt+1)}}else m=Fv(u,s,$,m,!1);const _e=u.outputs;let Ue;if(ue&&null!==_e&&(Ue=_e[h])){const ct=Ue.length;if(ct)for(let wt=0;wt<ct;wt+=2){const Ri=s[Ue[wt]][Ue[wt+1]].subscribe(m),nr=ee.length;ee.push(m,Ri),F&&F.push(h,u.index,nr,-(nr+1))}}}(m,h,h[fn],v,i,s,u),Wg}function Nv(i,s,a,u){try{return ks(6,s,a),!1!==a(u)}catch(h){return RM(i,h),!1}finally{ks(7,s,a)}}function Fv(i,s,a,u,h){return function m(v){if(v===Function)return u;Bh(i.componentOffset>-1?vr(i.index,s):s);let R=Nv(s,a,u,v),F=m.__ngNextListenerFn__;for(;F;)R=Nv(s,a,F,v)&&R,F=F.__ngNextListenerFn__;return h&&!1===R&&(v.preventDefault(),v.returnValue=!1),R}}function Uv(i=1){return function Qd(i){return(pn.lFrame.contextLView=function wf(i,s){for(;i>0;)s=s[Zi],i--;return s}(i,pn.lFrame.contextLView))[Ii]}(i)}function Mp(i,s){return i<<17|s<<2}function uc(i){return i>>17&32767}function jg(i){return 2|i}function iu(i){return(131068&i)>>2}function Xg(i,s){return-131069&i|s<<2}function Yg(i){return 1|i}function Xv(i,s,a,u,h){const m=i[a+1],v=null===s;let E=u?uc(m):iu(m),R=!1;for(;0!==E&&(!1===R||v);){const $=i[E+1];nS(i[E],s)&&(R=!0,i[E+1]=u?Yg($):jg($)),E=u?uc($):iu($)}R&&(i[a+1]=u?jg(m):Yg(m))}function nS(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&L(i,s)>=0}const Gr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Yv(i){return i.substring(Gr.key,Gr.keyEnd)}function qv(i,s){const a=Gr.textEnd;return a===s?-1:(s=Gr.keyEnd=function oS(i,s,a){for(;s<a&&i.charCodeAt(s)>32;)s++;return s}(i,Gr.key=s,a),gd(i,s,a))}function gd(i,s,a){for(;s<a&&i.charCodeAt(s)<=32;)s++;return s}function qg(i,s){return function xa(i,s,a,u){const h=Xe(),m=vn(),v=mo(2);m.firstUpdatePass&&dS(m,i,v,u),s!==xn&&As(h,v,s)&&fS(m,m.data[qr()],h,h[fn],i,h[v+1]=function rE(i,s){return null==i||""===i||("string"==typeof s?i+=s:"object"==typeof i&&(i=en(vl(i)))),i}(s,a),u,v)}(i,s,null,!0),qg}function t0(i){!function Ma(i,s,a,u){const h=vn(),m=mo(2);h.firstUpdatePass&&dS(h,null,m,u);const v=Xe();if(a!==xn&&As(v,m,a)){const E=h.data[qr()];if(mS(E,u)&&!uS(h,m)){let R=u?E.classesWithoutHost:E.stylesWithoutHost;null!==R&&(a=kn(R,a||"")),Bg(h,E,v,a,u)}else!function iE(i,s,a,u,h,m,v,E){h===xn&&(h=rn);let R=0,F=0,$=0<h.length?h[0]:null,ee=0<m.length?m[0]:null;for(;null!==$||null!==ee;){const ue=R<h.length?h[R+1]:void 0,_e=F<m.length?m[F+1]:void 0;let ct,Ue=null;$===ee?(R+=2,F+=2,ue!==_e&&(Ue=ee,ct=_e)):null===ee||null!==$&&$<ee?(R+=2,Ue=$):(F+=2,Ue=ee,ct=_e),null!==Ue&&fS(i,s,a,u,Ue,ct,v,E),$=R<h.length?h[R]:null,ee=F<m.length?m[F]:null}}(h,E,v,v[fn],v[m+1],v[m+1]=function tE(i,s,a){if(null==a||""===a)return rn;const u=[],h=vl(a);if(Array.isArray(h))for(let m=0;m<h.length;m++)i(u,h[m],!0);else if("object"==typeof h)for(const m in h)h.hasOwnProperty(m)&&i(u,m,h[m]);else"string"==typeof h&&s(u,h);return u}(i,s,a),u,m)}}(nE,Ya,i,!0)}function Ya(i,s){for(let a=function rS(i){return function Kv(i){Gr.key=0,Gr.keyEnd=0,Gr.value=0,Gr.valueEnd=0,Gr.textEnd=i.length}(i),qv(i,gd(i,0,Gr.textEnd))}(s);a>=0;a=qv(s,a))_(i,Yv(s),!0)}function uS(i,s){return s>=i.expandoStartIndex}function dS(i,s,a,u){const h=i.data;if(null===h[a+1]){const m=h[qr()],v=uS(i,a);mS(m,u)&&null===s&&!v&&(s=!1),s=function Kw(i,s,a,u){const h=function Jd(i){const s=pn.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let m=u?s.residualClasses:s.residualStyles;if(null===h)0===(u?s.classBindings:s.styleBindings)&&(a=Sp(a=n0(null,i,s,a,u),s.attrs,u),m=null);else{const v=s.directiveStylingLast;if(-1===v||i[v]!==h)if(a=n0(h,i,s,a,u),null===m){let R=function Jw(i,s,a){const u=a?s.classBindings:s.styleBindings;if(0!==iu(u))return i[uc(u)]}(i,s,u);void 0!==R&&Array.isArray(R)&&(R=n0(null,i,s,R[1],u),R=Sp(R,s.attrs,u),function Qw(i,s,a,u){i[uc(a?s.classBindings:s.styleBindings)]=u}(i,s,u,R))}else m=function eE(i,s,a){let u;const h=s.directiveEnd;for(let m=1+s.directiveStylingLast;m<h;m++)u=Sp(u,i[m].hostAttrs,a);return Sp(u,s.attrs,a)}(i,s,u)}return void 0!==m&&(u?s.residualClasses=m:s.residualStyles=m),a}(h,m,s,u),function eS(i,s,a,u,h,m){let v=m?s.classBindings:s.styleBindings,E=uc(v),R=iu(v);i[u]=a;let $,F=!1;if(Array.isArray(a)?($=a[1],(null===$||L(a,$)>0)&&(F=!0)):$=a,h)if(0!==R){const ue=uc(i[E+1]);i[u+1]=Mp(ue,E),0!==ue&&(i[ue+1]=Xg(i[ue+1],u)),i[E+1]=function JM(i,s){return 131071&i|s<<17}(i[E+1],u)}else i[u+1]=Mp(E,0),0!==E&&(i[E+1]=Xg(i[E+1],u)),E=u;else i[u+1]=Mp(R,0),0===E?E=u:i[R+1]=Xg(i[R+1],u),R=u;F&&(i[u+1]=jg(i[u+1])),Xv(i,$,u,!0),Xv(i,$,u,!1),function tS(i,s,a,u,h){const m=h?i.residualClasses:i.residualStyles;null!=m&&"string"==typeof s&&L(m,s)>=0&&(a[u+1]=Yg(a[u+1]))}(s,$,i,u,m),v=Mp(E,R),m?s.classBindings=v:s.styleBindings=v}(h,m,s,a,v,u)}}function n0(i,s,a,u,h){let m=null;const v=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<v&&(m=s[E],u=Sp(u,m.hostAttrs,h),m!==i);)E++;return null!==i&&(a.directiveStylingLast=E),u}function Sp(i,s,a){const u=a?1:2;let h=-1;if(null!==s)for(let m=0;m<s.length;m++){const v=s[m];"number"==typeof v?h=v:h===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),_(i,v,!!a||s[++m]))}return void 0===i?null:i}function nE(i,s,a){const u=String(s);""!==u&&!u.includes(" ")&&_(i,u,a)}function fS(i,s,a,u,h,m,v,E){if(!(3&s.type))return;const R=i.data,F=R[E+1],$=function QM(i){return 1==(1&i)}(F)?pS(R,s,a,h,iu(F),v):void 0;Zg($)||(Zg(m)||function KM(i){return 2==(2&i)}(F)&&(m=pS(R,null,a,h,E,v)),function Gm(i,s,a,u,h){if(s)h?i.addClass(a,u):i.removeClass(a,u);else{let m=-1===u.indexOf("-")?void 0:ga.DashCase;null==h?i.removeStyle(a,u,m):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),m|=ga.Important),i.setStyle(a,u,h,m))}}(u,v,Vl(qr(),a),h,m))}function pS(i,s,a,u,h,m){const v=null===s;let E;for(;h>0;){const R=i[h],F=Array.isArray(R),$=F?R[1]:R,ee=null===$;let ue=a[h+1];ue===xn&&(ue=ee?rn:void 0);let _e=ee?w(ue,u):$===u?ue:void 0;if(F&&!Zg(_e)&&(_e=w(R,u)),Zg(_e)&&(E=_e,v))return E;const Ue=i[h+1];h=v?uc(Ue):iu(Ue)}if(null!==s){let R=m?s.residualClasses:s.residualStyles;null!=R&&(E=w(R,u))}return E}function Zg(i){return void 0!==i}function mS(i,s){return 0!=(i.flags&(s?8:16))}function gS(i,s=""){const a=Xe(),u=vn(),h=i+_i,m=u.firstCreatePass?kh(u,h,1,s,null):u.data[h],v=a[h]=function Fm(i,s){return i.createText(s)}(a[fn],s);Bf(u,a,v,m),sr(m,!1)}function r0(i){return Kg("",i,""),r0}function Kg(i,s,a){const u=Xe(),h=function ld(i,s,a,u){return As(i,hl(),a)?s+ke(a)+u:xn}(u,i,s,a);return h!==xn&&function cc(i,s,a){const u=Vl(s,i);!function Um(i,s,a){i.setValue(s,a)}(i[fn],u,a)}(u,qr(),h),Kg}const fc=void 0;var s0=["en",[["a","p"],["AM","PM"],fc],[["AM","PM"],fc,fc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fc,"{1} 'at' {0}",fc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function PS(i){const a=Math.floor(Math.abs(i)),u=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===u?1:5}];let _d={};function yd(i){const s=function OS(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=t_(s);if(a)return a;const u=s.split("-")[0];if(a=t_(u),a)return a;if("en"===u)return s0;throw new Ge(701,!1)}function e_(i){return yd(i)[mn.PluralCase]}function t_(i){return i in _d||(_d[i]=Qn.ng&&Qn.ng.common&&Qn.ng.common.locales&&Qn.ng.common.locales[i]),_d[i]}var mn=(()=>((mn=mn||{})[mn.LocaleId=0]="LocaleId",mn[mn.DayPeriodsFormat=1]="DayPeriodsFormat",mn[mn.DayPeriodsStandalone=2]="DayPeriodsStandalone",mn[mn.DaysFormat=3]="DaysFormat",mn[mn.DaysStandalone=4]="DaysStandalone",mn[mn.MonthsFormat=5]="MonthsFormat",mn[mn.MonthsStandalone=6]="MonthsStandalone",mn[mn.Eras=7]="Eras",mn[mn.FirstDayOfWeek=8]="FirstDayOfWeek",mn[mn.WeekendRange=9]="WeekendRange",mn[mn.DateFormat=10]="DateFormat",mn[mn.TimeFormat=11]="TimeFormat",mn[mn.DateTimeFormat=12]="DateTimeFormat",mn[mn.NumberSymbols=13]="NumberSymbols",mn[mn.NumberFormats=14]="NumberFormats",mn[mn.CurrencyCode=15]="CurrencyCode",mn[mn.CurrencySymbol=16]="CurrencySymbol",mn[mn.CurrencyName=17]="CurrencyName",mn[mn.Currencies=18]="Currencies",mn[mn.Directionality=19]="Directionality",mn[mn.PluralCase=20]="PluralCase",mn[mn.ExtraData=21]="ExtraData",mn))();const vd="en-US";let n_=vd;function u_(i,s,a,u,h){if(i=Pt(i),Array.isArray(i))for(let m=0;m<i.length;m++)u_(i[m],s,a,u,h);else{const m=vn(),v=Xe();let E=Kc(i)?i:Pt(i.provide),R=bh(i);const F=xr(),$=1048575&F.providerIndexes,ee=F.directiveStart,ue=F.providerIndexes>>20;if(Kc(i)||!i.multi){const _e=new si(R,h,Fh),Ue=h_(E,s,h?$:$+ue,ee);-1===Ue?(Yl(Xl(F,v),m,E),d_(m,i,s.length),s.push(E),F.directiveStart++,F.directiveEnd++,h&&(F.providerIndexes+=1048576),a.push(_e),v.push(_e)):(a[Ue]=_e,v[Ue]=_e)}else{const _e=h_(E,s,$+ue,ee),Ue=h_(E,s,$,$+ue),wt=Ue>=0&&a[Ue];if(h&&!wt||!h&&!(_e>=0&&a[_e])){Yl(Xl(F,v),m,E);const zt=function xb(i,s,a,u,h){const m=new si(i,a,Fh);return m.multi=[],m.index=s,m.componentProviders=0,D0(m,h,u&&!a),m}(h?vb:yb,a.length,h,u,R);!h&&wt&&(a[Ue].providerFactory=zt),d_(m,i,s.length,0),s.push(E),F.directiveStart++,F.directiveEnd++,h&&(F.providerIndexes+=1048576),a.push(zt),v.push(zt)}else d_(m,i,_e>-1?_e:Ue,D0(a[h?Ue:_e],R,!h&&u));!h&&u&&wt&&a[Ue].componentProviders++}}}function d_(i,s,a,u){const h=Kc(s),m=function jx(i){return!!i.useClass}(s);if(h||m){const R=(m?Pt(s.useClass):s).prototype.ngOnDestroy;if(R){const F=i.destroyHooks||(i.destroyHooks=[]);if(!h&&s.multi){const $=F.indexOf(a);-1===$?F.push(a,[u,R]):F[$+1].push(u,R)}else F.push(a,R)}}}function D0(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function h_(i,s,a,u){for(let h=a;h<u;h++)if(s[h]===i)return h;return-1}function yb(i,s,a,u){return f_(this.multi,[])}function vb(i,s,a,u){const h=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=Lr(a,a[Lt],this.providerFactory.index,u);m=E.slice(0,v),f_(h,m);for(let R=v;R<E.length;R++)m.push(E[R])}else m=[],f_(h,m);return m}function f_(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function I0(i,s=[]){return a=>{a.providersResolver=(u,h)=>function _b(i,s,a){const u=vn();if(u.firstCreatePass){const h=Ar(i);u_(a,u.data,u.blueprint,h,!0),u_(s,u.data,u.blueprint,h,!1)}}(u,h?h(i):i,s)}}class Md{}class R0{}function P0(i,s){return new L0(i,s??null)}class L0 extends Md{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new PM(this);const u=hr(s);this._bootstrapComponents=xl(u.bootstrap),this._r3Injector=uM(s,a,[{provide:Md,useValue:this},{provide:Ju,useValue:this.componentFactoryResolver}],en(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class p_ extends R0{constructor(s){super(),this.moduleType=s}create(s){return new L0(this.moduleType,s)}}class Sb extends Md{constructor(s,a,u){super(),this.componentFactoryResolver=new PM(this),this.instance=null;const h=new er([...s,{provide:Md,useValue:this},{provide:Ju,useValue:this.componentFactoryResolver}],a||ic(),u,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function m_(i,s,a=null){return new Sb(i,s,a).injector}let bb=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const u=qu(0,a.type),h=u.length>0?m_([u],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,h)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=wn({token:i,providedIn:"environment",factory:()=>new i(Et(Jc))}),i})();function O0(i){i.getStandaloneInjector=s=>s.get(bb).getOrCreateStandaloneInjector(i)}function Zh(i){return s=>{setTimeout(i,void 0,s)}}const Sa=class Ds extends B.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,u){let h=s,m=a||(()=>null),v=u;if(s&&"object"==typeof s){const R=s;h=R.next?.bind(R),m=R.error?.bind(R),v=R.complete?.bind(R)}this.__isAsync&&(m=Zh(m),h&&(h=Zh(h)),v&&(v=Zh(v)));const E=super.subscribe({next:h,error:m,complete:v});return s instanceof oe.w0&&s.add(E),E}};function wd(){return this._results[Symbol.iterator]()}class Kh{get changes(){return this._changes||(this._changes=new Sa)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Kh.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=wd)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const u=this;u.dirty=!1;const h=function ws(i){return i.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function ih(i,s,a){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let h=i[u],m=s[u];if(a&&(h=a(h),m=a(m)),m!==h)return!1}return!0}(u._results,h,a))&&(u._results=h,u.length=h.length,u.last=h[this.length-1],u.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ed=(()=>{class i{}return i.__NG_ELEMENT_ID__=lr,i})();const j0=Ed,Pb=class extends j0{constructor(s,a,u){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(s,a){const u=this._declarationTContainer.tView,h=Wa(this._declarationLView,u,s,16,null,u.declTNode,null,null,null,null,a||null);h[Zo]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[ms];return null!==v&&(h[ms]=v.createEmbeddedView(u)),up(u,h,s),new rd(h)}};function lr(){return xo(xr(),Xe())}function xo(i,s){return 4&i.type?new Pb(s,i,Qu(i,s)):null}let Cd=(()=>{class i{}return i.__NG_ELEMENT_ID__=x_,i})();function x_(){return Bp(xr(),Xe())}const Mo=Cd,Jh=class extends Mo{constructor(s,a,u){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=u}get element(){return Qu(this._hostTNode,this._hostLView)}get injector(){return new yo(this._hostTNode,this._hostLView)}get parentInjector(){const s=Fc(this._hostTNode,this._hostLView);if(pl(s)){const a=vs(s,this._hostLView),u=ko(s);return new yo(a[Lt].data[u+8],a)}return new yo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=M_(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-Br}createEmbeddedView(s,a,u){let h,m;"number"==typeof u?h=u:null!=u&&(h=u.index,m=u.injector);const v=s.createEmbeddedView(a||{},m);return this.insert(v,h),v}createComponent(s,a,u,h,m){const v=s&&!function Zl(i){return"function"==typeof i}(s);let E;if(v)E=a;else{const ee=a||{};E=ee.index,u=ee.injector,h=ee.projectableNodes,m=ee.environmentInjector||ee.ngModuleRef}const R=v?s:new sd($n(s)),F=u||this.parentInjector;if(!m&&null==R.ngModule){const ue=(v?F:this.parentInjector).get(Jc,null);ue&&(m=ue)}const $=R.create(F,h,void 0,m);return this.insert($.hostView,E),$}insert(s,a){const u=s._lView,h=u[Lt];if(function $d(i){return ns(i[wi])}(u)){const $=this.indexOf(s);if(-1!==$)this.detach($);else{const ee=u[wi],ue=new Jh(ee,ee[$i],ee[wi]);ue.detach(ue.indexOf(s))}}const m=this._adjustIndex(a),v=this._lContainer;!function yl(i,s,a,u){const h=Br+u,m=a.length;u>0&&(a[h-1][rr]=s),u<m-Br?(s[rr]=a[h],Pu(a,Br+u,s)):(a.push(s),s[rr]=null),s[wi]=a;const v=s[Zo];null!==v&&a!==v&&function uy(i,s){const a=i[Jo];s[Ji]!==s[wi][wi][Ji]&&(i[kl]=!0),null===a?i[Jo]=[s]:a.push(s)}(v,s);const E=s[ms];null!==E&&E.insertView(i),s[En]|=64}(h,u,v,m);const E=Hm(m,v),R=u[fn],F=kf(R,v[Aa]);return null!==F&&function km(i,s,a,u,h,m){u[ps]=h,u[$i]=s,ya(i,u,a,1,h,m)}(h,v[$i],R,u,F,E),s.attachToViewContainerRef(),Pu(kp(v),m,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=M_(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),u=hh(this._lContainer,a);u&&(Kl(kp(this._lContainer),a),Hu(u[Lt],u))}detach(s){const a=this._adjustIndex(s,-1),u=hh(this._lContainer,a);return u&&null!=Kl(kp(this._lContainer),a)?new rd(u):null}_adjustIndex(s,a=0){return s??this.length+a}};function M_(i){return i[Da]}function kp(i){return i[Da]||(i[Da]=[])}function Bp(i,s){let a;const u=s[i.index];if(ns(u))a=u;else{let h;if(8&i.type)h=Qi(u);else{const m=s[fn];h=m.createComment("");const v=_s(i,s);_a(m,kf(m,v),h,function Gc(i,s){return i.nextSibling(s)}(m,v),!1)}s[i.index]=a=IM(u,s,h,i),Ig(s,a)}return new Jh(a,i,s)}class cu{constructor(s){this.queryList=s,this.matches=null}clone(){return new cu(this.queryList)}setDirty(){this.queryList.setDirty()}}class zp{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const u=null!==s.contentQueries?s.contentQueries[0]:a.length,h=[];for(let m=0;m<u;m++){const v=a.getByIndex(m);h.push(this.queries[v.indexInDeclarationView].clone())}return new zp(h)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==gr(s,a).matches&&this.queries[a].setDirty()}}class Td{constructor(s,a,u=null){this.predicate=s,this.flags=a,this.read=u}}class S_{constructor(s=[]){this.queries=s}elementStart(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let u=0;u<this.length;u++){const h=null!==a?a.length:0,m=this.getByIndex(u).embeddedTView(s,h);m&&(m.indexInDeclarationView=u,null!==a?a.push(m):a=[m])}return null!==a?new S_(a):null}template(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Ad{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Ad(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let h=0;h<u.length;h++){const m=u[h];this.matchTNodeWithReadOption(s,a,Lb(a,m)),this.matchTNodeWithReadOption(s,a,ca(a,s,m,!1,!1))}else u===Ed?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,ca(a,s,u,!1,!1))}matchTNodeWithReadOption(s,a,u){if(null!==u){const h=this.metadata.read;if(null!==h)if(h===Ch||h===Cd||h===Ed&&4&a.type)this.addMatch(a.index,-2);else{const m=ca(a,s,h,!1,!1);null!==m&&this.addMatch(a.index,m)}else this.addMatch(a.index,u)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Lb(i,s){const a=i.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===s)return a[u+1];return null}function gc(i,s,a,u){return-1===a?function b_(i,s){return 11&i.type?Qu(i,s):4&i.type?xo(i,s):null}(s,i):-2===a?function w_(i,s,a){return a===Ch?Qu(s,i):a===Ed?xo(s,i):a===Cd?Bp(s,i):void 0}(i,s,u):Lr(i,i[Lt],a,s)}function E_(i,s,a,u){const h=s[ms].queries[u];if(null===h.matches){const m=i.data,v=a.matches,E=[];for(let R=0;R<v.length;R+=2){const F=v[R];E.push(F<0?null:gc(s,m[F],v[R+1],a.metadata.read))}h.matches=E}return h.matches}function Xs(i,s,a,u){const h=i.queries.getByIndex(a),m=h.matches;if(null!==m){const v=E_(i,s,h,a);for(let E=0;E<m.length;E+=2){const R=m[E];if(R>0)u.push(v[E/2]);else{const F=m[E+1],$=s[-R];for(let ee=Br;ee<$.length;ee++){const ue=$[ee];ue[Zo]===ue[wi]&&Xs(ue[Lt],ue,F,u)}if(null!==$[Jo]){const ee=$[Jo];for(let ue=0;ue<ee.length;ue++){const _e=ee[ue];Xs(_e[Lt],_e,F,u)}}}}}return u}function Hp(i){const s=Xe(),a=vn(),u=it();Rn(u+1);const h=gr(a,u);if(i.dirty&&function mm(i){return 4==(4&i[En])}(s)===(2==(2&h.metadata.flags))){if(null===h.matches)i.reset([]);else{const m=h.crossesNgTemplate?Xs(a,s,u,[]):E_(a,s,h,u);i.reset(m,ug),i.notifyOnChanges()}return!0}return!1}function C_(i,s,a){const u=vn();u.firstCreatePass&&(A_(u,new Td(i,s,a),-1),2==(2&s)&&(u.staticViewQueries=!0)),_c(u,Xe(),s)}function Qh(i,s,a,u){const h=vn();if(h.firstCreatePass){const m=xr();A_(h,new Td(s,a,u),m.index),function ro(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(h,i),2==(2&a)&&(h.staticContentQueries=!0)}_c(h,Xe(),a)}function Vp(){return function T_(i,s){return i[ms].queries[s].queryList}(Xe(),it())}function _c(i,s,a){const u=new Kh(4==(4&a));lc(i,s,u,u.destroy),null===s[ms]&&(s[ms]=new zp),s[ms].queries.push(new cu(u))}function A_(i,s,a){null===i.queries&&(i.queries=new S_),i.queries.track(new Ad(s,a))}function gr(i,s){return i.queries.getByIndex(s)}function D_(i){return!!hr(i)}function Qp(...i){}const oo=new Ti("Application Initializer");let vc=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Qp,this.reject=Qp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,h)=>{this.resolve=u,this.reject=h})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(Gg(m))a.push(m);else if(Pv(m)){const v=new Promise((E,R)=>{m.subscribe({complete:E,error:R})});a.push(v)}}Promise.all(a).then(()=>{u()}).catch(h=>{this.reject(h)}),0===a.length&&u(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Et(oo,8))},i.\u0275prov=wn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const du=new Ti("AppId",{providedIn:"root",factory:function N_(){return`${Ai()}${Ai()}${Ai()}`}});function Ai(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ld=new Ti("Platform Initializer"),F_=new Ti("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let ix=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=wn({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const em=new Ti("LocaleId",{providedIn:"root",factory:()=>gi(em,Qe.Optional|Qe.SkipSelf)||function xc(){return typeof $localize<"u"&&$localize.locale||vd}()}),rx=new Ti("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ti{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let $b=(()=>{class i{compileModuleSync(a){return new p_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const u=this.compileModuleSync(a),m=xl(hr(a).declarations).reduce((v,E)=>{const R=$n(E);return R&&v.push(new sd(R)),v},[]);return new ti(u,m)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=wn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const hu=(()=>Promise.resolve(0))();function nm(i){typeof Zone>"u"?hu.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class wo{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Sa(!1),this.onMicrotaskEmpty=new Sa(!1),this.onStable=new Sa(!1),this.onError=new Sa(!1),typeof Zone>"u")throw new Ge(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!u&&a,h.shouldCoalesceRunChangeDetection=u,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function k_(){let i=Qn.requestAnimationFrame,s=Qn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function B_(i){const s=()=>{!function qb(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Qn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,z_(i),i.isCheckStableRunning=!0,ds(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),z_(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,h,m,v,E)=>{try{return H_(i),a.invokeTask(h,m,v,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||i.shouldCoalesceRunChangeDetection)&&s(),Dl(i)}},onInvoke:(a,u,h,m,v,E,R)=>{try{return H_(i),a.invoke(h,m,v,E,R)}finally{i.shouldCoalesceRunChangeDetection&&s(),Dl(i)}},onHasTask:(a,u,h,m)=>{a.hasTask(h,m),u===h&&("microTask"==m.change?(i._hasPendingMicrotasks=m.microTask,z_(i),ds(i)):"macroTask"==m.change&&(i.hasPendingMacrotasks=m.macroTask))},onHandleError:(a,u,h,m)=>(a.handleError(h,m),i.runOutsideAngular(()=>i.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wo.isInAngularZone())throw new Ge(909,!1)}static assertNotInAngularZone(){if(wo.isInAngularZone())throw new Ge(909,!1)}run(s,a,u){return this._inner.run(s,a,u)}runTask(s,a,u,h){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+h,s,lf,Qp,Qp);try{return m.runTask(v,a,u)}finally{m.cancelTask(v)}}runGuarded(s,a,u){return this._inner.runGuarded(s,a,u)}runOutsideAngular(s){return this._outer.run(s)}}const lf={};function ds(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function z_(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function H_(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Dl(i){i._nesting--,ds(i)}class V_{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Sa,this.onMicrotaskEmpty=new Sa,this.onStable=new Sa,this.onError=new Sa}run(s,a,u){return s.apply(a,u)}runGuarded(s,a,u){return s.apply(a,u)}runOutsideAngular(s){return s()}runTask(s,a,u,h){return s.apply(a,u)}}const im=new Ti(""),ax=new Ti("");let rm,Zb=(()=>{class i{constructor(a,u,h){this._ngZone=a,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,rm||(function cf(i){rm=i}(h),h.addToWindow(u)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wo.assertNotInAngularZone(),nm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())nm(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,h){let m=-1;u&&u>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:m,updateCb:h})}whenStable(a,u,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,u,h){return[]}}return i.\u0275fac=function(a){return new(a||i)(Et(wo),Et(lx),Et(ax))},i.\u0275prov=wn({token:i,factory:i.\u0275fac}),i})(),lx=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return rm?.findTestabilityInTree(this,a,u)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=wn({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Qa=!1;let Bi=null;const om=new Ti("PlatformDestroyListeners"),cx=new Ti("appBootstrapListener");class Jb{constructor(s,a){this.name=s,this.token=a}}function Qb(i){const{rootComponent:s,appProviders:a,platformProviders:u}=i;Qa&&void 0!==s&&function eM(i){if(function ky(i){if(!$n(i))throw new Ge(906,`The ${yt(i)} is not an Angular component, make sure it has the \`@Component\` decorator.`)}(i),!$n(i).standalone)throw new Ge(907,`The ${yt(i)} component is not marked as standalone, but Angular expects to have a standalone component here. Please make sure the ${yt(i)} component has the \`standalone: true\` flag in the decorator.`)}(s);const h=function G_(i=[]){if(Bi)return Bi;const s=function Ys(i=[],s){return Ga.create({name:s,providers:[{provide:lg,useValue:"platform"},{provide:om,useValue:new Set([()=>Bi=null])},...i]})}(i);return Bi=s,function fx(i){const s=i.get(Ld,null);s&&s.forEach(a=>a())}(s),s}(u),m=function gx(i,s){let a;return a="noop"===i?new V_:("zone.js"===i?void 0:i)||new wo(s),a}("zone.js",function W_(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}());return m.run(()=>{const E=m_([{provide:wo,useValue:m},...a||[]],h,"Environment Injector"),R=E.get(Ph,null);if(Qa&&!R)throw new Ge(402,"No `ErrorHandler` found in the Dependency Injection tree.");let F;m.runOutsideAngular(()=>{F=m.onError.subscribe({next:ue=>{R.handleError(ue)}})});const $=()=>E.destroy(),ee=h.get(om);return ee.add($),E.onDestroy(()=>{F.unsubscribe(),ee.delete($)}),function am(i,s,a){try{const u=a();return Gg(u)?u.catch(h=>{throw s.runOutsideAngular(()=>i.handleError(h)),h}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(R,m,()=>{const ue=E.get(vc);return ue.runInitializers(),ue.donePromise.then(()=>{!function i_(i){ui(i,"Expected localeId to be defined"),"string"==typeof i&&(n_=i.toLowerCase().replace(/_/g,"-"))}(E.get(em,vd)||vd);const Ue=E.get(uf);return void 0!==s&&Ue.bootstrap(s),Ue})})})}let uf=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,u,h){this._zone=a,this._injector=u,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new Ce.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new Ce.y(E=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{wo.assertNotInAngularZone(),nm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const F=this._zone.onUnstable.subscribe(()=>{wo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{R.unsubscribe(),F.unsubscribe()}});this.isStable=function Yt(...i){const s=(0,Mt.yG)(i),a=(0,Mt._6)(i,1/0),u=i;return u.length?1===u.length?(0,je.Xf)(u[0]):(0,X.J)(a)((0,ln.D)(u,s)):Ht.E}(m,v.pipe(function xt(i={}){const{connector:s=(()=>new B.x),resetOnError:a=!0,resetOnComplete:u=!0,resetOnRefCountZero:h=!0}=i;return m=>{let v,E,R,F=0,$=!1,ee=!1;const ue=()=>{E?.unsubscribe(),E=void 0},_e=()=>{ue(),v=R=void 0,$=ee=!1},Ue=()=>{const ct=v;_e(),ct?.unsubscribe()};return(0,Je.e)((ct,wt)=>{F++,!ee&&!$&&ue();const zt=R=R??s();wt.add(()=>{F--,0===F&&!ee&&!$&&(E=zn(Ue,h))}),zt.subscribe(wt),!v&&F>0&&(v=new ot.Hp({next:dn=>zt.next(dn),error:dn=>{ee=!0,ue(),E=zn(_e,a,dn),zt.error(dn)},complete:()=>{$=!0,ue(),E=zn(_e,u),zt.complete()}}),(0,je.Xf)(ct).subscribe(v))})(m)}}()))}bootstrap(a,u){Qa&&this.warnIfDestroyed();const h=a instanceof tp;if(!this._injector.get(vc).done){const _e="Cannot bootstrap as there are still asynchronous initializers running."+(!h&&ho(a)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new Ge(405,Qa&&_e)}let v;v=h?a:this._injector.get(Ju).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const E=function dx(i){return i.isBoundToModule}(v)?void 0:this._injector.get(Md),F=v.create(Ga.NULL,[],u||v.selector,E),$=F.location.nativeElement,ee=F.injector.get(im,null);return ee?.registerApplication($),F.onDestroy(()=>{this.detachView(F.hostView),cm(this.components,F),ee?.unregisterApplication($)}),this._loadComponent(F),F}tick(){if(Qa&&this.warnIfDestroyed(),this._runningTick)throw new Ge(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){Qa&&this.warnIfDestroyed();const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){Qa&&this.warnIfDestroyed();const u=a;cm(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const u=this._injector.get(cx,[]);u.push(...this._bootstrapListeners),u.forEach(h=>h(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return Qa&&this.warnIfDestroyed(),this._destroyListeners.push(a),()=>cm(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Ge(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){Qa&&this._destroyed&&console.warn(ht(406,"This instance of the `ApplicationRef` has already been destroyed."))}}return i.\u0275fac=function(a){return new(a||i)(Et(wo),Et(Jc),Et(Ph))},i.\u0275prov=wn({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function cm(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let DE=(()=>{class i{}return i.__NG_ELEMENT_ID__=IE,i})();function IE(i){return function RE(i,s,a){if(Fs(i)&&!a){const u=vr(i.index,s);return new rd(u,u)}return 47&i.type?new rd(s[Ji],s):null}(xr(),Xe(),16==(16&i))}class tl{constructor(){}supports(s){return _p(s)}create(s){return new Ud(s)}}const fu=(i,s)=>s;class Ud{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||fu}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,u=this._removalsHead,h=0,m=null;for(;a||u;){const v=!u||a&&a.currentIndex<Mx(u,h,m)?a:u,E=Mx(v,h,m),R=v.currentIndex;if(v===u)h--,u=u._nextRemoved;else if(a=a._next,null==v.previousIndex)h++;else{m||(m=[]);const F=E-h,$=R-h;if(F!=$){for(let ue=0;ue<F;ue++){const _e=ue<m.length?m[ue]:m[ue]=0,Ue=_e+ue;$<=Ue&&Ue<F&&(m[ue]=_e+1)}m[v.previousIndex]=$-F}}E!==R&&s(v,E,R)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!_p(s))throw new Ge(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let h,m,v,a=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)m=s[E],v=this._trackByFn(E,m),null!==a&&Object.is(a.trackById,v)?(u&&(a=this._verifyReinsertion(a,m,v,E)),Object.is(a.item,m)||this._addIdentityChange(a,m)):(a=this._mismatch(a,m,v,E),u=!0),a=a._next}else h=0,function zM(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Symbol.iterator]();let u;for(;!(u=a.next()).done;)s(u.value)}}(s,E=>{v=this._trackByFn(h,E),null!==a&&Object.is(a.trackById,v)?(u&&(a=this._verifyReinsertion(a,E,v,h)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,v,h),u=!0),a=a._next,h++}),this.length=h;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,u,h){let m;return null===s?m=this._itTail:(m=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,m,h)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,h))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,m,h)):s=this._addAfter(new kd(a,u),m,h),s}_verifyReinsertion(s,a,u,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==m?s=this._reinsertAfter(m,s._prev,h):s.currentIndex!=h&&(s.currentIndex=h,this._addToMoves(s,h)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const h=s._prevRemoved,m=s._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(s,a,u),this._addToMoves(s,u),s}_moveAfter(s,a,u){return this._unlink(s),this._insertAfter(s,a,u),this._addToMoves(s,u),s}_addAfter(s,a,u){return this._insertAfter(s,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,u){const h=null===a?this._itHead:a._next;return s._next=h,s._prev=a,null===h?this._itTail=s:h._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new dm),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,u=s._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new dm),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class kd{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class xx{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const a=s._prevDup,u=s._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class dm{constructor(){this.map=new Map}put(s){const a=s.trackById;let u=this.map.get(a);u||(u=new xx,this.map.set(a,u)),u.add(s)}get(s,a){const h=this.map.get(s);return h?h.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Mx(i,s,a){const u=i.previousIndex;if(null===u)return u;let h=0;return a&&u<a.length&&(h=a[u]),u+s+h}class Sx{constructor(){}supports(s){return s instanceof Map||Fg(s)}create(){return new nl}}class nl{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Fg(s)))throw new Ge(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,h)=>{if(a&&a.key===h)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const m=this._getOrCreateRecordForKey(h,u);a=this._insertBeforeOrAppend(a,m)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const u=s._prev;return a._next=s,a._prev=u,s._prev=a,u&&(u._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const h=this._records.get(s);this._maybeAddToChanges(h,a);const m=h._prev,v=h._next;return m&&(m._next=v),v&&(v._prev=m),h._next=null,h._prev=null,h}const u=new j_(s);return this._records.set(s,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(u=>a(s[u],u))}}class j_{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function bx(){return new X_([new tl])}let X_=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(null!=u){const h=u.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||bx()),deps:[[i,new Jl,new Kn]]}}find(a){const u=this.factories.find(h=>h.supports(a));if(null!=u)return u;throw new Ge(901,!1)}}return i.\u0275prov=wn({token:i,providedIn:"root",factory:bx}),i})();function Y_(){return new hm([new Sx])}let hm=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(u){const h=u.factories.slice();a=a.concat(h)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||Y_()),deps:[[i,new Jl,new Kn]]}}find(a){const u=this.factories.find(h=>h.supports(a));if(u)return u;throw new Ge(901,!1)}}return i.\u0275prov=wn({token:i,providedIn:"root",factory:Y_}),i})();function cr(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},1481:(In,mt,re)=>{re.d(mt,{Cg:()=>Wn,Dx:()=>Ci});var B=re(6895),oe=re(8256);class Ce extends B.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class X extends Ce{static makeCurrent(){(0,B.HT)(new X)}onAndCancel(le,te,fe){return le.addEventListener(te,fe,!1),()=>{le.removeEventListener(te,fe,!1)}}dispatchEvent(le,te){le.dispatchEvent(te)}remove(le){le.parentNode&&le.parentNode.removeChild(le)}createElement(le,te){return(te=te||this.getDefaultDocument()).createElement(le)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(le){return le.nodeType===Node.ELEMENT_NODE}isShadowRoot(le){return le instanceof DocumentFragment}getGlobalEventTarget(le,te){return"window"===te?window:"document"===te?le:"body"===te?le.body:null}getBaseHref(le){const te=function Ht(){return je=je||document.querySelector("base"),je?je.getAttribute("href"):null}();return null==te?null:function ln(we){Mt=Mt||document.createElement("a"),Mt.setAttribute("href",we);const le=Mt.pathname;return"/"===le.charAt(0)?le:`/${le}`}(te)}resetBaseElement(){je=null}getUserAgent(){return window.navigator.userAgent}getCookie(le){return(0,B.Mx)(document.cookie,le)}}let Mt,je=null,zn=(()=>{class we{build(){return new XMLHttpRequest}}return we.\u0275fac=function(te){return new(te||we)},we.\u0275prov=oe.Yz7({token:we,factory:we.\u0275fac}),we})();const lt=new oe.OlP("EventManagerPlugins");let un=(()=>{class we{constructor(te,fe){this._zone=fe,this._eventNameToPlugin=new Map,te.forEach(Fe=>{Fe.manager=this}),this._plugins=te.slice().reverse()}addEventListener(te,fe,Fe){return this._findPluginFor(fe).addEventListener(te,fe,Fe)}addGlobalEventListener(te,fe,Fe){return this._findPluginFor(fe).addGlobalEventListener(te,fe,Fe)}getZone(){return this._zone}_findPluginFor(te){const fe=this._eventNameToPlugin.get(te);if(fe)return fe;const Fe=this._plugins;for(let St=0;St<Fe.length;St++){const Vt=Fe[St];if(Vt.supports(te))return this._eventNameToPlugin.set(te,Vt),Vt}throw new Error(`No event manager plugin found for event ${te}`)}}return we.\u0275fac=function(te){return new(te||we)(oe.LFG(lt),oe.LFG(oe.R0b))},we.\u0275prov=oe.Yz7({token:we,factory:we.\u0275fac}),we})();class en{constructor(le){this._doc=le}addGlobalEventListener(le,te,fe){const Fe=(0,B.q)().getGlobalEventTarget(this._doc,le);if(!Fe)throw new Error(`Unsupported event target ${Fe} for event ${te}`);return this.addEventListener(Fe,te,fe)}}let kn=(()=>{class we{constructor(){this.usageCount=new Map}addStyles(te){for(const fe of te)1===this.changeUsageCount(fe,1)&&this.onStyleAdded(fe)}removeStyles(te){for(const fe of te)0===this.changeUsageCount(fe,-1)&&this.onStyleRemoved(fe)}onStyleRemoved(te){}onStyleAdded(te){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(te,fe){const Fe=this.usageCount;let St=Fe.get(te)??0;return St+=fe,St>0?Fe.set(te,St):Fe.delete(te),St}ngOnDestroy(){for(const te of this.getAllStyles())this.onStyleRemoved(te);this.usageCount.clear()}}return we.\u0275fac=function(te){return new(te||we)},we.\u0275prov=oe.Yz7({token:we,factory:we.\u0275fac}),we})(),On=(()=>{class we extends kn{constructor(te){super(),this.doc=te,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(te){for(const fe of this.hostNodes)this.addStyleToHost(fe,te)}onStyleRemoved(te){const fe=this.styleRef;fe.get(te)?.forEach(St=>St.remove()),fe.delete(te)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(te){this.hostNodes.add(te);for(const fe of this.getAllStyles())this.addStyleToHost(te,fe)}removeHost(te){this.hostNodes.delete(te)}addStyleToHost(te,fe){const Fe=this.doc.createElement("style");Fe.textContent=fe,te.appendChild(Fe);const St=this.styleRef.get(fe);St?St.push(Fe):this.styleRef.set(fe,[Fe])}resetHostNodes(){const te=this.hostNodes;te.clear(),te.add(this.doc.head)}}return we.\u0275fac=function(te){return new(te||we)(oe.LFG(B.K0))},we.\u0275prov=oe.Yz7({token:we,factory:we.\u0275fac}),we})();const ci={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Pt=/%COMP%/g,ht=new oe.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Ut(we,le){return le.flat(100).map(te=>te.replace(Pt,we))}function Gn(we){return le=>{if("__ngUnwrap__"===le)return we;!1===we(le)&&(le.preventDefault(),le.returnValue=!1)}}let jt=(()=>{class we{constructor(te,fe,Fe,St){this.eventManager=te,this.sharedStylesHost=fe,this.appId=Fe,this.removeStylesOnCompDestory=St,this.rendererByCompId=new Map,this.defaultRenderer=new pi(te)}createRenderer(te,fe){if(!te||!fe)return this.defaultRenderer;const Fe=this.getOrCreateRenderer(te,fe);return Fe instanceof ve?Fe.applyToHost(te):Fe instanceof Vi&&Fe.applyStyles(),Fe}getOrCreateRenderer(te,fe){const Fe=this.rendererByCompId;let St=Fe.get(fe.id);if(!St){const Vt=this.eventManager,rn=this.sharedStylesHost,ni=this.removeStylesOnCompDestory;switch(fe.encapsulation){case oe.ifc.Emulated:St=new ve(Vt,rn,fe,this.appId,ni);break;case oe.ifc.ShadowDom:return new wa(Vt,rn,te,fe);default:St=new Vi(Vt,rn,fe,ni)}St.onDestroy=()=>Fe.delete(fe.id),Fe.set(fe.id,St)}return St}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return we.\u0275fac=function(te){return new(te||we)(oe.LFG(un),oe.LFG(On),oe.LFG(oe.AFp),oe.LFG(ht))},we.\u0275prov=oe.Yz7({token:we,factory:we.\u0275fac}),we})();class pi{constructor(le){this.eventManager=le,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(le,te){return te?document.createElementNS(ci[te]||te,le):document.createElement(le)}createComment(le){return document.createComment(le)}createText(le){return document.createTextNode(le)}appendChild(le,te){(Qr(le)?le.content:le).appendChild(te)}insertBefore(le,te,fe){le&&(Qr(le)?le.content:le).insertBefore(te,fe)}removeChild(le,te){le&&le.removeChild(te)}selectRootElement(le,te){let fe="string"==typeof le?document.querySelector(le):le;if(!fe)throw new Error(`The selector "${le}" did not match any elements`);return te||(fe.textContent=""),fe}parentNode(le){return le.parentNode}nextSibling(le){return le.nextSibling}setAttribute(le,te,fe,Fe){if(Fe){te=Fe+":"+te;const St=ci[Fe];St?le.setAttributeNS(St,te,fe):le.setAttribute(te,fe)}else le.setAttribute(te,fe)}removeAttribute(le,te,fe){if(fe){const Fe=ci[fe];Fe?le.removeAttributeNS(Fe,te):le.removeAttribute(`${fe}:${te}`)}else le.removeAttribute(te)}addClass(le,te){le.classList.add(te)}removeClass(le,te){le.classList.remove(te)}setStyle(le,te,fe,Fe){Fe&(oe.JOm.DashCase|oe.JOm.Important)?le.style.setProperty(te,fe,Fe&oe.JOm.Important?"important":""):le.style[te]=fe}removeStyle(le,te,fe){fe&oe.JOm.DashCase?le.style.removeProperty(te):le.style[te]=""}setProperty(le,te,fe){le[te]=fe}setValue(le,te){le.nodeValue=te}listen(le,te,fe){return"string"==typeof le?this.eventManager.addGlobalEventListener(le,te,Gn(fe)):this.eventManager.addEventListener(le,te,Gn(fe))}}function Qr(we){return"TEMPLATE"===we.tagName&&void 0!==we.content}class wa extends pi{constructor(le,te,fe,Fe){super(le),this.sharedStylesHost=te,this.hostEl=fe,this.shadowRoot=fe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const St=Ut(Fe.id,Fe.styles);for(const Vt of St){const rn=document.createElement("style");rn.textContent=Vt,this.shadowRoot.appendChild(rn)}}nodeOrShadowRoot(le){return le===this.hostEl?this.shadowRoot:le}appendChild(le,te){return super.appendChild(this.nodeOrShadowRoot(le),te)}insertBefore(le,te,fe){return super.insertBefore(this.nodeOrShadowRoot(le),te,fe)}removeChild(le,te){return super.removeChild(this.nodeOrShadowRoot(le),te)}parentNode(le){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(le)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Vi extends pi{constructor(le,te,fe,Fe,St=fe.id){super(le),this.sharedStylesHost=te,this.removeStylesOnCompDestory=Fe,this.rendererUsageCount=0,this.styles=Ut(St,fe.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class ve extends Vi{constructor(le,te,fe,Fe,St){const Vt=Fe+"-"+fe.id;super(le,te,fe,St,Vt),this.contentAttr=function ke(we){return"_ngcontent-%COMP%".replace(Pt,we)}(Vt),this.hostAttr=function yt(we){return"_nghost-%COMP%".replace(Pt,we)}(Vt)}applyToHost(le){this.applyStyles(),this.setAttribute(le,this.hostAttr,"")}createElement(le,te){const fe=super.createElement(le,te);return super.setAttribute(fe,this.contentAttr,""),fe}}let Ae=(()=>{class we extends en{constructor(te){super(te)}supports(te){return!0}addEventListener(te,fe,Fe){return te.addEventListener(fe,Fe,!1),()=>this.removeEventListener(te,fe,Fe)}removeEventListener(te,fe,Fe){return te.removeEventListener(fe,Fe)}}return we.\u0275fac=function(te){return new(te||we)(oe.LFG(B.K0))},we.\u0275prov=oe.Yz7({token:we,factory:we.\u0275fac}),we})();const Pe=["alt","control","meta","shift"],Le={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nt={alt:we=>we.altKey,control:we=>we.ctrlKey,meta:we=>we.metaKey,shift:we=>we.shiftKey};let Ke=(()=>{class we extends en{constructor(te){super(te)}supports(te){return null!=we.parseEventName(te)}addEventListener(te,fe,Fe){const St=we.parseEventName(fe),Vt=we.eventCallback(St.fullKey,Fe,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,B.q)().onAndCancel(te,St.domEventName,Vt))}static parseEventName(te){const fe=te.toLowerCase().split("."),Fe=fe.shift();if(0===fe.length||"keydown"!==Fe&&"keyup"!==Fe)return null;const St=we._normalizeKey(fe.pop());let Vt="",rn=fe.indexOf("code");if(rn>-1&&(fe.splice(rn,1),Vt="code."),Pe.forEach(Ni=>{const fs=fe.indexOf(Ni);fs>-1&&(fe.splice(fs,1),Vt+=Ni+".")}),Vt+=St,0!=fe.length||0===St.length)return null;const ni={};return ni.domEventName=Fe,ni.fullKey=Vt,ni}static matchEventFullKeyCode(te,fe){let Fe=Le[te.key]||te.key,St="";return fe.indexOf("code.")>-1&&(Fe=te.code,St="code."),!(null==Fe||!Fe)&&(Fe=Fe.toLowerCase()," "===Fe?Fe="space":"."===Fe&&(Fe="dot"),Pe.forEach(Vt=>{Vt!==Fe&&(0,nt[Vt])(te)&&(St+=Vt+".")}),St+=Fe,St===fe)}static eventCallback(te,fe,Fe){return St=>{we.matchEventFullKeyCode(St,te)&&Fe.runGuarded(()=>fe(St))}}static _normalizeKey(te){return"esc"===te?"escape":te}}return we.\u0275fac=function(te){return new(te||we)(oe.LFG(B.K0))},we.\u0275prov=oe.Yz7({token:we,factory:we.\u0275fac}),we})();function Wn(we,le){return(0,oe.iPO)({rootComponent:we,...bt(le)})}function bt(we){return{appProviders:[...Ao,...we?.providers??[]],platformProviders:Gi}}const Gi=[{provide:oe.Lbi,useValue:B.bD},{provide:oe.g9A,useValue:function Li(){X.makeCurrent()},multi:!0},{provide:B.K0,useFactory:function wn(){return(0,oe.RDi)(document),document},deps:[]}],Ao=[{provide:oe.zSh,useValue:"root"},{provide:oe.qLn,useFactory:function Rs(){return new oe.qLn},deps:[]},{provide:lt,useClass:Ae,multi:!0,deps:[B.K0,oe.R0b,oe.Lbi]},{provide:lt,useClass:Ke,multi:!0,deps:[B.K0]},{provide:jt,useClass:jt,deps:[un,On,oe.AFp,ht]},{provide:oe.FYo,useExisting:jt},{provide:kn,useExisting:On},{provide:On,useClass:On,deps:[B.K0]},{provide:un,useClass:un,deps:[lt,oe.R0b]},{provide:B.JF,useClass:zn,deps:[]},[]];let Ci=(()=>{class we{constructor(te){this._doc=te}getTitle(){return this._doc.title}setTitle(te){this._doc.title=te||""}}return we.\u0275fac=function(te){return new(te||we)(oe.LFG(B.K0))},we.\u0275prov=oe.Yz7({token:we,factory:function(te){let fe=null;return fe=te?new te:function Xo(){return new Ci((0,oe.LFG)(B.K0))}(),fe},providedIn:"root"}),we})();typeof window<"u"&&window},6773:(In,mt,re)=>{re.d(mt,{gz:()=>dl,m2:()=>ts,F0:()=>Pr,rH:()=>la,Od:()=>yn,Bz:()=>Zl,lC:()=>xu,bU:()=>Au});var B=re(8256),oe=re(2076),Ce=re(9646),X=re(7579);class je extends X.x{constructor(b){super(),this._value=b}get value(){return this.getValue()}_subscribe(b){const _=super._subscribe(b);return!_.closed&&b.next(this._value),_}getValue(){const{hasError:b,thrownError:_,_value:w}=this;if(b)throw _;return this._throwIfClosed(),w}next(b){super.next(this._value=b)}}const Mt=(0,re(3888).d)(x=>function(){x(this),this.name="EmptyError",this.message="no elements in sequence"});var ln=re(9751),Yt=re(4742),ot=re(4671),Je=re(3268),xt=re(7669),zn=re(1810),lt=re(5403),un=re(9672);function en(...x){const b=(0,xt.yG)(x),_=(0,xt.jO)(x),{args:w,keys:L}=(0,Yt.D)(x);if(0===w.length)return(0,oe.D)([],b);const z=new ln.y(function kn(x,b,_=ot.y){return w=>{On(b,()=>{const{length:L}=x,z=new Array(L);let j=L,de=L;for(let be=0;be<L;be++)On(b,()=>{const gt=(0,oe.D)(x[be],b);let ft=!1;gt.subscribe((0,lt.x)(w,Bn=>{z[be]=Bn,ft||(ft=!0,de--),de||w.next(_(z.slice()))},()=>{--j||w.complete()}))},w)},w)}}(w,b,L?j=>(0,zn.n)(L,j):ot.y));return _?z.pipe((0,Je.Z)(_)):z}function On(x,b,_){x?(0,un.f)(_,x,b):b()}var ci=re(8189);function It(...x){return function Pt(){return(0,ci.J)(1)}()((0,oe.D)(x,(0,xt.yG)(x)))}var dt=re(8421);function Kt(x){return new ln.y(b=>{(0,dt.Xf)(x()).subscribe(b)})}var gn=re(9635),Ge=re(576);function ht(x,b){const _=(0,Ge.m)(x)?x:()=>x,w=L=>L.error(_());return new ln.y(b?L=>b.schedule(w,0,L):w)}var ke=re(515),yt=re(727),Ut=re(4482);function Gn(){return(0,Ut.e)((x,b)=>{let _=null;x._refCount++;const w=(0,lt.x)(b,void 0,void 0,void 0,()=>{if(!x||x._refCount<=0||0<--x._refCount)return void(_=null);const L=x._connection,z=_;_=null,L&&(!z||L===z)&&L.unsubscribe(),b.unsubscribe()});x.subscribe(w),w.closed||(_=x.connect())})}class jt extends ln.y{constructor(b,_){super(),this.source=b,this.subjectFactory=_,this._subject=null,this._refCount=0,this._connection=null,(0,Ut.A)(b)&&(this.lift=b.lift)}_subscribe(b){return this.getSubject().subscribe(b)}getSubject(){const b=this._subject;return(!b||b.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:b}=this;this._subject=this._connection=null,b?.unsubscribe()}connect(){let b=this._connection;if(!b){b=this._connection=new yt.w0;const _=this.getSubject();b.add(this.source.subscribe((0,lt.x)(_,void 0,()=>{this._teardown(),_.complete()},w=>{this._teardown(),_.error(w)},()=>this._teardown()))),b.closed&&(this._connection=null,b=yt.w0.EMPTY)}return b}refCount(){return Gn()(this)}}var pi=re(6895),hn=re(4004);function yr(x,b){return(0,Ut.e)((_,w)=>{let L=null,z=0,j=!1;const de=()=>j&&!L&&w.complete();_.subscribe((0,lt.x)(w,be=>{L?.unsubscribe();let gt=0;const ft=z++;(0,dt.Xf)(x(be,ft)).subscribe(L=(0,lt.x)(w,Bn=>w.next(b?b(be,Bn,ft,gt++):Bn),()=>{L=null,de()}))},()=>{j=!0,de()}))})}function Qr(x){return x<=0?()=>ke.E:(0,Ut.e)((b,_)=>{let w=0;b.subscribe((0,lt.x)(_,L=>{++w<=x&&(_.next(L),x<=w&&_.complete())}))})}var Vi=re(9300),ve=re(5577);function Ae(x){return(0,Ut.e)((b,_)=>{let w=!1;b.subscribe((0,lt.x)(_,L=>{w=!0,_.next(L)},()=>{w||_.next(x),_.complete()}))})}function Pe(x=Le){return(0,Ut.e)((b,_)=>{let w=!1;b.subscribe((0,lt.x)(_,L=>{w=!0,_.next(L)},()=>w?_.complete():_.error(x())))})}function Le(){return new Mt}function nt(x,b){const _=arguments.length>=2;return w=>w.pipe(x?(0,Vi.h)((L,z)=>x(L,z,w)):ot.y,Qr(1),_?Ae(b):Pe(()=>new Mt))}var Ke=re(4351);function At(x,b,_){const w=(0,Ge.m)(x)||b||_?{next:x,error:b,complete:_}:x;return w?(0,Ut.e)((L,z)=>{var j;null===(j=w.subscribe)||void 0===j||j.call(w);let de=!0;L.subscribe((0,lt.x)(z,be=>{var gt;null===(gt=w.next)||void 0===gt||gt.call(w,be),z.next(be)},()=>{var be;de=!1,null===(be=w.complete)||void 0===be||be.call(w),z.complete()},be=>{var gt;de=!1,null===(gt=w.error)||void 0===gt||gt.call(w,be),z.error(be)},()=>{var be,gt;de&&(null===(be=w.unsubscribe)||void 0===be||be.call(w)),null===(gt=w.finalize)||void 0===gt||gt.call(w)}))}):ot.y}function Wn(x){return(0,Ut.e)((b,_)=>{let z,w=null,L=!1;w=b.subscribe((0,lt.x)(_,void 0,void 0,j=>{z=(0,dt.Xf)(x(j,Wn(x)(b))),w?(w.unsubscribe(),w=null,z.subscribe(_)):L=!0})),L&&(w.unsubscribe(),w=null,z.subscribe(_))})}function bt(x,b){return(0,Ut.e)(function ui(x,b,_,w,L){return(z,j)=>{let de=_,be=b,gt=0;z.subscribe((0,lt.x)(j,ft=>{const Bn=gt++;be=de?x(be,ft,Bn):(de=!0,ft),w&&j.next(be)},L&&(()=>{de&&j.next(be),j.complete()})))}}(x,b,arguments.length>=2,!0))}function mi(x){return x<=0?()=>ke.E:(0,Ut.e)((b,_)=>{let w=[];b.subscribe((0,lt.x)(_,L=>{w.push(L),x<w.length&&w.shift()},()=>{for(const L of w)_.next(L);_.complete()},void 0,()=>{w=null}))})}function Li(x,b){const _=arguments.length>=2;return w=>w.pipe(x?(0,Vi.h)((L,z)=>x(L,z,w)):ot.y,mi(1),_?Ae(b):Pe(()=>new Mt))}function Gi(x){return(0,Ut.e)((b,_)=>{try{b.subscribe(_)}finally{_.add(x)}})}var Ki=re(1481);const Dt="primary",Mi=Symbol("RouteTitle");class Ao{constructor(b){this.params=b||{}}has(b){return Object.prototype.hasOwnProperty.call(this.params,b)}get(b){if(this.has(b)){const _=this.params[b];return Array.isArray(_)?_[0]:_}return null}getAll(b){if(this.has(b)){const _=this.params[b];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function hs(x){return new Ao(x)}function jo(x,b,_){const w=_.path.split("/");if(w.length>x.length||"full"===_.pathMatch&&(b.hasChildren()||w.length<x.length))return null;const L={};for(let z=0;z<w.length;z++){const j=w[z],de=x[z];if(j.startsWith(":"))L[j.substring(1)]=de;else if(j!==de.path)return null}return{consumed:x.slice(0,w.length),posParams:L}}function Oi(x,b){const _=x?Object.keys(x):void 0,w=b?Object.keys(b):void 0;if(!_||!w||_.length!=w.length)return!1;let L;for(let z=0;z<_.length;z++)if(L=_[z],!Xo(x[L],b[L]))return!1;return!0}function Xo(x,b){if(Array.isArray(x)&&Array.isArray(b)){if(x.length!==b.length)return!1;const _=[...x].sort(),w=[...b].sort();return _.every((L,z)=>w[z]===L)}return x===b}function Ci(x){return Array.prototype.concat.apply([],x)}function Qe(x){return x.length>0?x[x.length-1]:null}function Si(x,b){for(const _ in x)x.hasOwnProperty(_)&&b(x[_],_)}function bi(x){return(0,B.CqO)(x)?x:(0,B.QGY)(x)?(0,oe.D)(Promise.resolve(x)):(0,Ce.of)(x)}const ur=!1,lo={exact:function Ll(x,b,_){if(!et(x.segments,b.segments)||!co(x.segments,b.segments,_)||x.numberOfChildren!==b.numberOfChildren)return!1;for(const w in b.children)if(!x.children[w]||!Ll(x.children[w],b.children[w],_))return!1;return!0},subset:es},Qn={exact:function Wi(x,b){return Oi(x,b)},subset:function Zn(x,b){return Object.keys(b).length<=Object.keys(x).length&&Object.keys(b).every(_=>Xo(x[_],b[_]))},ignored:()=>!0};function bc(x,b,_){return lo[_.paths](x.root,b.root,_.matrixParams)&&Qn[_.queryParams](x.queryParams,b.queryParams)&&!("exact"===_.fragment&&x.fragment!==b.fragment)}function es(x,b,_){return wr(x,b,b.segments,_)}function wr(x,b,_,w){if(x.segments.length>_.length){const L=x.segments.slice(0,_.length);return!(!et(L,_)||b.hasChildren()||!co(L,_,w))}if(x.segments.length===_.length){if(!et(x.segments,_)||!co(x.segments,_,w))return!1;for(const L in b.children)if(!x.children[L]||!es(x.children[L],b.children[L],w))return!1;return!0}{const L=_.slice(0,x.segments.length),z=_.slice(x.segments.length);return!!(et(x.segments,L)&&co(x.segments,L,w)&&x.children[Dt])&&wr(x.children[Dt],b,z,w)}}function co(x,b,_){return b.every((w,L)=>Qn[_](x[L].parameters,w.parameters))}class Er{constructor(b=new Se([],{}),_={},w=null){this.root=b,this.queryParams=_,this.fragment=w}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hs(this.queryParams)),this._queryParamMap}toString(){return gi.serialize(this)}}class Se{constructor(b,_){this.segments=b,this.children=_,this.parent=null,Si(_,(w,L)=>w.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nn(this)}}class ae{constructor(b,_){this.path=b,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=hs(this.parameters)),this._parameterMap}toString(){return St(this)}}function et(x,b){return x.length===b.length&&x.every((_,w)=>_.path===b[w].path)}let Et=(()=>{class x{}return x.\u0275fac=function(_){return new(_||x)},x.\u0275prov=B.Yz7({token:x,factory:function(){return new ei},providedIn:"root"}),x})();class ei{parse(b){const _=new Nl(b);return new Er(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(b){const _=`/${Fn(b.root,!0)}`,w=function rn(x){const b=Object.keys(x).map(_=>{const w=x[_];return Array.isArray(w)?w.map(L=>`${we(_)}=${we(L)}`).join("&"):`${we(_)}=${we(w)}`}).filter(_=>!!_);return b.length?`?${b.join("&")}`:""}(b.queryParams);return`${_}${w}${"string"==typeof b.fragment?`#${function le(x){return encodeURI(x)}(b.fragment)}`:""}`}}const gi=new ei;function Nn(x){return x.segments.map(b=>St(b)).join("/")}function Fn(x,b){if(!x.hasChildren())return Nn(x);if(b){const _=x.children[Dt]?Fn(x.children[Dt],!1):"",w=[];return Si(x.children,(L,z)=>{z!==Dt&&w.push(`${z}:${Fn(L,!1)}`)}),w.length>0?`${_}(${w.join("//")})`:_}{const _=function Be(x,b){let _=[];return Si(x.children,(w,L)=>{L===Dt&&(_=_.concat(b(w,L)))}),Si(x.children,(w,L)=>{L!==Dt&&(_=_.concat(b(w,L)))}),_}(x,(w,L)=>L===Dt?[Fn(x.children[Dt],!1)]:[`${L}:${Fn(w,!1)}`]);return 1===Object.keys(x.children).length&&null!=x.children[Dt]?`${Nn(x)}/${_[0]}`:`${Nn(x)}/(${_.join("//")})`}}function Cr(x){return encodeURIComponent(x).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function we(x){return Cr(x).replace(/%3B/gi,";")}function te(x){return Cr(x).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fe(x){return decodeURIComponent(x)}function Fe(x){return fe(x.replace(/\+/g,"%20"))}function St(x){return`${te(x.path)}${function Vt(x){return Object.keys(x).map(b=>`;${te(b)}=${te(x[b])}`).join("")}(x.parameters)}`}const ni=/^[^\/()?;=#]+/;function Ni(x){const b=x.match(ni);return b?b[0]:""}const fs=/^[^=?&#]+/,Ls=/^[^&#]+/;class Nl{constructor(b){this.url=b,this.remaining=b}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Se([],{}):new Se([],this.parseChildren())}parseQueryParams(){const b={};if(this.consumeOptional("?"))do{this.parseQueryParam(b)}while(this.consumeOptional("&"));return b}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const b=[];for(this.peekStartsWith("(")||b.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),b.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let w={};return this.peekStartsWith("(")&&(w=this.parseParens(!1)),(b.length>0||Object.keys(_).length>0)&&(w[Dt]=new Se(b,_)),w}parseSegment(){const b=Ni(this.remaining);if(""===b&&this.peekStartsWith(";"))throw new B.vHH(4009,ur);return this.capture(b),new ae(fe(b),this.parseMatrixParams())}parseMatrixParams(){const b={};for(;this.consumeOptional(";");)this.parseParam(b);return b}parseParam(b){const _=Ni(this.remaining);if(!_)return;this.capture(_);let w="";if(this.consumeOptional("=")){const L=Ni(this.remaining);L&&(w=L,this.capture(w))}b[fe(_)]=fe(w)}parseQueryParam(b){const _=function Ol(x){const b=x.match(fs);return b?b[0]:""}(this.remaining);if(!_)return;this.capture(_);let w="";if(this.consumeOptional("=")){const j=function uo(x){const b=x.match(Ls);return b?b[0]:""}(this.remaining);j&&(w=j,this.capture(w))}const L=Fe(_),z=Fe(w);if(b.hasOwnProperty(L)){let j=b[L];Array.isArray(j)||(j=[j],b[L]=j),j.push(z)}else b[L]=z}parseParens(b){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const w=Ni(this.remaining),L=this.remaining[w.length];if("/"!==L&&")"!==L&&";"!==L)throw new B.vHH(4010,ur);let z;w.indexOf(":")>-1?(z=w.slice(0,w.indexOf(":")),this.capture(z),this.capture(":")):b&&(z=Dt);const j=this.parseChildren();_[z]=1===Object.keys(j).length?j[Dt]:new Se([],j),this.consumeOptional("//")}return _}peekStartsWith(b){return this.remaining.startsWith(b)}consumeOptional(b){return!!this.peekStartsWith(b)&&(this.remaining=this.remaining.substring(b.length),!0)}capture(b){if(!this.consumeOptional(b))throw new B.vHH(4011,ur)}}function sl(x){return x.segments.length>0?new Se([],{[Dt]:x}):x}function ol(x){const b={};for(const w of Object.keys(x.children)){const z=ol(x.children[w]);(z.segments.length>0||z.hasChildren())&&(b[w]=z)}return function jr(x){if(1===x.numberOfChildren&&x.children[Dt]){const b=x.children[Dt];return new Se(x.segments.concat(b.segments),b.children)}return x}(new Se(x.segments,b))}function Zs(x){return x instanceof Er}const Do=!1;function ll(x,b,_,w,L){if(0===_.length)return dr(b.root,b.root,b.root,w,L);const z=function qo(x){if("string"==typeof x[0]&&1===x.length&&"/"===x[0])return new hr(!0,0,x);let b=0,_=!1;const w=x.reduce((L,z,j)=>{if("object"==typeof z&&null!=z){if(z.outlets){const de={};return Si(z.outlets,(be,gt)=>{de[gt]="string"==typeof be?be.split("/"):be}),[...L,{outlets:de}]}if(z.segmentPath)return[...L,z.segmentPath]}return"string"!=typeof z?[...L,z]:0===j?(z.split("/").forEach((de,be)=>{0==be&&"."===de||(0==be&&""===de?_=!0:".."===de?b++:""!=de&&L.push(de))}),L):[...L,z]},[]);return new hr(_,b,w)}(_);return z.toRoot()?dr(b.root,b.root,new Se([],{}),w,L):function j(be){const gt=function ps(x,b,_,w){if(x.isAbsolute)return new Ks(b.root,!0,0);if(-1===w)return new Ks(_,_===b.root,0);return function Lt(x,b,_){let w=x,L=b,z=_;for(;z>L;){if(z-=L,w=w.parent,!w)throw new B.vHH(4005,Do&&"Invalid number of '../'");L=w.segments.length}return new Ks(w,!1,L-z)}(_,w+($n(x.commands[0])?0:1),x.numberOfDoubleDots)}(z,b,x.snapshot?._urlSegment,be),ft=gt.processChildren?rr(gt.segmentGroup,gt.index,z.commands):wi(gt.segmentGroup,gt.index,z.commands);return dr(b.root,gt.segmentGroup,ft,w,L)}(x.snapshot?._lastPathIndex)}function $n(x){return"object"==typeof x&&null!=x&&!x.outlets&&!x.segmentPath}function Fi(x){return"object"==typeof x&&null!=x&&x.outlets}function dr(x,b,_,w,L){let j,z={};w&&Si(w,(be,gt)=>{z[gt]=Array.isArray(be)?be.map(ft=>`${ft}`):`${be}`}),j=x===b?_:ho(x,b,_);const de=sl(ol(j));return new Er(de,z,L)}function ho(x,b,_){const w={};return Si(x.children,(L,z)=>{w[z]=L===b?_:ho(L,b,_)}),new Se(x.segments,w)}class hr{constructor(b,_,w){if(this.isAbsolute=b,this.numberOfDoubleDots=_,this.commands=w,b&&w.length>0&&$n(w[0]))throw new B.vHH(4003,Do&&"Root segment cannot have matrix parameters");const L=w.find(Fi);if(L&&L!==Qe(w))throw new B.vHH(4004,Do&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ks{constructor(b,_,w){this.segmentGroup=b,this.processChildren=_,this.index=w}}function wi(x,b,_){if(x||(x=new Se([],{})),0===x.segments.length&&x.hasChildren())return rr(x,b,_);const w=function Os(x,b,_){let w=0,L=b;const z={match:!1,pathIndex:0,commandIndex:0};for(;L<x.segments.length;){if(w>=_.length)return z;const j=x.segments[L],de=_[w];if(Fi(de))break;const be=`${de}`,gt=w<_.length-1?_[w+1]:null;if(L>0&&void 0===be)break;if(be&&gt&&"object"==typeof gt&&void 0===gt.outlets){if(!Ea(be,gt,j))return z;w+=2}else{if(!Ea(be,{},j))return z;w++}L++}return{match:!0,pathIndex:L,commandIndex:w}}(x,b,_),L=_.slice(w.commandIndex);if(w.match&&w.pathIndex<x.segments.length){const z=new Se(x.segments.slice(0,w.pathIndex),{});return z.children[Dt]=new Se(x.segments.slice(w.pathIndex),x.children),rr(z,0,L)}return w.match&&0===L.length?new Se(x.segments,{}):w.match&&!x.hasChildren()?$i(x,b,_):w.match?rr(x,0,L):$i(x,b,_)}function rr(x,b,_){if(0===_.length)return new Se(x.segments,{});{const w=function En(x){return Fi(x[0])?x[0].outlets:{[Dt]:x}}(_),L={};if(!w[Dt]&&x.children[Dt]&&1===x.numberOfChildren&&0===x.children[Dt].segments.length){const z=rr(x.children[Dt],b,_);return new Se(x.segments,z.children)}return Si(w,(z,j)=>{"string"==typeof z&&(z=[z]),null!==z&&(L[j]=wi(x.children[j],b,z))}),Si(x.children,(z,j)=>{void 0===w[j]&&(L[j]=z)}),new Se(x.segments,L)}}function $i(x,b,_){const w=x.segments.slice(0,b);let L=0;for(;L<_.length;){const z=_[L];if(Fi(z)){const be=Ro(z.outlets);return new Se(w,be)}if(0===L&&$n(_[0])){w.push(new ae(x.segments[b].path,Ii(_[0]))),L++;continue}const j=Fi(z)?z.outlets[Dt]:`${z}`,de=L<_.length-1?_[L+1]:null;j&&de&&$n(de)?(w.push(new ae(j,Ii(de))),L+=2):(w.push(new ae(j,{})),L++)}return new Se(w,{})}function Ro(x){const b={};return Si(x,(_,w)=>{"string"==typeof _&&(_=[_]),null!==_&&(b[w]=$i(new Se([],{}),0,_))}),b}function Ii(x){const b={};return Si(x,(_,w)=>b[w]=`${_}`),b}function Ea(x,b,_){return x==_.path&&Oi(b,_.parameters)}const Ns="imperative";class fn{constructor(b,_){this.id=b,this.url=_}}class Ca extends fn{constructor(b,_,w="imperative",L=null){super(b,_),this.type=0,this.navigationTrigger=w,this.restoredState=L}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ts extends fn{constructor(b,_,w){super(b,_),this.urlAfterRedirects=w,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ta extends fn{constructor(b,_,w,L){super(b,_),this.reason=w,this.code=L,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Zi extends fn{constructor(b,_,w,L){super(b,_),this.reason=w,this.code=L,this.type=16}}class Ji extends fn{constructor(b,_,w,L){super(b,_),this.error=w,this.target=L,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Zo extends fn{constructor(b,_,w,L){super(b,_),this.urlAfterRedirects=w,this.state=L,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Po extends fn{constructor(b,_,w,L){super(b,_),this.urlAfterRedirects=w,this.state=L,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ms extends fn{constructor(b,_,w,L,z){super(b,_),this.urlAfterRedirects=w,this.state=L,this.shouldActivate=z,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ko extends fn{constructor(b,_,w,L){super(b,_),this.urlAfterRedirects=w,this.state=L,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cl extends fn{constructor(b,_,w,L){super(b,_),this.urlAfterRedirects=w,this.state=L,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _i{constructor(b){this.route=b,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class mu{constructor(b){this.route=b,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ul{constructor(b){this.snapshot=b,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kl{constructor(b){this.snapshot=b,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Aa{constructor(b){this.snapshot=b,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Da{constructor(b){this.snapshot=b,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jo{constructor(b,_,w){this.routerEvent=b,this.position=_,this.anchor=w,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Tr=(()=>{class x{createUrlTree(_,w,L,z,j,de){return ll(_||w.root,L,z,j,de)}}return x.\u0275fac=function(_){return new(_||x)},x.\u0275prov=B.Yz7({token:x,factory:x.\u0275fac}),x})(),ul=(()=>{class x{}return x.\u0275fac=function(_){return new(_||x)},x.\u0275prov=B.Yz7({token:x,factory:function(b){return Tr.\u0275fac(b)},providedIn:"root"}),x})();class Fs{constructor(b){this._root=b}get root(){return this._root.value}parent(b){const _=this.pathFromRoot(b);return _.length>1?_[_.length-2]:null}children(b){const _=gs(b,this._root);return _?_.children.map(w=>w.value):[]}firstChild(b){const _=gs(b,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(b){const _=Ar(b,this._root);return _.length<2?[]:_[_.length-2].children.map(L=>L.value).filter(L=>L!==b)}pathFromRoot(b){return Ar(b,this._root).map(_=>_.value)}}function gs(x,b){if(x===b.value)return b;for(const _ of b.children){const w=gs(x,_);if(w)return w}return null}function Ar(x,b){if(x===b.value)return[b];for(const _ of b.children){const w=Ar(x,_);if(w.length)return w.unshift(b),w}return[]}class Us{constructor(b,_){this.value=b,this.children=_}toString(){return`TreeNode(${this.value})`}}function Ia(x){const b={};return x&&x.children.forEach(_=>b[_.value.outlet]=_),b}class wc extends Fs{constructor(b,_){super(b),this.snapshot=_,_u(this,b)}toString(){return this.snapshot.toString()}}function Ec(x,b){const _=function K_(x,b){const j=new gu([],{},{},"",{},Dt,b,null,x.root,-1,{});return new Qo("",new Us(j,[]))}(x,b),w=new je([new ae("",{})]),L=new je({}),z=new je({}),j=new je({}),de=new je(""),be=new dl(w,L,j,de,z,Dt,b,_.root);return be.snapshot=_.root,new wc(new Us(be,[]),_)}class dl{constructor(b,_,w,L,z,j,de,be){this.url=b,this.params=_,this.queryParams=w,this.fragment=L,this.data=z,this.outlet=j,this.component=de,this.title=this.data?.pipe((0,hn.U)(gt=>gt[Mi]))??(0,Ce.of)(void 0),this._futureSnapshot=be}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,hn.U)(b=>hs(b)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,hn.U)(b=>hs(b)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Bd(x,b="emptyOnly"){const _=x.pathFromRoot;let w=0;if("always"!==b)for(w=_.length-1;w>=1;){const L=_[w],z=_[w-1];if(L.routeConfig&&""===L.routeConfig.path)w--;else{if(z.component)break;w--}}return function vf(x){return x.reduce((b,_)=>({params:{...b.params,..._.params},data:{...b.data,..._.data},resolve:{..._.data,...b.resolve,..._.routeConfig?.data,..._._resolvedData}}),{params:{},data:{},resolve:{}})}(_.slice(w))}class gu{get title(){return this.data?.[Mi]}constructor(b,_,w,L,z,j,de,be,gt,ft,Bn){this.url=b,this.params=_,this.queryParams=w,this.fragment=L,this.data=z,this.outlet=j,this.component=de,this.routeConfig=be,this._urlSegment=gt,this._lastPathIndex=ft,this._resolve=Bn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=hs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(w=>w.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Qo extends Fs{constructor(b,_){super(_),this.url=b,_u(this,_)}toString(){return Lo(this._root)}}function _u(x,b){b.value._routerState=x,b.children.forEach(_=>_u(x,_))}function Lo(x){const b=x.children.length>0?` { ${x.children.map(Lo).join(", ")} } `:"";return`${x.value}${b}`}function is(x){if(x.snapshot){const b=x.snapshot,_=x._futureSnapshot;x.snapshot=_,Oi(b.queryParams,_.queryParams)||x.queryParams.next(_.queryParams),b.fragment!==_.fragment&&x.fragment.next(_.fragment),Oi(b.params,_.params)||x.params.next(_.params),function Ps(x,b){if(x.length!==b.length)return!1;for(let _=0;_<x.length;++_)if(!Oi(x[_],b[_]))return!1;return!0}(b.url,_.url)||x.url.next(_.url),Oi(b.data,_.data)||x.data.next(_.data)}else x.snapshot=x._futureSnapshot,x.data.next(x._futureSnapshot.data)}function Ra(x,b){const _=Oi(x.params,b.params)&&function he(x,b){return et(x,b)&&x.every((_,w)=>Oi(_.parameters,b[w].parameters))}(x.url,b.url);return _&&!(!x.parent!=!b.parent)&&(!x.parent||Ra(x.parent,b.parent))}function ii(x,b,_){if(_&&x.shouldReuseRoute(b.value,_.value.snapshot)){const w=_.value;w._futureSnapshot=b.value;const L=function zd(x,b,_){return b.children.map(w=>{for(const L of _.children)if(x.shouldReuseRoute(w.value,L.value.snapshot))return ii(x,w,L);return ii(x,w)})}(x,b,_);return new Us(w,L)}{if(x.shouldAttach(b.value)){const z=x.retrieve(b.value);if(null!==z){const j=z.route;return j.value._futureSnapshot=b.value,j.children=b.children.map(de=>ii(x,de)),j}}const w=function ea(x){return new dl(new je(x.url),new je(x.params),new je(x.queryParams),new je(x.fragment),new je(x.data),x.outlet,x.component,x)}(b.value),L=b.children.map(z=>ii(x,z));return new Us(w,L)}}const vu="ngNavigationCancelingError";function xf(x,b){const{redirectTo:_,navigationBehaviorOptions:w}=Zs(b)?{redirectTo:b,navigationBehaviorOptions:void 0}:b,L=pm(!1,0,b);return L.url=_,L.navigationBehaviorOptions=w,L}function pm(x,b,_){const w=new Error("NavigationCancelingError: "+(x||""));return w[vu]=!0,w.cancellationCode=b,_&&(w.url=_),w}function ta(x){return Mf(x)&&Zs(x.url)}function Mf(x){return x&&x[vu]}class Bl{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new zl,this.attachRef=null}}let zl=(()=>{class x{constructor(){this.contexts=new Map}onChildOutletCreated(_,w){const L=this.getOrCreateContext(_);L.outlet=w,this.contexts.set(_,L)}onChildOutletDestroyed(_){const w=this.getContext(_);w&&(w.outlet=null,w.attachRef=null)}onOutletDeactivated(){const _=this.contexts;return this.contexts=new Map,_}onOutletReAttached(_){this.contexts=_}getOrCreateContext(_){let w=this.getContext(_);return w||(w=new Bl,this.contexts.set(_,w)),w}getContext(_){return this.contexts.get(_)||null}}return x.\u0275fac=function(_){return new(_||x)},x.\u0275prov=B.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();const Cc=!1;let xu=(()=>{class x{constructor(){this.activated=null,this._activatedRoute=null,this.name=Dt,this.activateEvents=new B.vpe,this.deactivateEvents=new B.vpe,this.attachEvents=new B.vpe,this.detachEvents=new B.vpe,this.parentContexts=(0,B.f3M)(zl),this.location=(0,B.f3M)(B.s_b),this.changeDetector=(0,B.f3M)(B.sBO),this.environmentInjector=(0,B.f3M)(B.lqb)}ngOnChanges(_){if(_.name){const{firstChange:w,previousValue:L}=_.name;if(w)return;this.isTrackedInParentContexts(L)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(L)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(_){return this.parentContexts.getContext(_)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const _=this.parentContexts.getContext(this.name);_?.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new B.vHH(4012,Cc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new B.vHH(4012,Cc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new B.vHH(4012,Cc);this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,w){this.activated=_,this._activatedRoute=w,this.location.insert(_.hostView),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,w){if(this.isActivated)throw new B.vHH(4013,Cc);this._activatedRoute=_;const L=this.location,j=_.snapshot.component,de=this.parentContexts.getOrCreateContext(this.name).children,be=new Hd(_,de,L.injector);if(w&&function Hl(x){return!!x.resolveComponentFactory}(w)){const gt=w.resolveComponentFactory(j);this.activated=L.createComponent(gt,L.length,be)}else this.activated=L.createComponent(j,{index:L.length,injector:be,environmentInjector:w??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return x.\u0275fac=function(_){return new(_||x)},x.\u0275dir=B.lG2({type:x,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[B.TTD]}),x})();class Hd{constructor(b,_,w){this.route=b,this.childContexts=_,this.parent=w}get(b,_){return b===dl?this.route:b===zl?this.childContexts:this.parent.get(b,_)}}let Mu=(()=>{class x{}return x.\u0275fac=function(_){return new(_||x)},x.\u0275cmp=B.Xpm({type:x,selectors:[["ng-component"]],standalone:!0,features:[B.jDz],decls:1,vars:0,template:function(_,w){1&_&&B._UZ(0,"router-outlet")},dependencies:[xu],encapsulation:2}),x})();function Pa(x,b){return x.providers&&!x._injector&&(x._injector=(0,B.MMx)(x.providers,b,`Route: ${x.path}`)),x._injector??b}function Tc(x){const b=x.children&&x.children.map(Tc),_=b?{...x,children:b}:{...x};return!_.component&&!_.loadComponent&&(b||_.loadChildren)&&_.outlet&&_.outlet!==Dt&&(_.component=Mu),_}function Dr(x){return x.outlet||Dt}function La(x,b){const _=x.filter(w=>Dr(w)===b);return _.push(...x.filter(w=>Dr(w)!==b)),_}function vr(x){if(!x)return null;if(x.routeConfig?._injector)return x.routeConfig._injector;for(let b=x.parent;b;b=b.parent){const _=b.routeConfig;if(_?._loadedInjector)return _._loadedInjector;if(_?._injector)return _._injector}return null}class Ac{constructor(b,_,w,L){this.routeReuseStrategy=b,this.futureState=_,this.currState=w,this.forwardEvent=L}activate(b){const _=this.futureState._root,w=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,w,b),is(this.futureState.root),this.activateChildRoutes(_,w,b)}deactivateChildRoutes(b,_,w){const L=Ia(_);b.children.forEach(z=>{const j=z.value.outlet;this.deactivateRoutes(z,L[j],w),delete L[j]}),Si(L,(z,j)=>{this.deactivateRouteAndItsChildren(z,w)})}deactivateRoutes(b,_,w){const L=b.value,z=_?_.value:null;if(L===z)if(L.component){const j=w.getContext(L.outlet);j&&this.deactivateChildRoutes(b,_,j.children)}else this.deactivateChildRoutes(b,_,w);else z&&this.deactivateRouteAndItsChildren(_,w)}deactivateRouteAndItsChildren(b,_){b.value.component&&this.routeReuseStrategy.shouldDetach(b.value.snapshot)?this.detachAndStoreRouteSubtree(b,_):this.deactivateRouteAndOutlet(b,_)}detachAndStoreRouteSubtree(b,_){const w=_.getContext(b.value.outlet),L=w&&b.value.component?w.children:_,z=Ia(b);for(const j of Object.keys(z))this.deactivateRouteAndItsChildren(z[j],L);if(w&&w.outlet){const j=w.outlet.detach(),de=w.children.onOutletDeactivated();this.routeReuseStrategy.store(b.value.snapshot,{componentRef:j,route:b,contexts:de})}}deactivateRouteAndOutlet(b,_){const w=_.getContext(b.value.outlet),L=w&&b.value.component?w.children:_,z=Ia(b);for(const j of Object.keys(z))this.deactivateRouteAndItsChildren(z[j],L);w&&(w.outlet&&(w.outlet.deactivate(),w.children.onOutletDeactivated()),w.attachRef=null,w.resolver=null,w.route=null)}activateChildRoutes(b,_,w){const L=Ia(_);b.children.forEach(z=>{this.activateRoutes(z,L[z.value.outlet],w),this.forwardEvent(new Da(z.value.snapshot))}),b.children.length&&this.forwardEvent(new kl(b.value.snapshot))}activateRoutes(b,_,w){const L=b.value,z=_?_.value:null;if(is(L),L===z)if(L.component){const j=w.getOrCreateContext(L.outlet);this.activateChildRoutes(b,_,j.children)}else this.activateChildRoutes(b,_,w);else if(L.component){const j=w.getOrCreateContext(L.outlet);if(this.routeReuseStrategy.shouldAttach(L.snapshot)){const de=this.routeReuseStrategy.retrieve(L.snapshot);this.routeReuseStrategy.store(L.snapshot,null),j.children.onOutletReAttached(de.contexts),j.attachRef=de.componentRef,j.route=de.route.value,j.outlet&&j.outlet.attach(de.componentRef,de.route.value),is(de.route.value),this.activateChildRoutes(b,null,j.children)}else{const de=vr(L.snapshot),be=de?.get(B._Vd)??null;j.attachRef=null,j.route=L,j.resolver=be,j.injector=de,j.outlet&&j.outlet.activateWith(L,j.injector),this.activateChildRoutes(b,null,j.children)}}else this.activateChildRoutes(b,null,w)}}class $d{constructor(b){this.path=b,this.route=this.path[this.path.length-1]}}class Js{constructor(b,_){this.component=b,this.route=_}}function jd(x,b,_){const w=x._root;return yi(w,b?b._root:null,_,[w.value])}function pn(x,b){const _=Symbol(),w=b.get(x,_);return w===_?"function"!=typeof x||(0,B.Z0I)(x)?b.get(x):x:w}function yi(x,b,_,w,L={canDeactivateChecks:[],canActivateChecks:[]}){const z=Ia(b);return x.children.forEach(j=>{(function Oo(x,b,_,w,L={canDeactivateChecks:[],canActivateChecks:[]}){const z=x.value,j=b?b.value:null,de=_?_.getContext(x.value.outlet):null;if(j&&z.routeConfig===j.routeConfig){const be=function Dc(x,b,_){if("function"==typeof _)return _(x,b);switch(_){case"pathParamsChange":return!et(x.url,b.url);case"pathParamsOrQueryParamsChange":return!et(x.url,b.url)||!Oi(x.queryParams,b.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ra(x,b)||!Oi(x.queryParams,b.queryParams);default:return!Ra(x,b)}}(j,z,z.routeConfig.runGuardsAndResolvers);be?L.canActivateChecks.push(new $d(w)):(z.data=j.data,z._resolvedData=j._resolvedData),yi(x,b,z.component?de?de.children:null:_,w,L),be&&de&&de.outlet&&de.outlet.isActivated&&L.canDeactivateChecks.push(new Js(de.outlet.component,j))}else j&&Ic(b,de,L),L.canActivateChecks.push(new $d(w)),yi(x,null,z.component?de?de.children:null:_,w,L)})(j,z[j.value.outlet],_,w.concat([j.value]),L),delete z[j.value.outlet]}),Si(z,(j,de)=>Ic(j,_.getContext(de),L)),L}function Ic(x,b,_){const w=Ia(x),L=x.value;Si(w,(z,j)=>{Ic(z,L.component?b?b.children.getContext(j):null:b,_)}),_.canDeactivateChecks.push(new Js(L.component&&b&&b.outlet&&b.outlet.isActivated?b.outlet.component:null,L))}function fo(x){return"function"==typeof x}function Wl(x){return x instanceof Mt||"EmptyError"===x?.name}const Xr=Symbol("INITIAL_VALUE");function sr(){return yr(x=>en(x.map(b=>b.pipe(Qr(1),function wa(...x){const b=(0,xt.yG)(x);return(0,Ut.e)((_,w)=>{(b?It(x,_,b):It(x,_)).subscribe(w)})}(Xr)))).pipe((0,hn.U)(b=>{for(const _ of b)if(!0!==_){if(_===Xr)return Xr;if(!1===_||_ instanceof Er)return _}return!0}),(0,Vi.h)(b=>b!==Xr),Qr(1)))}function mo(x){return(0,gn.z)(At(b=>{if(Zs(b))throw xf(0,b)}),(0,hn.U)(b=>!0===b))}const Pc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Kd(x,b,_,w,L){const z=Rr(x,b,_);return z.matched?function bf(x,b,_,w){const L=b.canMatch;if(!L||0===L.length)return(0,Ce.of)(!0);const z=L.map(j=>{const de=pn(j,x);return bi(function Cn(x){return x&&fo(x.canMatch)}(de)?de.canMatch(b,_):x.runInContext(()=>de(b,_)))});return(0,Ce.of)(z).pipe(sr(),mo())}(w=Pa(b,w),b,_).pipe((0,hn.U)(j=>!0===j?z:{...Pc})):(0,Ce.of)(z)}function Rr(x,b,_){if(""===b.path)return"full"===b.pathMatch&&(x.hasChildren()||_.length>0)?{...Pc}:{matched:!0,consumedSegments:[],remainingSegments:_,parameters:{},positionalParamSegments:{}};const L=(b.matcher||jo)(_,x,b);if(!L)return{...Pc};const z={};Si(L.posParams,(de,be)=>{z[be]=de.path});const j=L.consumed.length>0?{...z,...L.consumed[L.consumed.length-1].parameters}:z;return{matched:!0,consumedSegments:L.consumed,remainingSegments:_.slice(L.consumed.length),parameters:j,positionalParamSegments:L.posParams??{}}}function _n(x,b,_,w){if(_.length>0&&function Rn(x,b,_){return _.some(w=>fl(x,b,w)&&Dr(w)!==Dt)}(x,_,w)){const z=new Se(b,function it(x,b,_,w){const L={};L[Dt]=w,w._sourceSegment=x,w._segmentIndexShift=b.length;for(const z of _)if(""===z.path&&Dr(z)!==Dt){const j=new Se([],{});j._sourceSegment=x,j._segmentIndexShift=b.length,L[Dr(z)]=j}return L}(x,b,w,new Se(_,x.children)));return z._sourceSegment=x,z._segmentIndexShift=b.length,{segmentGroup:z,slicedSegments:[]}}if(0===_.length&&function Lc(x,b,_){return _.some(w=>fl(x,b,w))}(x,_,w)){const z=new Se(x.segments,function Jd(x,b,_,w,L){const z={};for(const j of w)if(fl(x,_,j)&&!L[Dr(j)]){const de=new Se([],{});de._sourceSegment=x,de._segmentIndexShift=b.length,z[Dr(j)]=de}return{...L,...z}}(x,b,_,w,x.children));return z._sourceSegment=x,z._segmentIndexShift=b.length,{segmentGroup:z,slicedSegments:_}}const L=new Se(x.segments,x.children);return L._sourceSegment=x,L._segmentIndexShift=b.length,{segmentGroup:L,slicedSegments:_}}function fl(x,b,_){return(!(x.hasChildren()||b.length>0)||"full"!==_.pathMatch)&&""===_.path}function $l(x,b,_,w){return!!(Dr(x)===w||w!==Dt&&fl(b,_,x))&&("**"===x.path||Rr(b,x,_).matched)}function No(x,b,_){return 0===b.length&&!x.children[_]}const Fo=!1;class jl{constructor(b){this.segmentGroup=b||null}}class Oc{constructor(b){this.urlTree=b}}function go(x){return ht(new jl(x))}function Qd(x){return ht(new Oc(x))}class Ui{constructor(b,_,w,L,z){this.injector=b,this.configLoader=_,this.urlSerializer=w,this.urlTree=L,this.config=z,this.allowRedirects=!0}apply(){const b=_n(this.urlTree.root,[],[],this.config).segmentGroup,_=new Se(b.segments,b.children);return this.expandSegmentGroup(this.injector,this.config,_,Dt).pipe((0,hn.U)(z=>this.createUrlTree(ol(z),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Wn(z=>{if(z instanceof Oc)return this.allowRedirects=!1,this.match(z.urlTree);throw z instanceof jl?this.noMatchError(z):z}))}match(b){return this.expandSegmentGroup(this.injector,this.config,b.root,Dt).pipe((0,hn.U)(L=>this.createUrlTree(ol(L),b.queryParams,b.fragment))).pipe(Wn(L=>{throw L instanceof jl?this.noMatchError(L):L}))}noMatchError(b){return new B.vHH(4002,Fo)}createUrlTree(b,_,w){const L=sl(b);return new Er(L,_,w)}expandSegmentGroup(b,_,w,L){return 0===w.segments.length&&w.hasChildren()?this.expandChildren(b,_,w).pipe((0,hn.U)(z=>new Se([],z))):this.expandSegment(b,w,_,w.segments,L,!0)}expandChildren(b,_,w){const L=[];for(const z of Object.keys(w.children))"primary"===z?L.unshift(z):L.push(z);return(0,oe.D)(L).pipe((0,Ke.b)(z=>{const j=w.children[z],de=La(_,z);return this.expandSegmentGroup(b,de,j,z).pipe((0,hn.U)(be=>({segment:be,outlet:z})))}),bt((z,j)=>(z[j.outlet]=j.segment,z),{}),Li())}expandSegment(b,_,w,L,z,j){return(0,oe.D)(w).pipe((0,Ke.b)(de=>this.expandSegmentAgainstRoute(b,_,w,de,L,z,j).pipe(Wn(gt=>{if(gt instanceof jl)return(0,Ce.of)(null);throw gt}))),nt(de=>!!de),Wn((de,be)=>{if(Wl(de))return No(_,L,z)?(0,Ce.of)(new Se([],{})):go(_);throw de}))}expandSegmentAgainstRoute(b,_,w,L,z,j,de){return $l(L,_,z,j)?void 0===L.redirectTo?this.matchSegmentAgainstRoute(b,_,L,z,j):de&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(b,_,w,L,z,j):go(_):go(_)}expandSegmentAgainstRouteUsingRedirect(b,_,w,L,z,j){return"**"===L.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(b,w,L,j):this.expandRegularSegmentAgainstRouteUsingRedirect(b,_,w,L,z,j)}expandWildCardWithParamsAgainstRouteUsingRedirect(b,_,w,L){const z=this.applyRedirectCommands([],w.redirectTo,{});return w.redirectTo.startsWith("/")?Qd(z):this.lineralizeSegments(w,z).pipe((0,ve.z)(j=>{const de=new Se(j,{});return this.expandSegment(b,de,_,j,L,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(b,_,w,L,z,j){const{matched:de,consumedSegments:be,remainingSegments:gt,positionalParamSegments:ft}=Rr(_,L,z);if(!de)return go(_);const Bn=this.applyRedirectCommands(be,L.redirectTo,ft);return L.redirectTo.startsWith("/")?Qd(Bn):this.lineralizeSegments(L,Bn).pipe((0,ve.z)(Vr=>this.expandSegment(b,_,w,Vr.concat(gt),j,!1)))}matchSegmentAgainstRoute(b,_,w,L,z){return"**"===w.path?(b=Pa(w,b),w.loadChildren?(w._loadedRoutes?(0,Ce.of)({routes:w._loadedRoutes,injector:w._loadedInjector}):this.configLoader.loadChildren(b,w)).pipe((0,hn.U)(de=>(w._loadedRoutes=de.routes,w._loadedInjector=de.injector,new Se(L,{})))):(0,Ce.of)(new Se(L,{}))):Kd(_,w,L,b).pipe(yr(({matched:j,consumedSegments:de,remainingSegments:be})=>j?this.getChildConfig(b=w._injector??b,w,L).pipe((0,ve.z)(ft=>{const Bn=ft.injector??b,Vr=ft.routes,{segmentGroup:vi,slicedSegments:ss}=_n(_,de,be,Vr),pa=new Se(vi.segments,vi.children);if(0===ss.length&&pa.hasChildren())return this.expandChildren(Bn,Vr,pa).pipe((0,hn.U)(ty=>new Se(de,ty)));if(0===Vr.length&&0===ss.length)return(0,Ce.of)(new Se(de,{}));const Kn=Dr(w)===z;return this.expandSegment(Bn,pa,Vr,ss,Kn?Dt:z,!0).pipe((0,hn.U)(Jl=>new Se(de.concat(Jl.segments),Jl.children)))})):go(_)))}getChildConfig(b,_,w){return _.children?(0,Ce.of)({routes:_.children,injector:b}):_.loadChildren?void 0!==_._loadedRoutes?(0,Ce.of)({routes:_._loadedRoutes,injector:_._loadedInjector}):function hl(x,b,_,w){const L=b.canLoad;if(void 0===L||0===L.length)return(0,Ce.of)(!0);const z=L.map(j=>{const de=pn(j,x);return bi(function Yd(x){return x&&fo(x.canLoad)}(de)?de.canLoad(b,_):x.runInContext(()=>de(b,_)))});return(0,Ce.of)(z).pipe(sr(),mo())}(b,_,w).pipe((0,ve.z)(L=>L?this.configLoader.loadChildren(b,_).pipe(At(z=>{_._loadedRoutes=z.routes,_._loadedInjector=z.injector})):function qr(x){return ht(pm(Fo,3))}())):(0,Ce.of)({routes:[],injector:b})}lineralizeSegments(b,_){let w=[],L=_.root;for(;;){if(w=w.concat(L.segments),0===L.numberOfChildren)return(0,Ce.of)(w);if(L.numberOfChildren>1||!L.children[Dt])return b.redirectTo,ht(new B.vHH(4e3,Fo));L=L.children[Dt]}}applyRedirectCommands(b,_,w){return this.applyRedirectCreateUrlTree(_,this.urlSerializer.parse(_),b,w)}applyRedirectCreateUrlTree(b,_,w,L){const z=this.createSegmentGroup(b,_.root,w,L);return new Er(z,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(b,_){const w={};return Si(b,(L,z)=>{if("string"==typeof L&&L.startsWith(":")){const de=L.substring(1);w[z]=_[de]}else w[z]=L}),w}createSegmentGroup(b,_,w,L){const z=this.createSegments(b,_.segments,w,L);let j={};return Si(_.children,(de,be)=>{j[be]=this.createSegmentGroup(b,de,w,L)}),new Se(z,j)}createSegments(b,_,w,L){return _.map(z=>z.path.startsWith(":")?this.findPosParam(b,z,L):this.findOrReturn(z,w))}findPosParam(b,_,w){const L=w[_.path.substring(1)];if(!L)throw new B.vHH(4001,Fo);return L}findOrReturn(b,_){let w=0;for(const L of _){if(L.path===b.path)return _.splice(w),L;w++}return b}}class k{}class ie{constructor(b,_,w,L,z,j,de){this.injector=b,this.rootComponentType=_,this.config=w,this.urlTree=L,this.url=z,this.paramsInheritanceStrategy=j,this.urlSerializer=de}recognize(){const b=_n(this.urlTree.root,[],[],this.config.filter(_=>void 0===_.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,b,Dt).pipe((0,hn.U)(_=>{if(null===_)return null;const w=new gu([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Dt,this.rootComponentType,null,this.urlTree.root,-1,{}),L=new Us(w,_),z=new Qo(this.url,L);return this.inheritParamsAndData(z._root),z}))}inheritParamsAndData(b){const _=b.value,w=Bd(_,this.paramsInheritanceStrategy);_.params=Object.freeze(w.params),_.data=Object.freeze(w.data),b.children.forEach(L=>this.inheritParamsAndData(L))}processSegmentGroup(b,_,w,L){return 0===w.segments.length&&w.hasChildren()?this.processChildren(b,_,w):this.processSegment(b,_,w,w.segments,L)}processChildren(b,_,w){return(0,oe.D)(Object.keys(w.children)).pipe((0,Ke.b)(L=>{const z=w.children[L],j=La(_,L);return this.processSegmentGroup(b,j,z,L)}),bt((L,z)=>L&&z?(L.push(...z),L):null),function Rs(x,b=!1){return(0,Ut.e)((_,w)=>{let L=0;_.subscribe((0,lt.x)(w,z=>{const j=x(z,L++);(j||b)&&w.next(z),!j&&w.complete()}))})}(L=>null!==L),Ae(null),Li(),(0,hn.U)(L=>{if(null===L)return null;const z=ri(L);return function Ee(x){x.sort((b,_)=>b.value.outlet===Dt?-1:_.value.outlet===Dt?1:b.value.outlet.localeCompare(_.value.outlet))}(z),z}))}processSegment(b,_,w,L,z){return(0,oe.D)(_).pipe((0,Ke.b)(j=>this.processSegmentAgainstRoute(j._injector??b,j,w,L,z)),nt(j=>!!j),Wn(j=>{if(Wl(j))return No(w,L,z)?(0,Ce.of)([]):(0,Ce.of)(null);throw j}))}processSegmentAgainstRoute(b,_,w,L,z){if(_.redirectTo||!$l(_,w,L,z))return(0,Ce.of)(null);let j;if("**"===_.path){const de=L.length>0?Qe(L).parameters:{},be=Tn(w)+L.length,gt=new gu(L,de,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,oi(_),Dr(_),_.component??_._loadedComponent??null,_,qt(w),be,Mr(_));j=(0,Ce.of)({snapshot:gt,consumedSegments:[],remainingSegments:[]})}else j=Kd(w,_,L,b).pipe((0,hn.U)(({matched:de,consumedSegments:be,remainingSegments:gt,parameters:ft})=>{if(!de)return null;const Bn=Tn(w)+be.length;return{snapshot:new gu(be,ft,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,oi(_),Dr(_),_.component??_._loadedComponent??null,_,qt(w),Bn,Mr(_)),consumedSegments:be,remainingSegments:gt}}));return j.pipe(yr(de=>{if(null===de)return(0,Ce.of)(null);const{snapshot:be,consumedSegments:gt,remainingSegments:ft}=de;b=_._injector??b;const Bn=_._loadedInjector??b,Vr=function Ne(x){return x.children?x.children:x.loadChildren?x._loadedRoutes:[]}(_),{segmentGroup:vi,slicedSegments:ss}=_n(w,gt,ft,Vr.filter(Kn=>void 0===Kn.redirectTo));if(0===ss.length&&vi.hasChildren())return this.processChildren(Bn,Vr,vi).pipe((0,hn.U)(Kn=>null===Kn?null:[new Us(be,Kn)]));if(0===Vr.length&&0===ss.length)return(0,Ce.of)([new Us(be,[])]);const pa=Dr(_)===z;return this.processSegment(Bn,Vr,vi,ss,pa?Dt:z).pipe((0,hn.U)(Kn=>null===Kn?null:[new Us(be,Kn)]))}))}}function Gt(x){const b=x.value.routeConfig;return b&&""===b.path&&void 0===b.redirectTo}function ri(x){const b=[],_=new Set;for(const w of x){if(!Gt(w)){b.push(w);continue}const L=b.find(z=>w.value.routeConfig===z.value.routeConfig);void 0!==L?(L.children.push(...w.children),_.add(L)):b.push(w)}for(const w of _){const L=ri(w.children);b.push(new Us(w.value,L))}return b.filter(w=>!_.has(w))}function qt(x){let b=x;for(;b._sourceSegment;)b=b._sourceSegment;return b}function Tn(x){let b=x,_=b._segmentIndexShift??0;for(;b._sourceSegment;)b=b._sourceSegment,_+=b._segmentIndexShift??0;return _-1}function oi(x){return x.data||{}}function Mr(x){return x.resolve||{}}function ji(x){return"string"==typeof x.title||null===x.title}function Qs(x){return yr(b=>{const _=x(b);return _?(0,oe.D)(_).pipe((0,hn.U)(()=>b)):(0,Ce.of)(b)})}const zs=new B.OlP("ROUTES");let oa=(()=>{class x{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,B.f3M)(B.Sil)}loadComponent(_){if(this.componentLoaders.get(_))return this.componentLoaders.get(_);if(_._loadedComponent)return(0,Ce.of)(_._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(_);const w=bi(_.loadComponent()).pipe((0,hn.U)(ko),At(z=>{this.onLoadEndListener&&this.onLoadEndListener(_),_._loadedComponent=z}),Gi(()=>{this.componentLoaders.delete(_)})),L=new jt(w,()=>new X.x).pipe(Gn());return this.componentLoaders.set(_,L),L}loadChildren(_,w){if(this.childrenLoaders.get(w))return this.childrenLoaders.get(w);if(w._loadedRoutes)return(0,Ce.of)({routes:w._loadedRoutes,injector:w._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(w);const z=this.loadModuleFactoryOrRoutes(w.loadChildren).pipe((0,hn.U)(de=>{this.onLoadEndListener&&this.onLoadEndListener(w);let be,gt,ft=!1;Array.isArray(de)?gt=de:(be=de.create(_).injector,gt=Ci(be.get(zs,[],B.XFs.Self|B.XFs.Optional)));return{routes:gt.map(Tc),injector:be}}),Gi(()=>{this.childrenLoaders.delete(w)})),j=new jt(z,()=>new X.x).pipe(Gn());return this.childrenLoaders.set(w,j),j}loadModuleFactoryOrRoutes(_){return bi(_()).pipe((0,hn.U)(ko),(0,ve.z)(w=>w instanceof B.YKP||Array.isArray(w)?(0,Ce.of)(w):(0,oe.D)(this.compiler.compileModuleAsync(w))))}}return x.\u0275fac=function(_){return new(_||x)},x.\u0275prov=B.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function ko(x){return function pl(x){return x&&"object"==typeof x&&"default"in x}(x)?x.default:x}let vs=(()=>{class x{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new X.x,this.configLoader=(0,B.f3M)(oa),this.environmentInjector=(0,B.f3M)(B.lqb),this.urlSerializer=(0,B.f3M)(Et),this.rootContexts=(0,B.f3M)(zl),this.navigationId=0,this.afterPreactivation=()=>(0,Ce.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=L=>this.events.next(new mu(L)),this.configLoader.onLoadStartListener=L=>this.events.next(new _i(L))}complete(){this.transitions?.complete()}handleNavigationRequest(_){const w=++this.navigationId;this.transitions?.next({...this.transitions.value,..._,id:w})}setupNavigations(_){return this.transitions=new je({id:0,targetPageId:0,currentUrlTree:_.currentUrlTree,currentRawUrl:_.currentUrlTree,extractedUrl:_.urlHandlingStrategy.extract(_.currentUrlTree),urlAfterRedirects:_.urlHandlingStrategy.extract(_.currentUrlTree),rawUrl:_.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ns,restoredState:null,currentSnapshot:_.routerState.snapshot,targetSnapshot:null,currentRouterState:_.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Vi.h)(w=>0!==w.id),(0,hn.U)(w=>({...w,extractedUrl:_.urlHandlingStrategy.extract(w.rawUrl)})),yr(w=>{let L=!1,z=!1;return(0,Ce.of)(w).pipe(At(j=>{this.currentNavigation={id:j.id,initialUrl:j.rawUrl,extractedUrl:j.extractedUrl,trigger:j.source,extras:j.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),yr(j=>{const de=_.browserUrlTree.toString(),be=!_.navigated||j.extractedUrl.toString()!==de||de!==_.currentUrlTree.toString();if(!be&&"reload"!==(j.extras.onSameUrlNavigation??_.onSameUrlNavigation)){const ft="";return this.events.next(new Zi(j.id,_.serializeUrl(w.rawUrl),ft,0)),_.rawUrlTree=j.rawUrl,j.resolve(null),ke.E}if(_.urlHandlingStrategy.shouldProcessUrl(j.rawUrl))return Bo(j.source)&&(_.browserUrlTree=j.extractedUrl),(0,Ce.of)(j).pipe(yr(ft=>{const Bn=this.transitions?.getValue();return this.events.next(new Ca(ft.id,this.urlSerializer.serialize(ft.extractedUrl),ft.source,ft.restoredState)),Bn!==this.transitions?.getValue()?ke.E:Promise.resolve(ft)}),function eh(x,b,_,w){return yr(L=>function ia(x,b,_,w,L){return new Ui(x,b,_,w,L).apply()}(x,b,_,L.extractedUrl,w).pipe((0,hn.U)(z=>({...L,urlAfterRedirects:z}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,_.config),At(ft=>{this.currentNavigation={...this.currentNavigation,finalUrl:ft.urlAfterRedirects},w.urlAfterRedirects=ft.urlAfterRedirects}),function ys(x,b,_,w,L){return(0,ve.z)(z=>function G(x,b,_,w,L,z,j="emptyOnly"){return new ie(x,b,_,w,L,j,z).recognize().pipe(yr(de=>null===de?function P(x){return new ln.y(b=>b.error(x))}(new k):(0,Ce.of)(de)))}(x,b,_,z.urlAfterRedirects,w.serialize(z.urlAfterRedirects),w,L).pipe((0,hn.U)(j=>({...z,targetSnapshot:j}))))}(this.environmentInjector,this.rootComponentType,_.config,this.urlSerializer,_.paramsInheritanceStrategy),At(ft=>{if(w.targetSnapshot=ft.targetSnapshot,"eager"===_.urlUpdateStrategy){if(!ft.extras.skipLocationChange){const Vr=_.urlHandlingStrategy.merge(ft.urlAfterRedirects,ft.rawUrl);_.setBrowserUrl(Vr,ft)}_.browserUrlTree=ft.urlAfterRedirects}const Bn=new Zo(ft.id,this.urlSerializer.serialize(ft.extractedUrl),this.urlSerializer.serialize(ft.urlAfterRedirects),ft.targetSnapshot);this.events.next(Bn)}));if(be&&_.urlHandlingStrategy.shouldProcessUrl(_.rawUrlTree)){const{id:ft,extractedUrl:Bn,source:Vr,restoredState:vi,extras:ss}=j,pa=new Ca(ft,this.urlSerializer.serialize(Bn),Vr,vi);this.events.next(pa);const Kn=Ec(Bn,this.rootComponentType).snapshot;return w={...j,targetSnapshot:Kn,urlAfterRedirects:Bn,extras:{...ss,skipLocationChange:!1,replaceUrl:!1}},(0,Ce.of)(w)}{const ft="";return this.events.next(new Zi(j.id,_.serializeUrl(w.extractedUrl),ft,1)),_.rawUrlTree=j.rawUrl,j.resolve(null),ke.E}}),At(j=>{const de=new Po(j.id,this.urlSerializer.serialize(j.extractedUrl),this.urlSerializer.serialize(j.urlAfterRedirects),j.targetSnapshot);this.events.next(de)}),(0,hn.U)(j=>w={...j,guards:jd(j.targetSnapshot,j.currentSnapshot,this.rootContexts)}),function Su(x,b){return(0,ve.z)(_=>{const{targetSnapshot:w,currentSnapshot:L,guards:{canActivateChecks:z,canDeactivateChecks:j}}=_;return 0===j.length&&0===z.length?(0,Ce.of)({..._,guardsResult:!0}):function bu(x,b,_,w){return(0,oe.D)(x).pipe((0,ve.z)(L=>function Rc(x,b,_,w,L){const z=b&&b.routeConfig?b.routeConfig.canDeactivate:null;if(!z||0===z.length)return(0,Ce.of)(!0);const j=z.map(de=>{const be=vr(b)??L,gt=pn(de,be);return bi(function vn(x){return x&&fo(x.canDeactivate)}(gt)?gt.canDeactivate(x,b,_,w):be.runInContext(()=>gt(x,b,_,w))).pipe(nt())});return(0,Ce.of)(j).pipe(sr())}(L.component,L.route,_,b,w)),nt(L=>!0!==L,!0))}(j,w,L,x).pipe((0,ve.z)(de=>de&&function Ir(x){return"boolean"==typeof x}(de)?function wu(x,b,_,w){return(0,oe.D)(b).pipe((0,Ke.b)(L=>It(function Zd(x,b){return null!==x&&b&&b(new Ul(x)),(0,Ce.of)(!0)}(L.route.parent,w),function qd(x,b){return null!==x&&b&&b(new Aa(x)),(0,Ce.of)(!0)}(L.route,w),function po(x,b,_){const w=b[b.length-1],z=b.slice(0,b.length-1).reverse().map(j=>function Xd(x){const b=x.routeConfig?x.routeConfig.canActivateChild:null;return b&&0!==b.length?{node:x,guards:b}:null}(j)).filter(j=>null!==j).map(j=>Kt(()=>{const de=j.guards.map(be=>{const gt=vr(j.node)??_,ft=pn(be,gt);return bi(function Xe(x){return x&&fo(x.canActivateChild)}(ft)?ft.canActivateChild(w,x):gt.runInContext(()=>ft(w,x))).pipe(nt())});return(0,Ce.of)(de).pipe(sr())}));return(0,Ce.of)(z).pipe(sr())}(x,L.path,_),function Yr(x,b,_){const w=b.routeConfig?b.routeConfig.canActivate:null;if(!w||0===w.length)return(0,Ce.of)(!0);const L=w.map(z=>Kt(()=>{const j=vr(b)??_,de=pn(z,j);return bi(function na(x){return x&&fo(x.canActivate)}(de)?de.canActivate(b,x):j.runInContext(()=>de(b,x))).pipe(nt())}));return(0,Ce.of)(L).pipe(sr())}(x,L.route,_))),nt(L=>!0!==L,!0))}(w,z,x,b):(0,Ce.of)(de)),(0,hn.U)(de=>({..._,guardsResult:de})))})}(this.environmentInjector,j=>this.events.next(j)),At(j=>{if(w.guardsResult=j.guardsResult,Zs(j.guardsResult))throw xf(0,j.guardsResult);const de=new ms(j.id,this.urlSerializer.serialize(j.extractedUrl),this.urlSerializer.serialize(j.urlAfterRedirects),j.targetSnapshot,!!j.guardsResult);this.events.next(de)}),(0,Vi.h)(j=>!!j.guardsResult||(_.restoreHistory(j),this.cancelNavigationTransition(j,"",3),!1)),Qs(j=>{if(j.guards.canActivateChecks.length)return(0,Ce.of)(j).pipe(At(de=>{const be=new Ko(de.id,this.urlSerializer.serialize(de.extractedUrl),this.urlSerializer.serialize(de.urlAfterRedirects),de.targetSnapshot);this.events.next(be)}),yr(de=>{let be=!1;return(0,Ce.of)(de).pipe(function ra(x,b){return(0,ve.z)(_=>{const{targetSnapshot:w,guards:{canActivateChecks:L}}=_;if(!L.length)return(0,Ce.of)(_);let z=0;return(0,oe.D)(L).pipe((0,Ke.b)(j=>function fr(x,b,_,w){const L=x.routeConfig,z=x._resolve;return void 0!==L?.title&&!ji(L)&&(z[Mi]=L.title),function ne(x,b,_,w){const L=function Uo(x){return[...Object.keys(x),...Object.getOwnPropertySymbols(x)]}(x);if(0===L.length)return(0,Ce.of)({});const z={};return(0,oe.D)(L).pipe((0,ve.z)(j=>function sa(x,b,_,w){const L=vr(b)??w,z=pn(x,L);return bi(z.resolve?z.resolve(b,_):L.runInContext(()=>z(b,_)))}(x[j],b,_,w).pipe(nt(),At(de=>{z[j]=de}))),mi(1),function wn(x){return(0,hn.U)(()=>x)}(z),Wn(j=>Wl(j)?ke.E:ht(j)))}(z,x,b,w).pipe((0,hn.U)(j=>(x._resolvedData=j,x.data=Bd(x,_).resolve,L&&ji(L)&&(x.data[Mi]=L.title),null)))}(j.route,w,x,b)),At(()=>z++),mi(1),(0,ve.z)(j=>z===L.length?(0,Ce.of)(_):ke.E))})}(_.paramsInheritanceStrategy,this.environmentInjector),At({next:()=>be=!0,complete:()=>{be||(_.restoreHistory(de),this.cancelNavigationTransition(de,"",2))}}))}),At(de=>{const be=new cl(de.id,this.urlSerializer.serialize(de.extractedUrl),this.urlSerializer.serialize(de.urlAfterRedirects),de.targetSnapshot);this.events.next(be)}))}),Qs(j=>{const de=be=>{const gt=[];be.routeConfig?.loadComponent&&!be.routeConfig._loadedComponent&&gt.push(this.configLoader.loadComponent(be.routeConfig).pipe(At(ft=>{be.component=ft}),(0,hn.U)(()=>{})));for(const ft of be.children)gt.push(...de(ft));return gt};return en(de(j.targetSnapshot.root)).pipe(Ae(),Qr(1))}),Qs(()=>this.afterPreactivation()),(0,hn.U)(j=>{const de=function yu(x,b,_){const w=ii(x,b._root,_?_._root:void 0);return new wc(w,b)}(_.routeReuseStrategy,j.targetSnapshot,j.currentRouterState);return w={...j,targetRouterState:de}}),At(j=>{_.currentUrlTree=j.urlAfterRedirects,_.rawUrlTree=_.urlHandlingStrategy.merge(j.urlAfterRedirects,j.rawUrl),_.routerState=j.targetRouterState,"deferred"===_.urlUpdateStrategy&&(j.extras.skipLocationChange||_.setBrowserUrl(_.rawUrlTree,j),_.browserUrlTree=j.urlAfterRedirects)}),((x,b,_)=>(0,hn.U)(w=>(new Ac(b,w.targetRouterState,w.currentRouterState,_).activate(x),w)))(this.rootContexts,_.routeReuseStrategy,j=>this.events.next(j)),Qr(1),At({next:j=>{L=!0,this.lastSuccessfulNavigation=this.currentNavigation,_.navigated=!0,this.events.next(new ts(j.id,this.urlSerializer.serialize(j.extractedUrl),this.urlSerializer.serialize(_.currentUrlTree))),_.titleStrategy?.updateTitle(j.targetRouterState.snapshot),j.resolve(!0)},complete:()=>{L=!0}}),Gi(()=>{L||z||this.cancelNavigationTransition(w,"",1),this.currentNavigation?.id===w.id&&(this.currentNavigation=null)}),Wn(j=>{if(z=!0,Mf(j)){ta(j)||(_.navigated=!0,_.restoreHistory(w,!0));const de=new Ta(w.id,this.urlSerializer.serialize(w.extractedUrl),j.message,j.cancellationCode);if(this.events.next(de),ta(j)){const be=_.urlHandlingStrategy.merge(j.url,_.rawUrlTree),gt={skipLocationChange:w.extras.skipLocationChange,replaceUrl:"eager"===_.urlUpdateStrategy||Bo(w.source)};_.scheduleNavigation(be,Ns,null,gt,{resolve:w.resolve,reject:w.reject,promise:w.promise})}else w.resolve(!1)}else{_.restoreHistory(w,!0);const de=new Ji(w.id,this.urlSerializer.serialize(w.extractedUrl),j,w.targetSnapshot??void 0);this.events.next(de);try{w.resolve(_.errorHandler(j))}catch(be){w.reject(be)}}return ke.E}))}))}cancelNavigationTransition(_,w,L){const z=new Ta(_.id,this.urlSerializer.serialize(_.extractedUrl),w,L);this.events.next(z),_.resolve(!1)}}return x.\u0275fac=function(_){return new(_||x)},x.\u0275prov=B.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function Bo(x){return x!==Ns}let aa=(()=>{class x{buildTitle(_){let w,L=_.root;for(;void 0!==L;)w=this.getResolvedTitleForRoute(L)??w,L=L.children.find(z=>z.outlet===Dt);return w}getResolvedTitleForRoute(_){return _.data[Mi]}}return x.\u0275fac=function(_){return new(_||x)},x.\u0275prov=B.Yz7({token:x,factory:function(){return(0,B.f3M)(th)},providedIn:"root"}),x})(),th=(()=>{class x extends aa{constructor(_){super(),this.title=_}updateTitle(_){const w=this.buildTitle(_);void 0!==w&&this.title.setTitle(w)}}return x.\u0275fac=function(_){return new(_||x)(B.LFG(Ki.Dx))},x.\u0275prov=B.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})(),Nc=(()=>{class x{}return x.\u0275fac=function(_){return new(_||x)},x.\u0275prov=B.Yz7({token:x,factory:function(){return(0,B.f3M)(nh)},providedIn:"root"}),x})();class Oa{shouldDetach(b){return!1}store(b,_){}shouldAttach(b){return!1}retrieve(b){return null}shouldReuseRoute(b,_){return b.routeConfig===_.routeConfig}}let nh=(()=>{class x extends Oa{}return x.\u0275fac=function(){let b;return function(w){return(b||(b=B.n5z(x)))(w||x)}}(),x.\u0275prov=B.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();const Na=new B.OlP("",{providedIn:"root",factory:()=>({})});let Xl=(()=>{class x{}return x.\u0275fac=function(_){return new(_||x)},x.\u0275prov=B.Yz7({token:x,factory:function(){return(0,B.f3M)(zr)},providedIn:"root"}),x})(),zr=(()=>{class x{shouldProcessUrl(_){return!0}extract(_){return _}merge(_,w){return _}}return x.\u0275fac=function(_){return new(_||x)},x.\u0275prov=B.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function Fc(x){throw x}function Yl(x,b,_){return b.parse("/")}const Fa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Eu={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Pr=(()=>{class x{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,B.f3M)(B.c2e),this.isNgZoneEnabled=!1,this.options=(0,B.f3M)(Na,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Fc,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Yl,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,B.f3M)(Xl),this.routeReuseStrategy=(0,B.f3M)(Nc),this.urlCreationStrategy=(0,B.f3M)(ul),this.titleStrategy=(0,B.f3M)(aa),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ci((0,B.f3M)(zs,{optional:!0})??[]),this.navigationTransitions=(0,B.f3M)(vs),this.urlSerializer=(0,B.f3M)(Et),this.location=(0,B.f3M)(pi.Ye),this.isNgZoneEnabled=(0,B.f3M)(B.R0b)instanceof B.R0b&&B.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Er,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ec(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(_=>{this.lastSuccessfulId=_.id,this.currentPageId=this.browserPageId??0},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)})}resetRootComponentType(_){this.routerState.root.component=_,this.navigationTransitions.rootComponentType=_}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const _=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ns,_)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const w="popstate"===_.type?"popstate":"hashchange";"popstate"===w&&setTimeout(()=>{this.navigateToSyncWithBrowser(_.url,w,_.state)},0)}))}navigateToSyncWithBrowser(_,w,L){const z={replaceUrl:!0},j=L?.navigationId?L:null;if(L){const be={...L};delete be.navigationId,delete be.\u0275routerPageId,0!==Object.keys(be).length&&(z.state=be)}const de=this.parseUrl(_);this.scheduleNavigation(de,w,j,z)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(_){this.config=_.map(Tc),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,w={}){const{relativeTo:L,queryParams:z,fragment:j,queryParamsHandling:de,preserveFragment:be}=w,gt=be?this.currentUrlTree.fragment:j;let ft=null;switch(de){case"merge":ft={...this.currentUrlTree.queryParams,...z};break;case"preserve":ft=this.currentUrlTree.queryParams;break;default:ft=z||null}return null!==ft&&(ft=this.removeEmptyProps(ft)),this.urlCreationStrategy.createUrlTree(L,this.routerState,this.currentUrlTree,_,ft,gt??null)}navigateByUrl(_,w={skipLocationChange:!1}){const L=Zs(_)?_:this.parseUrl(_),z=this.urlHandlingStrategy.merge(L,this.rawUrlTree);return this.scheduleNavigation(z,Ns,null,w)}navigate(_,w={skipLocationChange:!1}){return function Cu(x){for(let b=0;b<x.length;b++){const _=x[b];if(null==_)throw new B.vHH(4008,false)}}(_),this.navigateByUrl(this.createUrlTree(_,w),w)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let w;try{w=this.urlSerializer.parse(_)}catch(L){w=this.malformedUriErrorHandler(L,this.urlSerializer,_)}return w}isActive(_,w){let L;if(L=!0===w?{...Fa}:!1===w?{...Eu}:w,Zs(_))return bc(this.currentUrlTree,_,L);const z=this.parseUrl(_);return bc(this.currentUrlTree,z,L)}removeEmptyProps(_){return Object.keys(_).reduce((w,L)=>{const z=_[L];return null!=z&&(w[L]=z),w},{})}scheduleNavigation(_,w,L,z,j){if(this.disposed)return Promise.resolve(!1);let de,be,gt,ft;return j?(de=j.resolve,be=j.reject,gt=j.promise):gt=new Promise((Bn,Vr)=>{de=Bn,be=Vr}),ft="computed"===this.canceledNavigationResolution?L&&L.\u0275routerPageId?L.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:ft,source:w,restoredState:L,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:_,extras:z,resolve:de,reject:be,promise:gt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),gt.catch(Bn=>Promise.reject(Bn))}setBrowserUrl(_,w){const L=this.urlSerializer.serialize(_);if(this.location.isCurrentPathEqualTo(L)||w.extras.replaceUrl){const j={...w.extras.state,...this.generateNgRouterState(w.id,this.browserPageId)};this.location.replaceState(L,"",j)}else{const z={...w.extras.state,...this.generateNgRouterState(w.id,w.targetPageId)};this.location.go(L,"",z)}}restoreHistory(_,w=!1){if("computed"===this.canceledNavigationResolution){const z=this.currentPageId-(this.browserPageId??this.currentPageId);0!==z?this.location.historyGo(z):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===z&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(w&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(_,w){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:w}:{navigationId:_}}}return x.\u0275fac=function(_){return new(_||x)},x.\u0275prov=B.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})(),la=(()=>{class x{constructor(_,w,L,z,j,de){this.router=_,this.route=w,this.tabIndexAttribute=L,this.renderer=z,this.el=j,this.locationStrategy=de,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new X.x;const be=j.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===be||"area"===be,this.isAnchorElement?this.subscription=_.events.subscribe(gt=>{gt instanceof ts&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(_){this._preserveFragment=(0,B.D6c)(_)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(_){this._skipLocationChange=(0,B.D6c)(_)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(_){this._replaceUrl=(0,B.D6c)(_)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(_){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",_)}ngOnChanges(_){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(_){null!=_?(this.commands=Array.isArray(_)?_:[_],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(_,w,L,z,j){return!!(null===this.urlTree||this.isAnchorElement&&(0!==_||w||L||z||j||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const _=null===this.href?null:(0,B.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",_)}applyAttributeValue(_,w){const L=this.renderer,z=this.el.nativeElement;null!==w?L.setAttribute(z,_,w):L.removeAttribute(z,_)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return x.\u0275fac=function(_){return new(_||x)(B.Y36(Pr),B.Y36(dl),B.$8M("tabindex"),B.Y36(B.Qsj),B.Y36(B.SBq),B.Y36(pi.S$))},x.\u0275dir=B.lG2({type:x,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(_,w){1&_&&B.NdJ("click",function(z){return w.onClick(z.button,z.ctrlKey,z.shiftKey,z.altKey,z.metaKey)}),2&_&&B.uIk("target",w.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[B.TTD]}),x})(),yn=(()=>{class x{get isActive(){return this._isActive}constructor(_,w,L,z,j){this.router=_,this.element=w,this.renderer=L,this.cdr=z,this.link=j,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new B.vpe,this.routerEventsSubscription=_.events.subscribe(de=>{de instanceof ts&&this.update()})}ngAfterContentInit(){(0,Ce.of)(this.links.changes,(0,Ce.of)(null)).pipe((0,ci.J)()).subscribe(_=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const _=[...this.links.toArray(),this.link].filter(w=>!!w).map(w=>w.onChanges);this.linkInputChangesSubscription=(0,oe.D)(_).pipe((0,ci.J)()).subscribe(w=>{this._isActive!==this.isLinkActive(this.router)(w)&&this.update()})}set routerLinkActive(_){const w=Array.isArray(_)?_:_.split(" ");this.classes=w.filter(L=>!!L)}ngOnChanges(_){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const _=this.hasActiveLinks();this._isActive!==_&&(this._isActive=_,this.cdr.markForCheck(),this.classes.forEach(w=>{_?this.renderer.addClass(this.element.nativeElement,w):this.renderer.removeClass(this.element.nativeElement,w)}),_&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(_))})}isLinkActive(_){const w=function ca(x){return!!x.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return L=>!!L.urlTree&&_.isActive(L.urlTree,w)}hasActiveLinks(){const _=this.isLinkActive(this.router);return this.link&&_(this.link)||this.links.some(_)}}return x.\u0275fac=function(_){return new(_||x)(B.Y36(Pr),B.Y36(B.SBq),B.Y36(B.Qsj),B.Y36(B.sBO),B.Y36(la,8))},x.\u0275dir=B.lG2({type:x,selectors:[["","routerLinkActive",""]],contentQueries:function(_,w,L){if(1&_&&B.Suo(L,la,5),2&_){let z;B.iGM(z=B.CRH())&&(w.links=z)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[B.TTD]}),x})();class Lr{}let ua=(()=>{class x{constructor(_,w,L,z,j){this.router=_,this.injector=L,this.preloadingStrategy=z,this.loader=j}setUpPreloading(){this.subscription=this.router.events.pipe((0,Vi.h)(_=>_ instanceof ts),(0,Ke.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,w){const L=[];for(const z of w){z.providers&&!z._injector&&(z._injector=(0,B.MMx)(z.providers,_,`Route: ${z.path}`));const j=z._injector??_,de=z._loadedInjector??j;(z.loadChildren&&!z._loadedRoutes&&void 0===z.canLoad||z.loadComponent&&!z._loadedComponent)&&L.push(this.preloadConfig(j,z)),(z.children||z._loadedRoutes)&&L.push(this.processRoutes(de,z.children??z._loadedRoutes))}return(0,oe.D)(L).pipe((0,ci.J)())}preloadConfig(_,w){return this.preloadingStrategy.preload(w,()=>{let L;L=w.loadChildren&&void 0===w.canLoad?this.loader.loadChildren(_,w):(0,Ce.of)(null);const z=L.pipe((0,ve.z)(j=>null===j?(0,Ce.of)(void 0):(w._loadedRoutes=j.routes,w._loadedInjector=j.injector,this.processRoutes(j.injector??_,j.routes))));if(w.loadComponent&&!w._loadedComponent){const j=this.loader.loadComponent(w);return(0,oe.D)([z,j]).pipe((0,ci.J)())}return z})}}return x.\u0275fac=function(_){return new(_||x)(B.LFG(Pr),B.LFG(B.Sil),B.LFG(B.lqb),B.LFG(Lr),B.LFG(oa))},x.\u0275prov=B.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();const yo=new B.OlP("");let xs=(()=>{class x{constructor(_,w,L,z,j={}){this.urlSerializer=_,this.transitions=w,this.viewportScroller=L,this.zone=z,this.options=j,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},j.scrollPositionRestoration=j.scrollPositionRestoration||"disabled",j.anchorScrolling=j.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(_=>{_ instanceof Ca?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof ts&&(this.lastId=_.id,this.scheduleScrollEvent(_,this.urlSerializer.parse(_.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(_=>{_ instanceof Jo&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,w){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Jo(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,w))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return x.\u0275fac=function(_){B.$Z()},x.\u0275prov=B.Yz7({token:x,factory:x.\u0275fac}),x})();var rs=(()=>((rs=rs||{})[rs.COMPLETE=0]="COMPLETE",rs[rs.FAILED=1]="FAILED",rs[rs.REDIRECTING=2]="REDIRECTING",rs))();const Ms=!1;function Au(x,...b){return(0,B.MR2)([{provide:zs,multi:!0,useValue:x},Ms?{provide:Hs,useValue:!0}:[],{provide:dl,useFactory:Du,deps:[Pr]},{provide:B.tb,multi:!0,useFactory:ml},b.map(_=>_.\u0275providers)])}function Du(x){return x.routerState.root}function Ss(x,b){return{\u0275kind:x,\u0275providers:b}}const Hs=new B.OlP("",{providedIn:"root",factory:()=>!1});function ml(){const x=(0,B.f3M)(B.zs3);return b=>{const _=x.get(B.z2F);if(b!==_.components[0])return;const w=x.get(Pr),L=x.get(_m);1===x.get(Ru)&&w.initialNavigation(),x.get(xm,null,B.XFs.Optional)?.setUpPreloading(),x.get(yo,null,B.XFs.Optional)?.init(),w.resetRootComponentType(_.componentTypes[0]),L.closed||(L.next(),L.complete(),L.unsubscribe())}}const _m=new B.OlP(Ms?"bootstrap done indicator":"",{factory:()=>new X.x}),Ru=new B.OlP(Ms?"initial navigation":"",{providedIn:"root",factory:()=>1});function vm(){let x=[];return x=Ms?[{provide:B.Xts,multi:!0,useFactory:()=>{const b=(0,B.f3M)(Pr);return()=>b.events.subscribe(_=>{console.group?.(`Router Event: ${_.constructor.name}`),console.log(function Br(x){if(!("type"in x))return`Unknown Router Event: ${x.constructor.name}`;switch(x.type){case 14:return`ActivationEnd(path: '${x.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${x.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${x.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${x.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${x.id}, url: '${x.url}', urlAfterRedirects: '${x.urlAfterRedirects}', state: ${x.state}, shouldActivate: ${x.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${x.id}, url: '${x.url}', urlAfterRedirects: '${x.urlAfterRedirects}', state: ${x.state})`;case 2:return`NavigationCancel(id: ${x.id}, url: '${x.url}')`;case 16:return`NavigationSkipped(id: ${x.id}, url: '${x.url}')`;case 1:return`NavigationEnd(id: ${x.id}, url: '${x.url}', urlAfterRedirects: '${x.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${x.id}, url: '${x.url}', error: ${x.error})`;case 0:return`NavigationStart(id: ${x.id}, url: '${x.url}')`;case 6:return`ResolveEnd(id: ${x.id}, url: '${x.url}', urlAfterRedirects: '${x.urlAfterRedirects}', state: ${x.state})`;case 5:return`ResolveStart(id: ${x.id}, url: '${x.url}', urlAfterRedirects: '${x.urlAfterRedirects}', state: ${x.state})`;case 10:return`RouteConfigLoadEnd(path: ${x.route.path})`;case 9:return`RouteConfigLoadStart(path: ${x.route.path})`;case 4:return`RoutesRecognized(id: ${x.id}, url: '${x.url}', urlAfterRedirects: '${x.urlAfterRedirects}', state: ${x.state})`;case 15:return`Scroll(anchor: '${x.anchor}', position: '${x.position?`${x.position[0]}, ${x.position[1]}`:null}')`}}(_)),console.log(_),console.groupEnd?.()})}}]:[],Ss(1,x)}const xm=new B.OlP(Ms?"router preloader":"");function Uc(x){return Ss(0,[{provide:xm,useExisting:ua},{provide:Lr,useExisting:x}])}const Hr=!1,ha=new B.OlP(Hr?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Xi=[pi.Ye,{provide:Et,useClass:ei},Pr,zl,{provide:dl,useFactory:Du,deps:[Pr]},oa,Hr?{provide:Hs,useValue:!0}:[]];function Ua(){return new B.PXZ("Router",Pr)}let Zl=(()=>{class x{constructor(_){}static forRoot(_,w){return{ngModule:x,providers:[Xi,Hr&&w?.enableTracing?vm().\u0275providers:[],{provide:zs,multi:!0,useValue:_},{provide:ha,useFactory:Pu,deps:[[Pr,new B.FiY,new B.tp0]]},{provide:Na,useValue:w||{}},w?.useHash?{provide:pi.S$,useClass:pi.Do}:{provide:pi.S$,useClass:pi.b0},{provide:yo,useFactory:()=>{const x=(0,B.f3M)(pi.EM),b=(0,B.f3M)(B.R0b),_=(0,B.f3M)(Na),w=(0,B.f3M)(vs),L=(0,B.f3M)(Et);return _.scrollOffset&&x.setOffset(_.scrollOffset),new xs(L,w,x,b,_)}},w?.preloadingStrategy?Uc(w.preloadingStrategy).\u0275providers:[],{provide:B.PXZ,multi:!0,useFactory:Ua},w?.initialNavigation?Kl(w):[],[{provide:ka,useFactory:ml},{provide:B.tb,multi:!0,useExisting:ka}]]}}static forChild(_){return{ngModule:x,providers:[{provide:zs,multi:!0,useValue:_}]}}}return x.\u0275fac=function(_){return new(_||x)(B.LFG(ha,8))},x.\u0275mod=B.oAB({type:x}),x.\u0275inj=B.cJS({imports:[Mu]}),x})();function Pu(x){if(Hr&&x)throw new B.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Kl(x){return["disabled"===x.initialNavigation?Ss(3,[{provide:B.ip1,multi:!0,useFactory:()=>{const b=(0,B.f3M)(Pr);return()=>{b.setUpLocationChangeListener()}}},{provide:Ru,useValue:2}]).\u0275providers:[],"enabledBlocking"===x.initialNavigation?Ss(2,[{provide:Ru,useValue:0},{provide:B.ip1,multi:!0,deps:[B.zs3],useFactory:b=>{const _=b.get(pi.V_,Promise.resolve());return()=>_.then(()=>new Promise(w=>{const L=b.get(Pr),z=b.get(_m);(function Tu(x,b){x.events.pipe((0,Vi.h)(_=>_ instanceof ts||_ instanceof Ta||_ instanceof Ji||_ instanceof Zi),(0,hn.U)(_=>_ instanceof ts||_ instanceof Zi?rs.COMPLETE:_ instanceof Ta&&(0===_.code||1===_.code)?rs.REDIRECTING:rs.FAILED),(0,Vi.h)(_=>_!==rs.REDIRECTING),Qr(1)).subscribe(()=>{b()})})(L,()=>{w(!0)}),b.get(vs).afterPreactivation=()=>(w(!0),z.closed?(0,Ce.of)(void 0):z),L.initialNavigation()}))}}]).\u0275providers:[]]}const ka=new B.OlP(Hr?"Router Initializer":"")},7582:(In,mt,re)=>{function xt(ve,Ae,Pe,Le){return new(Pe||(Pe=Promise))(function(Ke,At){function Wn(mi){try{bt(Le.next(mi))}catch(Li){At(Li)}}function ui(mi){try{bt(Le.throw(mi))}catch(Li){At(Li)}}function bt(mi){mi.done?Ke(mi.value):function nt(Ke){return Ke instanceof Pe?Ke:new Pe(function(At){At(Ke)})}(mi.value).then(Wn,ui)}bt((Le=Le.apply(ve,Ae||[])).next())})}function It(ve){return this instanceof It?(this.v=ve,this):new It(ve)}function dt(ve,Ae,Pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var nt,Le=Pe.apply(ve,Ae||[]),Ke=[];return nt=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),Wn("next"),Wn("throw"),Wn("return",function At(wn){return function(Gi){return Promise.resolve(Gi).then(wn,Li)}}),nt[Symbol.asyncIterator]=function(){return this},nt;function Wn(wn,Gi){Le[wn]&&(nt[wn]=function(Ki){return new Promise(function(Dt,Mi){Ke.push([wn,Ki,Dt,Mi])>1||ui(wn,Ki)})},Gi&&(nt[wn]=Gi(nt[wn])))}function ui(wn,Gi){try{!function bt(wn){wn.value instanceof It?Promise.resolve(wn.value.v).then(mi,Li):Rs(Ke[0][2],wn)}(Le[wn](Gi))}catch(Ki){Rs(Ke[0][3],Ki)}}function mi(wn){ui("next",wn)}function Li(wn){ui("throw",wn)}function Rs(wn,Gi){wn(Gi),Ke.shift(),Ke.length&&ui(Ke[0][0],Ke[0][1])}}function gn(ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,Ae=ve[Symbol.asyncIterator];return Ae?Ae.call(ve):(ve=function en(ve){var Ae="function"==typeof Symbol&&Symbol.iterator,Pe=Ae&&ve[Ae],Le=0;if(Pe)return Pe.call(ve);if(ve&&"number"==typeof ve.length)return{next:function(){return ve&&Le>=ve.length&&(ve=void 0),{value:ve&&ve[Le++],done:!ve}}};throw new TypeError(Ae?"Object is not iterable.":"Symbol.iterator is not defined.")}(ve),Pe={},Le("next"),Le("throw"),Le("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe);function Le(Ke){Pe[Ke]=ve[Ke]&&function(At){return new Promise(function(Wn,ui){!function nt(Ke,At,Wn,ui){Promise.resolve(ui).then(function(bt){Ke({value:bt,done:Wn})},At)}(Wn,ui,(At=ve[Ke](At)).done,At.value)})}}}re.d(mt,{FC:()=>dt,KL:()=>gn,mG:()=>xt,qq:()=>It}),"function"==typeof SuppressedError&&SuppressedError}},In=>{In(In.s=462)}]);